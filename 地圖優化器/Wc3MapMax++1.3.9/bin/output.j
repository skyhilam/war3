globalshashtable ounit z=nullunit A=nullunit B=nullunitpool C=nullitem c=nullitempool D=nullreal H=0real I=0real l=0real J=0string array Kitem Pforce Qgroup Sregion Titem U=nulltrigger array Vinteger W=0integer X=0integer Y=0group array Zinteger array d4location array e4force f4=nullunit array g4unit array h4string array j4real array k4unit array m4unit array o4integer array p4integer array q4unit array r4unit array t4real array v4boolean w4=falseunit array z4unit array A4location a4=nullunit B4=nullinteger b4=0unit array C4boolean array c4integer D4=0integer E4=0group F4=nullunit array G4multiboard H4=nullinteger I4=0integer l4=0integer J4=0integer array K4integer array L4timer array M4integer array N4integer array O4string array P4integer array Q4integer array R4integer array S4integer array T4timer array U4integer array V4integer array W4integer array X4real array Y4real array Z4boolean array d7integer array e7real array f7real array g7timer h7=nullinteger array i7hashtable j7=nullgroup k7=nullgroup m7=nullstring array o7string array p7string array q7boolean array r7group t7=nullinteger array u7force v7=nullinteger array w7real array x7timer array y7string array z7integer A7=0integer a7=0group B7=nullinteger array b7integer array C7string c7=""group D7=nullinteger E7=0integer array F7real array G7string array H7unit I7=nulllocation array l7boolean array J7integer array K7boolean array L7boolean array M7boolean array N7location array O7group array P7real array Q7timer array R7timer S7=nullhashtable T7=nullgroup array U7unit array V7integer W7=0timer array X7real array Y7group Z7=nullboolean array d8integer e8=0boolean array f8integer array g8integer array h8timer array i8timer array j8force array k8boolean m8=falseinteger n8=0integer array o8unit p8=nullunit q8=nullinteger array r8boolean array t8group array u8item array v8integer array w8integer x8=0integer y8=0integer array z8real array A8boolean array a8unit array B8integer array b8boolean C8=falsereal c8=0real D8=0real E8=0unit F8=nullreal G8=0trigger H8=nullboolean I8=falsereal l8=0trigger array J8integer K8=0group L8=nullreal array M8real array N8real array O8boolean array P8trigger array Q8boolean array R8group S8=nullboolean array T8dialog U8=nullinteger array V8real array W8force X8=nullplayer array Y8player array Z8boolean d9=falseinteger e9=0trigger f9=nullinteger array g9integer array h9boolean array i9boolean array j9group array k9boolean array m9boolean array n9integer array o9boolean array p9boolean array q9integer array r9integer array s9boolean array t9unit array u9integer array v9unit array w9unit array x9unit array y9boolean array z9boolean array A9group array a9boolean array B9effect array b9boolean array C9group array c9real D9=0effect array E9effect array F9integer array G9integer array H9effect array I9boolean array l9boolean array J9boolean array K9group array L9unit array M9group array N9timer array O9boolean array P9real array Q9timer array R9integer array S9integer array T9real array U9real array V9real array W9real array X9boolean array Y9integer Z9=0string dd=""integer ed=0string fd=""integer gd=0integer hd=0real jd=0integer kd=0real md=0integer nd=0real array odreal array pdreal array qdboolean array rdboolean array udunit array vdinteger array wdunit xd=nullreal yd=0boolean zd=falsetimer array Adreal array adtimer array Bdreal array bdreal array Cdreal array cdreal array Ddboolean array Edeffect array Fdboolean array Gdinteger array Hdinteger array Idreal array ldhashtable Jd=nullinteger array Kdunit array Ldinteger array Mdeffect array Ndunit array Odreal array Pdinteger array Qdlocation array Rdlocation array Sdlightning array Tdinteger array Udreal array Vdgroup array Wdtrigger array Xdreal array Ydreal array Zdgroup array dereal array eeinteger array fehashtable ge=nullreal array heinteger array ieboolean array jetimer array ketimer array meinteger array neeffect array oereal array pelocation array qeeffect array reinteger array seinteger array telocation array uelightning array vegroup array xeboolean array yeinteger array zehashtable Ae=nullgroup array aegroup array Beinteger Ce=0group array cegroup array Degroup array Eehashtable Fe=nullgroup array Geboolean array Heunitpool Ie=nullstring array leforce array Jelocation array Keboolean array Leitempool Me=nullinteger array Nehashtable Oe=nullhashtable Pe=nullgroup Qe=nullboolean array Reboolean Se=falseboolean Te=falsetimer array Uetimer array Vehashtable We=nullhashtable Xe=nullregion array Yeboolean Ze=falserect df=nullrect ef=nullrect ff=nullrect gf=nullrect hf=nullrect jf=nullrect kf=nullrect mf=nullrect nf=nullrect of=nullrect pf=nullrect qf=nullrect rf=nullrect sf=nullrect tf=nullrect uf=nullrect vf=nullrect wf=nullrect xf=nullrect yf=nullrect zf=nullrect Af=nullrect af=nullrect Bf=nullrect bf=nullrect Cf=nullrect cf=nullrect Df=nullrect Ef=nullrect Ff=nullrect Gf=nullrect Hf=nullrect If=nullrect lf=nullrect Jf=nullrect Kf=nullrect Lf=nullrect Mf=nullrect Nf=nullrect Of=nullrect Pf=nullrect Qf=nullrect Rf=nullrect Sf=nullrect Tf=nullrect Uf=nullrect Vf=nullrect Wf=nullrect Xf=nullrect Yf=nullrect Zf=nullrect dg=nullrect eg=nullrect fg=nullrect gg=nullrect hg=nullrect ig=nullrect jg=nullrect kg=nullrect mg=nullrect ng=nullrect og=nullrect pg=nullrect qg=nullrect rg=nullrect sg=nullrect tg=nullrect ug=nullrect vg=nullrect wg=nullrect xg=nullrect yg=nullrect zg=nullrect Ag=nullrect ag=nullrect Bg=nullrect bg=nullsound Cg=nullstring cg="Sound\\Music\\mp3Music\\HeroicVictory.mp3"sound Dg=nullsound Eg=nullsound Fg=nullsound Gg=nullsound Hg=nullsound Ig=nullsound lg=nullsound Jg=nullsound Kg=nullsound Lg=nullsound Mg=nullsound Ng=nullsound Og=nullsound Pg=nullsound Qg=nullsound Rg=nulltrigger Sg=nulltrigger Tg=nulltrigger Ug=nulltrigger Vg=nulltrigger Wg=nulltrigger Xg=nulltrigger Yg=nulltrigger Zg=nulltrigger dh=nulltrigger eh=nulltrigger fh=nulltrigger gh=nulltrigger hh=nulltrigger ih=nulltrigger jh=nulltrigger kh=nulltrigger mh=nulltrigger nh=nulltrigger oh=nulltrigger ph=nulltrigger qh=nulltrigger rh=nulltrigger sh=nulltrigger th=nulltrigger uh=nulltrigger vh=nulltrigger wh=nulltrigger xh=nulltrigger yh=nulltrigger zh=nulltrigger Ah=nulltrigger ah=nulltrigger Bh=nulltrigger bh=nulltrigger Ch=nulltrigger ch=nulltrigger Dh=nulltrigger Eh=nulltrigger Fh=nulltrigger Gh=nulltrigger Hh=nulltrigger Ih=nulltrigger lh=nulltrigger Jh=nulltrigger Kh=nulltrigger Lh=nulltrigger Mh=nulltrigger Nh=nulltrigger Oh=nulltrigger Ph=nulltrigger Qh=nulltrigger Rh=nulltrigger Sh=nulltrigger Th=nulltrigger Uh=nulltrigger Vh=nulltrigger Wh=nulltrigger Xh=nulltrigger Yh=nulltrigger Zh=nulltrigger di=nulltrigger ei=nulltrigger fi=nulltrigger gi=nulltrigger hi=nulltrigger ii=nulltrigger ji=nulltrigger ki=nulltrigger mi=nulltrigger ni=nulltrigger oi=nulltrigger ri=nulltrigger si=nulltrigger ui=nulltrigger vi=nulltrigger wi=nulltrigger xi=nulltrigger yi=nulltrigger zi=nulltrigger Ai=nulltrigger ai=nulltrigger Bi=nulltrigger bi=nulltrigger Ci=nulltrigger ci=nulltrigger Di=nulltrigger Ei=nulltrigger Fi=nulltrigger Gi=nulltrigger Hi=nulltrigger Ii=nulltrigger li=nulltrigger Ji=nulltrigger Ki=nulltrigger Li=nulltrigger Mi=nulltrigger Ni=nulltrigger Oi=nulltrigger Pi=nulltrigger Qi=nulltrigger Ri=nulltrigger Si=nulltrigger Ti=nulltrigger Ui=nulltrigger Vi=nulltrigger Wi=nulltrigger Xi=nulltrigger Yi=nulltrigger Zi=nulltrigger dj=nulltrigger ej=nulltrigger fj=nulltrigger gj=nulltrigger hj=nulltrigger ij=nulltrigger jj=nulltrigger kj=nulltrigger mj=nulltrigger nj=nulltrigger oj=nulltrigger pj=nulltrigger qj=nulltrigger rj=nulltrigger sj=nulltrigger tj=nulltrigger uj=nulltrigger vj=nulltrigger wj=nulltrigger xj=nulltrigger yj=nulltrigger zj=nulltrigger Aj=nulltrigger aj=nulltrigger Bj=nulltrigger bj=nulltrigger Cj=nulltrigger cj=nulltrigger Dj=nulltrigger Ej=nulltrigger Fj=nulltrigger Gj=nulltrigger Hj=nulltrigger Ij=nulltrigger lj=nulltrigger Jj=nulltrigger Kj=nulltrigger Lj=nulltrigger Mj=nulltrigger Nj=nulltrigger Oj=nulltrigger Pj=nulltrigger Qj=nulltrigger Rj=nulltrigger Sj=nulltrigger Tj=nulltrigger Uj=nulltrigger Vj=nulltrigger Wj=nulltrigger Xj=nulltrigger Yj=nulltrigger Zj=nulltrigger dk=nulltrigger ek=nulltrigger fk=nulltrigger gk=nulltrigger hk=nulltrigger ik=nulltrigger jk=nulltrigger kk=nulltrigger mk=nulltrigger nk=nulltrigger ok=nulltrigger pk=nulltrigger qk=nulltrigger rk=nulltrigger sk=nulltrigger tk=nulltrigger uk=nulltrigger vk=nulltrigger wk=nulltrigger xk=nulltrigger yk=nulltrigger zk=nulltrigger Ak=nulltrigger ak=nulltrigger Bk=nulltrigger bk=nulltrigger Ck=nulltrigger ck=nulltrigger Dk=nulltrigger Ek=nulltrigger Fk=nulltrigger Gk=nulltrigger Hk=nulltrigger Ik=nulltrigger lk=nulltrigger Jk=nulltrigger Kk=nulltrigger Lk=nulltrigger Mk=nulltrigger Nk=nulltrigger Ok=nulltrigger Pk=nulltrigger Qk=nulltrigger Rk=nulltrigger Sk=nulltrigger Tk=nulltrigger Uk=nulltrigger Vk=nulltrigger Wk=nulltrigger Xk=nulltrigger Yk=nulltrigger Zk=nulltrigger dm=nulltrigger em=nulltrigger fm=nulltrigger gm=nulltrigger hm=nulltrigger im=nulltrigger jm=nulltrigger km=nulltrigger mm=nulltrigger nm=nulltrigger om=nulltrigger pm=nulltrigger qm=nulltrigger rm=nulltrigger sm=nulltrigger tm=nulltrigger um=nulltrigger vm=nulltrigger wm=nulltrigger xm=nulltrigger ym=nulltrigger zm=nulltrigger Am=nulltrigger am=nulltrigger Bm=nulltrigger bm=nulltrigger Cm=nulltrigger cm=nulltrigger Dm=nulltrigger Em=nulltrigger Fm=nulltrigger Gm=nulltrigger Hm=nulltrigger Im=nulltrigger lm=nulltrigger Jm=nulltrigger Km=nulltrigger Lm=nulltrigger Mm=nulltrigger Nm=nulltrigger Om=nulltrigger Pm=nulltrigger Qm=nulltrigger Rm=nulltrigger Sm=nulltrigger Tm=nulltrigger Um=nulltrigger Vm=nulltrigger Wm=nulltrigger Xm=nulltrigger Ym=nulltrigger Zm=nulltrigger dn=nulltrigger en=nulltrigger fn=nulltrigger gn=nulltrigger hn=nulltrigger in=nulltrigger jn=nulltrigger kn=nulltrigger mn=nulltrigger nn=nulltrigger on=nulltrigger pn=nulltrigger qn=nulltrigger sn=nulltrigger tn=nulltrigger un=nulltrigger vn=nulltrigger wn=nulltrigger xn=nulltrigger yn=nulltrigger zn=nulltrigger An=nulltrigger Bn=nulltrigger bn=nulltrigger Cn=nulltrigger cn=nulltrigger Dn=nulltrigger En=nulltrigger Fn=nulltrigger Gn=nulltrigger Hn=nulltrigger In=nulltrigger Jn=nulltrigger Kn=nulltrigger Ln=nulltrigger Mn=nulltrigger Nn=nulltrigger On=nulltrigger Pn=nulltrigger Qn=nulltrigger Rn=nulltrigger Sn=nulltrigger Tn=nulltrigger Un=nulltrigger Vn=nulltrigger Wn=nulltrigger Xn=nulltrigger Yn=nulltrigger Zn=nulltrigger do=nulltrigger eo=nulltrigger fo=nulltrigger go=nulltrigger ho=nulltrigger io=nulltrigger jo=nulltrigger ko=nulltrigger mo=nulltrigger no=nulltrigger oo=nulltrigger po=nulltrigger qo=nulltrigger ro=nulltrigger so=nulltrigger to=nulltrigger uo=nulltrigger vo=nulltrigger wo=nulltrigger xo=nulltrigger yo=nulltrigger zo=nulltrigger Ao=nulltrigger ao=nulltrigger Bo=nulltrigger bo=nulltrigger Co=nulltrigger co=nulltrigger Do=nulltrigger Eo=nulltrigger Fo=nulltrigger Go=nulltrigger Ho=nulltrigger Io=nulltrigger lo=nulltrigger Jo=nulltrigger Ko=nulltrigger Lo=nulltrigger Mo=nulltrigger No=nulltrigger Oo=nulltrigger Po=nulltrigger Qo=nulltrigger Ro=nulltrigger So=nulltrigger To=nulltrigger Uo=nulltrigger Vo=nulltrigger Wo=nulltrigger Xo=nulltrigger Yo=nulltrigger Zo=nulltrigger dp=nulltrigger ep=nulltrigger fp=nulltrigger gp=nulltrigger jp=nulltrigger kp=nulltrigger np=nulltrigger op=nulltrigger pp=nulltrigger qp=nulltrigger rp=nulltrigger sp=nulltrigger tp=nulltrigger vp=nulltrigger wp=nulltrigger xp=nulltrigger yp=nulltrigger zp=nulltrigger Ap=nulltrigger ap=nulltrigger Bp=nulltrigger bp=nulltrigger Cp=nulltrigger cp=nulltrigger Dp=nulltrigger Ep=nulltrigger Fp=nulltrigger Gp=nulltrigger Hp=nulltrigger Ip=nulltrigger lp=nulltrigger Jp=nulltrigger Kp=nulltrigger Lp=nulltrigger Mp=nulltrigger Np=nulltrigger Op=nulltrigger Pp=nulltrigger Qp=nulltrigger Rp=nulltrigger Sp=nulltrigger Tp=nulltrigger Up=nulltrigger Vp=nulltrigger Wp=nulltrigger Xp=nulltrigger Yp=nulltrigger Zp=nulltrigger dq=nulltrigger eq=nulltrigger fq=nulltrigger gq=nulltrigger hq=nulltrigger iq=nulltrigger jq=nulltrigger kq=nulltrigger mq=nulltrigger nq=nulltrigger oq=nulltrigger pq=nulltrigger qq=nulltrigger rq=nulltrigger sq=nulltrigger tq=nulltrigger uq=nulltrigger vq=nulltrigger wq=nulltrigger xq=nulltrigger yq=nulltrigger zq=nulltrigger Aq=nulltrigger aq=nulltrigger Bq=nulltrigger bq=nulltrigger Cq=nulltrigger cq=nulltrigger Dq=nulltrigger Eq=nulltrigger Fq=nulltrigger Gq=nulltrigger Hq=nulltrigger Iq=nulltrigger lq=nulltrigger Jq=nulltrigger Kq=nulltrigger Lq=nulltrigger Mq=nulltrigger Nq=nulltrigger Oq=nulltrigger Pq=nulltrigger Qq=nulltrigger Rq=nulltrigger Sq=nulltrigger Tq=nulltrigger Uq=nulltrigger Vq=nulltrigger Wq=nulltrigger Xq=nulltrigger Yq=nulltrigger Zq=nulltrigger dr=nulltrigger er=nulltrigger fr=nulltrigger gr=nulltrigger hr=nulltrigger ir=nulltrigger jr=nulltrigger kr=nulltrigger mr=nulltrigger nr=nulltrigger pr=nulltrigger qr=nulltrigger rr=nulltrigger sr=nulltrigger ur=nulltrigger vr=nulltrigger wr=nulltrigger xr=nulltrigger yr=nulltrigger zr=nulltrigger Ar=nulltrigger ar=nulltrigger Br=nulltrigger br=nulltrigger Cr=nulltrigger cr=nulltrigger Dr=nulltrigger Er=nulltrigger Fr=nulltrigger Gr=nulltrigger Hr=nulltrigger Ir=nulltrigger lr=nulltrigger Jr=nulltrigger Kr=nulltrigger Lr=nulltrigger Mr=nulltrigger Nr=nulltrigger Pr=nulltrigger Qr=nulltrigger Rr=nulltrigger Sr=nulltrigger Tr=nulltrigger Ur=nulltrigger Vr=nulltrigger Wr=nulltrigger Xr=nulltrigger Yr=nulltrigger Zr=nulltrigger ds=nulltrigger fs=nulltrigger gs=nulltrigger hs=nulltrigger js=nulltrigger ks=nulltrigger ms=nulltrigger ns=nulltrigger os=nulltrigger qs=nulltrigger rs=nulltrigger ss=nulltrigger ts=nulltrigger us=nulltrigger vs=nulltrigger ws=nulltrigger xs=nulltrigger ys=nulltrigger zs=nulltrigger As=nulltrigger as=nulltrigger Bs=nulltrigger bs=nulltrigger Cs=nulltrigger cs=nulltrigger Ds=nulltrigger Es=nulltrigger Fs=nulltrigger Gs=nulltrigger Hs=nulltrigger Is=nulltrigger ls=nulltrigger Js=nulltrigger Ks=nulltrigger Ls=nulltrigger Ms=nulltrigger Ns=nulltrigger Os=nulltrigger Ps=nulltrigger Qs=nulltrigger Rs=nulltrigger Ss=nulltrigger Ts=nulltrigger Us=nulltrigger Vs=nulltrigger Ws=nulltrigger Xs=nulltrigger Ys=nulltrigger Zs=nulltrigger ft=nulltrigger gt=nulltrigger ht=nullunit jt=nullunit kt=nullunit nt=nullunit ot=nullunit ut=nullunit vt=nullunit xt=nullunit yt=nullunit zt=nullunit At=nullunit Bt=nullunit Ct=nullunit ct=nullunit Dt=nullunit Et=nullunit Ft=nullunit Gt=nullunit Ht=nullunit It=nullunit lt=nullunit Jt=nullunit Kt=nullunit Lt=nullunit Mt=nullunit Nt=nullunit Ot=nullunit Pt=nullunit Qt=nullunit Rt=nullunit St=nullunit Tt=nullunit Ut=nullunit Vt=nullunit Wt=nullunit Xt=nullunit Yt=nullunit Zt=nullunit du=nullunit eu=nullunit gu=nullunit hu=nullunit iu=nullunit ju=nullunit ku=nullunit mu=nullunit nu=nullunit ou=nullunit pu=nullunit qu=nullunit ru=nullunit su=nullunit uu=nullunit vu=nullunit wu=nullunit xu=nullunit yu=nullunit zu=nullunit Au=nullunit au=nullunit Bu=nullunit bu=nullunit Cu=nullunit cu=nullunit Du=nullunit Eu=nullunit Fu=nullunit Gu=nullunit Hu=nullunit Iu=nullunit lu=nullunit Ju=nullunit Ku=nullunit Lu=nullunit Mu=nullunit Nu=nullunit Ou=nullunit Pu=nullunit Qu=nullunit Ru=nullunit Su=nullunit Tu=nullunit Uu=nullunit Vu=nullunit Wu=nullunit Xu=nullunit Yu=nullunit Zu=nullunit dv=nullunit ev=nullunit fv=nullunit gv=nullunit hv=nullunit iv=nullunit jv=nullunit kv=nullunit mv=nullunit nv=nullunit ov=nullunit pv=nullunit qv=nullunit rv=nullunit sv=nullunit tv=nullunit uv=nullunit vv=nullunit wv=nullunit xv=nullunit yv=nullunit zv=nullunit Av=nullunit av=nullunit Bv=nullboolean array bvtimer Cv=CreateTimer()hashtable cv=InitHashtable()constant integer Dv=$Aconstant integer Ev=$Cconstant integer Fv=$Estring array Gvboolean array Hvboolean array Ivplayer Jv=nullinteger Kv=0integer Lv=0real Mv=.0boolean Nv=falseboolean Ov=falseboolean Pv=falsereal array Qvreal array Rvinteger Sv=0timer Tv=CreateTimer()integer Uv=0player Vv=nullboolean Wv=trueinteger array Xvcamerasetup Yv=nullleaderboard array Zvtimer array dwtimer ewtimer fwgroup gwgroup hwinteger iw=0integer jw=0integer array kwinteger mw=0integer nw=0integer ow=0integer array pwinteger qw=0integer array rwunit array swinteger array twreal array uwreal array vwinteger array wwunit array xwunit array ywunit array zwreal array Awreal array awgroup array Bwinteger array bwinteger array Cwinteger array cwinteger array Dwreal array Ewreal array Fwinteger array Gwtimer array Hwinteger array Iwinteger array lwboolean array Jwtimer array Kwunit array Lwreal array Mwreal array Nwinteger array Owgroup array Pwinteger array Qwgroup array Rwinteger array Swunit array Twinteger array Uwunit array Vwunit array Wwreal array Xwreal array Ywreal array Zwreal array exunit array fxeffect array gxunit array hxtrigger ix=nulltrigger jx=nulltrigger kx=nulltrigger mx=nulltrigger nx=nullboolean array oxreal array pxreal array qxreal array rxinteger array sxreal array txreal array uxreal array vxreal array wxboolean array xxreal array yxinteger array zxinteger array Axboolean array axtrigger Bx=nullinteger array bxreal array Cxinteger array cxlightning array Dxinteger array Exunit array Fxlocation array Gxlocation array Hxreal array Ixreal array lxreal array Jxunit array Kxinteger array Lxreal array Mxinteger array Nxreal array Oxreal array Pxunit array Qxrect Rx=nullrect Sx=nullrect Tx=nullrect Ux=nullrect Vx=nullrect Wx=nullrect Xx=nullrect Yx=nullrect Zx=nullrect ey=nullrect fy=nullrect gy=nullrect hy=nullrect iy=nullrect jy=nullrect ky=nullinteger my=0real ny=0unit array oyunit array pyplayer qy=nullboolean ry=falseinteger sy=0integer ty=0integer array uyinteger vyinteger wy=1integer array xystring array yyinteger array zyinteger Ayinteger ay=1string array Byinteger array bystring array Cystring array cyinteger array Dyboolean array Eyinteger Fy=0integer Gy=0integer array Hyinteger array Iyinteger array lyinteger array Jyinteger array Kyinteger array Lystring array Myinteger array Nytrigger array Oytrigger Pyinteger Qyreal Ty=.0real Uy=.0boolexpr Xy=nullitem Yy=nullendglobalsfunction Zy takes unit dz,unittype ez returns booleanreturn(IsUnitType(dz,ez)!=null)endfunctionfunction fz takes location gz,real hz,real iz returns locationreturn Location(GetLocationX(gz)+hz*Cos(iz*bj_DEGTORAD),GetLocationY(gz)+hz*Sin(iz*bj_DEGTORAD))endfunctionfunction jz takes nothing returns booleanlocal real dx=GetDestructableX(GetFilterDestructable())-Tylocal real dy=GetDestructableY(GetFilterDestructable())-Uyreturn(dx*dx+dy*dy<=bj_enumDestructableRadius)endfunctionfunction kz takes itemtype mz,integer nz returns nothinglocal group gset bj_stockPickedItemType=mzset bj_stockPickedItemLevel=nzset g=CreateGroup()call GroupEnumUnitsOfType(g,"marketplace",Xy)call ForGroup(g,function UpdateEachStockBuildingEnum)call DestroyGroup(g)set g=nullendfunctionfunction oz takes nothing returns nothinglocal integer pickedItemIdlocal itemtype pzlocal integer qz=0local integer rz=0local integer nzset nz=1loopif(bj_stockAllowedPermanent[nz])thenset rz=rz+1if(GetRandomInt(1,rz)==1)thenset pz=ITEM_TYPE_PERMANENTset qz=nzendifendifif(bj_stockAllowedCharged[nz])thenset rz=rz+1if(GetRandomInt(1,rz)==1)thenset pz=ITEM_TYPE_CHARGEDset qz=nzendifendifif(bj_stockAllowedArtifact[nz])thenset rz=rz+1if(GetRandomInt(1,rz)==1)thenset pz=ITEM_TYPE_ARTIFACTset qz=nzendifendifset nz=nz+1exitwhen nz>$Aendloopif(rz==0)thenset pz=nullreturnendifcall kz(pz,qz)set pz=nullendfunctionfunction sz takes nothing returns nothingcall oz()call TimerStart(bj_stockUpdateTimer,bj_STOCK_RESTOCK_INTERVAL,true,function oz)endfunctionfunction uz takes nothing returns booleanreturn trueendfunctionfunction yz takes unit zz,integer Az returns itemif(Az==-1)thenreturn nullendifset Yy=CreateItem(Az,GetUnitX(zz)+GetRandomReal(-32,32),GetUnitY(zz)+GetRandomReal(-32,32))call SetItemDropID(Yy,GetUnitTypeId(zz))call UpdateStockAvailability(Yy)return Yyendfunctionfunction az takes nothing returns integerlocal integer Bz=syif(Bz!=0)thenset sy=uy[Bz]elseset ty=ty+1set Bz=tyendifif(Bz>8190)thenreturn 0endifset Ny[Bz]=1set uy[Bz]=-1return Bzendfunctionfunction bz takes nothing returns integerlocal integer Bz=Fyif(Bz!=0)thenset Fy=Hy[Bz]elseset Gy=Gy+1set Bz=Gyendifif(Bz>$3FE)thenreturn 0endifset ly[Bz]=(Bz-1)*8set Ky[Bz]=(Bz-1)*8set Ly[Bz]=7set Hy[Bz]=-1return Bzendfunctionfunction Cz takes nothing returns integerlocal integer Bz=az()local integer czif(Bz==0)thenreturn 0endifset Ny[Bz]=2set cz=Bzreturn Bzendfunctionfunction Dz takes nothing returns nothingset o=InitHashtable()endfunctionfunction YDWEFlushAllData takes nothing returns nothingcall FlushParentHashtable(o)endfunctionfunction GetLastAbilityCastingUnit takes nothing returns unitreturn zendfunctionfunction GetLastAbilityTargetUnit takes nothing returns unitreturn Aendfunctionfunction YDWECreateUnitPool takes nothing returns nothingset C=CreateUnitPool()endfunctionfunction YDWEGetLastUnitPool takes nothing returns unitpoolreturn Cendfunctionfunction YDWEGetLastPoolAbstractedUnit takes nothing returns unitreturn Bendfunctionfunction YDWECreateItemPool takes nothing returns nothingset D=CreateItemPool()endfunctionfunction YDWEGetLastItemPool takes nothing returns itempoolreturn Dendfunctionfunction YDWEGetLastPoolAbstractedItem takes nothing returns itemreturn cendfunctionfunction Jz takes nothing returns booleancall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,30,"|cFF1E90FF当前编辑器版本为： |r|cFF00FF00YDWE 1.28.7.1100")return falseendfunctionfunction Kz takes nothing returns nothinglocal trigger t=CreateTrigger()local integer i=0loopexitwhen i==$Ccall TriggerRegisterPlayerChatEvent(t,Player(i),"YDWE Version",true)set i=i+1endloopcall TriggerAddCondition(t,Condition(function Jz))set t=nullendfunctionfunction Lz takes nothing returns nothingset I=GetCameraBoundMinX()-GetCameraMargin(CAMERA_MARGIN_LEFT)set J=GetCameraBoundMinY()-GetCameraMargin(CAMERA_MARGIN_BOTTOM)set H=GetCameraBoundMaxX()+GetCameraMargin(CAMERA_MARGIN_RIGHT)set l=GetCameraBoundMaxY()+GetCameraMargin(CAMERA_MARGIN_TOP)set K[0]="|cFFFF0303"set K[1]="|cFF0042FF"set K[2]="|cFF1CE6B9"set K[3]="|cFF540081"set K[4]="|cFFFFFC01"set K[5]="|cFFFE8A0E"set K[6]="|cFF20C000"set K[7]="|cFFE55BB0"set K[8]="|cFF959697"set K[9]="|cFF7EBFF1"set K[$A]="|cFF106246"set K[$B]="|cFF4E2A04"set K[$C]="|cFF282828"set K[$D]="|cFF282828"set K[$E]="|cFF282828"set K[$F]="|cFF282828"call Kz()endfunctionfunction Mz takes unit dz,integer Nz returns itemlocal integer wz=0loopset P=UnitItemInSlot(dz,wz)if GetItemTypeId(P)==Nz thenreturn Pendifset wz=wz+1exitwhen wz>=6endloopreturn nullendfunctionfunction Oz takes player Pz returns forcelocal force f=CreateForce()call ForceEnumAllies(f,Pz,null)set Q=fset f=nullreturn Qendfunctionfunction Qz takes player Pz returns forcelocal force f=CreateForce()call ForceEnumEnemies(f,Pz,null)set Q=fset f=nullreturn Qendfunctionfunction Rz takes boolexpr Sz returns forcelocal force f=CreateForce()call ForceEnumPlayers(f,Sz)call DestroyBoolExpr(Sz)set Q=fset f=nullreturn Qendfunctionfunction Tz takes nothing returns nothingif(bj_randomSubGroupWant>0)thenif(bj_randomSubGroupWant>=bj_randomSubGroupTotal)or(GetRandomInt(1,bj_randomSubGroupTotal)<=bj_randomSubGroupWant)thencall GroupAddUnit(bj_randomSubGroupGroup,GetEnumUnit())set bj_randomSubGroupWant=bj_randomSubGroupWant-1endifendifset bj_randomSubGroupTotal=bj_randomSubGroupTotal-1endfunctionfunction Uz takes rect r,boolexpr Sz returns grouplocal group g=CreateGroup()call GroupEnumUnitsInRect(g,r,Sz)call DestroyBoolExpr(Sz)set S=gset g=nullreturn Sendfunctionfunction Vz takes player Pz,integer Wz returns grouplocal group g=CreateGroup()set bj_groupEnumTypeId=Wzcall GroupEnumUnitsOfPlayer(g,Pz,filterGetUnitsOfPlayerAndTypeId)set S=gset g=nullreturn Sendfunctionfunction Xz takes player Pz,boolexpr Sz returns grouplocal group g=CreateGroup()call GroupEnumUnitsOfPlayer(g,Pz,Sz)call DestroyBoolExpr(Sz)set S=gset g=nullreturn Sendfunctionfunction Yz takes multiboard mb,integer Zz,integer dA,real eA,real fA,real gA,real hA returns nothinglocal integer iA=0local integer jA=0local integer kA=MultiboardGetRowCount(mb)local integer mA=MultiboardGetColumnCount(mb)local multiboarditem nA=nullloopset iA=iA+1exitwhen iA>kAif(dA==0 or dA==iA)thenset jA=0loopset jA=jA+1exitwhen jA>mAif(Zz==0 or Zz==jA)thenset nA=MultiboardGetItem(mb,iA-1,jA-1)call MultiboardSetItemValueColor(nA,PercentTo255(eA),PercentTo255(fA),PercentTo255(gA),PercentTo255(100.-hA))call MultiboardReleaseItem(nA)endifendloopendifendloopset nA=nullendfunctionfunction oA takes multiboard mb,integer Zz,integer dA,string pA returns nothinglocal integer iA=0local integer jA=0local integer kA=MultiboardGetRowCount(mb)local integer mA=MultiboardGetColumnCount(mb)local multiboarditem nA=nullloopset iA=iA+1exitwhen iA>kAif(dA==0 or dA==iA)thenset jA=0loopset jA=jA+1exitwhen jA>mAif(Zz==0 or Zz==jA)thenset nA=MultiboardGetItem(mb,iA-1,jA-1)call MultiboardSetItemIcon(nA,pA)call MultiboardReleaseItem(nA)endifendloopendifendloopset nA=nullendfunctionfunction qA takes multiboard mb,integer Zz,integer dA,boolean rA,boolean sA returns nothinglocal integer iA=0local integer jA=0local integer kA=MultiboardGetRowCount(mb)local integer mA=MultiboardGetColumnCount(mb)local multiboarditem nA=nullloopset iA=iA+1exitwhen iA>kAif(dA==0 or dA==iA)thenset jA=0loopset jA=jA+1exitwhen jA>mAif(Zz==0 or Zz==jA)thenset nA=MultiboardGetItem(mb,iA-1,jA-1)call MultiboardSetItemStyle(nA,rA,sA)call MultiboardReleaseItem(nA)endifendloopendifendloopset nA=nullendfunctionfunction tA takes multiboard mb,integer Zz,integer dA,string uA returns nothinglocal integer iA=0local integer jA=0local integer kA=MultiboardGetRowCount(mb)local integer mA=MultiboardGetColumnCount(mb)local multiboarditem nA=nullloopset iA=iA+1exitwhen iA>kAif(dA==0 or dA==iA)thenset jA=0loopset jA=jA+1exitwhen jA>mAif(Zz==0 or Zz==jA)thenset nA=MultiboardGetItem(mb,iA-1,jA-1)call MultiboardSetItemValue(nA,uA)call MultiboardReleaseItem(nA)endifendloopendifendloopset nA=nullendfunctionfunction vA takes multiboard mb,integer Zz,integer dA,real wA returns nothinglocal integer iA=0local integer jA=0local integer kA=MultiboardGetRowCount(mb)local integer mA=MultiboardGetColumnCount(mb)local multiboarditem nA=nullloopset iA=iA+1exitwhen iA>kAif(dA==0 or dA==iA)thenset jA=0loopset jA=jA+1exitwhen jA>mAif(Zz==0 or Zz==jA)thenset nA=MultiboardGetItem(mb,iA-1,jA-1)call MultiboardSetItemWidth(nA,wA/ 100.)call MultiboardReleaseItem(nA)endifendloopendifendloopset nA=nullendfunctionfunction xA takes real yA returns nothinglocal timer tlocal real zAif(yA>0)thenset t=CreateTimer()call TimerStart(t,yA,false,null)loopset zA=TimerGetRemaining(t)exitwhen zA<=0if(zA>bj_POLLED_WAIT_SKIP_THRESHOLD)thencall TriggerSleepAction(.1*zA)elsecall TriggerSleepAction(bj_POLLED_WAIT_INTERVAL)endifendloopcall DestroyTimer(t)endifset t=nullendfunctionfunction AA takes player Pz,playercolor aA,boolean BA returns nothinglocal group gcall SetPlayerColor(Pz,aA)if BA thenset bj_setPlayerTargetColor=aAset g=CreateGroup()call GroupEnumUnitsOfPlayer(g,Pz,null)call ForGroup(g,function SetPlayerColorBJEnum)call DestroyGroup(g)endifset g=nullendfunctionfunction bA takes unit dz,location CA,real yA returns nothinglocal location cA=GetUnitLoc(dz)call SetUnitFacingTimed(dz,AngleBetweenPoints(cA,CA),yA)call RemoveLocation(cA)set cA=nullendfunctionfunction DA takes trigger EA,rect r returns eventlocal region FA=CreateRegion()call RegionAddRect(FA,r)set T=FAset FA=nullreturn TriggerRegisterEnterRegion(EA,T,null)endfunctionfunction GA takes trigger EA,rect r returns eventlocal region FA=CreateRegion()call RegionAddRect(FA,r)set T=FAset FA=nullreturn TriggerRegisterLeaveRegion(EA,T,null)endfunctionfunction HA takes integer IA,group lA returns groupset bj_randomSubGroupGroup=CreateGroup()set bj_randomSubGroupWant=IAset bj_randomSubGroupTotal=CountUnitsInGroup(lA)if(bj_randomSubGroupWant<=0 or bj_randomSubGroupTotal<=0)thenreturn bj_randomSubGroupGroupendifcall ForGroup(lA,function Tz)return bj_randomSubGroupGroupendfunctionfunction JA takes integer KA,integer ab returns nothinglocal integer wz=(LoadInteger(o,StringHash((I2S(KA))),StringHash(("AbilityStorageIndex"))))set wz=wz+1call SaveInteger(o,StringHash((I2S(KA))),StringHash(("AbilityStorage"+I2S(wz))),(ab))call SaveInteger(o,StringHash((I2S(KA))),StringHash(("AbilityStorageIndex")),(wz))endfunctionfunction LA takes nothing returns booleanlocal unit MA=GetTriggerUnit()local item it=GetManipulatedItem()local trigger NA=(LoadTriggerHandle(o,StringHash((I2S((GetHandleId((MA)))))),StringHash(("MulItemSlotByAbility"))))local integer KA=GetItemTypeId(it)local integer wz=(LoadInteger(o,StringHash((I2S(KA))),StringHash(("AbilityStorageIndex"))))local integer array OAlocal integer i=0local integer N=(LoadInteger(o,StringHash((I2S((GetHandleId((NA)))))),StringHash(("ItemSlotNum"))))local boolean PA=(LoadBoolean(o,StringHash((I2S((GetHandleId((MA)))))),StringHash(("YDWEItemAbilitySystemTriggerClose"))))if wz==0 or PA thenset it=nullset MA=nullset NA=nullreturn falseendifloopset i=i+1exitwhen i>wzset OA[i]=(LoadInteger(o,StringHash((I2S(KA))),StringHash(("AbilityStorage"+I2S(i)))))if GetTriggerEventId()==EVENT_PLAYER_UNIT_DROP_ITEM thencall UnitRemoveAbility(MA,OA[i])elseif GetTriggerEventId()==EVENT_PLAYER_UNIT_PICKUP_ITEM thencall UnitAddAbility(MA,OA[i])call UnitMakeAbilityPermanent(MA,true,OA[i])endifendloopset it=nullset MA=nullset NA=nullreturn falseendfunctionfunction QA takes nothing returns nothinglocal trigger NA=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(NA,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerRegisterAnyUnitEventBJ(NA,EVENT_PLAYER_UNIT_DROP_ITEM)call TriggerAddCondition(NA,Condition(function LA))set NA=nullendfunctionfunction YDWELocalVariableInitiliation takes nothing returns nothinglocal integer RA=(LoadInteger(o,StringHash((I2S((GetHandleId((GetTriggeringTrigger())))))),StringHash(("GlobalsTriggerRunSteps"))))set RA=RA+1call SaveInteger(o,StringHash((I2S((GetHandleId((GetTriggeringTrigger())))))),StringHash(("GlobalsTriggerRunSteps")),(RA))call SaveInteger(o,StringHash((I2S((GetHandleId((GetTriggeringTrigger())))))),StringHash(("TriggerRunSteps")),(RA))endfunctionfunction YDWELocalVariableEnd takes nothing returns nothinglocal integer RA=(LoadInteger(o,StringHash((I2S((GetHandleId((GetTriggeringTrigger())))))),StringHash(("TriggerRunSteps"))))local string SA=I2S((GetHandleId((GetTriggeringTrigger()))))+I2S(RA)call FlushChildHashtable(o,StringHash((SA)))endfunctionfunction TA takes string s,integer i returns nothinglocal integer RA=(LoadInteger(o,StringHash((I2S((GetHandleId((GetTriggeringTrigger())))))),StringHash(("TriggerRunSteps"))))local string SA=I2S((GetHandleId((GetTriggeringTrigger()))))+I2S(RA)call SaveInteger(o,StringHash((SA)),StringHash((s)),(i))endfunctionfunction UA takes string s returns integerlocal integer RA=(LoadInteger(o,StringHash((I2S((GetHandleId((GetTriggeringTrigger())))))),StringHash(("TriggerRunSteps"))))local string SA=I2S((GetHandleId((GetTriggeringTrigger()))))+I2S(RA)return(LoadInteger(o,StringHash((SA)),StringHash((s))))endfunctionfunction VA takes unit dz,unit CA,real yA returns nothinglocal location cA=GetUnitLoc(CA)call bA(dz,cA,yA)call RemoveLocation(cA)set cA=nullendfunctionfunction GetLastCombinedItem takes nothing returns itemreturn Uendfunctionfunction WA takes nothing returns nothinglocal integer i=0loopexitwhen i>=Wif V[i]!=null and TriggerEvaluate(V[i])and IsTriggerEnabled(V[i])thencall TriggerExecute(V[i])endifset i=i+1endloopendfunctionfunction XA takes trigger NA returns nothingset V[W]=NAset W=W+1endfunctionfunction YA takes integer ZA,integer ea returns stringlocal string fa=I2S(ZA)local integer ga=StringLength(fa)loopexitwhen ga>=easet fa="0"+faset ga=ga+1endloopreturn faendfunctionfunction ha takes integer Bz,integer ia returns integerlocal integer ja=zy[Bz]*ia+1return S2I(SubString(yy[Bz],ja,(ja+zy[Bz])))endfunctionfunction ka takes integer id returns integerlocal integer Bz=0if id==null or id==0 thenreturn 0endifset Bz=(LoadInteger(o,StringHash(("YDWEStringFormula."+I2S((vy)))),StringHash(((I2S((id)))))))if(Bz)>0 thenreturn Bzendifset Bz=(wy)set xy[Bz]=idset yy[Bz]=I2S(4)set zy[Bz]=4call SaveInteger(o,StringHash(("YDWEStringFormula."+I2S((vy)))),StringHash(((I2S(id)))),(((Bz))))set wy=wy+1return Bzendfunctionfunction ma takes integer Bz,string na returns nothingset yy[Bz]=yy[Bz]+naendfunctionfunction oa takes nothing returns nothingset vy=Cz()endfunctionfunction pa takes integer Bz,integer ia returns integerlocal integer ja=by[Bz]*ia+1return S2I(SubString(By[Bz],ja,(ja+by[Bz])))endfunctionfunction qa takes integer ra,string sa,integer ua returns integerlocal integer Bz=0if(HaveSavedInteger(o,StringHash(("YDWEStringFormula."+I2S((Ay)))),StringHash((((sa))))))thenreturn 0endifset Bz=(ay)set By[Bz]=sa+YA(ua,4)set by[Bz]=raset Cy[Bz]=nullset cy[Bz]=nullset Dy[Bz]=100set Ey[Bz]=falsecall SaveInteger(o,StringHash(("YDWEStringFormula."+I2S((Ay)))),StringHash(((sa))),(((Bz))))set ay=ay+1return Bzendfunctionfunction va takes nothing returns nothingset Ay=Cz()endfunctionfunction wa takes integer Bz returns nothinglocal integer i=0loopexitwhen i==8set Iy[ly[Bz]+i]=0set Jy[Ky[Bz]+i]=0set i=i+1endloopset My[Bz]=""endfunctionfunction xa takes integer Bz returns nothingif Bz==null thenreturnelseif(Hy[Bz]!=-1)thenreturnendifcall wa(Bz)set Hy[Bz]=Fyset Fy=Bzendfunctionfunction ya takes integer za,integer n1,integer Aa,integer n2,integer aa,integer n3,integer Ba,integer n4,integer ba,integer n5,integer Ca,integer n6,integer ca,integer n7 returns integerlocal integer Bz=bz()set Iy[ly[Bz]+1]=ka(za)set Iy[ly[Bz]+2]=ka(Aa)set Iy[ly[Bz]+3]=ka(aa)set Iy[ly[Bz]+4]=ka(Ba)set Iy[ly[Bz]+5]=ka(ba)set Iy[ly[Bz]+6]=ka(Ca)set Iy[ly[Bz]+7]=ka(ca)set Jy[Ky[Bz]+1]=n1set Jy[Ky[Bz]+2]=n2set Jy[Ky[Bz]+3]=n3set Jy[Ky[Bz]+4]=n4set Jy[Ky[Bz]+5]=n5set Jy[Ky[Bz]+6]=n6set Jy[Ky[Bz]+7]=n7return Bzendfunctionfunction Da takes integer Bz returns stringlocal integer i=1local integer jlocal integer kset My[Bz]=""loopexitwhen i>Ly[Bz]if Iy[ly[Bz]+i]==0 or Jy[Ky[Bz]+i]==0 thenset Iy[ly[Bz]+i]=Iy[ly[Bz]+Ly[Bz]]set Jy[Ky[Bz]+i]=Jy[Ky[Bz]+Ly[Bz]]set Ly[Bz]=Ly[Bz]-1set i=i-1elseset j=i+1loopexitwhen j>Ly[Bz]if Iy[ly[Bz]+j]==0 or Jy[Ky[Bz]+j]==0 thenset Iy[ly[Bz]+j]=Iy[ly[Bz]+Ly[Bz]]set Jy[Ky[Bz]+j]=Jy[Ky[Bz]+Ly[Bz]]set Ly[Bz]=Ly[Bz]-1set j=j-1elseif(Iy[ly[Bz]+i])>(Iy[ly[Bz]+j])thenset k=Iy[ly[Bz]+i]set Iy[ly[Bz]+i]=Iy[ly[Bz]+j]set Iy[ly[Bz]+j]=kset k=Jy[Ky[Bz]+i]set Jy[Ky[Bz]+i]=Jy[Ky[Bz]+j]set Jy[Ky[Bz]+j]=kelseif(Iy[ly[Bz]+i])==(Iy[ly[Bz]+j])thenset Jy[Ky[Bz]+i]=Jy[Ky[Bz]+i]+Jy[Ky[Bz]+j]set Iy[ly[Bz]+j]=0set j=j-1endifset j=j+1endloopset j=Jy[Ky[Bz]+i]loopexitwhen j==0set My[Bz]=My[Bz]+YA(Iy[ly[Bz]+i],4)set j=j-1endloopendifset i=i+1endloopreturn My[Bz]endfunctionfunction Ea takes nothing returns booleanreturn trueendfunctionfunction Fa takes nothing returns booleanreturn(HaveSavedInteger(o,StringHash(("YDWEStringFormula."+I2S((vy)))),StringHash(((I2S((GetItemTypeId(GetManipulatedItem()))))))))endfunctionfunction Ga takes item it returns integerlocal integer Ha=GetItemCharges(it)if Ha==0 thenset Ha=1endifreturn Haendfunctionfunction Ia takes nothing returns nothinglocal integer la=0local integer Ja=(LoadInteger(o,StringHash(("YDWEStringFormula."+I2S((vy)))),StringHash(((I2S((GetItemTypeId(GetManipulatedItem()))))))))local integer Ka=StringLength(yy[Ja])/ zy[Ja]local integer La=0local integer Ma=0local integer Na=0local integer Oa=0local integer i=0local integer j=0local boolean b=falselocal item it=nulllocal item Pa=GetManipulatedItem()local unit Qa=GetTriggerUnit()local item array Ralocal integer array Salocal integer array Talocal integer array Uaset i=0loopexitwhen i==6set it=UnitItemInSlot(Qa,i)if it!=null thenset Ra[Na]=itset Sa[Na]=GetItemTypeId(it)set Ta[Na]=Ga(it)if it==Pa thenset b=trueendifset Na=Na+1endifset i=i+1set it=nullendloopif b==false thenset Ra[Na]=Paset Sa[Na]=GetItemTypeId(Pa)set Ta[Na]=1set Na=Na+1endifloopexitwhen La==Kaset la=(ha(Ja,La))set Ma=StringLength(By[la])/ by[la]-1set i=0loopexitwhen i==Naset Ua[i]=Ta[i]set i=i+1endloopset i=0loopset Oa=xy[(pa(la,i))]exitwhen i==Maset j=0loopexitwhen j==Naif Sa[j]==Oa and Ua[j]>0 thenset Ua[j]=Ua[j]-1exitwhen trueendifset j=j+1endloopexitwhen j==Naset i=i+1endloopif i==Ma thenif GetRandomInt(0,99)<Dy[la]thenif Cy[la]!=null thencall DestroyEffect(AddSpecialEffectTarget(Cy[la],Qa,"origin"))endifif cy[la]!=null thencall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,30,cy[la])endifset i=0loopexitwhen i==Naif Ua[i]>0 and GetItemCharges(Ra[i])>0 thencall SetItemCharges(Ra[i],Ua[i])elseif Ua[i]==0 thencall RemoveItem(Ra[i])endifset i=i+1endloopset it=CreateItem(Oa,GetUnitX(Qa),GetUnitY(Qa))if GetItemCharges(it)>0 thencall SetItemCharges(it,1)set i=0loopexitwhen i==Naif Sa[i]==Oa thencall RemoveItem(Ra[i])call SetItemCharges(it,Ua[i]+1)endifset i=i+1endloopendifcall UnitAddItem(Qa,it)set U=itcall WA()elseif Ey[la]thenset i=0loopexitwhen i==Naif Ua[i]>0 and GetItemCharges(Ra[i])>0 thencall SetItemCharges(Ra[i],Ua[i])elseif Ua[i]==0 thencall RemoveItem(Ra[i])endifset i=i+1endloopendifset it=nullexitwhen trueendifset La=La+1endloopif b==false thencall RemoveItem(Pa)endifset i=0loopexitwhen i==Naset Ra[i]=nullset i=i+1endloopset Pa=nullset Qa=nullset it=nullendfunctionfunction Va takes nothing returns nothinglocal filterfunc f=Filter(function Ea)local trigger t=CreateTrigger()local integer i=0loopexitwhen i>$Fcall TriggerRegisterPlayerUnitEvent(t,Player(i),EVENT_PLAYER_UNIT_PICKUP_ITEM,f)set i=i+1endloopcall TriggerAddCondition(t,Condition(function Fa))call TriggerAddAction(t,function Ia)call DestroyFilter(f)set f=nullset t=nullendfunctionfunction Wa takes integer za,integer n1,integer Aa,integer n2,integer aa,integer n3,integer Ba,integer n4,integer ba,integer n5,integer Ca,integer n6,integer ua returns nothinglocal integer Xa=ya(za,n1,Aa,n2,aa,n3,Ba,n4,ba,n5,Ca,n6,0,0)local integer Ja=ka(ua)local string f=I2S(4)+Da(Xa)local string s=""local integer i=0set X=qa(4,f,Ja)if(X)>0 thenset s=YA((X),4)set i=0loopexitwhen i>Ly[Xa]call ma(Iy[ly[Xa]+i],s)set i=i+1endloopcall ma(Ja,s)endifcall xa(Xa)set f=""set s=""endfunctionfunction Ya takes nothing returns nothinglocal widget Za=nulllocal unit dB=nulllocal integer eB=0local boolean fB=trueset Za=bj_lastDyingWidgetif(Za==null)thenset dB=GetTriggerUnit()endifif(dB!=null)thenset fB=not IsUnitHidden(dB)if(fB and GetChangingUnit()!=null)thenset fB=(GetChangingUnitPrevOwner()==Player($C))endifendifif(fB)thencall RandomDistReset()call RandomDistAddItem(1634626408,100)set eB=RandomDistChoose()if(dB!=null)thencall yz(dB,eB)elsecall WidgetDropItem(Za,eB)endifendifset bj_lastDyingWidget=nullcall DestroyTrigger(GetTriggeringTrigger())endfunctionfunction Test_Timer_Stop takes nothing returns nothingcall PauseGame(true)endfunctionfunction oB takes nothing returns nothinglocal integer i=0if bv[1]==false thenloopcall DisplayTimedTextToPlayer(Player(i),0,0,120,"|c00ff0303地圖出現指標錯誤|r")call DisplayTimedTextToPlayer(Player(i),0,0,120,"|c00ff0303這可能不是一個嚴重錯誤，但這對我們非常的重要")call DisplayTimedTextToPlayer(Player(i),0,0,120,"|c00ff0303可以的話上傳 replay 到 NobunagaOldMan@gmail.com|r")set i=i+1exitwhen i==$Cendloopendifset bv[1]=trueendfunctionfunction pB takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local trigger rB=LoadTriggerHandle(o,qB,$D903)if rB!=null thencall TriggerRemoveCondition(rB,LoadTriggerConditionHandle(o,qB,$AD9C))call DestroyTrigger(rB)endifcall FlushChildHashtable(o,qB)call DestroyTimer(t)set rB=nullset t=nullendfunctionfunction sB takes trigger rB,real tB,triggercondition uB returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)call SaveTriggerHandle(o,qB,$D903,rB)call SaveTriggerConditionHandle(o,qB,$AD9C,uB)call TimerStart(t,tB,false,function pB)set t=nullendfunctionfunction vB takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local trigger rB=LoadTriggerHandle(o,qB,$D903)if rB!=null thenset t9[LoadInteger(o,qB,$8235)]=falsecall TriggerRemoveCondition(rB,LoadTriggerConditionHandle(o,qB,$AD9C))call DestroyTrigger(rB)endifcall FlushChildHashtable(o,qB)call PauseTimer(t)set rB=nullset t=nullendfunctionfunction wB takes trigger rB,real tB,triggercondition uB,integer i returns nothinglocal timer t=Ve[i]local integer qB=GetHandleId(t)call SaveTriggerHandle(o,qB,$D903,rB)call SaveTriggerConditionHandle(o,qB,$AD9C,uB)call SaveInteger(o,qB,$8235,i)call TimerStart(t,tB,false,function vB)set t=nullendfunctionfunction xB takes boolean b,unit u,player p returns nothingif b thenif(GetLocalPlayer()==p)thencall SelectUnit(u,true)endifendifendfunctionfunction yB takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u=LoadUnitHandle(o,qB,66666)local real x=LoadReal(o,qB,$D903)local real y=LoadReal(o,qB,$AD9C)call SetUnitPosition(u,x,y)call FlushChildHashtable(o,qB)call DestroyTimer(t)set u=nullset t=nullendfunctionfunction zB takes unit u,real x,real y,real tB,boolean b returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)call SaveUnitHandle(o,qB,66666,u)call SaveReal(o,qB,$D903,x)call SaveReal(o,qB,$AD9C,y)call TimerStart(t,tB,false,function yB)set t=nullendfunctionfunction AB takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u=LoadUnitHandle(o,qB,$D903)local integer id=LoadInteger(o,qB,$AD9C)call UnitRemoveAbility(u,id)call FlushChildHashtable(o,qB)call DestroyTimer(t)set u=nullset t=nullendfunctionfunction aB takes unit u,integer id,integer BB,real tB,boolean b returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)call UnitAddAbility(u,id)call SetUnitAbilityLevel(u,id,BB)if b thencall UnitMakeAbilityPermanent(u,true,id)endifcall SaveUnitHandle(o,qB,$D903,u)call SaveInteger(o,qB,$AD9C,id)call TimerStart(t,tB,false,function AB)set t=nullendfunctionfunction bB takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u=LoadUnitHandle(o,qB,$D903)local integer id=LoadInteger(o,qB,$AD9C)call UnitAddAbility(u,id)call SetUnitAbilityLevel(u,id,LoadInteger(o,qB,$8235))call FlushChildHashtable(o,qB)call DestroyTimer(t)set u=nullset t=nullendfunctionfunction CB takes unit u,integer id,integer BB,real tB returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)call UnitRemoveAbility(u,id)call SaveUnitHandle(o,qB,$D903,u)call SaveInteger(o,qB,$AD9C,id)call SaveInteger(o,qB,$8235,BB)call TimerStart(t,tB,false,function bB)set t=nullendfunctionfunction cB takes string DB,string EB returns unitif HaveSavedHandle(o,StringHash(DB),StringHash(EB))thenreturn LoadUnitHandle(o,StringHash(DB),StringHash(EB))elsereturn nullendifendfunctionfunction FB takes string DB,string EB returns realif HaveSavedReal(o,StringHash(DB),StringHash(EB))thenreturn LoadReal(o,StringHash(DB),StringHash(EB))elsereturn .0endifendfunctionfunction GB takes string DB,string EB returns stringif HaveSavedString(o,StringHash(DB),StringHash(EB))thenreturn LoadStr(o,StringHash(DB),StringHash(EB))elsereturn""endifendfunctionfunction HB takes string DB,string EB returns integerif HaveSavedInteger(o,StringHash(DB),StringHash(EB))thenreturn LoadInteger(o,StringHash(DB),StringHash(EB))elsereturn 0endifendfunctionfunction IB takes nothing returns nothinglocal string lB=(I2S(GetHandleId(((GetExpiredTimer())))))local unit JB=cB(lB,"u2")local unit u=cB(lB,"u")local unit u2local unit KB=JBlocal real anlocal real dt=FB(lB,"dt")local real v=FB(lB,"v")local group g=CreateGroup()local integer j=GetUnitUserData(u)local integer m=HB(lB,"m")local integer fu=HB(lB,"fu")local integer a=HB(lB,"a")local string s=GB(lB,"s")if j!=0 thenset an=Atan2(GetUnitY(JB)-GetUnitY(u),GetUnitX(JB)-GetUnitX(u))call SetUnitX(u,GetUnitX(u)+v*dt*Cos(an))call SetUnitY(u,GetUnitY(u)+v*dt*Sin(an))call UnitResetCooldown(u)call SetUnitManaPercentBJ(u,100)if SquareRoot(Pow(GetUnitX(JB)-GetUnitX(u),2)+Pow(GetUnitY(JB)-GetUnitY(u),2))<dt*v thenset u2=CreateUnit(GetOwningPlayer(u),fu,GetUnitX(u),GetUnitY(u),0)if(m==3 and not IsUnitAlly(JB,GetOwningPlayer(u)))or m==2 thenset a=HB(lB,"a2")set s=GB(lB,"s2")endifcall UnitAddAbility(u2,a)call SetUnitAbilityLevelSwapped(a,u2,GetUnitAbilityLevel(u,a))call IssueTargetOrder(u2,s,JB)set g=CreateGroup()call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),FB(lB,"r"),null)loopset JB=nullset JB=GroupPickRandomUnit(g)exitwhen JB==nullif m==1 thenexitwhen JB!=KB and JB!=u and IsUnitAlly(JB,GetOwningPlayer(u))and not(IsUnitDeadBJ(JB)or Zy(JB,UNIT_TYPE_STRUCTURE)or Zy(JB,UNIT_TYPE_ANCIENT)or GetUnitAbilityLevel(JB,1097625443)>0)and not(GetUnitPointValue(JB)==1)elseif m==2 thenexitwhen JB!=KB and JB!=u and(not IsUnitAlly(JB,GetOwningPlayer(u)))and not(IsUnitDeadBJ(JB)or Zy(JB,UNIT_TYPE_STRUCTURE)or Zy(JB,UNIT_TYPE_ANCIENT)or GetUnitAbilityLevel(JB,1097625443)>0)and not(GetUnitPointValue(JB)==1)elseexitwhen JB!=KB and JB!=u and not(IsUnitDeadBJ(JB)or Zy(JB,UNIT_TYPE_STRUCTURE)or Zy(JB,UNIT_TYPE_ANCIENT)or GetUnitAbilityLevel(JB,1097625443)>0)and not(GetUnitPointValue(JB)==1)endifcall GroupRemoveUnit(g,JB)endloopif JB==null thencall KillUnit(u)call RemoveUnit(u)call PauseTimer(GetExpiredTimer())call FlushChildHashtable(o,StringHash((lB)))call DestroyTimer(GetExpiredTimer())elsecall SaveAgentHandle(o,StringHash((lB)),StringHash(("u2")),(JB))call SetUnitUserData(u,j-1)endifendifelsecall KillUnit(u)call RemoveUnit(u)call PauseTimer(GetExpiredTimer())call FlushChildHashtable(o,StringHash((lB)))call DestroyTimer(GetExpiredTimer())endifcall DestroyGroup(g)set g=nullset u=nullset u2=nullendfunctionfunction LB takes integer a,string s,integer a2,string s2,integer fu,integer MB,real r,integer j,real v,integer m returns nothinglocal timer NB=CreateTimer()local string lB=(I2S(GetHandleId(((NB)))))local unit CA=GetSpellTargetUnit()local unit u=CreateUnit(GetOwningPlayer(GetTriggerUnit()),fu,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),0)call UnitAddAbility(u,a)call SetUnitAbilityLevelSwapped(a,u,GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId()))call UnitAddAbility(u,a2)call SetUnitAbilityLevelSwapped(a2,u,GetUnitAbilityLevel(GetTriggerUnit(),GetSpellAbilityId()))call SaveReal(o,StringHash((lB)),StringHash(("dt")),((.03)*1.))call SaveReal(o,StringHash((lB)),StringHash(("v")),((v)*1.))call SaveReal(o,StringHash((lB)),StringHash(("r")),((r)*1.))call SaveStr(o,StringHash((lB)),StringHash(("s")),(s))call SaveStr(o,StringHash((lB)),StringHash(("s2")),(s2))call SaveInteger(o,StringHash((lB)),StringHash(("m")),(m))call SaveInteger(o,StringHash((lB)),StringHash(("a")),(a))call SaveInteger(o,StringHash((lB)),StringHash(("a2")),(a2))call SaveInteger(o,StringHash((lB)),StringHash(("fu")),(MB))call SaveAgentHandle(o,StringHash((lB)),StringHash(("u")),(u))call SetUnitUserData(u,j)call SaveAgentHandle(o,StringHash((lB)),StringHash(("u2")),(CA))set CA=nullcall TimerStart(NB,.03,true,function IB)endfunctionfunction OB takes trigger t,playerunitevent PB returns nothinglocal integer QB=0loopexitwhen QB==$Acall TriggerRegisterPlayerUnitEvent(t,Player(QB),PB,null)set QB=QB+1endloopendfunctionfunction RB takes unit SB,integer id returns nothingif id==$C9 thencall TriggerRegisterUnitEvent(dj,SB,EVENT_UNIT_SPELL_EFFECT)elseif id==103 thencall TriggerRegisterUnitEvent(Dn,SB,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(En,SB,EVENT_UNIT_HERO_SKILL)call SetPlayerAbilityAvailable(GetOwningPlayer(SB),1093687374,false)call SetPlayerAbilityAvailable(GetOwningPlayer(SB),1093677123,false)elseif id==313 thencall TriggerRegisterUnitEvent(Br,SB,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(br,SB,EVENT_UNIT_SPELL_EFFECT)elseif id==304 thencall TriggerRegisterUnitEvent(Uq,SB,EVENT_UNIT_SPELL_EFFECT)elseif id==114 thencall TriggerRegisterUnitEvent(Co,SB,EVENT_UNIT_SPELL_EFFECT)elseif id==311 thencall TriggerRegisterUnitEvent(vr,SB,EVENT_UNIT_SPELL_EFFECT)elseif id==$CC thencall TriggerRegisterUnitEvent(kj,SB,EVENT_UNIT_SPELL_EFFECT)elseif id==$CA thencall TriggerRegisterUnitEvent(ej,SB,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(fj,SB,EVENT_UNIT_SPELL_EFFECT)elseif id==$CD thencall TriggerRegisterUnitEvent(mj,SB,EVENT_UNIT_HERO_SKILL)elseif id==$E3 thencall TriggerRegisterUnitEvent(mm,SB,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(km,SB,EVENT_UNIT_HERO_SKILL)endifendfunctionfunction TB takes real UB,integer VB returns integerlocal integer lz=R2I(UB*I2R(VB)*.01)if(lz<0)thenset lz=0elseif(lz>VB)thenset lz=VBendifreturn lzendfunctionfunction WB takes nothing returns nothinglocal real r=I2R(J4)call TimerStart(Cv,Mv,false,null)call PauseTimer(Cv)endfunctionfunction XB takes nothing returns nothingcall TimerStart(Cv,.0,false,null)set bj_lastCreatedTimerDialog=CreateTimerDialog(Cv)call TimerDialogSetTitle(bj_lastCreatedTimerDialog,"信長之野望")call TimerDialogDisplay(bj_lastCreatedTimerDialog,false)call PauseTimer(Cv)call TimerStart(CreateTimer(),1.,true,function WB)endfunctionfunction ZB takes nothing returns nothingif GetLocalPlayer()==GetTriggerPlayer()thenif Nv==false thencall TimerDialogDisplay(bj_lastCreatedTimerDialog,true)set Nv=truecall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,$A,"|c0000FF00開啟完整計分板")elsecall TimerDialogDisplay(bj_lastCreatedTimerDialog,false)set Nv=falsecall DisplayTimedTextToPlayer(GetTriggerPlayer(),0,0,$A,"|c00FFFF00開啟簡易計分板")endifendifendfunctionfunction eb takes nothing returns nothinglocal integer na=LoadInteger(cv,GetHandleId(GetExpiredTimer()),Dv)local player plocal integer pilocal unit ulocal integer wz=LoadInteger(cv,na,16)if wz>=2 thenset p=GetLocalPlayer()set pi=GetPlayerId(p)set u=LoadUnitHandle(cv,na,Ev)if Hv[pi]or Iv[pi]thencall DisplayTimedTextToPlayer(p,0,0,$F,Gv[GetPlayerId(GetOwningPlayer(u))]+GetUnitName(u)+"|r 連續施放: |c00FFFF00"+I2S(wz)+"|r 次技能    用時: |c00FFFF00"+R2SW(TimerGetElapsed(LoadTimerHandle(cv,na,Fv))-1.5,0,5)+"|r 秒")if Hv[pi]thencall DisplayTimedTextToPlayer(p,0,0,$F,LoadStr(cv,na,20)+"|r -> "+LoadStr(cv,na,18))endifendifset u=nullset p=nullendifcall DestroyTimer(LoadTimerHandle(cv,na,Fv))call DestroyTimer(LoadTimerHandle(cv,na,22))call FlushChildHashtable(cv,na)endfunctionfunction fb takes nothing returns nothinglocal integer na=GetHandleId(GetTriggerUnit())local timer tif HaveSavedHandle(cv,na,Ev)thenif HaveSavedString(cv,na,20)thencall SaveStr(cv,na,20,LoadStr(cv,na,20)+"|r -> "+LoadStr(cv,na,18))elsecall SaveStr(cv,na,20,LoadStr(cv,na,18))endifcall TimerStart(LoadTimerHandle(cv,na,22),1.5,false,function eb)elsecall SaveUnitHandle(cv,na,Ev,GetTriggerUnit())set t=CreateTimer()call SaveTimerHandle(cv,na,Fv,t)call TimerStart(t,$7FFFFFFF,false,null)set t=CreateTimer()call SaveInteger(cv,GetHandleId(t),Dv,na)call SaveTimerHandle(cv,na,22,t)call TimerStart(t,1.5,false,function eb)set t=nullendifcall SaveInteger(cv,na,16,LoadInteger(cv,na,16)+1)if not HaveSavedBoolean(cv,GetSpellAbilityId(),24)thencall SaveStr(cv,na,18,"|c00A020F0"+GetObjectName(GetSpellAbilityId()))endifendfunctionfunction gb takes nothing returns nothingif not HaveSavedBoolean(cv,GetItemTypeId(GetManipulatedItem()),24)thencall SaveStr(cv,GetHandleId(GetTriggerUnit()),18,"|c00A020F0"+GetItemName(GetManipulatedItem()))endifendfunctionfunction hb takes nothing returns nothinglocal integer pi=GetPlayerId(GetLocalPlayer())local string es=StringCase(GetEventPlayerChatString(),true)if GetTriggerPlayer()==GetLocalPlayer()thenif es==StringCase("-SL2",true)thenset Hv[pi]=truecall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,$A,"|c0000FF00開啟完整顯示接技訊息")elseif es==StringCase("-SL1",true)thenset Hv[pi]=falseset Iv[pi]=truecall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,$A,"|c00FFFF00開啟簡易顯示接技訊息")elseif es==StringCase("-SL0",true)thenset Hv[pi]=falseset Iv[pi]=falsecall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,$A,"|c00FF0000關閉顯示接技訊息")endifendifendfunctionfunction ib takes nothing returns nothingset Gv[0]="|c00ff0303"set Gv[1]="|c000042ff"set Gv[2]="|c001ce6b9"set Gv[3]="|c00540081"set Gv[4]="|c00fffc01"set Gv[5]="|c00fe8a0e"set Gv[6]="|c0020c000"set Gv[7]="|c00e55bb0"set Gv[8]="|c00959697"set Gv[9]="|c007ebff1"set Gv[$A]="|c00106246"set Gv[$B]="|c004e2a04"set Gv[$C]="|cff0000ff"set Gv[$D]=Gv[$C]set Gv[$E]=Gv[$C]set Gv[$F]=Gv[$C]call SaveBoolean(cv,(1093681477),24,true)call SaveBoolean(cv,(1093683019),24,true)call SaveBoolean(cv,(1095328363),24,true)call SaveBoolean(cv,(1735816045),24,true)call SaveBoolean(cv,(1953330019),24,true)call SaveBoolean(cv,(1634951788),24,true)call SaveBoolean(cv,(1227895365),24,true)call SaveBoolean(cv,(1093681490),24,true)call SaveBoolean(cv,(1953723442),24,true)call SaveBoolean(cv,(1095332453),24,true)call SaveBoolean(cv,(1227895105),24,true)call SaveBoolean(cv,(1094936695),24,true)call SaveBoolean(cv,(1227895375),24,true)call SaveBoolean(cv,(1093681972),24,true)call SaveBoolean(cv,(1227895374),24,true)call SaveBoolean(cv,(1095321708),24,true)call SaveBoolean(cv,(1227895094),24,true)call SaveBoolean(cv,(1093683013),24,true)call SaveBoolean(cv,(1227895108),24,true)call SaveBoolean(cv,(1095331948),24,true)call SaveBoolean(cv,(1227895091),24,true)call SaveBoolean(cv,(1093683027),24,true)call SaveBoolean(cv,(1227895346),24,true)call SaveBoolean(cv,(1093682515),24,true)call SaveBoolean(cv,(1227895089),24,true)call SaveBoolean(cv,(1098018657),24,true)call SaveBoolean(cv,(1227894853),24,true)call SaveBoolean(cv,(1093682232),24,true)endfunctionfunction jb takes nothing returns nothinglocal integer ilocal trigger tcall ib()set t=CreateTrigger()set i=0loopexitwhen(i>=$C)call TriggerRegisterPlayerUnitEvent(t,Player(i),EVENT_PLAYER_UNIT_SPELL_CHANNEL,null)set i=i+(1)endloopcall TriggerAddCondition(t,Condition(function fb))set t=CreateTrigger()set i=0loopexitwhen(i>=$C)call TriggerRegisterPlayerUnitEvent(t,Player(i),EVENT_PLAYER_UNIT_USE_ITEM,null)set i=i+(1)endloopcall TriggerAddCondition(t,Condition(function gb))set t=CreateTrigger()set i=0loopexitwhen(i>=$C)call TriggerRegisterPlayerChatEvent(t,Player(i),"",false)set i=i+(1)endloopcall TriggerAddCondition(t,Condition(function hb))set t=nullendfunctionfunction kb takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local trigger rB=LoadTriggerHandle(o,qB,2)call DestroyTimer(t)call FlushChildHashtable(o,qB)call EnableTrigger(rB)call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,10.,"|cffff0000踢除系統開啟")set rB=nullset t=nullendfunctionfunction nb takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local player p2=LoadPlayerHandle(o,qB,1)if GetPlayerSlotState(p2)==PLAYER_SLOT_STATE_PLAYING thencall DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,10.,"|cffff0000踢除失敗，再給他一次機會吧!!")endifcall TimerStart(t,60.,false,function kb)set p2=nullset t=nullendfunctionfunction ob takes player p,integer id returns booleanlocal boolean b=((GetPlayerSlotState(Player(id-1))==PLAYER_SLOT_STATE_PLAYING))local force f=CreateForce()call ForceAddPlayer(f,p)if b==false thencall DisplayTimedTextToForce(f,10.,"|cffff0000指定玩家不在遊戲中|r")endifcall DestroyForce(f)set f=nullreturn bendfunctionfunction pb takes player p returns nothinglocal integer id=GetPlayerId(p)+1local string slocal string s2local string s3local string s4local string s5local integer qb=W7-4if N7[id]==false thenset Y=Y+1if IsPlayerAlly(p,Jv)thenset Lv=Lv+1endifset N7[id]=trueset s="|cff33cccc對於踢除投票目前結果 : 贊成  "set s2=I2S(Y)set s3="(需要人數 :  "set s4=I2S(qb)set s5=")"set s=s+s2+s3+s4+s5call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,10.,s)set s="|cff33cccc同盟投票目前結果       : 贊成  "set s2=I2S(Lv)set s3="(需要人數 :  "set s4=I2S(3)set s5=")"set s=s+s2+s3+s4+s5call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,10.,s)endifendfunctionfunction rb takes nothing returns booleanlocal string s=GetEventPlayerChatString()local string s2=SubStringBJ(s,6,8)local string s3local string s4local string s5local string s6local string s7local string s8local integer sb=S2I(s2)local boolean b=falselocal player p=GetTriggerPlayer()local player p2local integer id=(1+GetPlayerId(p))local player p3local integer ilocal trigger rB=GetTriggeringTrigger()local integer qBlocal timer tif sb==1 thenset b=ob(p,1)elseif sb==2 thenset b=ob(p,2)elseif sb==3 thenset b=ob(p,3)elseif sb==4 thenset b=ob(p,4)elseif sb==5 thenset b=ob(p,5)elseif sb==6 thenset b=ob(p,6)elseif sb==7 thenset b=ob(p,7)elseif sb==8 thenset b=ob(p,8)elseif sb==9 thenset b=ob(p,9)elseif sb==$A thenset b=ob(p,$A)endifif b thencall DisableTrigger(rB)set Y=0set Kv=0set Lv=0set i=0loopexitwhen i>9set p3=Player(i)if GetPlayerSlotState(p3)==PLAYER_SLOT_STATE_PLAYING thenset W7=W7+1set N7[i+1]=falseendifset i=i+1endloopif W7<6 thencall QuestMessageBJ(bj_FORCE_ALL_PLAYERS,$C,"|cffff0000玩家人數不足|r")set b=falseendifif b thencall EnableTrigger(Vg)set p2=Player(-1+(sb))set Jv=p2set s2=j4[id]set s3=GetPlayerName(p)set s4="|r發起了對"set s5=j4[sb]set s6=GetPlayerName(p2)set s7="|r的踢除投票。"set s8="輸入 -Y 表達同意。"set s=s2+s3+s4+s5+s6+s7call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,10.,s)call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,10.,s8)call pb(p)set t=CreateTimer()set qB=GetHandleId(t)call SavePlayerHandle(o,qB,1,p2)call SaveTriggerHandle(o,qB,2,rB)call TimerStart(t,45.,false,function nb)endifendifset p=nullset p2=nullset p3=nullset rB=nullset t=nullreturn falseendfunctionfunction ub takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local player p=LoadPlayerHandle(o,qB,5566)call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(p,PLAYER_STATE_RESOURCE_LUMBER,0)set t=nullset p=nullendfunctionfunction vb takes player p returns nothinglocal string s="|cffffcc00"+GetPlayerName(p)+"|r逃離戰場，將他的黃金以及兵力均分給其他友軍玩家。"local integer i=0local integer i2=0local integer wb=1local integer xb=1local integer yb=0local boolean b=falselocal timer t=CreateTimer()local integer qB=GetHandleId(t)if IsPlayerEnemy(p,Player(0))thenif m8 thenset n8=n8+4elseset n8=n8+1endifelseif m8 thenset e8=e8+4elseset e8=e8+1endifendifif Rg!=null thencall StartSound(Rg)endifif IsPlayerInForce(GetLocalPlayer(),bj_FORCE_ALL_PLAYERS)thencall DisplayTextToPlayer(GetLocalPlayer(),0,0,s)endifset i=0loopexitwhen i>9if IsPlayerAlly(Player(i),p)and GetPlayerSlotState(Player(i))==PLAYER_SLOT_STATE_PLAYING thenset yb=yb+1set b=trueendifset i=i+1endloopif b==false thenset yb=1endifset xb=GetPlayerState(p,PLAYER_STATE_RESOURCE_LUMBER)/ ybset wb=GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)/ ybset i=0loopexitwhen i>9if IsPlayerAlly(Player(i),p)and GetPlayerSlotState(Player(i))==PLAYER_SLOT_STATE_PLAYING thencall SetPlayerAllianceStateBJ(p,Player(i),4)call SetPlayerState(Player(i),PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Player(i),PLAYER_STATE_RESOURCE_GOLD)+wb)call SetPlayerState(Player(i),PLAYER_STATE_RESOURCE_LUMBER,GetPlayerState(Player(i),PLAYER_STATE_RESOURCE_LUMBER)+xb)endifset i=i+1endloopset i=GetPlayerId(p)+1call Yz(H4,0,i+1,25.,25.,25.,0)call KillUnit(V7[i])call SavePlayerHandle(o,qB,5566,p)call TimerStart(t,4.,true,function ub)set s=nullset t=nullendfunctionfunction zb takes nothing returns nothingcall DestroyTimer(GetExpiredTimer())call vb(Jv)endfunctionfunction Ab takes nothing returns nothinglocal player p=GetTriggerPlayer()local integer id=GetPlayerId(p)+1local string slocal string s2local string s3local string s4local string s5local integer qb=W7-4local timer tlocal integer qBif N7[id]==false thenset Y=Y+1if IsPlayerAlly(p,Jv)thenset Lv=Lv+1endifset N7[id]=trueset s="|cff33cccc對於踢除投票目前結果 : 贊成  "set s2=I2S(Y)set s3="(需要人數 :  "set s4=I2S(qb)set s5=")"set s=s+s2+s3+s4+s5call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,10.,s)set s="|cff33cccc同盟投票目前結果       : 贊成  "set s2=I2S(Lv)set s3="(需要人數 :  "set s4=I2S(3)set s5=")"set s=s+s2+s3+s4+s5call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,10.,s)if Y==qb or Lv==3 thencall CustomDefeatBJ(Jv,"玩家已被踢除遊戲")set t=CreateTimer()set qB=GetHandleId(t)call TimerStart(t,.08,false,function zb)call DisableTrigger(Vg)endifendifset t=nullset p=nullendfunctionfunction Bb takes nothing returns nothinglocal integer i=0set Vg=CreateTrigger()call DisableTrigger(Vg)loopexitwhen i>9call TriggerRegisterPlayerChatEvent(Vg,Player(i),"-Y",true)set i=i+1endloopcall TriggerAddAction(Vg,function Ab)endfunctionfunction bb takes nothing returns nothingset o7[1]="Death_Message"set p7[1]="信魂-老爸"set o7[2]="L___O____V___E"set p7[2]="信魂-LOVE"set o7[3]="MaxPower_min"set p7[3]="信魂-小小"set o7[4]="QueenDom_Ed"set p7[4]="信魂-女王"set o7[5]="arthur61106"set p7[5]="信魂-生活家"set o7[6]="night891119"set p7[6]="信魂-嵐"set o7[7]="totox08043"set p7[7]="信魂-神奇冷民"set o7[8]="ProJact.C_Ray"set p7[8]="信魂-水電工"set o7[$A]="RAINBOW6_JOKER"set p7[$A]="信魂-黃魚"set o7[$B]="North_Yoishide"set p7[$B]="信魂-斯里蘭卡"set o7[$C]="BOLD_LuoLi"set p7[$C]="信魂-Oath_maple"set o7[$D]="t0911402161"set p7[$D]="信魂-然後呢"set o7[$E]="a120242791"set p7[$E]="信魂-蜜桃來臨時"set o7[$F]="s10410074"set p7[$F]="信魂-小S"set o7[16]="IANBENITA"set p7[16]="信魂-庫瑪"set o7[17]="hahaha32016"set p7[17]="信魂-小諾"set o7[18]="K.Kast"set p7[18]="信魂-小K"set o7[19]="Airi.Cool_Magic"set p7[19]="信魂-不好意思"set o7[21]="AveryLei"set p7[21]="信魂-Lei"set o7[22]="artemis55500"set p7[22]="信魂-堤亞斯多"endfunctionfunction cb takes nothing returns nothinglocal integer ilocal integer i2local integer Dblocal integer Eblocal boolean b=falseset i=1set Db=$Aloopexitwhen i>Dbset i2=1set Eb=22loopexitwhen i2>Ebif GetPlayerName(Player(-1+(i)))==o7[i2]thenset b=falsecall SetPlayerName(Player(-1+(i)),p7[i2])set q7[i]=p7[i2]call MultiboardSetItemValue(MultiboardGetItem(H4,i,0),GetPlayerName(GetOwningPlayer(V7[i])))endifset i2=i2+1endloopset i=i+1endloopif b thencall DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,10.,"|cffff9900偵測到信魂人員 ， 有遊戲問題可以向他們反應
")endifcall DisableTrigger(GetTriggeringTrigger())endfunctionfunction Gb takes nothing returns nothingcall SetPlayerName(GetTriggerPlayer(),(SubStringBJ(GetEventPlayerChatString(),7,27)+("("+(GetHeroProperName(h4[((1+GetPlayerId(GetTriggerPlayer()))-0)])+")"))))endfunctionfunction Ib takes nothing returns nothingcall ConditionalTriggerExecute(eh)call ConditionalTriggerExecute(fh)call ConditionalTriggerExecute(gh)call ConditionalTriggerExecute(hh)call ConditionalTriggerExecute(ih)call ConditionalTriggerExecute(jh)if((GetSpellAbilityId()==1093687349))thencall SetPlayerAbilityAvailableBJ(false,1093687349,GetOwningPlayer(GetTriggerUnit()))call SetPlayerAbilityAvailableBJ(true,1093687350,GetOwningPlayer(GetTriggerUnit()))set i9[(1+GetPlayerId(GetOwningPlayer(GetTriggerUnit())))]=trueelseif((GetSpellAbilityId()==1093687350))thencall SetPlayerAbilityAvailableBJ(false,1093687350,GetOwningPlayer(GetTriggerUnit()))call SetPlayerAbilityAvailableBJ(true,1093687349,GetOwningPlayer(GetTriggerUnit()))set i9[(1+GetPlayerId(GetOwningPlayer(GetTriggerUnit())))]=falseendifendifendfunctionfunction Kb takes nothing returns nothingset bj_forLoopAIndex=1set bj_forLoopAIndexEnd=$Aloopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndcall SetPlayerAbilityAvailableBJ(false,1093684785,Player(-1+(bj_forLoopAIndex)))call SetPlayerAbilityAvailableBJ(false,1093683768,Player(-1+(bj_forLoopAIndex)))set bj_forLoopAIndex=bj_forLoopAIndex+1endloopcall DisableTrigger(GetTriggeringTrigger())endfunctionfunction Mb takes nothing returns booleanreturn((IsTriggerEnabled(GetTriggeringTrigger()))and(GetSpellAbilityId()==1093683289)and((GetOwningPlayer(GetTriggerUnit())==Player(5))or(GetOwningPlayer(GetTriggerUnit())==Player(6))or(GetOwningPlayer(GetTriggerUnit())==Player(7))or(GetOwningPlayer(GetTriggerUnit())==Player(8))or(GetOwningPlayer(GetTriggerUnit())==Player(9))))endfunctionfunction Nb takes nothing returns nothingcall DisableTrigger(GetTriggeringTrigger())call DisableTrigger(hh)set b7[4]=0set b7[5]=0set b7[6]=0call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,30,(("|cffff0000"+GetPlayerName(GetTriggerPlayer()))+"發起了投降的投票，請選取個人倉庫，點選\"同意投降\"或是\"反對投降\"來投票，投票將會在1分鐘之後結算，沒有投票者不計算"))set bj_forLoopAIndex=6set bj_forLoopAIndexEnd=$Aloopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndif((GetPlayerSlotState(Player(-1+(bj_forLoopAIndex)))==PLAYER_SLOT_STATE_PLAYING)and(GetPlayerController(Player(-1+(bj_forLoopAIndex)))==MAP_CONTROL_USER))thenset b7[6]=(b7[6]+1)endifset bj_forLoopAIndex=bj_forLoopAIndex+1endloopset bj_forLoopAIndex=6set bj_forLoopAIndexEnd=$Aloopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndcall SetPlayerAbilityAvailableBJ(true,1093684785,Player(-1+(bj_forLoopAIndex)))call SetPlayerAbilityAvailableBJ(true,1093683768,Player(-1+(bj_forLoopAIndex)))set bj_forLoopAIndex=bj_forLoopAIndex+1endloopcall EnableTrigger(fh)call EnableTrigger(gh)call xA(60.)if((b7[4]>=(b7[6]-1)))thencall KillUnit(wu)elsecall DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,30,"TRIGSTR_6479")endifset bj_forLoopAIndex=6set bj_forLoopAIndexEnd=$Aloopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndcall SetPlayerAbilityAvailableBJ(false,1093684785,Player(-1+(bj_forLoopAIndex)))call SetPlayerAbilityAvailableBJ(false,1093683768,Player(-1+(bj_forLoopAIndex)))set bj_forLoopAIndex=bj_forLoopAIndex+1endloopcall xA(300.)call EnableTrigger(GetTriggeringTrigger())call EnableTrigger(hh)endfunctionfunction Pb takes nothing returns booleanreturn((GetSpellAbilityId()==1093683768)and((GetOwningPlayer(GetTriggerUnit())==Player(5))or(GetOwningPlayer(GetTriggerUnit())==Player(6))or(GetOwningPlayer(GetTriggerUnit())==Player(7))or(GetOwningPlayer(GetTriggerUnit())==Player(8))or(GetOwningPlayer(GetTriggerUnit())==Player(9))))endfunctionfunction Qb takes nothing returns nothingset b7[4]=(b7[4]+1)call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,30,(("|cff33cccc對於投降投票目前結果 : 贊成"+I2S(b7[4]))+("/  反對"+I2S(b7[5]))))call SetPlayerAbilityAvailableBJ(false,1093684785,GetOwningPlayer(GetTriggerUnit()))call SetPlayerAbilityAvailableBJ(false,1093683768,GetOwningPlayer(GetTriggerUnit()))endfunctionfunction Sb takes nothing returns booleanreturn((GetSpellAbilityId()==1093684785)and((GetOwningPlayer(GetTriggerUnit())==Player(5))or(GetOwningPlayer(GetTriggerUnit())==Player(6))or(GetOwningPlayer(GetTriggerUnit())==Player(7))or(GetOwningPlayer(GetTriggerUnit())==Player(8))or(GetOwningPlayer(GetTriggerUnit())==Player(9))))endfunctionfunction Tb takes nothing returns nothingset b7[5]=(b7[5]+1)call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,30,(("|cff33cccc對於投降投票目前結果 : 贊成"+I2S(b7[4]))+("/  反對"+I2S(b7[5]))))call SetPlayerAbilityAvailableBJ(false,1093684785,GetOwningPlayer(GetTriggerUnit()))call SetPlayerAbilityAvailableBJ(false,1093683768,GetOwningPlayer(GetTriggerUnit()))endfunctionfunction Vb takes nothing returns booleanreturn((IsTriggerEnabled(GetTriggeringTrigger()))and((GetOwningPlayer(GetTriggerUnit())==Player(0))or(GetOwningPlayer(GetTriggerUnit())==Player(1))or(GetOwningPlayer(GetTriggerUnit())==Player(2))or(GetOwningPlayer(GetTriggerUnit())==Player(3))or(GetOwningPlayer(GetTriggerUnit())==Player(4)))and(GetSpellAbilityId()==1093683289))endfunctionfunction Wb takes nothing returns nothingcall DisableTrigger(GetTriggeringTrigger())call DisableTrigger(eh)set b7[0]=0set b7[1]=0set b7[3]=0call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,30,(("|cffff0000"+GetPlayerName(GetTriggerPlayer()))+"發起了投降的投票，請選取個人倉庫，點選\"同意投降\"或是\"反對投降\"來投票，投票將會在1分鐘之後結算，沒有投票者不計算"))set bj_forLoopAIndex=1set bj_forLoopAIndexEnd=5loopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndif((GetPlayerSlotState(Player(-1+(bj_forLoopAIndex)))==PLAYER_SLOT_STATE_PLAYING)and(GetPlayerController(Player(-1+(bj_forLoopAIndex)))==MAP_CONTROL_USER))thenset b7[3]=(b7[3]+1)endifset bj_forLoopAIndex=bj_forLoopAIndex+1endloopset bj_forLoopAIndex=1set bj_forLoopAIndexEnd=5loopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndcall SetPlayerAbilityAvailableBJ(true,1093684785,Player(-1+(bj_forLoopAIndex)))call SetPlayerAbilityAvailableBJ(true,1093683768,Player(-1+(bj_forLoopAIndex)))set bj_forLoopAIndex=bj_forLoopAIndex+1endloopcall EnableTrigger(ih)call EnableTrigger(jh)call xA(60.)if((b7[0]>=(b7[3]-1)))thencall KillUnit(xu)elsecall DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,30,"TRIGSTR_6479")endifset bj_forLoopAIndex=1set bj_forLoopAIndexEnd=5loopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndcall SetPlayerAbilityAvailableBJ(false,1093684785,Player(-1+(bj_forLoopAIndex)))call SetPlayerAbilityAvailableBJ(false,1093683768,Player(-1+(bj_forLoopAIndex)))set bj_forLoopAIndex=bj_forLoopAIndex+1endloopcall xA(300.)call EnableTrigger(GetTriggeringTrigger())call EnableTrigger(eh)endfunctionfunction Yb takes nothing returns booleanreturn((GetSpellAbilityId()==1093683768)and((GetOwningPlayer(GetTriggerUnit())==Player(0))or(GetOwningPlayer(GetTriggerUnit())==Player(1))or(GetOwningPlayer(GetTriggerUnit())==Player(2))or(GetOwningPlayer(GetTriggerUnit())==Player(3))or(GetOwningPlayer(GetTriggerUnit())==Player(4))))endfunctionfunction Zb takes nothing returns nothingset b7[0]=(b7[0]+1)call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,30,(("|cff33cccc對於投降投票目前結果 : 贊成"+I2S(b7[0]))+("/  反對"+I2S(b7[1]))))call SetPlayerAbilityAvailableBJ(false,1093684785,GetOwningPlayer(GetTriggerUnit()))call SetPlayerAbilityAvailableBJ(false,1093683768,GetOwningPlayer(GetTriggerUnit()))endfunctionfunction eC takes nothing returns booleanreturn((GetSpellAbilityId()==1093684785)and((GetOwningPlayer(GetTriggerUnit())==Player(0))or(GetOwningPlayer(GetTriggerUnit())==Player(1))or(GetOwningPlayer(GetTriggerUnit())==Player(2))or(GetOwningPlayer(GetTriggerUnit())==Player(3))or(GetOwningPlayer(GetTriggerUnit())==Player(4))))endfunctionfunction fC takes nothing returns nothingset b7[1]=(b7[1]+1)call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,30,(("|cff33cccc對於投降投票目前結果 : 贊成"+I2S(b7[0]))+("/  反對"+I2S(b7[1]))))call SetPlayerAbilityAvailableBJ(false,1093684785,GetOwningPlayer(GetTriggerUnit()))call SetPlayerAbilityAvailableBJ(false,1093683768,GetOwningPlayer(GetTriggerUnit()))endfunctionfunction hC takes nothing returns booleanreturn((Zy(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)))endfunctionfunction iC takes nothing returns nothingendfunctionfunction kC takes nothing returns nothinglocal integer icall CreateMultiboardBJ(7,$B,("|cffffcc00信長之野望|r"))call qA(bj_lastCreatedMultiboard,0,0,true,false)call qA(bj_lastCreatedMultiboard,1,0,true,true)call tA(bj_lastCreatedMultiboard,0,0,("--"))call vA(bj_lastCreatedMultiboard,1,0,8.7)call vA(bj_lastCreatedMultiboard,2,0,2.)call vA(bj_lastCreatedMultiboard,3,0,1.8)call vA(bj_lastCreatedMultiboard,4,0,1.8)call vA(bj_lastCreatedMultiboard,5,0,1.8)call vA(bj_lastCreatedMultiboard,6,0,1.8)call vA(bj_lastCreatedMultiboard,7,0,1.8)call qA(bj_lastCreatedMultiboard,1,1,false,false)call tA(bj_lastCreatedMultiboard,2,1,("殲敵"))call tA(bj_lastCreatedMultiboard,3,1,("斬殺"))call tA(bj_lastCreatedMultiboard,4,1,("敗陣"))call tA(bj_lastCreatedMultiboard,5,1,("助攻"))call tA(bj_lastCreatedMultiboard,6,1,("破陣"))call tA(bj_lastCreatedMultiboard,7,1,("休養"))call Yz(bj_lastCreatedMultiboard,3,1,100,.0,.0,0)call Yz(bj_lastCreatedMultiboard,4,1,.0,42.3,85.1,0)call Yz(bj_lastCreatedMultiboard,6,1,100.,50.,.0,0)call Yz(bj_lastCreatedMultiboard,5,1,.0,100.,.0,0)call Yz(bj_lastCreatedMultiboard,7,1,100,100.,100.,0)set i=2loopexitwhen i>$Bcall oA(bj_lastCreatedMultiboard,1,i,"ReplaceableTextures\\WorldEditUI\\Editor-Random-Unit.blp")if GetPlayerSlotState(Player(i-2))==PLAYER_SLOT_STATE_EMPTY thencall Yz(bj_lastCreatedMultiboard,0,i,20.,20.,20.,0)call tA(bj_lastCreatedMultiboard,1,i,("未出戰"))elsecall tA(bj_lastCreatedMultiboard,1,i,GetPlayerName(Player(-1+((i-1)))))call tA(bj_lastCreatedMultiboard,2,i,"0")call Yz(bj_lastCreatedMultiboard,3,i,100,.0,.0,0)call Yz(bj_lastCreatedMultiboard,4,i,.0,42.3,85.1,0)call Yz(bj_lastCreatedMultiboard,6,i,100.,50.,.0,0)call Yz(bj_lastCreatedMultiboard,5,i,.0,100.,.0,0)call Yz(bj_lastCreatedMultiboard,7,i,100,100.,100.,0)call tA(bj_lastCreatedMultiboard,3,i,"0")call tA(bj_lastCreatedMultiboard,4,i,"0")call tA(bj_lastCreatedMultiboard,5,i,"0")call tA(bj_lastCreatedMultiboard,6,i,"0")call tA(bj_lastCreatedMultiboard,7,i,"0")endifset i=i+1endloopset H4=bj_lastCreatedMultiboardcall MultiboardMinimize(bj_lastCreatedMultiboard,true)call DestroyTrigger(GetTriggeringTrigger())endfunctionfunction mC takes nothing returns nothinglocal string slocal integer ilocal integer i2local integer i3local integer i4local integer i5local integer i6local integer idset J4=J4+1if J4==60 thenset J4=0set l4=l4+1endifif l4==60 thenset l4=0set I4=I4+1endifif I4==0 thenset c7=""elseset c7="|CFFFEBA0E"+I2S(I4)+":"endifif l4<$A thenset c7=c7+"0"+I2S(l4)+":"elseset c7=c7+I2S(l4)+":"endifif J4<$A thenset c7=c7+"0"+I2S(J4)elseset c7=c7+I2S(J4)+""endifset Mv=Mv+1if Nv thenset i=Q4[1]+Q4[2]+Q4[3]+Q4[4]+Q4[5]set i2=N4[1]+N4[2]+N4[3]+N4[4]+N4[5]set i5=q4[1]+q4[2]+q4[3]+q4[4]+q4[5]set i3=Q4[6]+Q4[7]+Q4[8]+Q4[9]+Q4[$A]set i4=N4[6]+N4[7]+N4[8]+N4[9]+N4[$A]set i6=q4[6]+q4[7]+q4[8]+q4[9]+q4[$A]set s="(織田:聯合) "+"殲敵 "+I2S(i5)+":"+I2S(i6)+" 殺敵 "+I2S(i)+":"+I2S(i3)+" 破陣 "+I2S(i2)+":"+I2S(i4)call MultiboardSetTitleText(H4,s)set id=GetPlayerId(GetLocalPlayer())+1if W4[id]>700 thenset W4[id]=700elseif W4[id]<75 thenset W4[id]=75endifcall TimerDialogSetTitle(bj_lastCreatedTimerDialog," 武將賞金 "+I2S(W4[id]))elsecall MultiboardSetTitleText(H4,"|cffffcc00信長之野望|r　"+c7)endifendfunctionfunction nC takes nothing returns nothinglocal integer i=1call mC()set i=1loopexitwhen i>$Aif h8[i]>0 thenset h8[i]=(h8[i]-1)call MultiboardSetItemValue(MultiboardGetItem(H4,i,6),I2S(h8[i]))elseset h8[i]=-1endifset i=i+1endloopendfunctionfunction oC takes nothing returns nothinglocal trigger rBlocal timer tset rB=CreateTrigger()call TriggerRegisterTimerEvent(rB,.0,false)call TriggerAddAction(rB,function kC)set t=CreateTimer()call TimerStart(t,1.,true,function nC)if GetPlayerId(GetLocalPlayer())+1<=4 thenset Ov=trueendifset rB=nullset t=nullendfunctionfunction pC takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local player p=LoadPlayerHandle(o,qB,5566)call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,0)call SetPlayerState(p,PLAYER_STATE_RESOURCE_LUMBER,0)set t=nullset p=nullendfunctionfunction qC takes nothing returns nothinglocal string s="|cffffcc00"+GetPlayerName(GetTriggerPlayer())+"|r逃離戰場，將他的黃金以及兵力均分給其他友軍玩家。"local integer i=0local integer i2=0local player p=GetTriggerPlayer()local integer wb=1local integer xb=1local integer yb=0local boolean b=falselocal timer t=CreateTimer()local integer qB=GetHandleId(t)if IsPlayerEnemy(p,Player(0))thenif m8 thenset n8=n8+4elseset n8=n8+1endifelseif m8 thenset e8=e8+4elseset e8=e8+1endifendifif Rg!=null thencall StartSound(Rg)endifif IsPlayerInForce(GetLocalPlayer(),bj_FORCE_ALL_PLAYERS)thencall DisplayTextToPlayer(GetLocalPlayer(),0,0,s)endifcall TriggerSleepAction(.0)set i=0loopexitwhen i>9if IsPlayerAlly(Player(i),p)and GetPlayerSlotState(Player(i))==PLAYER_SLOT_STATE_PLAYING thenset yb=yb+1set b=trueendifset i=i+1endloopif b==false thenset yb=1endifset xb=GetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_LUMBER)/ ybset wb=GetPlayerState(GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD)/ ybset i=0loopexitwhen i>9if IsPlayerAlly(Player(i),p)and GetPlayerSlotState(Player(i))==PLAYER_SLOT_STATE_PLAYING thencall SetPlayerAllianceStateBJ(GetTriggerPlayer(),Player(i),4)call SetPlayerState(Player(i),PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(Player(i),PLAYER_STATE_RESOURCE_GOLD)+wb)call SetPlayerState(Player(i),PLAYER_STATE_RESOURCE_LUMBER,GetPlayerState(Player(i),PLAYER_STATE_RESOURCE_LUMBER)+xb)endifset i=i+1endloopset i=GetPlayerId(p)+1call Yz(H4,0,i+1,25.,25.,25.,0)call KillUnit(V7[i])call SavePlayerHandle(o,qB,5566,p)call TimerStart(t,4.,true,function pC)set s=nullset p=nullset t=nullendfunctionfunction rC takes nothing returns nothinglocal trigger rB=CreateTrigger()local integer i=0loopexitwhen i>9call TriggerRegisterPlayerEvent(rB,Player(i),EVENT_PLAYER_LEAVE)set i=i+1endloopcall TriggerAddAction(rB,function qC)set rB=nullendfunctionfunction sC takes nothing returns nothingset k8[0]=CreateForce()set k8[1]=CreateForce()set A7=0set bj_forLoopAIndex=1set bj_forLoopAIndexEnd=$Aloopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndif(((GetPlayerController(Player(-1+(bj_forLoopAIndex)))==MAP_CONTROL_USER)and(GetPlayerSlotState(Player(-1+(bj_forLoopAIndex)))==PLAYER_SLOT_STATE_PLAYING)))thenset A7=(A7+1)if((IsPlayerEnemy(Player(-1+(bj_forLoopAIndex)),Player(0))))thencall ForceAddPlayer(k8[1],Player(-1+(bj_forLoopAIndex)))elsecall ForceAddPlayer(k8[0],Player(-1+(bj_forLoopAIndex)))endifendifset bj_forLoopAIndex=bj_forLoopAIndex+1endloopif((A7>1))thenelsecall DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,30.,"TRIGSTR_2908")set w4=truecall EnableTrigger(uh)call EnableTrigger(yh)call EnableTrigger(wh)call EnableTrigger(xh)call EnableTrigger(vh)endifcall DisableTrigger(GetTriggeringTrigger())endfunctionfunction uC takes nothing returns booleanreturn(((h4[(1+GetPlayerId(GetTriggerPlayer()))]==null)or(w4)))endfunctionfunction vC takes nothing returns nothinglocal player wC=GetTriggerPlayer()local integer xC=(1+GetPlayerId(wC))local unit SBlocal real xlocal real ylocal integer ilocal integer yClocal item zC=CreateItem(1718055527,0,0)local integer idif xC<=5 thenset x=7147.set y=-7410.set SB=PlaceRandomUnit(Ie,wC,x,y,270)elseset x=-7292.7set y=7087.5set SB=PlaceRandomUnit(Ie,wC,x,y,270)endifset h4[xC]=SBset py[xC]=SBset B4=SBif(GetLocalPlayer()==wC)thencall PanCameraToTimed(x,y,.1)endifcall UnitPoolRemoveUnitType(Ie,GetUnitTypeId(SB))set yC=GetUnitTypeId(SB)set id=GetUnitPointValue(SB)if Pv thenif id==326 thenset i=0loopexitwhen i>9call SetPlayerTechMaxAllowed(Player(i),yC,0)set i=i+1endloopelseif xC<=5 thenset i=0loopexitwhen i>4call SetPlayerTechMaxAllowed(Player(i),yC,0)set i=i+1endloopelseset i=5loopexitwhen i>9call SetPlayerTechMaxAllowed(Player(i),yC,0)set i=i+1endloopendifendifelseset i=0loopexitwhen i>9call SetPlayerTechMaxAllowed(Player(i),yC,0)set i=i+1endloopendifif w4==false thenset i=0loopexitwhen i>95call SetPlayerTechMaxAllowed(wC,p4[i],0)set i=i+1endloopendifcall UnitAddItem(SB,zC)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Awaken\\Awaken.mdl",SB,"overhead"))call SetPlayerState(wC,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(wC,PLAYER_STATE_RESOURCE_GOLD)+300)if(GetLocalPlayer()==wC)thencall ClearSelection()call SelectUnit(SB,true)endifcall SetPlayerName(wC,(q7[xC]+("("+(GetHeroProperName(SB)+")"))))call oA(H4,0,xC+1,P4[id])set a7=(a7+1)call ConditionalTriggerExecute(th)call TriggerRegisterUnitEvent(yi,SB,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(Ni,SB,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Ri,SB,EVENT_UNIT_SPELL_CAST)call TriggerRegisterUnitEvent(xi,SB,EVENT_UNIT_DEATH)if Q8[id]!=null thenif TriggerEvaluate(Q8[id])thencall TriggerExecute(Q8[id])endifelsecall RB(SB,id)endifset zC=nullset SB=nullset wC=nullendfunctionfunction aC takes nothing returns nothinglocal player wC=GetEnumPlayer()local integer xC=(1+GetPlayerId(wC))local unit SBlocal real xlocal real ylocal integer ilocal integer yClocal item zC=CreateItem(1718055527,0,0)local integer idif xC<=5 thenset x=7147.set y=-7410.set SB=CreateUnit(wC,p4[my],x,y,bj_UNIT_FACING)elseset x=-7292.7set y=7087.5set SB=CreateUnit(wC,p4[my],x,y,bj_UNIT_FACING)endifset h4[xC]=SBset py[xC]=SBset B4=SBif(GetLocalPlayer()==wC)thencall PanCameraToTimed(x,y,.1)endifif w4==false thenset i=0loopexitwhen i>95call SetPlayerTechMaxAllowed(wC,p4[i],0)set i=i+1endloopendifcall UnitAddItem(SB,zC)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Awaken\\Awaken.mdl",SB,"overhead"))if(GetLocalPlayer()==wC)thencall ClearSelection()call SelectUnit(SB,true)endifcall SetPlayerName(wC,(q7[xC]+("("+(GetHeroProperName(SB)+")"))))set id=GetUnitPointValue(SB)call oA(H4,0,xC+1,P4[id])set a7=(a7+1)call ConditionalTriggerExecute(th)call TriggerRegisterUnitEvent(yi,SB,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(Ni,SB,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Ri,SB,EVENT_UNIT_SPELL_CAST)call TriggerRegisterUnitEvent(xi,SB,EVENT_UNIT_DEATH)if Q8[id]!=null thenif TriggerEvaluate(Q8[id])thencall TriggerExecute(Q8[id])endifelsecall RB(SB,id)endifset SB=nullset wC=nullset zC=nullendfunctionfunction BC takes nothing returns booleanreturn(GetPlayerSlotState(GetFilterPlayer())==PLAYER_SLOT_STATE_PLAYING)endfunctionfunction bC takes nothing returns nothingif(Og!=null)thencall StartSound(Og)endifset p4[72]=1328558403set my=GetRandomInt(0,95)set Te=truecall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("<<已經啟動 |cffffcc00-crazy(大亂鬥)|r模式>>，將會十名相同武將出陣作戰"))call ForForce(Rz(Condition(function BC)),function aC)call DisableTrigger(nh)call DisableTrigger(oh)call DisableTrigger(ph)endfunctionfunction cC takes nothing returns booleanreturn(GetPlayerSlotState(GetFilterPlayer())==PLAYER_SLOT_STATE_PLAYING)endfunctionfunction DC takes nothing returns nothinglocal player wC=GetEnumPlayer()local integer xC=(1+GetPlayerId(wC))local unit SBlocal real xlocal real ylocal integer ilocal integer yClocal item zC=CreateItem(1718055527,0,0)local integer idif xC<=5 thenset x=7147.set y=-7410.set SB=PlaceRandomUnit(Ie,wC,x,y,270)elseset x=-7292.7set y=7087.5set SB=PlaceRandomUnit(Ie,wC,x,y,270)endifcall UnitPoolRemoveUnitType(Ie,GetUnitTypeId(SB))set h4[xC]=SBset py[xC]=SBset B4=SBif(GetLocalPlayer()==wC)thencall PanCameraToTimed(x,y,.1)endifif w4==false thenset i=0loopexitwhen i>95call SetPlayerTechMaxAllowed(wC,p4[i],0)set i=i+1endloopendifcall UnitAddItem(SB,zC)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Awaken\\Awaken.mdl",SB,"overhead"))if(GetLocalPlayer()==wC)thencall ClearSelection()call SelectUnit(SB,true)endifcall SetPlayerName(wC,(q7[xC]+("("+(GetHeroProperName(SB)+")"))))set id=GetUnitPointValue(SB)call oA(H4,0,xC+1,P4[id])set a7=(a7+1)call ConditionalTriggerExecute(th)call TriggerRegisterUnitEvent(yi,SB,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(xi,SB,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Ni,SB,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Ri,SB,EVENT_UNIT_SPELL_CAST)if Q8[id]!=null thenif TriggerEvaluate(Q8[id])thencall TriggerExecute(Q8[id])endifelsecall RB(SB,id)endifset SB=nullset wC=nullset zC=nullendfunctionfunction EC takes nothing returns nothingif(Og!=null)thencall StartSound(Og)endifcall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("<<已經啟動 |cffffcc00-AH(群雄集結)|r模式>>，將會從雙方及中立武將當中隨機出陣作戰"))call ForForce(Rz(Condition(function cC)),function DC)call DisableTrigger(nh)call DisableTrigger(oh)call DisableTrigger(ph)endfunctionfunction GC takes nothing returns nothinglocal player wC=GetOwningPlayer(GetBuyingUnit())local integer xC=(1+GetPlayerId(wC))local unit SB=GetSoldUnit()local real xlocal real ylocal integer ilocal integer yClocal integer idlocal item zC=CreateItem(1718055527,0,0)if xC<=5 thenset x=7147.set y=-7410.call SetUnitPosition(SB,x,y)elseset x=-7292.7set y=7087.5call SetUnitPosition(SB,x,y)endifset h4[xC]=SBset py[xC]=SBset B4=SBif(GetLocalPlayer()==wC)thencall PanCameraToTimed(x,y,.1)endifset yC=GetUnitTypeId(SB)set id=GetUnitPointValue(SB)call UnitPoolRemoveUnitType(Ie,GetUnitTypeId(SB))if Pv thenif id==326 thenset i=0loopexitwhen i>9call SetPlayerTechMaxAllowed(Player(i),yC,0)set i=i+1endloopelseif xC<=5 thenset i=0loopexitwhen i>4call SetPlayerTechMaxAllowed(Player(i),yC,0)set i=i+1endloopelseset i=5loopexitwhen i>9call SetPlayerTechMaxAllowed(Player(i),yC,0)set i=i+1endloopendifendifelseset i=0loopexitwhen i>9call SetPlayerTechMaxAllowed(Player(i),yC,0)set i=i+1endloopendifif w4==false thenset i=0loopexitwhen i>95call SetPlayerTechMaxAllowed(wC,p4[i],0)set i=i+1endloopendifcall UnitAddItem(SB,zC)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Awaken\\Awaken.mdl",SB,"overhead"))if(GetLocalPlayer()==wC)thencall ClearSelection()call SelectUnit(SB,true)endifcall SetPlayerName(wC,(q7[xC]+("("+(GetHeroProperName(SB)+")"))))call oA(H4,0,xC+1,P4[id])set a7=(a7+1)call ConditionalTriggerExecute(th)call TriggerRegisterUnitEvent(yi,SB,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(xi,SB,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Ni,SB,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Ri,SB,EVENT_UNIT_SPELL_CAST)if Q8[id]!=null thenif TriggerEvaluate(Q8[id])thencall TriggerExecute(Q8[id])endifelsecall RB(SB,id)endifset SB=nullset wC=nullset zC=nullendfunctionfunction IC takes nothing returns nothingset p4[0]=1316186739set p4[1]=1214345844set p4[2]=1215324721set p4[3]=1214344820set p4[4]=1165261170set p4[5]=1215324722set p4[6]=1214539631set p4[7]=1214996844set p4[8]=1215128178set p4[9]=1215063922set p4[$A]=1164207469set p4[$B]=1215324524set p4[$C]=1215130471set p4[$D]=1315070563set p4[$E]=1433168227set p4[$F]=1432580716set p4[16]=1211117890set p4[17]=1211118410set p4[18]=1211117647set p4[19]=1211118168set p4[20]=1211117656set p4[21]=1211118393set p4[22]=1211117872set p4[23]=1211117648set p4[24]=1211117894set p4[25]=1211117881set p4[26]=1211117651set p4[27]=1160785991set p4[28]=1211117878set p4[29]=1211118388set p4[30]=1211117876set p4[31]=1328558164set p4[32]=1328558402set p4[33]=1328558405set p4[34]=1328558407set p4[35]=1429221430set p4[36]=1332178020set p4[37]=1332898670set p4[38]=1214734701set p4[39]=1214931305set p4[40]=1332961645set p4[41]=1332179560set p4[42]=1331982964set p4[43]=1331850337set p4[44]=1332109682set p4[45]=1333027688set p4[46]=1332963428set p4[47]=1432646245set p4[48]=1328558158set p4[49]=1328558156set p4[50]=1328558153set p4[51]=1328558150set p4[52]=1328558410set p4[53]=1211118157set p4[54]=1328558131set p4[55]=1328558390set p4[56]=1328558157set p4[57]=1328558151set p4[58]=1328558401set p4[59]=1328558152set p4[60]=1328558148set p4[61]=1328558137set p4[62]=1328558145set p4[63]=1328558404set p4[64]=1328558130set p4[65]=1328558169set p4[66]=1328558162set p4[67]=1328558134set p4[68]=1328558406set p4[69]=1328558409set p4[70]=1328558146set p4[71]=1328558154set p4[72]=1429221426set p4[73]=1328558392set p4[74]=1211118133set p4[75]=1328558393set p4[76]=1328558136set p4[77]=1328558414set p4[78]=1211118390set p4[79]=1328558415set p4[80]=1211118150set p4[81]=1211117880set p4[82]=1160785968set p4[83]=1328558128set p4[84]=1328558403set p4[85]=1429221429set p4[86]=1328558163set p4[87]=1328558165set p4[88]=1328558160set p4[89]=1433231724set p4[90]=1433824871set p4[91]=1214345325set p4[92]=1333028978set p4[93]=1332766568set p4[94]=1316252014set p4[95]=1432642913set Q8[101]=ynset Q8[104]=Fnset Q8[105]=Lnset Q8[106]=Snset Q8[107]=Tnset Q8[108]=Wnset Q8[109]=Ynset Q8[110]=joset Q8[111]=poset Q8[112]=uoset Q8[113]=aoset Q8[115]=coset Q8[116]=Foset Q8[117]=Koset Q8[118]=Ooset Q8[119]=Uoset Q8[120]=Yoset Q8[121]=jpset Q8[122]=ppset Q8[123]=xpset Q8[124]=apset Q8[125]=Epset Q8[$7E]=Gpset Q8[$7F]=lpset Q8[$80]=Mpset Q8[$81]=Spset Q8[$82]=Xpset Q8[$83]=eqset Q8[$84]=iqset Q8[$85]=mqset Q8[$86]=sqset Q8[$87]=Aqset Q8[$88]=Hqset Q8[$CB]=gjset Q8[$CE]=ojset Q8[$CF]=qjset Q8[$D0]=xjset Q8[$D2]=Bjset Q8[$D3]=Djset Q8[$D4]=Ljset Q8[$D5]=Sjset Q8[$D6]=Xjset Q8[$D8]=hkset Q8[$D9]=okset Q8[$DA]=tkset Q8[$DB]=Akset Q8[$DD]=Hkset Q8[$DE]=Lkset Q8[$DF]=Okset Q8[$E0]=Rkset Q8[$E1]=Vkset Q8[$E2]=dmset Q8[$E4]=nmset Q8[$E5]=rmset Q8[$E6]=vmset Q8[$E7]=amset Q8[$E8]=Emset Q8[$E9]=Jmset Q8[$EA]=Vmset Q8[$EB]=dnset Q8[$EC]=jnset Q8[$F0]=qnset Q8[301]=Kqset Q8[303]=Pqset Q8[305]=Vqset Q8[306]=drset Q8[307]=hrset Q8[309]=mrset Q8[310]=rrset Q8[312]=wrset Q8[314]=Crset Q8[315]=lrset Q8[316]=Nrset Q8[317]=Rrset Q8[318]=Wrset Q8[319]=Yrset Q8[320]=fsset Q8[322]=osset Q8[323]=wsset Q8[324]=bsset Q8[325]=Isset Q8[326]=Psset Q8[327]=Vsset Q8[329]=Xsset Q8[340]=Wscall DestroyTrigger(GetTriggeringTrigger())endfunctionfunction JC takes nothing returns nothinglocal integer KCset Ie=CreateUnitPool()set KC=0loopexitwhen KC>95call UnitPoolAddUnitType(Ie,p4[KC],1)set KC=KC+1endloopendfunctionfunction MC takes nothing returns booleanreturn((A7==a7))endfunctionfunction NC takes nothing returns nothingcall RemoveUnit(GetEnumUnit())endfunctionfunction OC takes nothing returns nothinglocal group PClocal unit QCif((w4==false))thenset bj_forLoopAIndex=1set bj_forLoopAIndexEnd=$Aloopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndset F4=Vz(Player(-1+(bj_forLoopAIndex)),1747988804)call ForGroupBJ(F4,function NC)call DestroyGroup(F4)call GroupClear(F4)set bj_forLoopAIndex=bj_forLoopAIndex+1endloopendifset PC=nullset QC=nullendfunctionfunction SC takes nothing returns nothingset g4[(1+GetPlayerId(GetTriggerPlayer()))]=GetTriggerUnit()endfunctionfunction UC takes nothing returns nothingif((Zy(g4[(1+GetPlayerId(GetTriggerPlayer()))],UNIT_TYPE_HERO)))thencall SetHeroLevelBJ(g4[(1+GetPlayerId(GetTriggerPlayer()))],(GetHeroLevel(g4[(1+GetPlayerId(GetTriggerPlayer()))])+S2I(SubStringBJ(GetEventPlayerChatString(),5,6))),true)endifendfunctionfunction WC takes nothing returns nothingcall AdjustPlayerStateBJ($F4240,GetTriggerPlayer(),PLAYER_STATE_RESOURCE_GOLD)call AdjustPlayerStateBJ($F4240,GetTriggerPlayer(),PLAYER_STATE_RESOURCE_LUMBER)endfunctionfunction YC takes nothing returns nothingcall UnitResetCooldown(g4[(1+GetPlayerId(GetTriggerPlayer()))])endfunctionfunction dc takes nothing returns nothingcall SetUnitLifePercentBJ(g4[(1+GetPlayerId(GetTriggerPlayer()))],100)call SetUnitManaPercentBJ(g4[(1+GetPlayerId(GetTriggerPlayer()))],100)endfunctionfunction gc takes nothing returns nothingcall SetPlayerState(GetEnumPlayer(),PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(GetEnumPlayer(),PLAYER_STATE_RESOURCE_GOLD)+e8)endfunctionfunction hc takes nothing returns nothingcall SetPlayerState(GetEnumPlayer(),PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(GetEnumPlayer(),PLAYER_STATE_RESOURCE_GOLD)+n8)endfunctionfunction ic takes nothing returns nothingcall ForForce(k8[0],function gc)call ForForce(k8[1],function hc)endfunctionfunction kc takes nothing returns nothingcall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("|cffffCC00"+("獲得犒賞|r")))call AdjustPlayerStateBJ(350,Player(0),PLAYER_STATE_RESOURCE_GOLD)call AdjustPlayerStateBJ(350,Player(1),PLAYER_STATE_RESOURCE_GOLD)call AdjustPlayerStateBJ(350,Player(2),PLAYER_STATE_RESOURCE_GOLD)call AdjustPlayerStateBJ(350,Player(3),PLAYER_STATE_RESOURCE_GOLD)call AdjustPlayerStateBJ(350,Player(4),PLAYER_STATE_RESOURCE_GOLD)call AdjustPlayerStateBJ(350,Player(5),PLAYER_STATE_RESOURCE_GOLD)call AdjustPlayerStateBJ(350,Player(6),PLAYER_STATE_RESOURCE_GOLD)call AdjustPlayerStateBJ(350,Player(7),PLAYER_STATE_RESOURCE_GOLD)call AdjustPlayerStateBJ(350,Player(8),PLAYER_STATE_RESOURCE_GOLD)call AdjustPlayerStateBJ(350,Player(9),PLAYER_STATE_RESOURCE_GOLD)call AdjustPlayerStateBJ(5,Player(0),PLAYER_STATE_RESOURCE_LUMBER)call AdjustPlayerStateBJ(5,Player(1),PLAYER_STATE_RESOURCE_LUMBER)call AdjustPlayerStateBJ(5,Player(2),PLAYER_STATE_RESOURCE_LUMBER)call AdjustPlayerStateBJ(5,Player(3),PLAYER_STATE_RESOURCE_LUMBER)call AdjustPlayerStateBJ(5,Player(4),PLAYER_STATE_RESOURCE_LUMBER)call AdjustPlayerStateBJ(5,Player(5),PLAYER_STATE_RESOURCE_LUMBER)call AdjustPlayerStateBJ(5,Player(6),PLAYER_STATE_RESOURCE_LUMBER)call AdjustPlayerStateBJ(5,Player(7),PLAYER_STATE_RESOURCE_LUMBER)call AdjustPlayerStateBJ(5,Player(8),PLAYER_STATE_RESOURCE_LUMBER)call AdjustPlayerStateBJ(5,Player(9),PLAYER_STATE_RESOURCE_LUMBER)endfunctionfunction nc takes nothing returns booleanreturn((GetUnitState(Av,UNIT_STATE_LIFE)<=.0)and(GetUnitState(Bv,UNIT_STATE_LIFE)<=.0)and(GetUnitState(kt,UNIT_STATE_LIFE)<=.0)and(GetUnitState(nt,UNIT_STATE_LIFE)<=.0)and(GetUnitState(ot,UNIT_STATE_LIFE)<=.0)and(GetUnitState(Rt,UNIT_STATE_LIFE)<=.0)and(GetUnitState(St,UNIT_STATE_LIFE)<=.0)and(GetUnitState(Tt,UNIT_STATE_LIFE)<=.0)and(GetUnitState(Ut,UNIT_STATE_LIFE)<=.0)and(GetUnitState(Ot,UNIT_STATE_LIFE)<=.0)and(GetUnitState(Qt,UNIT_STATE_LIFE)<=.0)and(GetUnitState(ru,UNIT_STATE_LIFE)<=.0)and(GetUnitState(du,UNIT_STATE_LIFE)<=.0)and(GetUnitState(Et,UNIT_STATE_LIFE)<=.0)and(GetUnitState(Ft,UNIT_STATE_LIFE)<=.0)and(GetUnitState(Gt,UNIT_STATE_LIFE)<=.0)and(GetUnitState(Ht,UNIT_STATE_LIFE)<=.0))endfunctionfunction oc takes nothing returns nothingcall SetPlayerTechResearchedSwap(1378889800,1,Player($B))call PlaySoundBJ(Ig)call KillSoundWhenDone(bj_lastPlayedSound)call DisplayTextToForce(bj_FORCE_ALL_PLAYERS,"TRIGSTR_9966")endfunctionfunction qc takes nothing returns booleanreturn((GetUnitState(gu,UNIT_STATE_LIFE)<=.0)and(GetUnitState(sv,UNIT_STATE_LIFE)<=.0)and(GetUnitState(Mu,UNIT_STATE_LIFE)<=.0)and(GetUnitState(lu,UNIT_STATE_LIFE)<=.0)and(GetUnitState(Iu,UNIT_STATE_LIFE)<=.0)and(GetUnitState(Nu,UNIT_STATE_LIFE)<=.0)and(GetUnitState(Qu,UNIT_STATE_LIFE)<=.0)and(GetUnitState(Pu,UNIT_STATE_LIFE)<=.0)and(GetUnitState(Ou,UNIT_STATE_LIFE)<=.0)and(GetUnitState(Zu,UNIT_STATE_LIFE)<=.0)and(GetUnitState(dv,UNIT_STATE_LIFE)<=.0)and(GetUnitState(fv,UNIT_STATE_LIFE)<=.0)and(GetUnitState(ev,UNIT_STATE_LIFE)<=.0)and(GetUnitState(nv,UNIT_STATE_LIFE)<=.0)and(GetUnitState(ov,UNIT_STATE_LIFE)<=.0)and(GetUnitState(kv,UNIT_STATE_LIFE)<=.0)and(GetUnitState(mv,UNIT_STATE_LIFE)<=.0))endfunctionfunction rc takes nothing returns nothingcall SetPlayerTechResearchedSwap(1378889800,1,Player($A))call DisplayTextToForce(bj_FORCE_ALL_PLAYERS,"TRIGSTR_11257")call PlaySoundBJ(Ig)call KillSoundWhenDone(bj_lastPlayedSound)endfunctionfunction uc takes nothing returns nothingcall AdjustPlayerStateBJ(100,GetEnumPlayer(),PLAYER_STATE_RESOURCE_GOLD)endfunctionfunction vc takes nothing returns nothingcall AdjustPlayerStateBJ($C8,GetEnumPlayer(),PLAYER_STATE_RESOURCE_GOLD)endfunctionfunction wc takes nothing returns nothingcall PlaySoundBJ(Qg)call KillSoundWhenDone(bj_lastPlayedSound)set f4=Qz(GetOwningPlayer(GetTriggerUnit()))if((GetOwningPlayer(GetKillingUnit())!=Y8[0])and(GetOwningPlayer(GetKillingUnit())!=Z8[0])and(GetOwningPlayer(GetKillingUnit())!=Player($C)))thencall ForForce(f4,function vc)if((IsPlayerAlly(GetOwningPlayer(GetTriggerUnit()),Player(0))))thenif((Te))thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("|CFFFFCC00"+(GetPlayerName(GetOwningPlayer(GetKillingUnit()))+" |r已經成功的摧毀敵軍的防線，聯合軍將士獲得犒賞|cffff9900 200 |r黃金")))elsecall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("|CFFFFCC00"+(GetHeroProperName(h4[(1+GetPlayerId(GetOwningPlayer(GetKillingUnit())))])+" |r已經成功的摧毀敵軍的防線，聯合軍將士獲得犒賞|cffff9900 200 |r黃金")))endifelseif((Te))thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("|CFFFFCC00"+(GetPlayerName(GetOwningPlayer(GetKillingUnit()))+" |r已經成功的摧毀敵軍的防線，織田軍將士獲得犒賞|cffff9900 200 |r黃金")))elsecall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("|CFFFFCC00"+(GetHeroProperName(h4[(1+GetPlayerId(GetOwningPlayer(GetKillingUnit())))])+" |r已經成功的摧毀敵軍的防線，織田軍將士獲得犒賞|cffff9900 200 |r黃金")))endifendifelseif((GetOwningPlayer(GetKillingUnit())!=Player($C)))thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,(GetPlayerName(GetOwningPlayer(GetKillingUnit()))+("已"+("經成功的攻下敵人的防線!"+(GetPlayerName(GetOwningPlayer(GetKillingUnit()))+"將士獲得犒賞|CFFFFCC22 100 |R黃金")))))call ForForce(f4,function uc)elsecall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("|CFFFFCC00"+(GetUnitName(GetKillingUnit())+"|R成功攻陷軍隊的防線!")))endifendifcall DestroyForce(f4)endfunctionfunction yc takes nothing returns nothingcall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("|CFFFF0000"+(GetUnitName(GetTriggerUnit())+"|R已被殲滅!")))endfunctionfunction Ac takes nothing returns nothingif((GetOwningPlayer(GetTriggerUnit())==Z8[0]))thencall DisplayTextToForce(k8[1],("|CFFFF0000"+(GetUnitName(GetTriggerUnit())+"|R已被殲滅!敵人攻入大本營了!")))elsecall DisplayTextToForce(k8[0],("|CFFFF0000"+(GetUnitName(GetTriggerUnit())+"|R已被殲滅!敵人攻入大本營了!")))endifendfunctionfunction Bc takes nothing returns nothingcall AdjustPlayerStateBJ(400,GetEnumPlayer(),PLAYER_STATE_RESOURCE_GOLD)endfunctionfunction bc takes nothing returns nothinglocal unit u1=GetTriggerUnit()set f4=Qz(GetOwningPlayer(u1))if((GetOwningPlayer(u1)==Z8[0]))thencall DisplayTextToForce(f4,"|cFFFFDEAD突破對方陣地！織田軍將士獲得犒賞|r|cFFFF9900 400 |r|cFFFFDEAD黃金|r")elsecall DisplayTextToForce(f4,"|cFFFFDEAD突破對方陣地！聯合軍將士獲得犒賞|r|cFFFF9900 400 |r|cFFFFDEAD黃金|r")endifcall ForForce(f4,function Bc)call DestroyForce(f4)if(u1==Iu)thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("聯合軍上路軍營已經淪陷!!"))endifif(u1==lu)thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("聯合軍中路軍營已經淪陷!!"))endifif(u1==Mu)thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("聯合軍下路軍營已經淪陷!!"))endifif(u1==kt)thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("織田軍上路軍營已經淪陷!!"))endifif(u1==nt)thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("織田軍中路軍營已經淪陷!!"))endifif(u1==ot)thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("織田軍下路軍營已經淪陷!!"))endifif(u1==Lu)thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("聯合軍上路騎兵營已經淪陷!!"))endifif(u1==Ku)thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("聯合軍中路騎兵營已經淪陷!!"))endifif(u1==Ju)thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("聯合軍下路騎兵營已經淪陷!!"))endifif(u1==xt)thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("織田軍上路騎兵營已經淪陷!!"))endifif(u1==vt)thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("織田軍中路騎兵營已經淪陷!!"))endifif(u1==ut)thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("織田軍下路騎兵營已經淪陷!!"))endifset u1=nullendfunctionfunction cc takes nothing returns nothingcall PauseUnit(GetEnumUnit(),true)endfunctionfunction Dc takes nothing returns booleanreturn(((Zy(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(GetOwningPlayer(GetFilterUnit())==Z8[0])))endfunctionfunction Ec takes nothing returns nothingcall AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl")call DestroyEffect(bj_lastCreatedEffect)endfunctionfunction Fc takes nothing returns nothinglocal group PClocal unit QCset bj_forLoopAIndex=1set bj_forLoopAIndexEnd=$Aloopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndcall CreateFogModifierRectBJ(true,Player(-1+(bj_forLoopAIndex)),FOG_OF_WAR_VISIBLE,bj_mapInitialPlayableArea)set bj_forLoopAIndex=bj_forLoopAIndex+1endloopset bj_forLoopAIndex=1set bj_forLoopAIndexEnd=5loopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndif((GetPlayerController(Player(-1+(bj_forLoopAIndex)))!=MAP_CONTROL_USER))thenset V4[bj_forLoopAIndex]=-99999elseset V4[bj_forLoopAIndex]=(((q4[bj_forLoopAIndex]*1)+(Q4[bj_forLoopAIndex]*25))+(((O4[bj_forLoopAIndex]*$F)+(N4[bj_forLoopAIndex]*40))-(R4[bj_forLoopAIndex]*25)))endifset bj_forLoopAIndex=bj_forLoopAIndex+1endloopset d4[0]=1set bj_forLoopBIndex=2set bj_forLoopBIndexEnd=5loopexitwhen bj_forLoopBIndex>bj_forLoopBIndexEndif((V4[bj_forLoopBIndex]>V4[d4[0]])and(GetPlayerController(Player(-1+(bj_forLoopBIndex)))==MAP_CONTROL_USER))thenset d4[0]=bj_forLoopBIndexendifset bj_forLoopBIndex=bj_forLoopBIndex+1endloopcall SetUnitInvulnerable(xu,true)set F4=(Uz((bj_mapInitialPlayableArea),null))call ForGroupBJ(F4,function cc)set t7=Uz(bj_mapInitialPlayableArea,Condition(function Dc))call ForGroupBJ(t7,function Ec)call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,10.,"TRIGSTR_12430")set r4[2]=GetTriggerUnit()call EnableTrigger(Gh)call CinematicModeBJ(true,bj_FORCE_ALL_PLAYERS)call PanCameraToTimed(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),1.5)call SetCameraField(CAMERA_FIELD_FIELD_OF_VIEW,bj_CAMERA_DEFAULT_FOV,0)call TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS,h4[d4[0]],"TRIGSTR_099",null,("此場戰事在"+(("|cffff9900"+(GetPlayerName(GetOwningPlayer(h4[d4[0]]))+"|r"))+"英勇地領率下 , 為織田軍拿下勝利 !")),0,0,true)call PlayMusicBJ(cg)call DisableTrigger(Gh)call CinematicModeBJ(false,bj_FORCE_ALL_PLAYERS)call DisableTrigger(GetTriggeringTrigger())set PC=nullset QC=nullendfunctionfunction Hc takes nothing returns nothingcall PauseUnit(GetEnumUnit(),true)endfunctionfunction Ic takes nothing returns booleanreturn(((Zy(GetFilterUnit(),UNIT_TYPE_STRUCTURE))and(GetOwningPlayer(GetFilterUnit())==Y8[0])))endfunctionfunction lc takes nothing returns nothingcall AddSpecialEffectLocBJ(GetUnitLoc(GetEnumUnit()),"Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl")call DestroyEffect(bj_lastCreatedEffect)endfunctionfunction Jc takes nothing returns nothinglocal group PClocal unit QCset bj_forLoopAIndex=1set bj_forLoopAIndexEnd=$Aloopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndcall CreateFogModifierRectBJ(true,Player(-1+(bj_forLoopAIndex)),FOG_OF_WAR_VISIBLE,bj_mapInitialPlayableArea)set bj_forLoopAIndex=bj_forLoopAIndex+1endloopcall SetUnitInvulnerable(wu,true)set bj_forLoopAIndex=6set bj_forLoopAIndexEnd=$Aloopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndif((GetPlayerController(Player(-1+(bj_forLoopAIndex)))!=MAP_CONTROL_USER))thenset V4[bj_forLoopAIndex]=-99999elseset V4[bj_forLoopAIndex]=(((q4[bj_forLoopAIndex]*1)+(Q4[bj_forLoopAIndex]*25))+(((O4[bj_forLoopAIndex]*$F)+(N4[bj_forLoopAIndex]*40))-(R4[bj_forLoopAIndex]*25)))endifset bj_forLoopAIndex=bj_forLoopAIndex+1endloopset d4[0]=6set bj_forLoopBIndex=7set bj_forLoopBIndexEnd=$Aloopexitwhen bj_forLoopBIndex>bj_forLoopBIndexEndif((V4[bj_forLoopBIndex]>V4[d4[0]])and(GetPlayerController(Player(-1+(bj_forLoopBIndex)))==MAP_CONTROL_USER))thenset d4[0]=bj_forLoopBIndexendifset bj_forLoopBIndex=bj_forLoopBIndex+1endloopset F4=(Uz((bj_mapInitialPlayableArea),null))call ForGroupBJ(F4,function Hc)set t7=Uz(bj_mapInitialPlayableArea,Condition(function Ic))call ForGroupBJ(t7,function lc)set r4[2]=GetTriggerUnit()call EnableTrigger(Gh)call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,10.,"TRIGSTR_2166")call CinematicModeBJ(true,bj_FORCE_ALL_PLAYERS)call PanCameraToTimed(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),1.5)call SetCameraField(CAMERA_FIELD_FIELD_OF_VIEW,bj_CAMERA_DEFAULT_FOV,0)call TransmissionFromUnitWithNameBJ(bj_FORCE_ALL_PLAYERS,h4[d4[0]],"TRIGSTR_099",null,("此場戰事在"+(("|cffff9900"+(GetPlayerName(GetOwningPlayer(h4[d4[0]]))+"|r"))+"英勇地領率下 , 為聯合軍拿下勝利 !")),0,0,true)call CinematicModeBJ(false,bj_FORCE_ALL_PLAYERS)call DisableTrigger(Gh)call PlayMusicBJ(cg)set PC=nullset QC=nullendfunctionfunction Lc takes nothing returns nothingcall AddSpecialEffectLocBJ(fz(GetUnitLoc(r4[2]),GetRandomReal(50.,400.),GetRandomReal(0,360)),"Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl")call DestroyEffect(bj_lastCreatedEffect)endfunctionfunction Nc takes nothing returns nothingif((GetOwningPlayer(GetTriggerUnit())==Y8[0]))thenif((IsUnitAliveBJ(Av)==false)and(IsUnitAliveBJ(Bv)==false))thencall UnitRemoveAbility(xu,1093677143)endifelseif((IsUnitAliveBJ(gu)==false)and(IsUnitAliveBJ(sv)==false))thencall UnitRemoveAbility(wu,1093677143)endifendifendfunctionfunction Pc takes nothing returns nothingcall SetUnitUserData(pu,51)call TriggerRegisterUnitEvent(Ch,pu,EVENT_UNIT_DEATH)call SetUnitUserData(nu,61)call TriggerRegisterUnitEvent(Ch,nu,EVENT_UNIT_DEATH)call IssuePointOrderById(pu,$D000F,M8[51],N8[51])call IssuePointOrderById(nu,$D000F,M8[61],N8[61])call DisableTrigger(GetTriggeringTrigger())endfunctionfunction Rc takes nothing returns nothinglocal unit u=GetTriggerUnit()local integer Scif u==nu or u==pu thencall SetUnitUserData(u,GetUnitUserData(u)+1)set Sc=GetUnitUserData(u)if Sc==55 thencall SetUnitUserData(u,51)set Sc=51elseif Sc==65 thencall SetUnitUserData(u,61)set Sc=61endifendifcall IssuePointOrderById(u,$D000F,M8[Sc],N8[Sc])endifset u=nullendfunctionfunction Uc takes nothing returns nothingif((GetOwningPlayer(GetTriggerUnit())==Y8[0]))thencall IssuePointOrderById(GetTriggerUnit(),$D000F,M8[8],N8[8])call SetUnitUserData(GetTriggerUnit(),8)elseif((GetOwningPlayer(GetTriggerUnit())==Z8[0]))thencall IssuePointOrderById(GetTriggerUnit(),$D000F,M8[7],N8[7])call SetUnitUserData(GetTriggerUnit(),7)endifendifendfunctionfunction Wc takes nothing returns nothinglocal unit u=GetTriggerUnit()if((GetOwningPlayer(u)==Y8[0]))thencall IssuePointOrderById(u,$D000F,M8[8],N8[8])elseif((GetOwningPlayer(u)==Z8[0]))thencall IssuePointOrderById(u,$D000F,M8[7],N8[7])endifendifset u=nullendfunctionfunction Yc takes nothing returns nothinglocal integer ilocal integer Zclocal integer iBlocal integer dDlocal unit u3set i=1set Zc=(3+D4)loopexitwhen i>Zcset iB=1set dD=3loopexitwhen iB>dDset u3=CreateUnit(Y8[0],1751543663,M8[iB],N8[iB],O8[iB])call IssuePointOrderById(u3,$D000F,M8[(iB+8)],N8[(iB+8)])set iB=iB+1endloopset iB=4set dD=6loopexitwhen iB>dDset u3=CreateUnit(Z8[0],1751543663,M8[iB],N8[iB],O8[iB])call IssuePointOrderById(u3,$D000F,M8[(iB+5)],N8[(iB+5)])set iB=iB+1endloopset i=i+1endloopset i=1set Zc=(2+E4)loopexitwhen i>Zcset iB=1set dD=3loopexitwhen iB>dDset u3=CreateUnit(Y8[0],1752003693,M8[iB],N8[iB],O8[iB])call IssuePointOrderById(u3,$D000F,M8[(iB+8)],N8[(iB+8)])set iB=iB+1endloopset iB=4set dD=6loopexitwhen iB>dDset u3=CreateUnit(Z8[0],1752003693,M8[iB],N8[iB],O8[iB])call IssuePointOrderById(u3,$D000F,M8[(iB+5)],N8[(iB+5)])set iB=iB+1endloopset i=i+1endloopset u3=nullendfunctionfunction fD takes nothing returns nothinglocal integer ilocal integer Zclocal unit u3set i=1set Zc=3loopexitwhen i>Zcset u3=CreateUnit(Y8[0],1869836407,M8[i],N8[i],O8[i])call IssuePointOrderById(u3,$D000F,M8[(i+8)],N8[(i+8)])set u3=CreateUnit(Y8[0],1869836407,M8[i],N8[i],O8[i])call IssuePointOrderById(u3,$D000F,M8[(i+8)],N8[(i+8)])set i=i+1endloopset i=4set Zc=6loopexitwhen i>Zcset u3=CreateUnit(Z8[0],1869836407,M8[i],N8[i],O8[i])call IssuePointOrderById(u3,$D000F,M8[(i+5)],N8[(i+5)])set u3=CreateUnit(Z8[0],1869836407,M8[i],N8[i],O8[i])call IssuePointOrderById(u3,$D000F,M8[(i+5)],N8[(i+5)])set i=i+1endloopset u3=nullendfunctionfunction hD takes nothing returns nothinglocal integer ilocal integer Zclocal unit u3set i=1set Zc=3loopexitwhen i>Zcset u3=CreateUnit(Y8[0],1751871081,M8[i],N8[i],O8[i])call IssuePointOrderById(u3,$D000F,M8[(i+8)],N8[(i+8)])if((S4[i]==1))thenset u3=CreateUnit(Y8[0],1747988819,M8[i],N8[i],O8[i])call IssuePointOrderById(u3,$D000F,M8[(i+8)],N8[(i+8)])endifset i=i+1endloopset i=4set Zc=6loopexitwhen i>Zcset u3=CreateUnit(Z8[0],1751871081,M8[i],N8[i],O8[i])call IssuePointOrderById(u3,$D000F,M8[(i+5)],N8[(i+5)])if((S4[i]==1))thenset u3=CreateUnit(Z8[0],1747988819,M8[i],N8[i],O8[i])call IssuePointOrderById(u3,$D000F,M8[(i+5)],N8[(i+5)])endifset i=i+1endloopset u3=nullendfunctionfunction jD takes nothing returns nothingset bj_forLoopAIndex=1set bj_forLoopAIndexEnd=(3+D4)loopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndset bj_forLoopBIndex=9set bj_forLoopBIndexEnd=$Bloopexitwhen bj_forLoopBIndex>bj_forLoopBIndexEndcall CreateNUnitsAtLoc(1,1751543663,Y8[0],l7[(bj_forLoopBIndex-8)],O8[(bj_forLoopBIndex-8)])call IssuePointOrderById(bj_lastCreatedUnit,$D000F,M8[bj_forLoopBIndex],N8[bj_forLoopBIndex])call SetUnitUserData(bj_lastCreatedUnit,bj_forLoopBIndex)set bj_forLoopBIndex=bj_forLoopBIndex+1endloopset bj_forLoopBIndex=9set bj_forLoopBIndexEnd=$Bloopexitwhen bj_forLoopBIndex>bj_forLoopBIndexEndcall CreateNUnitsAtLoc(1,1751543663,Z8[0],l7[(bj_forLoopBIndex-5)],O8[(bj_forLoopBIndex-5)])call IssuePointOrderById(bj_lastCreatedUnit,$D000F,M8[bj_forLoopBIndex],N8[bj_forLoopBIndex])call SetUnitUserData(bj_lastCreatedUnit,bj_forLoopBIndex)set bj_forLoopBIndex=bj_forLoopBIndex+1endloopset bj_forLoopAIndex=bj_forLoopAIndex+1endloopset bj_forLoopAIndex=1set bj_forLoopAIndexEnd=(2+E4)loopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndset bj_forLoopBIndex=9set bj_forLoopBIndexEnd=$Bloopexitwhen bj_forLoopBIndex>bj_forLoopBIndexEndcall CreateNUnitsAtLoc(1,1752003693,Y8[0],l7[(bj_forLoopBIndex-8)],O8[(bj_forLoopBIndex-8)])call IssuePointOrderById(bj_lastCreatedUnit,$D000F,M8[bj_forLoopBIndex],N8[bj_forLoopBIndex])call SetUnitUserData(bj_lastCreatedUnit,bj_forLoopBIndex)set bj_forLoopBIndex=bj_forLoopBIndex+1endloopset bj_forLoopBIndex=9set bj_forLoopBIndexEnd=$Bloopexitwhen bj_forLoopBIndex>bj_forLoopBIndexEndcall CreateNUnitsAtLoc(1,1752003693,Z8[0],l7[(bj_forLoopBIndex-5)],O8[(bj_forLoopBIndex-5)])call IssuePointOrderById(bj_lastCreatedUnit,$D000F,M8[bj_forLoopBIndex],N8[bj_forLoopBIndex])call SetUnitUserData(bj_lastCreatedUnit,bj_forLoopBIndex)set bj_forLoopBIndex=bj_forLoopBIndex+1endloopset bj_forLoopAIndex=bj_forLoopAIndex+1endloopendfunctionfunction mD takes nothing returns nothingset bj_forLoopBIndex=9set bj_forLoopBIndexEnd=$Bloopexitwhen bj_forLoopBIndex>bj_forLoopBIndexEndcall CreateNUnitsAtLoc(1,1869836407,Y8[0],l7[(bj_forLoopBIndex-8)],O8[(bj_forLoopBIndex-8)])call IssuePointOrderById(bj_lastCreatedUnit,$D000F,M8[bj_forLoopBIndex],N8[bj_forLoopBIndex])call SetUnitUserData(bj_lastCreatedUnit,bj_forLoopBIndex)call CreateNUnitsAtLoc(1,1869836407,Y8[0],l7[(bj_forLoopBIndex-8)],O8[(bj_forLoopBIndex-8)])call IssuePointOrderById(bj_lastCreatedUnit,$D000F,M8[bj_forLoopBIndex],N8[bj_forLoopBIndex])call SetUnitUserData(bj_lastCreatedUnit,bj_forLoopBIndex)set bj_forLoopBIndex=bj_forLoopBIndex+1endloopset bj_forLoopBIndex=9set bj_forLoopBIndexEnd=$Bloopexitwhen bj_forLoopBIndex>bj_forLoopBIndexEndcall CreateNUnitsAtLoc(1,1869836407,Z8[0],l7[(bj_forLoopBIndex-5)],O8[(bj_forLoopBIndex-5)])call IssuePointOrderById(bj_lastCreatedUnit,$D000F,M8[bj_forLoopBIndex],N8[bj_forLoopBIndex])call SetUnitUserData(bj_lastCreatedUnit,bj_forLoopBIndex)call CreateNUnitsAtLoc(1,1869836407,Z8[0],l7[(bj_forLoopBIndex-5)],O8[(bj_forLoopBIndex-5)])call IssuePointOrderById(bj_lastCreatedUnit,$D000F,M8[bj_forLoopBIndex],N8[bj_forLoopBIndex])call SetUnitUserData(bj_lastCreatedUnit,bj_forLoopBIndex)set bj_forLoopBIndex=bj_forLoopBIndex+1endloopendfunctionfunction oD takes nothing returns nothingset bj_forLoopBIndex=9set bj_forLoopBIndexEnd=$Bloopexitwhen bj_forLoopBIndex>bj_forLoopBIndexEndcall CreateNUnitsAtLoc(1,1751871081,Y8[0],l7[(bj_forLoopBIndex-8)],O8[(bj_forLoopBIndex-8)])call IssuePointOrderById(bj_lastCreatedUnit,$D000F,M8[bj_forLoopBIndex],N8[bj_forLoopBIndex])call SetUnitUserData(bj_lastCreatedUnit,bj_forLoopBIndex)if((S4[bj_forLoopBIndex]==1))thencall CreateNUnitsAtLoc(1,1747988819,Y8[0],l7[(bj_forLoopBIndex-8)],O8[(bj_forLoopBIndex-8)])call IssuePointOrderById(bj_lastCreatedUnit,$D000F,M8[bj_forLoopBIndex],N8[bj_forLoopBIndex])call SetUnitUserData(bj_lastCreatedUnit,bj_forLoopBIndex)endifset bj_forLoopBIndex=bj_forLoopBIndex+1endloopset bj_forLoopBIndex=9set bj_forLoopBIndexEnd=$Bloopexitwhen bj_forLoopBIndex>bj_forLoopBIndexEndcall CreateNUnitsAtLoc(1,1751871081,Z8[0],l7[(bj_forLoopBIndex-5)],O8[(bj_forLoopBIndex-5)])call IssuePointOrderById(bj_lastCreatedUnit,$D000F,M8[bj_forLoopBIndex],N8[bj_forLoopBIndex])call SetUnitUserData(bj_lastCreatedUnit,bj_forLoopBIndex)if((S4[bj_forLoopBIndex]==1))thencall CreateNUnitsAtLoc(1,1747988819,Z8[0],l7[(bj_forLoopBIndex-5)],O8[(bj_forLoopBIndex-5)])call IssuePointOrderById(bj_lastCreatedUnit,$D000F,M8[bj_forLoopBIndex],N8[bj_forLoopBIndex])call SetUnitUserData(bj_lastCreatedUnit,bj_forLoopBIndex)endifset bj_forLoopBIndex=bj_forLoopBIndex+1endloopendfunctionfunction qD takes nothing returns nothinglocal integer ilocal integer Zclocal integer iBlocal integer dDlocal unit u3set i=1set Zc=(3+D4)loopexitwhen i>Zcset iB=2set dD=2loopexitwhen iB>dDset u3=CreateUnit(Y8[0],1751543663,M8[iB],N8[iB],O8[iB])call IssuePointOrderById(u3,$D000F,M8[(iB+8)],N8[(iB+8)])set iB=iB+1endloopset iB=5set dD=5loopexitwhen iB>dDset u3=CreateUnit(Z8[0],1751543663,M8[iB],N8[iB],O8[iB])call IssuePointOrderById(u3,$D000F,M8[(iB+5)],N8[(iB+5)])set iB=iB+1endloopset i=i+1endloopset i=1set Zc=(2+E4)loopexitwhen i>Zcset iB=2set dD=2loopexitwhen iB>dDset u3=CreateUnit(Y8[0],1752003693,M8[iB],N8[iB],O8[iB])call IssuePointOrderById(u3,$D000F,M8[(iB+8)],N8[(iB+8)])set iB=iB+1endloopset iB=5set dD=5loopexitwhen iB>dDset u3=CreateUnit(Z8[0],1752003693,M8[iB],N8[iB],O8[iB])call IssuePointOrderById(u3,$D000F,M8[(iB+5)],N8[(iB+5)])set iB=iB+1endloopset i=i+1endloopset u3=nullendfunctionfunction sD takes nothing returns nothinglocal integer ilocal integer Zclocal unit u3set i=2set Zc=2loopexitwhen i>Zcset u3=CreateUnit(Y8[0],1869836407,M8[i],N8[i],O8[i])call IssuePointOrderById(u3,$D000F,M8[(i+8)],N8[(i+8)])set u3=CreateUnit(Y8[0],1869836407,M8[i],N8[i],O8[i])call IssuePointOrderById(u3,$D000F,M8[(i+8)],N8[(i+8)])set i=i+1endloopset i=5set Zc=5loopexitwhen i>Zcset u3=CreateUnit(Z8[0],1869836407,M8[i],N8[i],O8[i])call IssuePointOrderById(u3,$D000F,M8[(i+5)],N8[(i+5)])set u3=CreateUnit(Z8[0],1869836407,M8[i],N8[i],O8[i])call IssuePointOrderById(u3,$D000F,M8[(i+5)],N8[(i+5)])set i=i+1endloopset u3=nullendfunctionfunction uD takes nothing returns nothinglocal integer ilocal integer Zclocal unit u3set i=2set Zc=2loopexitwhen i>Zcset u3=CreateUnit(Y8[0],1751871081,M8[i],N8[i],O8[i])call IssuePointOrderById(u3,$D000F,M8[(i+8)],N8[(i+8)])if((S4[i]==1))thenset u3=CreateUnit(Y8[0],1747988819,M8[i],N8[i],O8[i])call IssuePointOrderById(u3,$D000F,M8[(i+8)],N8[(i+8)])endifset i=i+1endloopset i=5set Zc=5loopexitwhen i>Zcset u3=CreateUnit(Z8[0],1751871081,M8[i],N8[i],O8[i])call IssuePointOrderById(u3,$D000F,M8[(i+5)],N8[(i+5)])if((S4[i]==1))thenset u3=CreateUnit(Z8[0],1747988819,M8[i],N8[i],O8[i])call IssuePointOrderById(u3,$D000F,M8[(i+5)],N8[(i+5)])endifset i=i+1endloopset u3=nullendfunctionfunction wD takes nothing returns nothingif((GetTriggerUnit()==Mu))thenset S4[1]=1endifif((GetTriggerUnit()==lu))thenset S4[2]=1endifif((GetTriggerUnit()==Iu))thenset S4[3]=1endifif((GetTriggerUnit()==ot))thenset S4[4]=1endifif((GetTriggerUnit()==nt))thenset S4[5]=1endifif((GetTriggerUnit()==kt))thenset S4[6]=1endifendfunctionfunction yD takes nothing returns nothingif GetPlayerTechCount(Player($C),1378889782,true)<=$E thencall SetPlayerTechResearched(Player($C),1378889782,GetPlayerTechCount(Player($C),1378889782,true)+1)endifendfunctionfunction AD takes nothing returns nothingcall DisplayTextToPlayer(GetLocalPlayer(),0,0,"|cff00ff00兩軍引進南蠻建築技術, 使建築物更加堅固.|r")call SetPlayerTechResearchedSwap(1382576745,1,Y8[0])call SetPlayerTechResearchedSwap(1382576745,1,Z8[0])call xA(1000.)call DisplayTextToPlayer(GetLocalPlayer(),0,0,"|cff00ff00兩軍引進南蠻建築技術, 使建築物更加堅固.|r")call SetPlayerTechResearchedSwap(1382576745,2,Y8[0])call SetPlayerTechResearchedSwap(1382576745,2,Z8[0])call xA(1200.)call DisplayTextToPlayer(GetLocalPlayer(),0,0,"|cff00ff00兩軍引進南蠻建築技術, 使建築物更加堅固.|r")call SetPlayerTechResearchedSwap(1382576745,3,Y8[0])call SetPlayerTechResearchedSwap(1382576745,3,Z8[0])call xA(1400.)call DisplayTextToPlayer(GetLocalPlayer(),0,0,"|cff00ff00兩軍引進南蠻建築技術, 使建築物更加堅固.|r")call SetPlayerTechResearchedSwap(1382576745,4,Y8[0])call SetPlayerTechResearchedSwap(1382576745,4,Z8[0])call DestroyTrigger(GetTriggeringTrigger())endfunctionfunction BD takes nothing returns nothingif(GetPlayerTechCountSimple(1382572398,Y8[0])<20)thencall DisplayTextToPlayer(GetLocalPlayer(),0,0,"|cff00ff00兩軍士兵已經完成訓練, 戰力更加的卓越.|r")call SetPlayerTechResearchedSwap(1382572398,(GetPlayerTechCountSimple(1382572398,Y8[0])+1),Y8[0])call SetPlayerTechResearchedSwap(1382572398,(GetPlayerTechCountSimple(1382572398,Z8[0])+1),Z8[0])if(ModuloInteger(GetPlayerTechCountSimple(1382572398,Y8[0]),7)==0)thenset D4=(D4+1)endifif(ModuloInteger(GetPlayerTechCountSimple(1382572398,Y8[0]),8)==0)thenset E4=(E4+1)endifendifendfunctionfunction CD takes nothing returns nothingcall SetMapFlag(MAP_LOCK_RESOURCE_TRADING,true)call LockGameSpeedBJ()call SetTimeOfDay(6.)call SetSkyModel("Environment\\Sky\\DalaranSky\\DalaranSky.mdl")call SetUnitAnimation(eu,"stand work")call SetUnitAnimation(rv,"stand work")call SetUnitAnimation(mu,"stand work")call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,13.,"TRIGSTR_12565")call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,13.,"TRIGSTR_12568")call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,13.,"TRIGSTR_12579")call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,13.,"TRIGSTR_12580")call CinematicFadeBJ(1,.0,"ReplaceableTextures\\CameraMasks\\Black_mask.blp",0,0,0,0)call ShowInterfaceForceOff(bj_FORCE_ALL_PLAYERS,.0)call xA(2.3)call CinematicFadeBJ(0,2.,"ReplaceableTextures\\CameraMasks\\Black_mask.blp",0,0,0,0)call ShowInterfaceForceOn(bj_FORCE_ALL_PLAYERS,2.)endfunctionfunction DD takes nothing returns nothingcall DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,10.,"TRIGSTR_5884")call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,10.,"TRIGSTR_6510")call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,10.,"TRIGSTR_6813")call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,10.,"TRIGSTR_7142")call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,10.,"TRIGSTR_7172")call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,10.,"TRIGSTR_7240")call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,10.,"TRIGSTR_7827")call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,10.,"TRIGSTR_7836")call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,10.,"TRIGSTR_7846")call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,10.,"TRIGSTR_8116")call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,10.,"TRIGSTR_8122")call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,10.,"TRIGSTR_8147")call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,10.,"TRIGSTR_8359")call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,10.,"TRIGSTR_8567")call TriggerRegisterPlayerUnitEventSimple(wi,Y8[0],EVENT_PLAYER_UNIT_DEATH)call TriggerRegisterPlayerUnitEventSimple(wi,Z8[0],EVENT_PLAYER_UNIT_DEATH)call PlaySoundBJ(Jg)call StopSoundBJ(bj_lastPlayedSound,false)call PlaySoundBJ(lg)call StopSoundBJ(bj_lastPlayedSound,false)call PlaySoundBJ(Lg)call StopSoundBJ(bj_lastPlayedSound,false)call PlaySoundBJ(Kg)call StopSoundBJ(bj_lastPlayedSound,false)call PlaySoundBJ(Mg)call StopSoundBJ(bj_lastPlayedSound,false)call DestroyTrigger(GetTriggeringTrigger())endfunctionfunction FD takes nothing returns nothingcall DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,15.,"TRIGSTR_12675")call PingMinimapLocForForce(bj_FORCE_ALL_PLAYERS,GetUnitLoc(uv),8.)call PingMinimapLocForForce(bj_FORCE_ALL_PLAYERS,GetUnitLoc(av),8.)call PingMinimapLocForForce(bj_FORCE_ALL_PLAYERS,GetUnitLoc(xv),8.)call EnableTrigger(nh)call DisableTrigger(ph)call DisableTrigger(oh)call DisableTrigger(Ki)call DisableTrigger(Mi)call DisableTrigger(Li)call DisableTrigger(oh)call DestroyTrigger(GetTriggeringTrigger())endfunctionfunction HD takes nothing returns nothingcall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("|cff99ccff"+("甲斐的武田、 越後的上杉、 西國的毛利響應足利義昭的號召 , 與尾張的織田, 三河的德川開始作戰 !|r")))if((d9))thencall EnableTrigger(Oh)call EnableTrigger(Ph)call EnableTrigger(Qh)call EnableTrigger(Jh)elseif((Se))thencall EnableTrigger(Rh)call EnableTrigger(Sh)call EnableTrigger(Th)call EnableTrigger(Kh)elsecall EnableTrigger(Lh)call EnableTrigger(Mh)call EnableTrigger(Nh)call EnableTrigger(Kh)endifendifcall DestroyTrigger(GetTriggeringTrigger())endfunctionfunction lD takes nothing returns nothingcall EnableTrigger(hh)call EnableTrigger(eh)call DestroyTrigger(GetTriggeringTrigger())endfunctionfunction KD takes nothing returns booleanreturn(((GetFilterUnit()!=ou)and(GetFilterUnit()!=Dt)))endfunctionfunction LD takes nothing returns nothinglocal unit u1=GetEnumUnit()call SetUnitUserData(u1,Sv)set Qv[Sv]=GetUnitX(u1)set Rv[Sv]=GetUnitY(u1)set Sv=Sv+1set u1=nullendfunctionfunction MD takes nothing returns nothingset Sv=$96set Z7=Xz(Player($C),Condition(function KD))call ForGroup(Z7,function LD)call DestroyGroup(Z7)call DestroyTrigger(GetTriggeringTrigger())endfunctionfunction OD takes nothing returns booleanreturn(IsUnitIllusion(GetTriggerUnit())!=true and GetUnitUserData(GetTriggerUnit())!=0)endfunctionfunction PD takes nothing returns nothinglocal unit u=GetTriggerUnit()local integer QD=GetUnitTypeId(u)local integer i=GetUnitUserData(u)if QD==1851945575 or QD==1851880307 or QD==1852993383 or QD==1852141158 thencall xA(160.)elsecall xA(130.)endifcall SetUnitUserData(CreateUnit(Player($C),QD,Qv[i],Rv[i],GetRandomReal(0,360)),i)set u=nullendfunctionfunction SD takes nothing returns nothingcall PlaySoundBJ(Pg)call KillSoundWhenDone(bj_lastPlayedSound)call DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("|cffffcc99"+("受詛咒的武士亡靈已經被淨化完畢..|r")))call DestroyTrigger(GetTriggeringTrigger())endfunctionfunction UD takes nothing returns booleanreturn((GetUnitTypeId(GetTriggerUnit())==GetUnitTypeId(ou)))endfunctionfunction VD takes nothing returns nothingset a4=GetRectCenter(Bf)call SetUnitPositionLoc(GetTriggerUnit(),a4)call SetUnitLifePercentBJ(GetTriggerUnit(),100)call RemoveLocation(a4)endfunctionfunction XD takes nothing returns booleanreturn(Zy(GetFilterUnit(),UNIT_TYPE_HERO))endfunctionfunction YD takes nothing returns nothingcall CreateTextTagUnitBJ(("+300"),GetTriggerUnit(),0,10.,100.,85.,.0,0)call ShowTextTagForceBJ(false,bj_lastCreatedTextTag,Qz(GetOwningPlayer(GetKillingUnit())))call SetTextTagPermanent(bj_lastCreatedTextTag,false)call SetTextTagVelocityBJ(bj_lastCreatedTextTag,60.,90)call SetTextTagLifespan(bj_lastCreatedTextTag,3.)call SetTextTagFadepoint(bj_lastCreatedTextTag,2.2)endfunctionfunction ZD takes nothing returns nothingcall AdjustPlayerStateBJ(300,GetEnumPlayer(),PLAYER_STATE_RESOURCE_GOLD)call ForGroupBJ(Xz(GetEnumPlayer(),Condition(function XD)),function YD)endfunctionfunction dE takes nothing returns booleanreturn(Zy(GetFilterUnit(),UNIT_TYPE_HERO))endfunctionfunction eE takes nothing returns nothingcall CreateTextTagUnitBJ(("+300"),GetTriggerUnit(),0,10.,100.,85.,.0,0)call ShowTextTagForceBJ(false,bj_lastCreatedTextTag,Qz(GetOwningPlayer(GetKillingUnit())))call SetTextTagPermanent(bj_lastCreatedTextTag,false)call SetTextTagVelocityBJ(bj_lastCreatedTextTag,60.,90)call SetTextTagLifespan(bj_lastCreatedTextTag,3.)call SetTextTagFadepoint(bj_lastCreatedTextTag,2.2)endfunctionfunction fE takes nothing returns nothingcall AdjustPlayerStateBJ(300,GetEnumPlayer(),PLAYER_STATE_RESOURCE_GOLD)call ForGroupBJ(Xz(GetEnumPlayer(),Condition(function dE)),function eE)endfunctionfunction gE takes nothing returns booleanreturn(IsUnitAlly(GetKillingUnit(),Y8[0]))endfunctionfunction hE takes nothing returns nothingcall StartTimerBJ(Tv,true,270.)call DisplayTextToPlayer(GetLocalPlayer(),0,0,"|cFF00EE00強盜之王：...就算...你擊敗了我..但是我其他部落的..弟兄..將會替我報仇的...|r")if(gE())thenif Te thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,(("|cFFFFCC00"+(GetPlayerName(GetOwningPlayer(GetKillingUnit()))+"|r"))+"擊殺了強盜之王！有部份的強盜獻出了黃金，歸順到織田軍旗下！"))elsecall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,(("|cFFFFCC00"+(GetUnitName(h4[(1+GetPlayerId(GetOwningPlayer(GetKillingUnit())))])+"|r"))+"擊殺了強盜之王！有部份的強盜獻出了黃金，歸順到織田軍旗下！"))endifcall ForForce(Oz(Y8[0]),function fE)elseif Te thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,(("|cFFFFCC00"+(GetPlayerName(GetOwningPlayer(GetKillingUnit()))+"|r"))+"擊殺了強盜之王並瓜分了黃金！有部份的強盜獻出了黃金，歸順到聯合軍旗下！"))elsecall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,(("|cFFFFCC00"+(GetUnitName(h4[(1+GetPlayerId(GetOwningPlayer(GetKillingUnit())))])+"|r"))+"擊殺了強盜之王並瓜分了黃金！有部份的強盜獻出了黃金，歸順到聯合軍旗下！"))call ForForce(Oz(Z8[0]),function ZD)endifcall ForForce(Oz(Z8[0]),function ZD)endifendfunctionfunction jE takes nothing returns nothingcall DisplayTextToPlayer(GetLocalPlayer(),0,0,"|cFFEE9944注意!!強盜各部落已經集結了大軍，似乎打算趁兩軍交戰之際大肆作亂...|r")set bj_forLoopBIndex=1set bj_forLoopBIndexEnd=GetRandomInt(7,$C)loopexitwhen bj_forLoopBIndex>bj_forLoopBIndexEndcall CreateNUnitsAtLoc(1,1853126515,Player($C),l7[$A],bj_UNIT_FACING)call IssuePointOrderByIdLoc(bj_lastCreatedUnit,$D000F,l7[GetRandomInt(7,8)])set bj_forLoopBIndex=bj_forLoopBIndex+1endloopendfunctionfunction mE takes nothing returns nothinglocal integer iset i=GetRandomInt(1,5)if(i==1)thencall DisplayTextToPlayer(GetLocalPlayer(),0,0,"|cBBEE9944國人武士企圖奪取實權!!開始暴動!!!!|r")set bj_forLoopAIndex=1set bj_forLoopAIndexEnd=2loopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndset i=GetRandomInt($B,$D)call CreateNUnitsAtLoc(7,1853059184,Player($C),Ke[i],bj_UNIT_FACING)set bj_forLoopAIndex=bj_forLoopAIndex+1endloopreturnendifif(i==2)thencall DisplayTextToPlayer(GetLocalPlayer(),0,0,"|cBBEE9944百姓不滿課稅過量，為求減免年貢，佔領了各地商店!!|r")call CreateNUnitsAtLoc((1+GetRandomInt(1,3)),1852600435,Player($C),Ke[GetRandomInt(40,50)],bj_UNIT_FACING)endifif(i==3)thencall DisplayTextToPlayer(GetLocalPlayer(),0,0,"|cBBEE9944國人與百姓生活和諧，無動亂發生。|r")endifif(i==4)thencall DisplayTextToPlayer(GetLocalPlayer(),0,0,"|cBBEE9944國人武士企圖奪取實權，已經遭到鎮壓。|r")endifif(i==5)thencall DisplayTextToPlayer(GetLocalPlayer(),0,0,"|cBBEE9944百姓不滿課稅過量，但因人數不足，已遭鎮壓|r")endifendfunctionfunction oE takes nothing returns booleanif GetIssuedOrderId()==$D000F and IsUnitAlly(GetOrderTargetUnit(),GetOwningPlayer(GetOrderedUnit()))and GetOwningPlayer(GetOrderTargetUnit())!=Player($F)thencall PauseUnit(GetOrderedUnit(),true)call PauseUnit(GetOrderedUnit(),false)call IssueImmediateOrderById(GetOrderedUnit(),$D0004)endifreturn falseendfunctionfunction qE takes nothing returns nothingcall KillUnit(GetTriggerUnit())call oB()endfunctionfunction sE takes nothing returns booleanreturn((GetOwningPlayer(GetTriggerUnit())==Z8[0]))endfunctionfunction tE takes nothing returns nothingcall IssueNeutralTargetOrderById(Z8[0],GetTriggerUnit(),$D000F,xu)endfunctionfunction vE takes nothing returns booleanreturn((GetOwningPlayer(GetTriggerUnit())==Y8[0]))endfunctionfunction wE takes nothing returns nothingcall IssueNeutralTargetOrderById(Y8[0],GetTriggerUnit(),$D000F,wu)endfunctionfunction yE takes nothing returns nothingif GetItemTypeId(GetEnumItem())==1953723442 thenset e9=(e9+1)endifendfunctionfunction zE takes nothing returns nothinglocal real xlocal real yset x=GetRectCenterX(jy)set y=GetRectCenterY(jy)set e9=0call EnumItemsInRect(jy,null,function yE)set bj_forLoopAIndex=1set bj_forLoopAIndexEnd=(5-e9)loopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndcall CreateItem(1953723442,x,y)set bj_forLoopAIndex=bj_forLoopAIndex+1endloopset x=GetRectCenterX(ky)set y=GetRectCenterY(ky)set e9=0call EnumItemsInRect(ky,null,function yE)set bj_forLoopAIndex=1set bj_forLoopAIndexEnd=(5-e9)loopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndcall CreateItem(1953723442,x,y)set bj_forLoopAIndex=bj_forLoopAIndex+1endloopendfunctionfunction AE takes nothing returns nothinglocal integer ilocal timer tlocal real xlocal real yset jy=Rect(7008.,-7584.,7296.,-7296.)set ky=Rect(-7392.,6944.,-7104.,7232.)set x=GetRectCenterX(jy)set y=GetRectCenterY(jy)set i=1loopexitwhen i>5call CreateItem(1953723442,x,y)set i=i+1endloopset x=GetRectCenterX(ky)set y=GetRectCenterY(ky)set i=1loopexitwhen i>5call CreateItem(1953723442,x,y)set i=i+1endloopset t=CreateTimer()call TimerStart(t,325,true,function zE)endfunctionfunction InitTrig_Game_Init takes nothing returns nothingcall AE()endfunctionfunction aE takes nothing returns nothinglocal unit u1=GetDyingUnit()local unit u2=GetKillingUnit()local player p=GetOwningPlayer(u1)local integer i=GetPlayerId(p)+1local player p2=GetOwningPlayer(u2)local integer i2=GetPlayerId(p2)+1local string sif i2>$A thenset s=j4[i]+GetHeroProperName(h4[i])+"|r的馬被"+j4[i2]+GetUnitName(u2)+"|r所擊殺"elseset s=j4[i]+GetHeroProperName(h4[i])+"|r的馬被"+j4[i2]+GetHeroProperName(h4[i2])+"|r所擊殺"endifcall DisplayTextToPlayer(GetLocalPlayer(),0,0,s)set s=nullset p=nullendfunctionfunction BE takes nothing returns nothingif GetUnitPointValue(GetTriggerUnit())==90 thencall aE()endifendfunctionfunction bE takes nothing returns nothinglocal trigger rB=CreateTrigger()local integer iset i=0loopexitwhen i>9call TriggerRegisterPlayerUnitEvent(rB,Player(i),EVENT_PLAYER_UNIT_DEATH,null)set i=i+1endloopcall TriggerAddCondition(rB,Condition(function BE))set rB=nullendfunctionfunction CE takes nothing returns nothinglocal timer t=GetExpiredTimer()call RemoveItem(LoadItemHandle(Xe,GetHandleId(t),5566))call FlushChildHashtable(Xe,GetHandleId(t))call DestroyTimer(t)set t=nullendfunctionfunction cE takes nothing returns nothinglocal item zClocal timer t=CreateTimer()set zC=PlaceRandomItem(Me,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()))call SaveItemHandle(Xe,GetHandleId(t),5566,zC)call TimerStart(t,15.,false,function CE)set zC=nullendfunctionfunction DE takes nothing returns nothinglocal integer i=GetPlayerId(GetOwningPlayer(GetKillingUnit()))+1set W4[i]=(W4[i]+100)set N4[i]=(N4[i]+1)call MultiboardSetItemValue(MultiboardGetItem(H4,i,5),I2S(N4[i]))endfunctionfunction EE takes integer i returns nothingif t8[i]thenset t8[i]=falsecall SetPlayerState(Player(i-1),PLAYER_STATE_RESOURCE_LUMBER,GetPlayerState(Player(i-1),PLAYER_STATE_RESOURCE_LUMBER)+1)elseset t8[i]=trueendifendfunctionfunction FE takes integer i returns nothingset q4[i]=(q4[i]+1)if q4[i]-q4[i]/ 100*100==0 thenif Te thenif(IsPlayerInForce(GetLocalPlayer(),bj_FORCE_ALL_PLAYERS))thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,$A,j4[i]+GetPlayerName(Player(i-1))+I2S(q4[i])+"敵軍擊破！|r")endifelseif(IsPlayerInForce(GetLocalPlayer(),bj_FORCE_ALL_PLAYERS))thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,$A,j4[i]+GetUnitName(h4[i])+I2S(q4[i])+"敵軍擊破！|r")endifendifendifset W4[i]=(W4[i]+2)call MultiboardSetItemValue(MultiboardGetItem(H4,i,1),I2S(q4[i]))endfunctionfunction GE takes nothing returns booleanlocal integer i=GetPlayerId(GetOwningPlayer(GetKillingUnit()))+1if i<=$A thencall FE(i)if GetTriggerPlayer()==Player($C)thencall EE(i)endifif GetRandomInt(1,100)<=7 thencall cE()endifif Zy(GetDyingUnit(),UNIT_TYPE_STRUCTURE)thencall DE()endifendifreturn falseendfunctionfunction IE takes nothing returns nothinglocal integer ybset yb=1loopexitwhen yb>$Aif Ne[yb]==0 thenset L4[yb]=0elseset Ne[yb]=Ne[yb]-1endifset yb=yb+1endloopendfunctionfunction lE takes integer Wz,integer JE returns nothinglocal timer tif(Jg!=null)thencall StartSound(Jg)call StopSound(Jg,false,true)endifcall AdjustPlayerStateBJ($C8,GetOwningPlayer(h4[JE]),PLAYER_STATE_RESOURCE_GOLD)if Te thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,(("|cffff0000"+GetPlayerName(GetOwningPlayer(h4[JE])))+("|r拿下了敵方的首殺!為這場合戰正式揭開了序幕!!他將獲得額外|cffff9900200|r的賞金!")))elsecall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,(("|cffff0000"+GetHeroProperName(h4[(1+GetPlayerId(GetOwningPlayer(h4[JE])))]))+("|r拿下了敵方的首殺!為這場合戰正式揭開了序幕!!他將獲得額外|cffff9900200|r的賞金!")))endifset t=CreateTimer()call TimerStart(t,1.,true,function IE)set Wv=falseset t=nullendfunctionfunction KE takes integer Wz,integer JE returns nothinglocal integer i=JElocal integer wb=0local boolean b=falseset Ne[i]=8set L4[i]=L4[i]+1if L4[i]==2 thenif Te thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("|cffff0000"+(GetPlayerName(Player(-1+(i)))+"|r拿下精彩的雙殺!他將獲得額外|cffff9900100|r的賞金!")))elsecall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("|cffff0000"+(GetHeroProperName(h4[i])+"|r拿下精彩的雙殺!他將獲得額外|cffff9900100|r的賞金!")))endifcall StartSound(lg)call SetSoundVolume(lg,$7F)set b=trueset wb=100elseif L4[i]==3 thenif Te thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("|cffff0000"+(GetPlayerName(Player(-1+(i)))+"|r拿下了高超的三連斬! 使敵軍聞風喪膽! 他將獲得額外|cffff9900200|r的賞金!")))elsecall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("|cffff0000"+(GetHeroProperName(h4[i])+"|r拿下了高超的三連斬! 使敵軍聞風喪膽! 他將獲得額外|cffff9900200|r的賞金!")))endifcall StartSound(Lg)call SetSoundVolume(Lg,$7F)set b=trueset wb=$C8elseif L4[i]==4 thenif Te thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("|cffff0000"+(GetPlayerName(Player(-1+(i)))+"|r達到了神一般的四連斬! 無任何敵將可與之匹敵! 他將獲得額外|cffff9900300|r的賞金!")))elsecall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("|cffff0000"+(GetHeroProperName(h4[i])+"|r達到了神一般的四連斬! 無任何敵將可與之匹敵! 他將獲得額外|cffff9900300|r的賞金!")))endifcall StartSound(Mg)call SetSoundVolume(Mg,$7F)set b=trueset wb=300elseif L4[i]==5 thenif Te thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("|cffff0000"+(GetPlayerName(Player(-1+(i)))+"|r所屬的聯合軍控制了整個戰場! 隻身一人便打得敵方潰不成軍! 他將獲得額外|cffff9900400|r的賞金!")))elsecall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("|cffff0000"+(GetHeroProperName(h4[i])+"|r所屬的聯合軍控制了整個戰場! 隻身一人便打得敵方潰不成軍! 他將獲得額外|cffff9900400|r的賞金!")))endifcall StartSound(Kg)call SetSoundVolume(Kg,$7F)set b=trueset wb=400endifif b thencall AdjustPlayerStateBJ(wb,GetOwningPlayer(h4[JE]),PLAYER_STATE_RESOURCE_GOLD)endifendfunctionfunction LE takes integer Wz,integer JE returns nothinglocal texttag ttlocal player p=Player(JE-1)local force f=CreateForce()call ForceAddPlayer(f,p)call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)+W4[Wz])set tt=CreateTextTagUnitBJ(("HeroKill +"+(I2S(W4[Wz]))),h4[Wz],0,10.,100.,85.,.0,0)call ShowTextTagForceBJ(false,tt,bj_FORCE_ALL_PLAYERS)call SetTextTagPermanent(tt,false)call SetTextTagVelocityBJ(tt,60.,90)call SetTextTagLifespan(tt,4.)call SetTextTagFadepoint(tt,3.2)call ShowTextTagForceBJ(true,tt,f)if Te thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("|CFFFF0000"+(GetPlayerName(Player(-1+(JE)))+("|R擊殺了|CFF3232FF"+(GetPlayerName(Player(-1+(Wz)))+("|R，獲得了|CFFFFCC00"+(I2S(W4[Wz])+"|R賞金！")))))))elsecall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("|CFFFF0000"+(GetHeroProperName(h4[JE])+("|R擊殺了|CFF3232FF"+(GetHeroProperName(h4[Wz])+("|R，獲得了|CFFFFCC00"+(I2S(W4[Wz])+"|R賞金！")))))))endifset W4[JE]=W4[JE]+100call DestroyForce(f)set f=nullset tt=nullset p=nullendfunctionfunction ME takes nothing returns nothinglocal player p=GetEnumPlayer()local integer i=GetPlayerId(p)+1set O4[i]=(O4[i]+1)call MultiboardSetItemValue(MultiboardGetItem(H4,i,4),I2S(O4[i]))if((W4[i]<300))thenset W4[i]=(W4[i]+100)elseset W4[i]=(W4[i]+50)endifset p=nullendfunctionfunction NE takes nothing returns nothinglocal player p=GetEnumPlayer()local player p2=Vvlocal integer i=GetPlayerId(p2)+1local integer wb=W4[i]/ Uvlocal force f=CreateForce()call ForceAddPlayer(f,p)call AdjustPlayerStateBJ(wb,p,PLAYER_STATE_RESOURCE_GOLD)call CreateTextTagUnitBJ("Assist + "+I2S(wb),h4[i],0,10.,100.,85.,.0,0)call ShowTextTagForceBJ(false,bj_lastCreatedTextTag,bj_FORCE_ALL_PLAYERS)call ShowTextTagForceBJ(true,bj_lastCreatedTextTag,f)call SetTextTagPermanent(bj_lastCreatedTextTag,false)call SetTextTagVelocityBJ(bj_lastCreatedTextTag,60.,90)call SetTextTagLifespan(bj_lastCreatedTextTag,4.)call SetTextTagFadepoint(bj_lastCreatedTextTag,3.2)call DestroyForce(f)set f=nullset p=nullset p2=nullendfunctionfunction OE takes nothing returns nothinglocal player p1=GetOwningPlayer(GetDyingUnit())local player p2=GetOwningPlayer(GetKillingUnit())local integer Wz=GetPlayerId(p1)+1local integer JE=GetPlayerId(p2)+1local integer mostdmgunitcheck=0local integer PE=0local boolean b=falselocal force f=CreateForce()local integer yblocal integer ilocal integer i2local integer QE=0local string s="助攻玩家:"local trigger rB=GetTriggeringTrigger()set Vv=p1set Uv=0if W4[Wz]<75 thenset W4[Wz]=75endifif W4[Wz]>700 thenset W4[Wz]=700endifset R4[Wz]=(R4[Wz]+1)call MultiboardSetItemValue(MultiboardGetItem(H4,Wz,3),I2S(R4[Wz]))set yb=1loopexitwhen yb>$Aif((R2I(Mv)-Xv[(Wz+(yb*(((Wz-1)*$A)+yb)))])<=6)and yb!=JE thenset PE=ybset Uv=Uv+1call ForceAddPlayer(f,Player(yb-1))set s=s+GetUnitName(h4[yb])endifset yb=yb+1endloopif Wz==JE thenif Te thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,(("|cFFFF0000"+(GetPlayerName(Player(-1+(Wz)))+"|r"))+"自殺身亡"))elsecall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,(("|cFFFF0000"+(GetUnitName(h4[Wz])+"|r"))+"自殺身亡"))endifcall oB()elseif JE==$D thenif Te thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("|CFFFF0000"+(GetPlayerName(Player(-1+(Wz)))+"|R在戰亂中陣亡!")))elsecall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("|CFFFF0000"+(GetHeroProperName(h4[Wz])+"|R在戰亂中陣亡!")))endifelseif JE<=$A thenset Q4[JE]=(Q4[JE]+1)call MultiboardSetItemValue(MultiboardGetItem(H4,JE,2),I2S(Q4[JE]))call LE(Wz,JE)if PE>0 thencall ForForce(f,function ME)if Ze thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,5,s)endifendifelseif p2==Y8[0]or p2==Z8[0]thenset QE=CountPlayersInForceBJ(f)if QE>0 thenif QE==1 thenset JE=GetPlayerId(ForcePickRandomPlayer(f))+1set Q4[JE]=(Q4[JE]+1)call MultiboardSetItemValue(MultiboardGetItem(H4,JE,2),I2S(Q4[JE]))call LE(Wz,JE)call KE(Wz,JE)if Wv thencall lE(Wz,JE)endifelseif Te thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("|CFFFF0000"+(GetPlayerName(p1)+"|R在敵軍的圍殺下陣亡!")))elsecall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("|CFFFF0000"+(GetHeroProperName(h4[Wz])+"|R在敵軍的圍殺下陣亡!")))endifcall ForForce(f,function ME)call ForForce(f,function NE)endifelseif Te thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("|CFFFF0000"+(GetPlayerName(p1)+"|R在戰亂中陣亡!")))elsecall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("|CFFFF0000"+(GetHeroProperName(h4[Wz])+"|R在戰亂中陣亡!")))endifendifendifif GetKillingUnit()==null thencall oB()endifset W4[Wz]=R2I((I2R(W4[Wz])*.7))call AdjustPlayerStateBJ(((E7*-1)*(100+(20*GetHeroLevel(GetTriggerUnit())))),Player(-1+(Wz)),PLAYER_STATE_RESOURCE_GOLD)if TriggerEvaluate(Ej)thencall TriggerExecute(Ej)endifcall DestroyForce(f)set f=nullset p1=nullset p2=nullset rB=nullendfunctionfunction RE takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,$3E9)if IsUnitAlly(u1,Player(0))thencall ReviveHero(u1,7147.,-7410.,true)if GetLocalPlayer()==GetOwningPlayer(u1)thencall PanCameraToTimed(7147.,-7410.,.1)endifelsecall ReviveHero(u1,-7292.7,7087.5,true)if(GetLocalPlayer()==GetOwningPlayer(u1))thencall PanCameraToTimed(-7292.7,7087.5,.1)endifendifcall FlushChildHashtable(o,qB)call DestroyTimer(t)set u1=nullset t=nullendfunctionfunction SE takes nothing returns nothinglocal unit u1=GetDyingUnit()local real TE=k4[(GetHeroLevel(u1)-1)]local integer i=R2I(TE)local integer id=GetPlayerId(GetOwningPlayer(u1))+1local real xlocal real ylocal timer t=CreateTimer()local integer qB=GetHandleId(t)call SaveUnitHandle(o,qB,$3E9,u1)call TimerStart(t,TE,false,function RE)set h8[id]=icall MultiboardSetItemValue(MultiboardGetItem(H4,id,6),I2S(i))set u1=nullset t=nullendfunctionfunction UE takes nothing returns booleanlocal unit u1=GetTriggerUnit()local unit u2=GetKillingUnit()local player p1=GetOwningPlayer(u1)local player p2=GetOwningPlayer(u2)local integer Wz=GetPlayerId(p1)+1local integer JE=GetPlayerId(p2)+1call OE()call SE()if JE<=$A thencall KE(Wz,JE)if Wv thencall lE(Wz,JE)endifendifset u1=nullset u2=nullset p1=nullset p2=nullreturn falseendfunctionfunction WE takes integer Wz,integer XE returns nothingset Xv[(Wz+(XE*(((Wz-1)*$A)+XE)))]=R2I(Mv)endfunctionfunction YE takes nothing returns booleanlocal integer Wzlocal integer XEif GetEventDamage()>1 thenset Wz=GetPlayerId(GetOwningPlayer(GetTriggerUnit()))+1set XE=GetPlayerId(GetOwningPlayer(GetEventDamageSource()))+1if XE<=$A thenif IsPlayerEnemy(Player(Wz-1),Player(XE-1))thencall WE(Wz,XE)call TriggerEvaluate(sr)endifendifendifreturn falseendfunctionfunction d3 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local boolean b1=LoadBoolean(o,qB,-$696FF0D7)local boolean b2=LoadBoolean(o,qB,-$28BF2A52)local unit u=LoadUnitHandle(o,qB,-$3CFCF863)local real d=LoadReal(o,qB,-$6329FB8A)local real a=LoadReal(o,qB,-$5E9EB4B3)local real x=GetUnitX(u)+d*Cos(a*bj_DEGTORAD)local real y=GetUnitY(u)+d*Sin(a*bj_DEGTORAD)local real dxlocal real dylocal boolean b=falseif b1 thenif not IsTerrainPathable(x,y,PATHING_TYPE_FLYABILITY)thencall SetUnitX(u,x)call SetUnitY(u,y)elseset b=trueendifelsecall SetUnitPosition(u,x,y)set dx=GetUnitX(u)-xset dy=GetUnitY(u)-yif SquareRoot(dx*dx+dy*dy)>d thenif b2 thencall SaveReal(o,qB,-$5E9EB4B3,bj_RADTODEG*Atan2(GetUnitY(u)-y,GetUnitX(u)-x))elseset b=trueendifendifendifcall SaveReal(o,qB,-$229939EA,LoadReal(o,qB,-$229939EA)+LoadReal(o,qB,$25DAB820))if LoadReal(o,qB,-$229939EA)>=LoadReal(o,qB,$312C4181)or b thenif LoadTriggerHandle(o,qB,$66BD1F81)!=null thenset F8=uset E8=LoadReal(o,qB,-$229939EA)set C8=bset Ce=LoadInteger(o,qB,555)if TriggerEvaluate(LoadTriggerHandle(o,qB,$66BD1F81))thencall TriggerExecute(LoadTriggerHandle(o,qB,$66BD1F81))endifendifcall PauseTimer(t)call DestroyTimer(t)call FlushChildHashtable(o,qB)elsecall SaveReal(o,qB,-$6329FB8A,d*LoadReal(o,qB,$2FC9F415))endifset t=nullset u=nullendfunctionfunction e3 takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)call SaveUnitHandle(o,qB,-$3CFCF863,F8)call SaveReal(o,qB,-$6329FB8A,D8)call SaveReal(o,qB,-$5E9EB4B3,c8)call SaveReal(o,qB,$312C4181,E8)call SaveReal(o,qB,$2FC9F415,l8)call SaveReal(o,qB,$25DAB820,G8)call SaveBoolean(o,qB,-$696FF0D7,C8)call SaveBoolean(o,qB,-$28BF2A52,I8)call SaveTriggerHandle(o,qB,$66BD1F81,H8)call SaveInteger(o,qB,555,Ce)call SaveReal(o,qB,-$229939EA,.0)call TimerStart(t,G8,true,function d3)set t=nullendfunctionfunction g3 takes nothing returns nothingcall Cheat("DooConv")endfunctionfunction j3 takes nothing returns booleanreturn((GetUnitAbilityLevel(GetEventTargetUnit(),1093687361)==0)and(IsUnitInGroup(GetEventTargetUnit(),L8)!=true)and(Zy(GetEventTargetUnit(),UNIT_TYPE_STRUCTURE)==false))endfunctionfunction k3 takes nothing returns nothingcall GroupAddUnit(L8,GetEventTargetUnit())call UnitAddAbility(GetEventTargetUnit(),1093687361)call UnitMakeAbilityPermanent(GetEventTargetUnit(),true,1093687361)call TriggerRegisterUnitEvent(J8[K8],GetEventTargetUnit(),EVENT_UNIT_DAMAGED)endfunctionfunction o3 takes nothing returns booleanreturn(((GetItemTypeId(GetManipulatedItem())==1634625127)or(GetItemTypeId(GetManipulatedItem())==1986290796))and(IsUnitInGroup(GetTriggerUnit(),S8)==false))endfunctionfunction q3 takes nothing returns nothingcall GroupAddUnit(S8,GetTriggerUnit())call TriggerRegisterUnitEvent(ai,GetTriggerUnit(),EVENT_UNIT_TARGET_IN_RANGE)endfunctionfunction t3 takes nothing returns nothingcall ConditionalTriggerExecute(Zi)call ConditionalTriggerExecute(Gq)endfunctionfunction AUD_ReSet takes nothing returns nothingcall DestroyTimer(GetExpiredTimer())call DestroyTrigger(J8[K8])call ConditionalTriggerExecute(bi)endfunctionfunction AUD_ReGroup takes nothing returns nothingcall TriggerRegisterUnitEvent(J8[K8],GetEnumUnit(),EVENT_UNIT_DAMAGED)endfunctionfunction v3 takes nothing returns nothinglocal trigger w3set K8=(K8+1)set J8[K8]=CreateTrigger()set w3=J8[K8]call TriggerAddCondition(w3,Condition(function t3))set w3=nullendfunctionfunction A3 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit JB=LoadUnitHandle(o,qB,$2D5DEA42)local unit u=LoadUnitHandle(o,qB,-$3CFCF863)local unit u2local unit KB=JBlocal real anlocal real dt=LoadReal(o,qB,1297434198)local real v=LoadReal(o,qB,942949714)local real r=LoadReal(o,qB,$2FC9F415)local group g=CreateGroup()local integer j=LoadInteger(o,qB,-$60249D54)local integer m=LoadInteger(o,qB,$2B0A6845)local integer fu=LoadInteger(o,qB,-$3B76F19D)local integer a=LoadInteger(o,qB,-$76341C8B)local string s=LoadStr(o,qB,$2D1E4992)local boolean b=LoadBoolean(o,qB,-$209AC7E)if j!=0 thenset an=Atan2(GetUnitY(JB)-GetUnitY(u),GetUnitX(JB)-GetUnitX(u))call SetUnitX(u,GetUnitX(u)+v*dt*Cos(an))call SetUnitY(u,GetUnitY(u)+v*dt*Sin(an))call UnitResetCooldown(u)call SetUnitManaPercentBJ(u,100)call SetUnitFacing(u,an*bj_RADTODEG)if SquareRoot(Pow(GetUnitX(JB)-GetUnitX(u),2)+Pow(GetUnitY(JB)-GetUnitY(u),2))<30 thenset u2=CreateUnit(GetOwningPlayer(u),1848651831,GetUnitX(u),GetUnitY(u),0)if(m==3 and not IsUnitAlly(JB,GetOwningPlayer(u)))or m==2 thenset a=LoadInteger(o,qB,-$76341C8B)set s=LoadStr(o,qB,$65D0C72F)endifcall UnitAddAbility(u2,a)call SetUnitAbilityLevelSwapped(a,u2,GetUnitAbilityLevel(u,a))call IssueTargetOrder(u2,s,JB)call GroupEnumUnitsInRange(g,GetUnitX(u),GetUnitY(u),r,null)loopset JB=nullset JB=GroupPickRandomUnit(g)exitwhen JB==nullif m==1 thenexitwhen JB!=KB and JB!=u and IsUnitAlly(JB,GetOwningPlayer(u))and not(IsUnitDeadBJ(JB)or Zy(JB,UNIT_TYPE_STRUCTURE)or Zy(JB,UNIT_TYPE_ANCIENT)or GetUnitAbilityLevel(JB,1097625443)>0)elseif m==2 thenexitwhen JB!=KB and JB!=u and(not IsUnitAlly(JB,GetOwningPlayer(u)))and not(IsUnitDeadBJ(JB)or Zy(JB,UNIT_TYPE_STRUCTURE)or Zy(JB,UNIT_TYPE_ANCIENT)or GetUnitAbilityLevel(JB,1097625443)>0)elseexitwhen JB!=KB and JB!=u and not(IsUnitDeadBJ(JB)or Zy(JB,UNIT_TYPE_STRUCTURE)or Zy(JB,UNIT_TYPE_ANCIENT)or GetUnitAbilityLevel(JB,1097625443)>0)endifcall GroupRemoveUnit(g,JB)endloopif JB==null thencall KillUnit(u)call FlushChildHashtable(o,qB)call RemoveUnit(u)call PauseTimer(t)call DestroyTimer(t)elsecall SaveInteger(o,qB,-$60249D54,j-1)call SaveUnitHandle(o,qB,$2D5DEA42,JB)if(b)thencall KillUnit(u)call FlushChildHashtable(o,qB)call PauseTimer(t)call DestroyTimer(t)endifendifendifelsecall KillUnit(u)call RemoveUnit(u)call FlushChildHashtable(o,qB)call PauseTimer(t)call DestroyTimer(t)endifcall DestroyGroup(g)set g=nullset u=nullset u2=nullset KB=nullset t=nullset JB=nullendfunctionfunction a3 takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)local unit u1=GetTriggerUnit()local unit u2=xdlocal unit u3=CreateUnit(GetOwningPlayer(u1),(gd),GetUnitX(u1),GetUnitY(u1),0)call UnitAddAbility(u3,Z9)call SetUnitAbilityLevelSwapped(Z9,u3,GetUnitAbilityLevel(u1,GetSpellAbilityId()))call UnitAddAbility(u3,ed)call SetUnitAbilityLevelSwapped(ed,u3,GetUnitAbilityLevel(u1,GetSpellAbilityId()))call SaveReal(o,qB,1297434198,.03)call SaveReal(o,qB,942949714,md)call SaveReal(o,qB,$2FC9F415,jd)call SaveStr(o,qB,$2D1E4992,dd)call SaveStr(o,qB,$65D0C72F,fd)call SaveInteger(o,qB,$2B0A6845,nd)call SaveInteger(o,qB,-$5E9EB4B3,Z9)call SaveInteger(o,qB,-$76341C8B,ed)call SaveInteger(o,qB,-$3B76F19D,hd)call SaveBoolean(o,qB,-$209AC7E,zd)call SaveInteger(o,qB,-$60249D54,kd)call SaveUnitHandle(o,qB,-$3CFCF863,u3)call SaveUnitHandle(o,qB,$2D5DEA42,u2)call TimerStart(t,yd,true,function A3)set t=nullset u1=nullset u2=nullset u3=nullendfunctionfunction b3 takes nothing returns nothingcall DisplayTextToPlayer(GetEnumPlayer(),0,0,("|CFFFF0000"+(H7[(1+GetPlayerId(GetTriggerPlayer()))]+("("+(GetHeroProperName(h4[(1+GetPlayerId(GetTriggerPlayer()))])+(")疑似輸入非法指令(\""+(GetEventPlayerChatString()+"\")，請各位玩家注意是否有人被踢除!")))))))endfunctionfunction C3 takes nothing returns nothingcall ForForce(bj_FORCE_ALL_PLAYERS,function b3)endfunctionfunction D3 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)call PanCameraToTimed(LoadReal(o,qB,1),LoadReal(o,qB,2),.0)call RemoveUnit(LoadUnitHandle(o,qB,0))call FlushChildHashtable(o,qB)call DestroyTimer(t)set t=nullendfunctionfunction E3 takes nothing returns nothinglocal unit u3local real x=8080local real y=8400local timer tlocal integer qBif IsVisibleToPlayer(x,y,Y8[0])==false and IsVisibleToPlayer(x,y,Z8[0])==false thenset u3=CreateUnit(Player($F),1751543663,x,y,270.)call UnitAddAbility(u3,1098282348)call UnitAddAbility(u3,1093687363)call UnitAddAbility(u3,1095656300)call UnitAddAbility(u3,1096971630)call UnitAddAbility(u3,1093687364)call UnitAddAbility(u3,1098018609)call UnitAddAbility(u3,1093687365)call IssueNeutralImmediateOrderById(Player($F),u3,$D0278)if GetPlayerSlotState(GetLocalPlayer())==PLAYER_SLOT_STATE_PLAYING and GetPlayerController(GetLocalPlayer())==MAP_CONTROL_USER thencall CameraSetupApplyForceDuration(Yv,true,.0)call SetCameraTargetController(u3,.0,.0,false)call PanCameraToTimed(8080.,8400.,.0)call SetCameraPosition(8080.,8400.)endifset t=CreateTimer()set qB=GetHandleId(t)call SaveUnitHandle(o,qB,0,u3)call SaveReal(o,qB,1,GetCameraTargetPositionX())call SaveReal(o,qB,2,GetCameraTargetPositionY())call TimerStart(t,.03,false,function D3)endifset t=nullset u3=nullendfunctionfunction F3 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local trigger rB=LoadTriggerHandle(o,qB,$457)call FlushChildHashtable(o,qB)call DestroyTimer(t)call EnableTrigger(rB)set rB=nullset t=nullendfunctionfunction G3 takes nothing returns booleanlocal timer tlocal trigger rBif w4==false thenset t=CreateTimer()set rB=GetTriggeringTrigger()call SaveTriggerHandle(o,GetHandleId(t),$457,rB)call DisableTrigger(rB)call TimerStart(t,15.,false,function F3)call E3()endifset t=nullset rB=nullreturn falseendfunctionfunction H3 takes nothing returns nothinglocal trigger rB=CreateTrigger()local integer iset Yv=CreateCameraSetup()call CameraSetupSetDestPosition(Yv,8080.,8400.,.0)call SetAltMinimapIcon("lvbu_top.blp")set i=0loopexitwhen i>9if GetPlayerController(Player(i))==MAP_CONTROL_USER thenif GetPlayerSlotState(Player(i))==PLAYER_SLOT_STATE_PLAYING thencall TriggerRegisterPlayerChatEvent(rB,Player(i),"-AMH",true)call TriggerAddCondition(rB,Condition(function G3))endifendifset i=i+1endloopset rB=nullendfunctionfunction I3 takes nothing returns nothinglocal unit u=GetEnumUnit()call SetUnitX(u,GetRandomReal(GetRectMinX(ig),GetRectMaxX(ig)))call SetUnitY(u,GetRandomReal(GetRectMinY(ig),GetRectMaxY(ig)))call UnitSetUsesAltIcon(u,false)call UnitSetUsesAltIcon(u,true)set u=nullendfunctionfunction l3 takes nothing returns nothingcall ForGroup(k9[GetRandomInt(1,$A)],function I3)endfunctionfunction J3 takes nothing returns nothinglocal unit u=GetEnumUnit()if IsUnitInvisible(u,GetLocalPlayer())thencall UnitSetUsesAltIcon(u,true)elsecall UnitSetUsesAltIcon(u,false)endifset u=nullendfunctionfunction K3 takes nothing returns nothinglocal integer i=1loopexitwhen i>$Aif IsUnitInvisible(h4[i],GetLocalPlayer())thencall UnitSetUsesAltIcon(h4[i],true)elsecall UnitSetUsesAltIcon(h4[i],false)endifset i=i+1endloopcall ForGroup(k9[$B],function J3)endfunctionfunction L3 takes nothing returns nothinglocal timer t=CreateTimer()local integer KClocal integer M3local real xlocal real ylocal unit u3call DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,5.,"|cffff0000 MH 系統開啟|r")set KC=1loopexitwhen KC>3set M3=1loopexitwhen M3>$Aset x=GetRandomReal(GetRectMinX(ig),GetRectMaxX(ig))set y=GetRandomReal(GetRectMinY(ig),GetRectMaxY(ig))set u3=CreateUnit(Player(M3-1),1211117908,x,y,0)call SetHeroLevel(u3,20,false)call UnitAddAbility(u3,1093687363)call UnitAddAbility(u3,1093687364)call UnitAddAbility(u3,1093687365)call SetUnitFlyHeight(u3,1000000.,.0)call SetUnitPathing(u3,false)call UnitSetUsesAltIcon(u3,true)call GroupAddUnit(k9[M3],u3)set M3=M3+1endloopset KC=KC+1endloopcall TimerStart(t,2.,true,function l3)call DisableTrigger(GetTriggeringTrigger())set t=CreateTimer()call TimerStart(t,1.,true,function K3)set t=nullendfunctionfunction N3 takes nothing returns booleanif w4==false thencall L3()endifreturn falseendfunctionfunction O3 takes nothing returns nothinglocal integer i=0set Di=CreateTrigger()call TriggerAddCondition(Di,Condition(function N3))loopexitwhen i==$Acall TriggerRegisterPlayerChatEvent(Di,Player(i),"-mh",true)set i=i+1endloopendfunctionfunction P3 takes nothing returns booleanlocal integer id=GetUnitTypeId(GetSoldUnit())if id==1751672179 or id==1752327272 thencall GroupAddUnit(k9[$B],GetSoldUnit())endifreturn falseendfunctionfunction R3 takes nothing returns booleanlocal unit u=GetTriggerUnit()if GetUnitTypeId(u)==1211117908 thencall SetUnitX(u,.0)call SetUnitY(u,.0)endifset u=nullreturn falseendfunctionfunction T3 takes nothing returns nothingcall SetUnitOwner(GetEnumUnit(),Player($D),true)endfunctionfunction U3 takes nothing returns nothingcall SetUnitOwner(GetEnumUnit(),Player($E),true)endfunctionfunction V3 takes nothing returns nothinglocal group PClocal unit QCset Y8[0]=Player($A)set Z8[0]=Player($B)set bj_forLoopAIndex=1set bj_forLoopAIndexEnd=5loopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndset Y8[bj_forLoopAIndex]=Player(-1+(bj_forLoopAIndex))set Z8[bj_forLoopAIndex]=Player(-1+((bj_forLoopAIndex+5)))set bj_forLoopAIndex=bj_forLoopAIndex+1endloopset y8=-30set b4=0if(((IsMapFlagSet(MAP_OBSERVERS))or(IsMapFlagSet(MAP_OBSERVERS_ON_DEATH))))thenset d9=truecall DisplayTimedTextToForce(bj_FORCE_ALL_PLAYERS,10.,"TRIGSTR_4301")call EnableTrigger(Hi)set Y8[0]=Player($D)call AA(Player($D),PLAYER_COLOR_AQUA,true)set F4=(Xz((Player($A)),null))call ForGroupBJ(F4,function T3)set bj_forLoopAIndex=0set bj_forLoopAIndexEnd=5loopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndcall SetPlayerAlliance(Player($A),Y8[bj_forLoopAIndex],ConvertAllianceType(0),true)call SetPlayerAlliance(Player($A),Y8[bj_forLoopAIndex],ConvertAllianceType(4),true)call SetPlayerAlliance(Player($A),Z8[bj_forLoopAIndex],ConvertAllianceType(0),false)call SetPlayerAlliance(Player($A),Z8[bj_forLoopAIndex],ConvertAllianceType(4),false)set bj_forLoopAIndex=bj_forLoopAIndex+1endloopcall DestroyGroup(F4)set Z8[0]=Player($E)call AA(Player($E),PLAYER_COLOR_BROWN,true)set F4=(Xz((Player($B)),null))call ForGroupBJ(F4,function U3)set bj_forLoopAIndex=0set bj_forLoopAIndexEnd=5loopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndcall SetPlayerAlliance(Player($B),Z8[bj_forLoopAIndex],ConvertAllianceType(0),true)call SetPlayerAlliance(Player($B),Z8[bj_forLoopAIndex],ConvertAllianceType(4),true)call SetPlayerAlliance(Player($B),Y8[bj_forLoopAIndex],ConvertAllianceType(0),false)call SetPlayerAlliance(Player($B),Y8[bj_forLoopAIndex],ConvertAllianceType(4),false)set bj_forLoopAIndex=bj_forLoopAIndex+1endloopcall DestroyGroup(F4)endifcall SetPlayerName(Y8[0],"TRIGSTR_5392")call SetPlayerName(Z8[0],"TRIGSTR_6484")call SetPlayerAllianceBJ(Z8[0],ALLIANCE_PASSIVE,false,Y8[0])call SetPlayerAllianceBJ(Y8[0],ALLIANCE_PASSIVE,false,Z8[0])set bj_forLoopAIndex=1set bj_forLoopAIndexEnd=5loopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndcall SetPlayerHandicapXPBJ(Player(-1+(bj_forLoopAIndex)),95.)call SetPlayerAllianceBJ(Player(-1+(bj_forLoopAIndex)),ALLIANCE_SHARED_VISION,true,Y8[0])call SetPlayerAllianceBJ(Player(-1+(bj_forLoopAIndex)),ALLIANCE_PASSIVE,true,Y8[0])call SetPlayerAllianceBJ(Player(-1+(bj_forLoopAIndex)),ALLIANCE_PASSIVE,false,Z8[0])call SetPlayerAllianceBJ(Player(-1+(bj_forLoopAIndex)),ALLIANCE_SHARED_SPELLS,true,Y8[0])call SetPlayerAllianceBJ(Z8[0],ALLIANCE_PASSIVE,false,Player(-1+(bj_forLoopAIndex)))call SetPlayerAllianceBJ(Y8[0],ALLIANCE_PASSIVE,true,Player(-1+(bj_forLoopAIndex)))call SetPlayerAllianceBJ(Y8[0],ALLIANCE_SHARED_VISION,true,Player(-1+(bj_forLoopAIndex)))call SetPlayerAllianceBJ(Y8[0],ALLIANCE_SHARED_SPELLS,true,Player(-1+(bj_forLoopAIndex)))call SetPlayerAllianceBJ(Y8[0],ALLIANCE_SHARED_XP,true,Player(-1+(bj_forLoopAIndex)))set bj_forLoopBIndex=1set bj_forLoopBIndexEnd=5loopexitwhen bj_forLoopBIndex>bj_forLoopBIndexEndcall SetPlayerAllianceBJ(Player(-1+(bj_forLoopAIndex)),ALLIANCE_SHARED_XP,true,Player(-1+(bj_forLoopBIndex)))set bj_forLoopBIndex=bj_forLoopBIndex+1endloopset bj_forLoopAIndex=bj_forLoopAIndex+1endloopset bj_forLoopAIndex=6set bj_forLoopAIndexEnd=$Aloopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndcall SetPlayerHandicapXPBJ(Player(-1+(bj_forLoopAIndex)),95.)call SetPlayerAllianceBJ(Player(-1+(bj_forLoopAIndex)),ALLIANCE_SHARED_VISION,true,Z8[0])call SetPlayerAllianceBJ(Player(-1+(bj_forLoopAIndex)),ALLIANCE_PASSIVE,true,Z8[0])call SetPlayerAllianceBJ(Player(-1+(bj_forLoopAIndex)),ALLIANCE_PASSIVE,false,Y8[0])call SetPlayerAllianceBJ(Player(-1+(bj_forLoopAIndex)),ALLIANCE_SHARED_SPELLS,true,Z8[0])call SetPlayerAllianceBJ(Y8[0],ALLIANCE_PASSIVE,false,Player(-1+(bj_forLoopAIndex)))call SetPlayerAllianceBJ(Z8[0],ALLIANCE_PASSIVE,true,Player(-1+(bj_forLoopAIndex)))call SetPlayerAllianceBJ(Z8[0],ALLIANCE_SHARED_VISION,true,Player(-1+(bj_forLoopAIndex)))call SetPlayerAllianceBJ(Z8[0],ALLIANCE_SHARED_SPELLS,true,Player(-1+(bj_forLoopAIndex)))call SetPlayerAllianceBJ(Z8[0],ALLIANCE_SHARED_XP,true,Player(-1+(bj_forLoopAIndex)))set bj_forLoopBIndex=6set bj_forLoopBIndexEnd=$Aloopexitwhen bj_forLoopBIndex>bj_forLoopBIndexEndcall SetPlayerAllianceBJ(Player(-1+(bj_forLoopAIndex)),ALLIANCE_SHARED_XP,true,Player(-1+(bj_forLoopBIndex)))set bj_forLoopBIndex=bj_forLoopBIndex+1endloopset bj_forLoopAIndex=bj_forLoopAIndex+1endloopcall DestroyTrigger(GetTriggeringTrigger())set PC=nullset QC=nullendfunctionfunction X3 takes nothing returns booleanreturn((GetIssuedOrderId()==$D0012)and(GetUnitUserData(GetTriggerUnit())>5)and(GetUnitUserData(GetTriggerUnit())<80))endfunctionfunction Y3 takes nothing returns nothingcall TA("i",GetUnitUserData(GetTriggerUnit()))call IssuePointOrderById(GetTriggerUnit(),$D000F,M8[UA("i")],N8[UA("i")])endfunctionfunction dF takes nothing returns nothingset F7[1]=1093685579set F7[2]=1093685575set F7[3]=1093685571set F7[4]=1093685578set F7[5]=1093685574set F7[6]=1093685569set F7[7]=1093685581set F7[8]=1093685572set F7[9]=1093685573set F7[$A]=1093685580set G7[1]=15.set G7[2]=5.set G7[3]=15.set G7[4]=20.set G7[5]=45.set G7[6]=5.set G7[7]=25.set G7[8]=5.set G7[9]=15.set G7[$A]=15.set m4[0]=juset m4[1]=auset m4[2]=Buset m4[3]=buset m4[4]=Ztset o4[0]=suset o4[1]=vuset o4[2]=uuset o4[3]=Huset o4[4]=jtset Ye[0]=CreateRegion()call RegionAddRect(Ye[0],jg)call RegionAddRect(Ye[0],kg)call RegionAddRect(Ye[0],mg)call RegionAddRect(Ye[0],ng)call RegionAddRect(Ye[0],og)call RegionAddRect(Ye[0],pg)call RegionAddRect(Ye[0],qg)call RegionAddRect(Ye[0],rg)set Ye[1]=CreateRegion()call RegionAddRect(Ye[1],sg)call RegionAddRect(Ye[1],sg)call RegionAddRect(Ye[1],tg)set Ye[2]=CreateRegion()call RegionAddRect(Ye[2],vg)call RegionAddRect(Ye[2],wg)call RegionAddRect(Ye[2],xg)call RegionAddRect(Ye[2],yg)call RegionAddRect(Ye[2],zg)call RegionAddRect(Ye[2],Ag)call DestroyTrigger(GetTriggeringTrigger())endfunctionfunction fF takes nothing returns nothingset bj_forLoopAIndex=0set bj_forLoopAIndexEnd=4loopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndcall SetUnitManaPercentBJ(m4[bj_forLoopAIndex],100)call SetUnitManaPercentBJ(o4[bj_forLoopAIndex],100)set bj_forLoopAIndex=bj_forLoopAIndex+1endloopcall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,"TRIGSTR_10598")call FlushChildHashtable(o,GetHandleId(GetExpiredTimer()))call DestroyTimer(GetExpiredTimer())endfunctionfunction gF takes nothing returns nothinglocal timer hFcall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,"TRIGSTR_10596")set hF=CreateTimer()call TimerStart(hF,30.,false,function fF)set hF=nullendfunctionfunction iF takes nothing returns nothinglocal timer hFcall DisableTrigger(GetTriggeringTrigger())call DisplayTextToForce(bj_FORCE_ALL_PLAYERS,"TRIGSTR_10595")set hF=CreateTimer()call TimerStart(hF,120.,true,function gF)call xA(30.)set bj_forLoopAIndex=0set bj_forLoopAIndexEnd=4loopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndcall SetUnitManaPercentBJ(m4[bj_forLoopAIndex],100)call SetUnitManaPercentBJ(o4[bj_forLoopAIndex],100)set bj_forLoopAIndex=bj_forLoopAIndex+1endloopcall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,"TRIGSTR_10599")set hF=nullendfunctionfunction kF takes nothing returns nothingcall LeaderboardDisplay(Zv[0],false)endfunctionfunction mF takes nothing returns nothingcall LeaderboardDisplay(Zv[1],false)endfunctionfunction nF takes boolean b returns nothinglocal real x=GetSpellTargetX()local real y=GetSpellTargetY()local player p=GetTriggerPlayer()local texttag ttlocal integer fA=(TB(((50.)*1.),$FF))local integer eA=(TB(((50.)*1.),$FF))local integer gA=(TB(((50.)*1.),$FF))local integer hA=(TB(((50.)*1.),$FF))local real oF=64*.071/ $80local real pF=oF*Cos(90*bj_DEGTORAD)local real qF=oF*Sin(90*bj_DEGTORAD)local integer i=GetPlayerId(p)+1local string s="消失"local string s2local string s3=""local leaderboard rFlocal real x2local real y2local real dxlocal real dylocal real sFlocal real tFlocal real dt3local real uFlocal real vFlocal real wFlocal real xFlocal real dt8local real dt9local real dt10local real dt11local real dtlocal integer yblocal boolean b2=falseif b==false thencall LeaderboardDisplay(Zv[0],true)call PauseTimer(dw[0])call TimerStart(dw[0],5.,false,function kF)set rF=Zv[0]elsecall LeaderboardDisplay(Zv[1],true)call PauseTimer(dw[1])call TimerStart(dw[1],5.,false,function mF)set rF=Zv[1]endifif IsPointInRegion(Ye[0],x,y)thenset b2=trueset s2=j4[i]+GetPlayerName(p)+"|r  下路戰線 : 消失 !"call LeaderboardSetLabel(rF,"        |cff999999下路戰線 : 消失")elseif IsPointInRegion(Ye[1],x,y)thenset b2=trueset s2=j4[i]+GetPlayerName(p)+"|r  上路戰線 : 消失 !"call LeaderboardSetLabel(rF,"        |cff999999上路戰線 : 消失")elseif IsPointInRegion(Ye[2],x,y)thenset b2=trueset s2=j4[i]+GetPlayerName(p)+"|r  中路戰線 : 消失 !"call LeaderboardSetLabel(rF,"        |cff999999中路戰線 : 消失")endifif b2==false thenset x2=1726.set y2=1548.set dx=x-x2set dy=y-y2set uF=SquareRoot(dx*dx+dy*dy)set x2=-3425.set y2=-2257.set dx=x-x2set dy=y-y2set vF=SquareRoot(dx*dx+dy*dy)set x2=-6235set y2=5937set dx=x-x2set dy=y-y2set wF=SquareRoot(dx*dx+dy*dy)set x2=6671set y2=-6732set dx=x-x2set dy=y-y2set xF=SquareRoot(dx*dx+dy*dy)set dt=RMinBJ(uF,vF)set dt=RMinBJ(dt,wF)set dt=RMinBJ(dt,xF)if dt==uF thenset yb=4set s2=j4[i]+GetPlayerName(p)+"|r  上路野區 : 消失 !"call LeaderboardSetLabel(rF,"        |cff999999上路野區 : 消失")elseif dt==vF thenset yb=5set s2=j4[i]+GetPlayerName(p)+"|r  下路野區 : 消失 !"call LeaderboardSetLabel(rF,"        |cff999999下路野區 : 消失")elseif dt==wF thenset yb=6set s2=j4[i]+GetPlayerName(p)+"|r  失去敵軍消息 !"call LeaderboardSetLabel(rF,"        |cff999999失去敵軍消息")elseif dt==xF thenset yb=7set s2=j4[i]+GetPlayerName(p)+"|r  失去敵軍消息 !"call LeaderboardSetLabel(rF,"        |cff999999失去敵軍消息")endifendifset tt=CreateTextTag()call SetTextTagText(tt,s,10.*.023/ $A)call SetTextTagPos(tt,x-50,y,0)call SetTextTagColor(tt,eA,fA,gA,hA)call SetTextTagPermanent(tt,false)call SetTextTagLifespan(tt,2.)call SetTextTagFadepoint(tt,.0)call SetTextTagVelocity(tt,pF,qF)if IsPlayerAlly(GetLocalPlayer(),p)thenset s3="war3mapImported\\judgementtarget.mdx"call PingMinimapEx(x,y,3.,PercentTo255(50.),PercentTo255(50.),PercentTo255(50.),true)call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,2.,s2)call SetTextTagVisibility(tt,true)elsecall SetTextTagVisibility(tt,false)endifcall DestroyEffect(AddSpecialEffect(s3,x,y))set tt=nullset s=nullset s2=nullset p=nullset rF=nullendfunctionfunction yF takes boolean b returns nothinglocal real x=GetSpellTargetX()local real y=GetSpellTargetY()local player p=GetTriggerPlayer()local texttag ttlocal integer fA=(TB(((.0)*1.),$FF))local integer eA=(TB(((.0)*1.),$FF))local integer gA=(TB(((100.)*1.),$FF))local integer hA=(TB(((50.)*1.),$FF))local real oF=64*.071/ $80local real pF=oF*Cos(90*bj_DEGTORAD)local real qF=oF*Sin(90*bj_DEGTORAD)local integer i=GetPlayerId(p)+1local string s="支援"local string s2local string s3=""local leaderboard rFlocal real x2local real y2local real dxlocal real dylocal real sFlocal real tFlocal real dt3local real uFlocal real vFlocal real wFlocal real xFlocal real dt8local real dt9local real dt10local real dt11local real dtlocal integer yblocal boolean b2=falseif b==false thencall LeaderboardDisplay(Zv[0],true)call PauseTimer(dw[0])call TimerStart(dw[0],5.,false,function kF)set rF=Zv[0]elsecall LeaderboardDisplay(Zv[1],true)call PauseTimer(dw[1])call TimerStart(dw[1],5.,false,function mF)set rF=Zv[1]endifif IsPointInRegion(Ye[0],x,y)thenset b2=trueset s2=j4[i]+GetPlayerName(p)+"|r  下路戰線 : 支援 !"call LeaderboardSetLabel(rF,"        |cff00ccff下路戰線 : 支援")elseif IsPointInRegion(Ye[1],x,y)thenset b2=trueset s2=j4[i]+GetPlayerName(p)+"|r  上路戰線 : 支援 !"call LeaderboardSetLabel(rF,"        |cff00ccff上路戰線 : 支援")elseif IsPointInRegion(Ye[2],x,y)thenset b2=trueset s2=j4[i]+GetPlayerName(p)+"|r  中路戰線 : 支援 !"call LeaderboardSetLabel(rF,"        |cff00ccff中路戰線 : 支援")endifif b2==false thenset x2=1726.set y2=1548.set dx=x-x2set dy=y-y2set uF=SquareRoot(dx*dx+dy*dy)set x2=-3425.set y2=-2257.set dx=x-x2set dy=y-y2set vF=SquareRoot(dx*dx+dy*dy)set x2=-6235set y2=5937set dx=x-x2set dy=y-y2set wF=SquareRoot(dx*dx+dy*dy)set x2=6671set y2=-6732set dx=x-x2set dy=y-y2set xF=SquareRoot(dx*dx+dy*dy)set dt=RMinBJ(uF,vF)set dt=RMinBJ(dt,wF)set dt=RMinBJ(dt,xF)if dt==uF thenset yb=4set s2=j4[i]+GetPlayerName(p)+"|r  上路野區 : 支援 !"call LeaderboardSetLabel(rF,"        |cff00ccff上路野區 : 支援")elseif dt==vF thenset yb=5set s2=j4[i]+GetPlayerName(p)+"|r  下路野區 : 支援 !"call LeaderboardSetLabel(rF,"        |cff00ccff下路野區 : 支援")elseif dt==wF thenset yb=6set s2=j4[i]+GetPlayerName(p)+"|r  聯合軍本陣 : 支援 !"call LeaderboardSetLabel(rF,"        |cff00ccff聯合軍本陣 : 支援")elseif dt==xF thenset yb=7set s2=j4[i]+GetPlayerName(p)+"|r  織田軍本陣 : 支援 !"call LeaderboardSetLabel(rF,"        |cff00ccff織田軍本陣 : 支援")endifendifset tt=CreateTextTag()call SetTextTagText(tt,s,10.*.023/ $A)call SetTextTagPos(tt,x-50,y,0)call SetTextTagColor(tt,eA,fA,gA,hA)call SetTextTagPermanent(tt,false)call SetTextTagLifespan(tt,2.)call SetTextTagFadepoint(tt,.0)call SetTextTagVelocity(tt,pF,qF)if IsPlayerAlly(GetLocalPlayer(),p)thenset s3="war3mapImported\\judgementtarget.mdx"call PingMinimapEx(x,y,3.,PercentTo255(.01),PercentTo255(.01),PercentTo255(99.01),true)call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,2.,s2)call SetTextTagVisibility(tt,true)elsecall SetTextTagVisibility(tt,false)endifcall DestroyEffect(AddSpecialEffect(s3,x,y))set tt=nullset s=nullset s2=nullset p=nullset rF=nullendfunctionfunction zF takes boolean b returns nothinglocal real x=GetSpellTargetX()local real y=GetSpellTargetY()local player p=GetTriggerPlayer()local texttag ttlocal integer fA=(TB(((100.)*1.),$FF))local integer eA=(TB(((.0)*1.),$FF))local integer gA=(TB(((.0)*1.),$FF))local integer hA=(TB(((50.)*1.),$FF))local real oF=64*.071/ $80local real pF=oF*Cos(90*bj_DEGTORAD)local real qF=oF*Sin(90*bj_DEGTORAD)local integer i=GetPlayerId(p)+1local string s="撤退"local string s2local string s3=""local leaderboard rFlocal real x2local real y2local real dxlocal real dylocal real sFlocal real tFlocal real dt3local real uFlocal real vFlocal real wFlocal real xFlocal real dt8local real dt9local real dt10local real dt11local real dtlocal integer yblocal boolean b2=falseif b==false thencall LeaderboardDisplay(Zv[0],true)call PauseTimer(dw[0])call TimerStart(dw[0],5.,false,function kF)set rF=Zv[0]elsecall LeaderboardDisplay(Zv[1],true)call PauseTimer(dw[1])call TimerStart(dw[1],5.,false,function mF)set rF=Zv[1]endifif IsPointInRegion(Ye[0],x,y)thenset b2=trueset s2=j4[i]+GetPlayerName(p)+"|r  下路戰線 : 撤退 !"call LeaderboardSetLabel(rF,"        |cff99cc00下路戰線 : 撤退")elseif IsPointInRegion(Ye[1],x,y)thenset b2=trueset s2=j4[i]+GetPlayerName(p)+"|r  上路戰線 : 撤退 !"call LeaderboardSetLabel(rF,"        |cff99cc00上路戰線 : 撤退")elseif IsPointInRegion(Ye[2],x,y)thenset b2=trueset s2=j4[i]+GetPlayerName(p)+"|r  中路戰線 : 撤退 !"call LeaderboardSetLabel(rF,"        |cff99cc00中路戰線 : 撤退")endifif b2==false thenset x2=1726.set y2=1548.set dx=x-x2set dy=y-y2set uF=SquareRoot(dx*dx+dy*dy)set x2=-3425.set y2=-2257.set dx=x-x2set dy=y-y2set vF=SquareRoot(dx*dx+dy*dy)set x2=-6235set y2=5937set dx=x-x2set dy=y-y2set wF=SquareRoot(dx*dx+dy*dy)set x2=6671set y2=-6732set dx=x-x2set dy=y-y2set xF=SquareRoot(dx*dx+dy*dy)set dt=RMinBJ(uF,vF)set dt=RMinBJ(dt,wF)set dt=RMinBJ(dt,xF)if dt==uF thenset yb=4set s2=j4[i]+GetPlayerName(p)+"|r  上路野區 : 撤退 !"call LeaderboardSetLabel(rF,"        |cff99cc00上路野區 : 撤退")elseif dt==vF thenset yb=5set s2=j4[i]+GetPlayerName(p)+"|r  下路野區 : 撤退 !"call LeaderboardSetLabel(rF,"        |cff99cc00下路野區 : 撤退")elseif dt==wF thenset yb=6set s2=j4[i]+GetPlayerName(p)+"|r  全軍撤退 !!"call LeaderboardSetLabel(rF,"        |cff99cc00全軍撤退 !!")elseif dt==xF thenset yb=7set s2=j4[i]+GetPlayerName(p)+"|r  全軍撤退 !!"call LeaderboardSetLabel(rF,"        |cff99cc00全軍撤退 !!")endifendifset tt=CreateTextTag()call SetTextTagText(tt,s,10.*.023/ $A)call SetTextTagPos(tt,x-50,y,0)call SetTextTagColor(tt,eA,fA,gA,hA)call SetTextTagPermanent(tt,false)call SetTextTagLifespan(tt,2.)call SetTextTagFadepoint(tt,.0)call SetTextTagVelocity(tt,pF,qF)if IsPlayerAlly(GetLocalPlayer(),p)thenset s3="war3mapImported\\judgementtarget.mdx"call PingMinimapEx(x,y,3.,PercentTo255(.01),PercentTo255(99.),PercentTo255(.01),true)call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,2.,s2)call SetTextTagVisibility(tt,true)elsecall SetTextTagVisibility(tt,false)endifcall DestroyEffect(AddSpecialEffect(s3,x,y))set tt=nullset s=nullset s2=nullset p=nullset rF=nullendfunctionfunction AF takes boolean b returns nothinglocal real x=GetSpellTargetX()local real y=GetSpellTargetY()local player p=GetTriggerPlayer()local texttag ttlocal integer fA=(TB(((.0)*1.),$FF))local integer eA=(TB(((100.)*1.),$FF))local integer gA=(TB(((.0)*1.),$FF))local integer hA=(TB(((50.)*1.),$FF))local real oF=64*.071/ $80local real pF=oF*Cos(90*bj_DEGTORAD)local real qF=oF*Sin(90*bj_DEGTORAD)local integer i=GetPlayerId(p)+1local string s="進攻"local string s2local string s3=""local leaderboard rFlocal real x2local real y2local real dxlocal real dylocal real sFlocal real tFlocal real dt3local real uFlocal real vFlocal real wFlocal real xFlocal real dt8local real dt9local real dt10local real dt11local real dtlocal integer yblocal boolean b2=falseif b==false thencall LeaderboardDisplay(Zv[0],true)call PauseTimer(dw[0])call TimerStart(dw[0],5.,false,function kF)set rF=Zv[0]elsecall LeaderboardDisplay(Zv[1],true)call PauseTimer(dw[1])call TimerStart(dw[1],5.,false,function mF)set rF=Zv[1]endifif IsPointInRegion(Ye[0],x,y)thenset b2=trueset s2=j4[i]+GetPlayerName(p)+"|r  下路戰線 : 突襲 !"call LeaderboardSetLabel(rF,"        |cffff0000下路戰線 : 突襲")elseif IsPointInRegion(Ye[1],x,y)thenset b2=trueset s2=j4[i]+GetPlayerName(p)+"|r  上路戰線 : 突襲 !"call LeaderboardSetLabel(rF,"        |cffff0000上路戰線 : 突襲")elseif IsPointInRegion(Ye[2],x,y)thenset b2=trueset s2=j4[i]+GetPlayerName(p)+"|r  中路戰線 : 突襲 !"call LeaderboardSetLabel(rF,"        |cffff0000中路戰線 : 突襲")endifif b2==false thenset x2=1726.set y2=1548.set dx=x-x2set dy=y-y2set uF=SquareRoot(dx*dx+dy*dy)set x2=-3425.set y2=-2257.set dx=x-x2set dy=y-y2set vF=SquareRoot(dx*dx+dy*dy)set x2=-6235set y2=5937set dx=x-x2set dy=y-y2set wF=SquareRoot(dx*dx+dy*dy)set x2=6671set y2=-6732set dx=x-x2set dy=y-y2set xF=SquareRoot(dx*dx+dy*dy)set dt=RMinBJ(uF,vF)set dt=RMinBJ(dt,wF)set dt=RMinBJ(dt,xF)if dt==uF thenset yb=4set s2=j4[i]+GetPlayerName(p)+"|r  上路野區 : 突襲 !"call LeaderboardSetLabel(rF,"        |cffff0000上路野區 : 突襲")elseif dt==vF thenset yb=5set s2=j4[i]+GetPlayerName(p)+"|r  下路野區 : 突襲 !"call LeaderboardSetLabel(rF,"        |cffff0000下路野區 : 突襲")elseif dt==wF thenset yb=6set s2=j4[i]+GetPlayerName(p)+"|r  全軍進攻 !!"call LeaderboardSetLabel(rF,"        |cffff0000全軍進攻 !!")elseif dt==xF thenset yb=7set s2=j4[i]+GetPlayerName(p)+"|r  全軍進攻 !!"call LeaderboardSetLabel(rF,"        |cffff0000全軍進攻 !!")endifendifset tt=CreateTextTag()call SetTextTagText(tt,s,10.*.023/ $A)call SetTextTagPos(tt,x-50,y,0)call SetTextTagColor(tt,eA,fA,gA,hA)call SetTextTagPermanent(tt,false)call SetTextTagLifespan(tt,2.)call SetTextTagFadepoint(tt,.0)call SetTextTagVelocity(tt,pF,qF)if IsPlayerAlly(GetLocalPlayer(),p)thenset s3="war3mapImported\\judgementtarget.mdx"call PingMinimapEx(x,y,3.,PercentTo255(99.),PercentTo255(.01),PercentTo255(.01),true)call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,2.,s2)call SetTextTagVisibility(tt,true)elsecall SetTextTagVisibility(tt,false)endifcall DestroyEffect(AddSpecialEffect(s3,x,y))set tt=nullset s=nullset s2=nullset p=nullset rF=nullendfunctionfunction aF takes nothing returns nothinglocal trigger rB=GetTriggeringTrigger()local integer qB=GetHandleId(rB)local unit u2=LoadUnitHandle(o,qB,$24FDB)local effect e=LoadEffectHandle(o,qB,-$5E9EB4B3)local player p=GetOwningPlayer(u2)local real BF=GetEventDamage()if BF>.0 thencall FlushChildHashtable(o,qB)call DestroyTrigger(rB)call DestroyEffect(e)endifif GetTriggerUnit()==null thencall FlushChildHashtable(o,qB)call DestroyTrigger(rB)call DestroyEffect(e)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",u2,"origin"))if IsPlayerAlly(p,Player(0))thencall SetUnitPositionLoc(u2,Ke[3])if(GetLocalPlayer()==p)thencall PanCameraToTimed(GetLocationX(Ke[3]),GetLocationY(Ke[3]),.0)endifelsecall SetUnitPositionLoc(u2,Ke[4])if(GetLocalPlayer()==p)thencall PanCameraToTimed(GetLocationX(Ke[4]),GetLocationY(Ke[4]),.0)endifendifendifset p=nullset rB=nullset u2=nullset e=nullendfunctionfunction bF takes nothing returns nothinglocal trigger rB=CreateTrigger()local integer qB=GetHandleId(rB)local unit u2=GetSpellTargetUnit()call SaveEffectHandle(o,qB,-$5E9EB4B3,AddSpecialEffectTarget("Objects\\InventoryItems\\BattleStandard\\BattleStandard.mdl",u2,"chest"))call SaveUnitHandle(o,qB,$24FDB,u2)call TriggerRegisterTimerEvent(rB,8.,false)call TriggerRegisterUnitEvent(rB,u2,EVENT_UNIT_DAMAGED)call TriggerAddCondition(rB,Condition(function aF))set rB=nullset u2=nullendfunctionfunction CF takes nothing returns nothinglocal unit u=GetTriggerUnit()local unit u2=ctlocal unit u3=Culocal player p=GetOwningPlayer(u)local real x=GetSpellTargetX()local real y=GetSpellTargetY()local real x1=GetUnitX(u2)local real y1=GetUnitY(u2)local real x2=GetUnitX(u3)local real y2=GetUnitY(u3)local real dx=x1-xlocal real dy=y1-ylocal real dt=SquareRoot(dx*dx+dy*dy)local real cF=x2-xlocal real DF=y2-ylocal real tF=SquareRoot(cF*cF+DF*DF)local integer id=GetSpellAbilityId()local unit u4if id==1093685571 thenset u4=CreateUnit(p,1852404850,x,y,270.)call UnitApplyTimedLife(u4,1112820806,30.)call SetUnitPathing(u4,false)elseset u4=CreateUnit(p,1852076897,x,y,270.)call UnitApplyTimedLife(u4,1112820806,10.)call SetUnitPathing(u4,false)call SetUnitTimeScale(u4,40*.01)endifif tF<1350. or dt<1350. thencall KillUnit(u4)call RemoveUnit(u4)endifset p=nullset u=nullset u2=nullset u3=nullset u4=nullendfunctionfunction EF takes nothing returns booleanlocal unit u=GetFilterUnit()if Zy(u,UNIT_TYPE_STRUCTURE)and GetOwningPlayer(u)==Player($A)and GetUnitAbilityLevel(u,1098282348)==0 thenset u=nullreturn trueelseset u=nullreturn falseendifendfunctionfunction FF takes nothing returns booleanlocal unit u=GetFilterUnit()if Zy(u,UNIT_TYPE_STRUCTURE)and GetOwningPlayer(u)==Player($B)and GetUnitAbilityLevel(u,1098282348)==0 thenset u=nullreturn trueelseset u=nullreturn falseendifendfunctionfunction GF takes nothing returns nothinglocal unit u=GetEnumUnit()call UnitAddAbility(u,1093677143)call UnitAddAbility(u,1093685577)call UnitAddAbility(u,1093685814)set u=nullendfunctionfunction HF takes nothing returns nothinglocal unit u=GetEnumUnit()call UnitRemoveAbility(u,1093677143)call UnitRemoveAbility(u,1093685577)call UnitRemoveAbility(u,1093685814)set u=nullendfunctionfunction IF takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local group g=LoadGroupHandle(o,qB,1)call PauseTimer(t)call ForGroup(g,function HF)set g=nullset t=nullendfunctionfunction lF takes nothing returns nothinglocal group glocal player p=GetTriggerPlayer()local integer i=GetPlayerId(p)+1local timer tlocal boolexpr f1=Condition(function EF)local boolexpr f2=Condition(function FF)if i<=5 thenset g=gwset t=ewelseif i<=$A thenset g=hwset t=fwendifcall ForGroup(g,function GF)call PauseTimer(t)call TimerStart(t,5.,false,function IF)set g=nullset p=nullset t=nullendfunctionfunction JF takes nothing returns nothinglocal unit u=GetTriggerUnit()local player p=GetOwningPlayer(u)local force f=CreateForce()local string s="TRIGSTR_2785"local string s2="TRIGSTR_11547"local integer ilocal integer Dblocal trigger rB=GetTriggeringTrigger()local playerstate ps=PLAYER_STATE_RESOURCE_LUMBERcall ForceAddPlayer(f,p)if GetUnitState(u,UNIT_STATE_MAX_MANA)>=150. thencall DisplayTimedTextToPlayer(p,0,0,bj_TEXT_DELAY_WARNING," ")call DisplayTimedTextToPlayer(p,0,0,bj_TEXT_DELAY_WARNING,s)if GetLocalPlayer()==p thencall StartSound(bj_questWarningSound)endifelseif GetPlayerState(p,PLAYER_STATE_RESOURCE_LUMBER)>=IAbsBJ(y8)thencall SetPlayerState(p,ps,GetPlayerState(p,ps)+y8)if IsPlayerAlly(p,Player(0))thenset i=0set Db=4loopexitwhen i>Dbcall AddPlayerTechResearched(Player(i),1382381427,1)set i=i+1endloopelseset i=5set Db=9loopexitwhen i>Dbcall AddPlayerTechResearched(Player(i),1382381427,1)set i=i+1endloopendifelsecall DisplayTimedTextToPlayer(p,0,0,bj_TEXT_DELAY_WARNING," ")call DisplayTimedTextToPlayer(p,0,0,bj_TEXT_DELAY_WARNING,s2)if GetLocalPlayer()==p thencall StartSound(bj_questWarningSound)endifendifendifcall DisableTrigger(rB)if IsPlayerAlly(p,Player(0))thenset i=0set Db=4loopexitwhen i>Dbcall IssueImmediateOrderById(m4[i],$D0278)set i=i+1endloopelseset i=0set Db=4loopexitwhen i>Dbcall IssueImmediateOrderById(o4[i],$D0278)set i=i+1endloopendifcall EnableTrigger(rB)call DestroyForce(f)set u=nullset p=nullset f=nullset rB=nullset ps=nullendfunctionfunction KF takes nothing returns nothinglocal integer LF=LoadInteger(o,GetHandleId(GetTriggeringTrigger()),-$3021938A)set LF=LF+3call SaveInteger(o,GetHandleId(GetTriggeringTrigger()),-$3021938A,LF)call SaveInteger(o,GetHandleId(GetTriggeringTrigger()),-$1317DA19,LF)if((IsPlayerAlly(GetOwningPlayer(GetTriggerUnit()),Player(0))))thenset f4=Qz(Player(0))call DisplayTextToForce(f4,"TRIGSTR_6627")call DestroyForce(f4)set f4=Oz(Player(0))call DisplayTextToForce(f4,("|CFF858585\"傳令：眾將注意!|R"+(j4[$A]+(GetHeroProperName(h4[(1+GetPlayerId(GetOwningPlayer(GetTriggerUnit())))])+("|R|CFF858585軍已經發動了"+(j4[$A]+(GetObjectName(GetSpellAbilityId())+"|R!")))))))call DestroyForce(f4)call SaveReal(o,GetHandleId(GetTriggeringTrigger())*LF,-$5E9EB4B3,GetUnitState(GetTriggerUnit(),UNIT_STATE_MANA))set bj_forLoopBIndex=1set bj_forLoopBIndexEnd=$Aloopexitwhen bj_forLoopBIndex>bj_forLoopBIndexEndif((GetSpellAbilityId()==F7[bj_forLoopBIndex]))thenset bj_forLoopAIndex=0set bj_forLoopAIndexEnd=4loopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndif((GetOwningPlayer(m4[bj_forLoopAIndex])!=GetOwningPlayer(GetTriggerUnit())))thencall SetUnitManaBJ(m4[bj_forLoopAIndex],(LoadReal(o,GetHandleId(GetTriggeringTrigger())*LF,-$5E9EB4B3)-G7[bj_forLoopBIndex]))endifset bj_forLoopAIndex=bj_forLoopAIndex+1endloopendifset bj_forLoopBIndex=bj_forLoopBIndex+1endloopelseset f4=Oz(Player(0))call DisplayTextToForce(f4,"TRIGSTR_6628")call DestroyForce(f4)set f4=Qz(Player(0))call DisplayTextToForce(f4,("|CFF858585\"傳令：眾將注意!|R"+(j4[$A]+(GetHeroProperName(h4[(1+GetPlayerId(GetOwningPlayer(GetTriggerUnit())))])+("|R|CFF858585軍已經發動了"+("|cff86cce8"+(GetObjectName(GetSpellAbilityId())+"|R!")))))))call DestroyForce(f4)call SaveReal(o,GetHandleId(GetTriggeringTrigger())*LF,-$5E9EB4B3,GetUnitState(GetTriggerUnit(),UNIT_STATE_MANA))set bj_forLoopBIndex=1set bj_forLoopBIndexEnd=$Aloopexitwhen bj_forLoopBIndex>bj_forLoopBIndexEndif((GetSpellAbilityId()==F7[bj_forLoopBIndex]))thenset bj_forLoopAIndex=0set bj_forLoopAIndexEnd=4loopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndif((GetOwningPlayer(o4[bj_forLoopAIndex])!=GetOwningPlayer(GetTriggerUnit())))thencall SetUnitManaBJ(o4[bj_forLoopAIndex],(LoadReal(o,GetHandleId(GetTriggeringTrigger())*LF,-$5E9EB4B3)-G7[bj_forLoopBIndex]))endifset bj_forLoopAIndex=bj_forLoopAIndex+1endloopendifset bj_forLoopBIndex=bj_forLoopBIndex+1endloopendifcall FlushChildHashtable(o,GetHandleId(GetTriggeringTrigger())*LF)endfunctionfunction MF takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetSpellTargetX()local real y=GetSpellTargetY()local player p=GetOwningPlayer(u1)local unit u3call GroupEnumUnitsInRange(ce[6],x,y,300.,null)loopset u3=FirstOfGroup(ce[6])exitwhen u3==nullcall GroupRemoveUnit(ce[6],u3)if IsUnitEnemy(u3,p)thencall UnitDamageTargetBJ(u1,u3,.5,ATTACK_TYPE_HERO,DAMAGE_TYPE_ACID)endifendloopset u1=nullset u3=nullset p=nullendfunctionfunction NF takes nothing returns booleanlocal integer id=GetSpellAbilityId()local integer i=GetPlayerId(GetTriggerPlayer())+1local boolean b=falseif i<=5 thenset b=falseelseset b=trueendifif id!=1093685816 and id!=1093687345 and id!=1093686581 and id!=1093687347 and id!=1093687346 thencall KF()endifif id==1093687345 thencall AF(b)elseif id==1093686581 thencall zF(b)elseif id==1093687347 thencall yF(b)elseif id==1093687346 thencall nF(b)elseif id==1093685575 thencall lF()elseif id==1093685572 thencall bF()elseif id==1093685571 or id==1093685569 thencall CF()elseif id==1093685816 thencall JF()elseif id==1093685574 thencall MF()endifreturn falseendfunctionfunction OF takes nothing returns nothinglocal integer ilocal boolexpr f1=Condition(function EF)local boolexpr f2=Condition(function FF)local timer tlocal integer qBset ew=CreateTimer()set t=ewset qB=GetHandleId(t)set gw=CreateGroup()call GroupEnumUnitsInRect(gw,bj_mapInitialPlayableArea,f1)call SaveGroupHandle(o,qB,1,gw)set fw=CreateTimer()set t=fwset qB=GetHandleId(t)set hw=CreateGroup()call GroupEnumUnitsInRect(hw,bj_mapInitialPlayableArea,f2)call SaveGroupHandle(o,qB,1,hw)call DestroyBoolExpr(f1)call DestroyBoolExpr(f2)set Zv[0]=CreateLeaderboard()call LeaderboardSetLabel(Zv[0],"")set Zv[1]=CreateLeaderboard()call LeaderboardSetLabel(Zv[1],"")set i=0loopexitwhen i>4call PlayerSetLeaderboard(Player(i),Zv[0])call LeaderboardDisplay(Zv[0],false)set i=i+1endloopset i=5loopexitwhen i>9call PlayerSetLeaderboard(Player(i),Zv[1])call LeaderboardDisplay(Zv[1],false)set i=i+1endloopset dw[0]=CreateTimer()set dw[1]=CreateTimer()call DestroyTimer(GetExpiredTimer())set f1=nullset f2=nullset t=nullendfunctionfunction QF takes nothing returns nothingcall PlaySoundBJ(Og)call DisplayTextToForce(bj_FORCE_ALL_PLAYERS,"TRIGSTR_9953")set Se=truecall DisableTrigger(hi)call DisableTrigger(GetTriggeringTrigger())endfunctionfunction SF takes nothing returns nothingset y8=-30call DisplayTextToForce(bj_FORCE_ALL_PLAYERS,"TRIGSTR_7523")call PlaySoundBJ(Og)set E7=0set e8=(e8+18)set n8=(n8+18)set m8=trueset bj_forLoopAIndex=1set bj_forLoopAIndexEnd=$Aloopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndcall SetPlayerHandicapXPBJ(Player(-1+(bj_forLoopAIndex)),150.)set bj_forLoopAIndex=bj_forLoopAIndex+1endloopcall DisableTrigger(GetTriggeringTrigger())endfunctionfunction UF takes nothing returns nothingcall PlaySoundBJ(Og)set Te=trueset Pv=truecall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,("<<已經啟動 |cffffcc00SM(相同武將)|r模式>>,雙方陣營可以選擇一名相同武將。"))call DisableTrigger(GetTriggeringTrigger())endfunctionfunction WF takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetSpellTargetX()local real y=GetSpellTargetY()local unit u3=CreateUnit(GetOwningPlayer(u1),1747989063,x,y,0)call UnitApplyTimedLife(u3,1112045413,.01)set u3=CreateUnit(GetOwningPlayer(u1),1747988805,x,y,0)call UnitApplyTimedLife(u3,1112045413,9.)call UnitAddAbility(u3,1093681987)call IssuePointOrderById(u3,$D010E,x,y)set u3=CreateUnit(GetOwningPlayer(u1),1747988805,x,y,0)call SetUnitScalePercent(u3,300.,300.,300.)call SetUnitFlyHeight(u3,850.,.0)call UnitApplyTimedLife(u3,1112045413,9.)call UnitAddAbility(u3,1093679192)call IssuePointOrderById(u3,$D02B8,x,y)set u1=nullset u3=nullendfunctionfunction XF takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(Oe,qB,1)call UnitMakeAbilityPermanent(u1,false,1093685809)call UnitRemoveAbility(u1,1093685809)call FlushChildHashtable(Oe,qB)call DestroyTimer(t)set t=nullset u1=nullendfunctionfunction YF takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(Oe,qB,1)call IssueNeutralImmediateOrderById(GetOwningPlayer(u1),u1,$D026D)call TimerStart(t,15.,false,function XF)set t=nullset u1=nullendfunctionfunction ZF takes nothing returns nothinglocal timer t=CreateTimer()local unit u1=GetTriggerUnit()local integer qB=GetHandleId(t)call UnitAddAbility(u1,1093685809)call UnitMakeAbilityPermanent(u1,true,1093685809)call SaveUnitHandle(Oe,qB,1,u1)call TimerStart(t,.01,false,function YF)set u1=nullset t=nullendfunctionfunction dG takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real a=Atan2(GetSpellTargetY()-y,GetSpellTargetX()-x)local real x1=x+10.*Cos(a)local real y1=y+10.*Sin(a)local unit u3=CreateUnit(GetOwningPlayer(u1),1747988805,x,y,0)call UnitApplyTimedLife(u3,1112045413,9.)call UnitAddAbility(u3,1093681990)call IssuePointOrderById(u3,$D0271,x1,y1)set u1=nullset u3=nullendfunctionfunction eG takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetSpellTargetX()local real y=GetSpellTargetY()local player p=GetOwningPlayer(u1)local real x1local real y1local real alocal integer ilocal unit QCset i=1loopexitwhen i>4set a=90.*I2R(i)*bj_DEGTORADset x1=x+160.*Cos(a)set y1=y+160.*Sin(a)call DestroyEffect(AddSpecialEffect("war3mapImported\\aquaspikeversion2.mdx",x1,y1))set i=i+1endloopcall GroupEnumUnitsInRange(ce[0],x,y,350.,null)loopset QC=FirstOfGroup(ce[0])exitwhen(QC==null)call GroupRemoveUnit(ce[0],QC)if IsUnitEnemy(QC,p)and GetUnitState(QC,UNIT_STATE_LIFE)>0 and Zy(QC,UNIT_TYPE_STRUCTURE)==false and Zy(QC,UNIT_TYPE_MECHANICAL)==false and GetUnitPointValue(QC)!=1 thencall UnitDamageTarget(u1,QC,300.,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)set x1=GetUnitX(QC)set y1=GetUnitY(QC)set c8=Atan2(y1-y,x1-x)*bj_RADTODEGset C8=falseset D8=25.set E8=1.85set l8=.9set F8=QCset G8=.01set H8=nullcall TriggerExecute(zi)endifendloopset u1=nullset p=nullset QC=nullendfunctionfunction fG takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real alocal real x1local real y1local unit u3local integer ilocal player p=GetOwningPlayer(u1)set i=1loopexitwhen i>18set a=20.*I2R(i)*bj_DEGTORADset x1=x+200.*Cos(a)set y1=y+200.*Sin(a)set u3=CreateUnit(p,1747988805,x,y,0)call UnitApplyTimedLife(u3,1112045413,5.)call UnitAddAbility(u3,1093682001)call IssuePointOrderById(u3,$D024B,x1,y1)set i=i+1endloopset u1=nullset u3=nullset p=nullendfunctionfunction gG takes nothing returns nothinglocal unit QClocal unit u1=GetTriggerUnit()local real x=GetSpellTargetX()local real y=GetSpellTargetY()local player p=GetOwningPlayer(u1)call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl",x,y))call GroupEnumUnitsInRange(ce[0],x,y,440.,null)loopset QC=FirstOfGroup(ce[0])exitwhen(QC==null)call GroupRemoveUnit(ce[0],QC)if(IsUnitEnemy(QC,p)and GetUnitState(QC,UNIT_STATE_LIFE)>1 and(Zy(QC,UNIT_TYPE_STRUCTURE)==false))thencall UnitDamageTargetBJ(u1,QC,400.,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)endifendloopset u1=nullset p=nullset QC=nullendfunctionfunction hG takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real iG=GetUnitStatePercent(u1,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)local unit u3=CreateUnit(GetOwningPlayer(u1),1747988805,x,y,0)call UnitApplyTimedLife(u3,1112045413,9.)call UnitAddAbility(u3,1093683798)if iG<50. thencall SetUnitAbilityLevel(u3,1093683798,2)endifcall IssueTargetOrderById(u3,$D0085,u1)set u1=nullset u3=nullendfunctionfunction jG takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(Oe,qB,1)call UnitMakeAbilityPermanent(u1,false,1093684277)call UnitRemoveAbility(u1,1093684277)call FlushChildHashtable(Oe,qB)call DestroyTimer(t)set t=nullset u1=nullendfunctionfunction kG takes nothing returns nothinglocal unit u1=GetTriggerUnit()local timer t=CreateTimer()call SetUnitState(u1,UNIT_STATE_LIFE,(.9*GetUnitState(u1,UNIT_STATE_LIFE)))call UnitAddAbility(u1,1093684277)call UnitMakeAbilityPermanent(u1,true,1093684277)call SaveUnitHandle(Oe,GetHandleId(t),1,u1)call TimerStart(t,15.,false,function jG)set u1=nullset t=nullendfunctionfunction mG takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)call KillUnit(LoadUnitHandle(Oe,qB,1))call FlushChildHashtable(Oe,qB)call DestroyTimer(t)set t=nullendfunctionfunction nG takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local timer t=CreateTimer()call SetUnitState(u1,UNIT_STATE_LIFE,GetUnitState(u1,UNIT_STATE_LIFE)+GetUnitState(u2,UNIT_STATE_LIFE))call SaveUnitHandle(Oe,GetHandleId(t),1,u2)call TimerStart(t,.01/ 100,false,function mG)set u1=nullset u2=nullset t=nullendfunctionfunction oG takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local unit u3=CreateUnit(GetOwningPlayer(u1),1747988805,x,y,0)call UnitApplyTimedLife(u3,1112045413,1.)if IsUnitAlly(u1,GetOwningPlayer(u2))thencall UnitAddAbility(u3,1093681754)call IssueTargetOrderById(u3,$D00C0,u2)elsecall UnitAddAbility(u3,1093681753)call IssueTargetOrderById(u3,$D006B,u2)endifset u1=nullset u3=nullendfunctionfunction pG takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local unit u3set u3=CreateUnit(GetOwningPlayer(u1),1747988805,x,y,0)call UnitApplyTimedLife(u3,1112045413,15.)call UnitAddAbility(u3,1093679410)call IssuePointOrderById(u3,$D00FD,x,y)set u1=nullset u3=nullendfunctionfunction qG takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local real HP=GetUnitState(u2,UNIT_STATE_LIFE)call UnitDamageTargetBJ(u1,u2,500.,ATTACK_TYPE_HERO,DAMAGE_TYPE_ACID)if HP>500. thencall SetUnitState(u1,UNIT_STATE_LIFE,GetUnitState(u1,UNIT_STATE_LIFE)+500.)elsecall SetUnitState(u1,UNIT_STATE_LIFE,GetUnitState(u1,UNIT_STATE_LIFE)+HP)endifset u1=nullset u2=nullendfunctionfunction rG takes nothing returns nothinglocal unit QClocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local player p=GetOwningPlayer(u1)call SetUnitState(u1,UNIT_STATE_MANA,GetUnitState(u1,UNIT_STATE_MANA)-75.)call GroupEnumUnitsInRange(ce[0],x,y,405.,null)loopset QC=FirstOfGroup(ce[0])exitwhen(QC==null)call GroupRemoveUnit(ce[0],QC)if(IsUnitEnemy(QC,p)and GetUnitState(QC,UNIT_STATE_LIFE)>1 and(Zy(QC,UNIT_TYPE_STRUCTURE)==false))thencall UnitDamageTargetBJ(u1,QC,190.,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\LightningBolt\\LightningBoltMissile.mdl",QC,"chest"))endifendloopset u1=nullset p=nullset QC=nullendfunctionfunction sG takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))if J7[i]thenset J7[i]=falsecall UnitRemoveAbility(u1,1093684537)elseset J7[i]=truecall UnitAddAbility(u1,1093684537)call UnitMakeAbilityPermanent(u1,true,1093684537)endifset u1=nullendfunctionfunction tG takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(Oe,qB,1)call UnitRemoveAbility(u1,1093682996)call FlushChildHashtable(Oe,qB)call DestroyTimer(t)set t=nullset u1=nullendfunctionfunction uG takes nothing returns nothinglocal unit u1=GetSpellTargetUnit()local timer t=CreateTimer()call UnitAddAbility(u1,1093682996)call SaveUnitHandle(Oe,GetHandleId(t),1,u1)call TimerStart(t,12.,false,function tG)set u1=nullset t=nullendfunctionfunction vG takes nothing returns nothinglocal unit QClocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local player p=GetOwningPlayer(u1)local unit u3set u3=CreateUnit(p,1747988805,x,y,0)call UnitApplyTimedLife(u3,1112045413,2.)call UnitAddAbility(u3,1096903986)call GroupEnumUnitsInRange(ce[0],x,y,500.,null)loopset QC=FirstOfGroup(ce[0])exitwhen(QC==null)call GroupRemoveUnit(ce[0],QC)if(IsUnitAlly(QC,p)and GetUnitState(QC,UNIT_STATE_LIFE)>1 and(Zy(QC,UNIT_TYPE_STRUCTURE)==false))thencall IssueTargetOrderById(u3,$D00DA,QC)endifendloopset u1=nullset p=nullset QC=nullset u3=nullendfunctionfunction Trig_omamori_CheckConditions takes nothing returns booleanreturn GetSpellAbilityId()==1095660403endfunctionfunction wG takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(Oe,qB,1)local player p=GetOwningPlayer(u1)local integer i=GetPlayerId(p)+1call FlushChildHashtable(Oe,qB)call DestroyTimer(t)set j9[i]=falseset t=nullset u1=nullset p=nullendfunctionfunction xG takes nothing returns nothinglocal unit u1=GetTriggerUnit()local timer t=CreateTimer()local player p=GetOwningPlayer(u1)local integer i=GetPlayerId(p)+1local real tB=(.0002)set j9[i]=truecall SaveUnitHandle(Oe,GetHandleId(t),1,u1)call TimerStart(t,tB,false,function wG)set u1=nullset t=nullset p=nullendfunctionfunction yG takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local unit u3=CreateUnit(GetOwningPlayer(u1),1747988805,x,y,0)call UnitApplyTimedLife(u3,1112045413,1.)call UnitAddAbility(u3,1093685320)call IssueTargetOrderById(u3,$D00DA,u1)set u1=nullset u3=nullendfunctionfunction zG takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()call SetUnitX(u1,GetUnitX(u2))call SetUnitY(u1,GetUnitY(u2))call IssueTargetOrderById(u1,$D000F,u2)set u1=nullset u2=nullendfunctionfunction AG takes nothing returns nothinglocal unit QClocal unit u1=GetTriggerUnit()local real x=GetSpellTargetX()local real y=GetSpellTargetY()local player p=GetOwningPlayer(u1)call GroupEnumUnitsInRange(ce[0],x,y,800.,null)loopset QC=FirstOfGroup(ce[0])exitwhen(QC==null)call GroupRemoveUnit(ce[0],QC)if(IsUnitEnemy(QC,p)and GetUnitState(QC,UNIT_STATE_LIFE)>1 and(Zy(QC,UNIT_TYPE_STRUCTURE)==false))thencall UnitDamageTargetBJ(u1,QC,560.,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)endifendloopset u1=nullset p=nullset QC=nullendfunctionfunction aG takes real BF returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local real x=GetUnitX(u2)local real y=GetUnitY(u2)local real x1local real y1local real alocal integer iset i=1loopexitwhen i>8set a=45.*I2R(i)*bj_DEGTORADset x1=x+100.*Cos(a)set y1=y+100.*Sin(a)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Feedback\\ArcaneTowerAttack.mdl",x1,y1))set i=i+1endloopcall UnitDamageTargetBJ(u1,u2,BF+.17*GetUnitState(u1,UNIT_STATE_MAX_MANA),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)set u1=nullset u2=nullendfunctionfunction BG takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(Oe,qB,1)call UnitMakeAbilityPermanent(u1,false,1093685592)call UnitRemoveAbility(u1,1093685592)call FlushChildHashtable(Oe,qB)call DestroyTimer(t)set t=nullset u1=nullendfunctionfunction bG takes nothing returns nothinglocal unit u1=GetSpellTargetUnit()local timer t=CreateTimer()call UnitAddAbility(u1,1093685592)call UnitMakeAbilityPermanent(u1,true,1093685592)call SaveUnitHandle(Oe,GetHandleId(t),1,u1)call TimerStart(t,15.,false,function BG)set u1=nullset t=nullendfunctionfunction Trig_Item40Actions takes nothing returns nothingcall UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),(3.5*I2R(GetHeroInt(GetTriggerUnit(),true))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNIVERSAL)endfunctionfunction CG takes nothing returns nothinglocal unit QClocal unit u1=GetTriggerUnit()local real x=GetSpellTargetX()local real y=GetSpellTargetY()local real x1local real y1local real a=Atan2(y-GetUnitY(u1),x-GetUnitX(u1))local player p=GetOwningPlayer(u1)local unit u3set x1=x+76.*Cos(a+90.*bj_DEGTORAD)set y1=y+76.*Sin(a+90.*bj_DEGTORAD)set u3=CreateUnit(p,1752331380,x1,y1,270)call UnitApplyTimedLife(u3,1112045413,6.)set x1=x+76.*Cos(a-90.*bj_DEGTORAD)set y1=y+76.*Sin(a-90.*bj_DEGTORAD)set u3=CreateUnit(p,1752331380,x1,y1,270)call UnitApplyTimedLife(u3,1112045413,6.)call GroupEnumUnitsInRange(ce[0],x,y,265.,null)loopset QC=FirstOfGroup(ce[0])exitwhen(QC==null)call GroupRemoveUnit(ce[0],QC)if(IsUnitEnemy(QC,p)and GetUnitState(QC,UNIT_STATE_LIFE)>1 and(Zy(QC,UNIT_TYPE_STRUCTURE)==false))thencall UnitDamageTargetBJ(u1,QC,150.,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)endifendloopset u1=nullset p=nullset QC=nullset u3=nullendfunctionfunction cG takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local unit u3=CreateUnit(GetOwningPlayer(u1),1747988805,x,y,0)call UnitApplyTimedLife(u3,1112045413,1.)call UnitAddAbility(u3,1093684562)call IssueTargetOrderById(u3,$D0062,u1)set u1=nullset u3=nullendfunctionfunction DG takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(Oe,qB,1)local unit u2=LoadUnitHandle(Oe,qB,2)local player p=GetOwningPlayer(u2)local integer i=GetPlayerId(p)+1local integer EG=GetHeroInt(u1,true)local integer FG=R2I((I2R(EG)/ 20.))local real GGcall FlushChildHashtable(Oe,qB)call DestroyTimer(t)if(FG>=$A)thenset FG=$Aendifif j9[i]==false thenset GG=(GetUnitState(u2,UNIT_STATE_LIFE)*(.45+(.03*I2R(FG))))call UnitDamageTargetBJ(u1,u2,GG,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNIVERSAL)elseset GG=(GetUnitState(u2,UNIT_STATE_LIFE)*(.225+(.015*I2R(FG))))call UnitDamageTargetBJ(u1,u2,GG,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNIVERSAL)endifset j9[i]=falseset t=nullset u1=nullset p=nullset u2=nullendfunctionfunction HG takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local timer t=CreateTimer()local real tB=.0001call SaveUnitHandle(Oe,GetHandleId(t),1,u1)call SaveUnitHandle(Oe,GetHandleId(t),2,u2)call TimerStart(t,tB,false,function DG)set u1=nullset u2=nullset t=nullendfunctionfunction IG takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local real x=GetUnitX(u2)local real y=GetUnitY(u2)local unit u3local integer iset i=R2I((I2R(GetHeroInt(u1,true))/ 40.))set i=(i+1)if i>=8 thenset i=8endifset u3=CreateUnit(GetOwningPlayer(u1),1747989063,x,y,0)call UnitApplyTimedLife(u3,1112820806,3.)call ShowUnit(u3,false)call UnitAddAbility(u3,1093684567)call SetUnitAbilityLevel(u3,1093684567,i)call IssueTargetOrderById(u3,$D0216,u2)call CreateTextTagUnitBJ((R2S((I2R(i)*.6))+" sec"),u2,0,9.,50.,50.,90.,0)call ShowTextTagForceBJ(false,bj_lastCreatedTextTag,Qz(GetOwningPlayer(u1)))call SetTextTagPermanent(bj_lastCreatedTextTag,false)call SetTextTagVelocityBJ(bj_lastCreatedTextTag,64,90)call SetTextTagLifespan(bj_lastCreatedTextTag,5.)call SetTextTagFadepoint(bj_lastCreatedTextTag,2.5)set u1=nullset u2=nullset u3=nullendfunctionfunction lG takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(Oe,qB,1)call UnitMakeAbilityPermanent(u1,false,1093683281)call UnitRemoveAbility(u1,1093683281)call FlushChildHashtable(Oe,qB)call DestroyTimer(t)set t=nullset u1=nullendfunctionfunction JG takes nothing returns nothinglocal unit u1=GetSpellTargetUnit()local timer t=CreateTimer()call UnitAddAbility(u1,1093683281)call UnitMakeAbilityPermanent(u1,true,1093683281)call SaveUnitHandle(Oe,GetHandleId(t),1,u1)call TimerStart(t,4.9,false,function lG)set u1=nullset t=nullendfunctionfunction KG takes nothing returns nothingif GetSpellAbilityId()==1093684558 thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\CarrionSwarm\\CarrionSwarmDamage.mdl",GetTriggerUnit(),"chest"))call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),(50.*I2R(GetItemCharges(Mz(GetTriggerUnit(),1668051812)))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_FIRE)call SetWidgetLife(GetTriggerUnit(),(GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+((I2R(GetItemCharges(Mz(GetTriggerUnit(),1668051812)))*50.)/ 2.)))call SetItemCharges(Mz(GetTriggerUnit(),1668051812),0)elsecall DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissile.mdl",GetTriggerUnit(),"overhead"))if((I2R(GetItemCharges(Mz(GetTriggerUnit(),1668051812)))<6.))thencall SetItemCharges(Mz(GetTriggerUnit(),1668051812),(GetItemCharges(Mz(GetTriggerUnit(),1668051812))+1))endifendifendfunctionfunction LG takes nothing returns nothingif GetSpellAbilityId()==1093684566 thenset O7[101]=GetUnitLoc(GetSpellTargetUnit())call UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),(90.*I2R(GetItemCharges(Mz(GetTriggerUnit(),1936683576)))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_FIRE)call SetWidgetLife(GetTriggerUnit(),(GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+((I2R(GetItemCharges(Mz(GetTriggerUnit(),1936683576)))*90.)/ 2.)))call SetItemCharges(Mz(GetTriggerUnit(),1936683576),0)set bj_forLoopAIndex=1set bj_forLoopAIndexEnd=5loopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndset O7[102]=fz(O7[101],120.,(((72.))*(I2R(bj_forLoopAIndex))))call AddSpecialEffectLocBJ(O7[102],"Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl")call DestroyEffect(bj_lastCreatedEffect)call RemoveLocation(O7[102])set bj_forLoopAIndex=bj_forLoopAIndex+1endloopcall RemoveLocation(O7[101])elsecall DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissile.mdl",GetTriggerUnit(),"overhead"))if((I2R(GetItemCharges(Mz(GetTriggerUnit(),1936683576)))<6.))thencall UnitAddAbility(GetTriggerUnit(),1093684565)call SetItemCharges(Mz(GetTriggerUnit(),1936683576),(GetItemCharges(Mz(GetTriggerUnit(),1936683576))+1))call SetUnitAbilityLevel(GetTriggerUnit(),1093684565,(GetItemCharges(Mz(GetTriggerUnit(),1936683576))+1))endifendifendfunctionfunction MG takes nothing returns nothinglocal integer i=GetSpellAbilityId()local unit u=GetTriggerUnit()if GetUnitAbilityLevel(u,1093684537)>0 and i!=1093683019 and i!=1093686871 and i!=1093681477 and i!=1093677617 thencall rG()endifif GetUnitAbilityLevel(u,1093684561)>0 and i!=1093677105 and i!=1093683796 and i!=1093681713 thencall cG()endifif GetUnitAbilityLevel(u,1093684558)>0 thencall KG()endifif GetUnitAbilityLevel(u,1093684566)>0 and i!=1093677105 and i!=1093683796 and i!=1093681713 and i!=1093679179 and i!=1093681477 and i!=1093677650 thencall LG()endifif i==1093683019 thencall sG()elseif i==1093685315 thencall CG()elseif i==1095660403 thencall xG()elseif i==1093685314 thencall JG()elseif i==1093685304 thencall HG()elseif i==1093684789 thencall xG()call yG()elseif i==1093683032 thencall oG()elseif i==1093684568 thencall IG()elseif i==1093682000 thencall fG()elseif i==1093679415 thencall aG(300.)elseif i==1093684784 thencall aG(400.)elseif i==1093685313 thencall aG(500.)elseif i==1093682008 thencall eG()elseif i==1093681977 thencall AG()elseif i==1093681989 thencall dG()elseif i==1094936164 thencall qG()elseif i==1093685593 thencall bG()elseif i==1093681986 thencall WF()elseif i==1093679408 thencall pG()elseif i==1093684563 thencall zG()elseif i==1093682258 thencall uG()elseif i==1093682232 thencall kG()elseif i==1093683507 thencall ZF()elseif i==1093679180 thencall vG()elseif i==1093682249 thencall gG()elseif i==1093683795 thencall hG()elseif i==1093682257 thencall nG()elseif i==1093685079 thencall UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),(3.5*I2R(GetHeroInt(GetTriggerUnit(),true))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNIVERSAL)endifset u=nullendfunctionfunction OG takes nothing returns booleanreturn(((GetItemTypeId(GetManipulatedItem())==1936683576)or(GetItemTypeId(GetManipulatedItem())==1953330019))and(Zy(GetTriggerUnit(),UNIT_TYPE_HERO)))endfunctionfunction PG takes nothing returns nothinglocal integer i=0if((GetItemTypeId(GetManipulatedItem())==1936683576))thencall UnitRemoveAbility(GetTriggerUnit(),1093684565)elseif((GetItemTypeId(GetManipulatedItem())==1953330019))thenset bj_forLoopAIndex=1set bj_forLoopAIndexEnd=6loopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndif((GetItemTypeId(UnitItemInSlotBJ(GetTriggerUnit(),bj_forLoopAIndex))==1953330019))thenset i=1endifset bj_forLoopAIndex=bj_forLoopAIndex+1endloopif((i==1))thencall UnitRemoveAbility(GetTriggerUnit(),1093684537)set J7[(1+GetPlayerId(GetOwningPlayer(GetTriggerUnit())))]=falseendifendifendifendfunctionfunction RG takes string s returns nothinglocal item SG=GetManipulatedItem()local unit u=GetTriggerUnit()local texttag ttlocal integer fA=(TB(((100.)*1.),$FF))local integer eA=(TB(((.0)*1.),$FF))local integer gA=(TB(((.0)*1.),$FF))local integer hA=(TB(((100.)*1.),$FF))local real oF=64*.071/ $80local real pF=oF*Cos(90*bj_DEGTORAD)local real qF=oF*Sin(90*bj_DEGTORAD)set tt=CreateTextTag()call SetTextTagText(tt,s,10.*.023/ $A)call SetTextTagPosUnit(tt,u,0)call SetTextTagColor(tt,fA,eA,gA,hA)call SetTextTagPermanent(tt,false)call SetTextTagLifespan(tt,2.8)call SetTextTagFadepoint(tt,1.5)call SetTextTagVelocity(tt,pF,qF)set SG=nullset u=nullendfunctionfunction TG takes nothing returns nothinglocal item SG=GetManipulatedItem()local unit u=GetTriggerUnit()if GetItemPlayer(SG)==Player($F)thencall SetItemPlayer(SG,GetOwningPlayer(u),false)elseif GetItemPlayer(SG)!=GetOwningPlayer(u)thencall RG("It's not yours !")call UnitRemoveItem(u,SG)endifendifset SG=nullset u=nullendfunctionfunction UG takes nothing returns nothinglocal integer ilocal item zC=GetManipulatedItem()local integer idlocal integer VG=GetItemTypeId(zC)local unit u=GetTriggerUnit()local boolean b=falsecall RemoveItem(zC)set i=0loopset id=GetItemTypeId(UnitItemInSlot(u,i))if id==1227895856 or id==1227895127 or id==1227895857 or id==1227895882 or id==1227895884 or id==1227895885 or id==1227895883 or id==1227895642 or id==1227895115 thenset zC=CreateItem(VG,GetUnitX(u),GetUnitY(u))set b=trueendifset i=i+1exitwhen i>6endloopif b==false thencall DisableTrigger(GetTriggeringTrigger())call UnitAddItem(u,CreateItem(VG,GetUnitX(u),GetUnitY(u)))call EnableTrigger(GetTriggeringTrigger())endifset u=nullset zC=nullendfunctionfunction WG takes nothing returns nothinglocal trigger rB=GetTriggeringTrigger()if GetManipulatedItem()==LoadItemHandle(o,GetHandleId(rB),-$5E9EB4B3)thencall FlushChildHashtable(o,GetHandleId(rB))call DestroyTrigger(rB)elseif GetManipulatedItem()==null thenif GetItemCharges(LoadItemHandle(o,GetHandleId(rB),-$5E9EB4B3))<4 thencall SetItemCharges(LoadItemHandle(o,GetHandleId(rB),-$5E9EB4B3),GetItemCharges(LoadItemHandle(o,GetHandleId(rB),-$5E9EB4B3))+1)endifendifendifset rB=nullendfunctionfunction XG takes nothing returns nothinglocal trigger rBlocal unit u=GetTriggerUnit()local item it=GetManipulatedItem()if GetItemTypeId(it)==1936683576 thencall UnitAddAbility(u,1093684565)call SetUnitAbilityLevel(u,1093684565,GetItemCharges(it)+1)elseif GetItemTypeId(it)==1835955046 and Zy(u,UNIT_TYPE_HERO)thenset rB=CreateTrigger()call SaveItemHandle(o,GetHandleId(rB),-$5E9EB4B3,it)call TriggerRegisterUnitEvent(rB,u,EVENT_UNIT_DROP_ITEM)call TriggerRegisterUnitEvent(rB,u,EVENT_UNIT_SELL_ITEM)call TriggerRegisterTimerEvent(rB,13.,true)call TriggerAddCondition(rB,Condition(function WG))endifendifset rB=nullset u=nullset it=nullendfunctionfunction YG takes integer VG returns nothinglocal integer ilocal item zC=GetManipulatedItem()local integer idlocal unit u=GetTriggerUnit()local integer ZG=0set i=0loopset id=GetItemTypeId(UnitItemInSlot(u,i))if id==VG thenset ZG=ZG+1endifset i=i+1exitwhen i>6 or ZG>1endloopif ZG>1 thencall UnitRemoveItem(u,zC)endifset u=nullset zC=nullendfunctionfunction d6 takes nothing returns booleanreturn(kw[jw]!=mw)endfunctionfunction e6 takes nothing returns nothingset nw=(7*iw)set ow=1set pw[nw]=kw[0]set jw=1loopexitwhen jw>6if(d6())thenset pw[(nw+ow)]=kw[jw]set ow=(ow+1)endifset jw=jw+1endloopset jw=owloopexitwhen jw>6set pw[(nw+ow)]=mwset jw=jw+1endloopset iw=(iw+1)set jw=0loopexitwhen jw>6set kw[jw]=mwset jw=jw+1endloopendfunctionfunction f6 takes nothing returns booleanreturn(kw[1]!=mw)or(kw[2]!=mw)or(kw[3]!=mw)or(kw[4]!=mw)or(kw[5]!=mw)or(kw[6]!=mw)endfunctionfunction g6 takes nothing returns booleanif(not(kw[0]!=mw))thenreturn falseendifif(not f6())thenreturn falseendifcall e6()return falseendfunctionfunction Trig_Combination_Core_Func006Func003Func001001 takes nothing returns booleanreturn(kw[0]==pw[(nw+ow)])endfunctionfunction h6 takes nothing returns booleanreturn(pw[(nw+ow)]==mw)endfunctionfunction j6 takes nothing returns booleanreturn(kw[qw]==pw[(nw+ow)])endfunctionfunction k6 takes nothing returns booleanreturn(qw>6)endfunctionfunction m6 takes nothing returns booleanreturn(kw[qw]==mw)endfunctionfunction o6 takes nothing returns booleanreturn(ow>6)endfunctionfunction p6 takes nothing returns booleanreturn(ow<7)endfunctionfunction q6 takes nothing returns nothingset jw=0loopexitwhen jw>6set kw[jw]=mwset jw=jw+1endloopset kw[0]=GetItemTypeId(GetManipulatedItem())set jw=0loopexitwhen jw>(iw-1)set nw=(7*jw)set ow=1loopexitwhen ow>6if((kw[0]==pw[(nw+ow)]))thenexitwhen trueendifset ow=ow+1endloopif(p6())thenset qw=1loopexitwhen qw>6set kw[qw]=GetItemTypeId(UnitItemInSlotBJ(GetTriggerUnit(),qw))set qw=qw+1endloopset ow=1loopexitwhen ow>6if(h6())thenset ow=7exitwhen trueendifset qw=1loopexitwhen qw>6if(j6())thenset kw[qw]=mwexitwhen trueendifset qw=qw+1endloopif(k6())thenexitwhen trueendifset ow=ow+1endloopif(o6())thenset qw=1loopexitwhen qw>6if(m6())thencall RemoveItem(UnitItemInSlotBJ(GetTriggerUnit(),qw))endifset qw=qw+1endloopcall UnitAddItemByIdSwapped(pw[nw],GetTriggerUnit())call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIlm\\AIlmTarget.mdl",GetTriggerUnit(),"origin"))exitwhen trueendifendifset jw=jw+1endloopendfunctionfunction r6 takes nothing returns booleanlocal integer id=GetItemTypeId(GetManipulatedItem())call q6()if id==1835955046 thencall XG()elseif id==1936683576 thencall XG()call YG(id)elseif id==1227895115 or id==1227895127 or id==1227895642 or id==1227895856 or id==1227895857 or id==1227895883 or id==1227895884 or id==1227895885 or id==1227895882 thencall UG()elseif id==1919444273 or id==1920099699 or id==1919183219 or id==1920099633 thencall RemoveItem(GetManipulatedItem())elseif id==1668051812 or id==1227895110 thencall YG(id)elseif id==1718055527 thencall TG()endifreturn falseendfunctionfunction u6 takes nothing returns booleanreturn(((GetUnitTypeId(GetTriggerUnit())==1751278967)or(GetUnitTypeId(GetSummonedUnit())==1852076650)))endfunctionfunction v6 takes nothing returns nothingif((GetUnitTypeId(GetSummonedUnit())==1852076650))thenif((i9[(1+GetPlayerId(GetOwningPlayer(GetTriggerUnit())))]))thencall SelectUnitAddForPlayer(GetSummonedUnit(),GetOwningPlayer(GetSummoningUnit()))endifif((GetHeroLevel(GetSummoningUnit())>=6)and(GetHeroLevel(GetSummoningUnit())<$C))thencall SetUnitAbilityLevel(GetSummonedUnit(),1093684272,2)call SetUnitAbilityLevel(GetSummonedUnit(),1093684049,2)elseif((GetHeroLevel(GetSummoningUnit())>=$C)and(GetHeroLevel(GetSummoningUnit())<21))thencall SetUnitAbilityLevel(GetSummonedUnit(),1093684272,3)call SetUnitAbilityLevel(GetSummonedUnit(),1093684049,3)endifendifelseif((GetUnitTypeId(GetTriggerUnit())==1751278967))thencall TriggerRegisterUnitEvent(Wi,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)call GroupAddUnit(k9[$B],GetTriggerUnit())endifendifendfunctionfunction x6 takes player p,integer id,real hB,unit u returns unitlocal unit u3if GetPlayerId(p)+1<=5 thenset u3=CreateUnit(Z8[0],id,GetUnitX(u),GetUnitY(u),bj_UNIT_FACING)call SetUnitOwner(u3,qy,true)call UnitApplyTimedLife(u3,1112820806,hB)elseset u3=CreateUnit(Y8[0],id,GetUnitX(u),GetUnitY(u),bj_UNIT_FACING)call SetUnitOwner(u3,qy,true)call UnitApplyTimedLife(u3,1112820806,hB)endifreturn u3endfunctionfunction y6 takes nothing returns nothinglocal unit u=GetTriggerUnit()local unit u3local item zC=GetManipulatedItem()local integer id=GetItemTypeId(zC)if id==1227895859 thencall TriggerSleepAction(.0)call RemoveItem(zC)call UnitAddItem(u,CreateItem(1227895125,GetUnitX(u),GetUnitY(u)))elseif id==1227895125 thencall TriggerSleepAction(.0)call RemoveItem(zC)call UnitAddItem(u,CreateItem(1227895859,GetUnitX(u),GetUnitY(u)))elseif id==1227895861 thencall SetItemDroppable(zC,false)call UnitAddAbility(u,1093687117)call UnitMakeAbilityPermanent(u,true,1093687117)call SetPlayerAbilityAvailable(GetOwningPlayer(u),1093687117,false)call TriggerSleepAction(20.)call UnitMakeAbilityPermanent(u,false,1093687117)call UnitRemoveAbility(u,1093687117)call SetItemDroppable(zC,true)elseif id==1227895094 and Zy(u,UNIT_TYPE_HERO)thencall SetUnitState(u,UNIT_STATE_LIFE,GetUnitState(u,UNIT_STATE_LIFE)+400.)call SetUnitState(u,UNIT_STATE_MANA,GetUnitState(u,UNIT_STATE_MANA)+400.)elseif id==1227895347 or id==1952998509 thenset qy=GetOwningPlayer(u)set u3=CreateUnit(qy,1747988528,GetUnitX(u),GetUnitY(u),bj_UNIT_FACING)call UnitApplyTimedLife(u3,1112045413,22.)elseif id==1735156847 thenset qy=GetOwningPlayer(u)set u3=CreateUnit(qy,1747988528,GetUnitX(u),GetUnitY(u),bj_UNIT_FACING)call UnitApplyTimedLife(u3,1112820806,20.)set u3=CreateUnit(qy,1747988805,GetUnitX(u),GetUnitY(u),bj_UNIT_FACING)call UnitAddAbility(u3,1093677634)call UnitApplyTimedLife(u3,1112820806,3.1)elseif id==1227895366 and Zy(u,UNIT_TYPE_HERO)thenset qy=GetOwningPlayer(u)set ry=i9[GetPlayerId(qy)+1]set u3=x6(qy,1853319546,35.,u)call xB(ry,u3,qy)set u3=x6(qy,1852076656,35.,u)call xB(ry,u3,qy)elseif id==1919182128 and Zy(u,UNIT_TYPE_HERO)thenset qy=GetOwningPlayer(u)set ry=i9[GetPlayerId(qy)+1]set u3=CreateUnit(qy,1853319546,GetUnitX(u),GetUnitY(u),bj_UNIT_FACING)call UnitApplyTimedLife(u3,1112820806,35.)call IncUnitAbilityLevel(u3,1097690722)call xB(ry,u3,qy)set u3=CreateUnit(qy,1852076656,GetUnitX(u),GetUnitY(u),bj_UNIT_FACING)call UnitApplyTimedLife(u3,1112820806,35.)call xB(ry,u3,qy)set u3=CreateUnit(qy,1852076656,GetUnitX(u),GetUnitY(u),bj_UNIT_FACING)call UnitApplyTimedLife(u3,1112820806,35.)call xB(ry,u3,qy)elseif id==1718773604 and Zy(u,UNIT_TYPE_HERO)thenset qy=GetOwningPlayer(u)set ry=i9[GetPlayerId(qy)+1]set u3=CreateUnit(qy,1853323890,GetUnitX(u),GetUnitY(u),bj_UNIT_FACING)call UnitApplyTimedLife(u3,1112820806,35.)call IncUnitAbilityLevel(u3,1097690722)call IncUnitAbilityLevel(u3,1097690722)call xB(ry,u3,qy)set u3=CreateUnit(qy,1852076646,GetUnitX(u),GetUnitY(u),bj_UNIT_FACING)call UnitApplyTimedLife(u3,1112820806,35.)call IncUnitAbilityLevel(u3,1094935918)call xB(ry,u3,qy)elseif id==1918987571 and Zy(u,UNIT_TYPE_HERO)thenset qy=GetOwningPlayer(u)set ry=i9[GetPlayerId(qy)+1]if GetPlayerId(qy)+1<=5 thenset u3=CreateUnit(Y8[0],1853323879,GetUnitX(u),GetUnitY(u),bj_UNIT_FACING)call UnitApplyTimedLife(u3,1112820806,35.)call IncUnitAbilityLevel(u3,1097690722)call IncUnitAbilityLevel(u3,1097690722)call SetUnitOwner(u3,qy,true)call IssueImmediateOrderById(u3,$D00A6)call xB(ry,u3,qy)set u3=CreateUnit(Y8[0],1852076653,GetUnitX(u),GetUnitY(u),bj_UNIT_FACING)call UnitApplyTimedLife(u3,1112820806,35.)call IncUnitAbilityLevel(u3,1094935918)call SetUnitOwner(u3,qy,true)call xB(ry,u3,qy)elseset u3=CreateUnit(Z8[0],1853323879,GetUnitX(u),GetUnitY(u),bj_UNIT_FACING)call UnitApplyTimedLife(u3,1112820806,35.)call IncUnitAbilityLevel(u3,1097690722)call IncUnitAbilityLevel(u3,1097690722)call SetUnitOwner(u3,qy,true)call xB(ry,u3,qy)set u3=CreateUnit(Z8[0],1852076653,GetUnitX(u),GetUnitY(u),bj_UNIT_FACING)call UnitApplyTimedLife(u3,1112820806,35.)call IncUnitAbilityLevel(u3,1094935918)call SetUnitOwner(u3,qy,true)call xB(ry,u3,qy)endifendifset u=nullset zC=nullset u3=nullendfunctionfunction z6 takes nothing returns booleanlocal integer id=GetItemTypeId(GetManipulatedItem())return id==1227895859 or id==1227895125 or id==1227895861 or id==1227895094 or id==1227895347 or id==1952998509 or id==1735156847 or id==1227895366 or id==1919182128 or id==1718773604 or id==1918987571endfunctionfunction a6 takes nothing returns nothinglocal unit QClocal player p=GetOwningPlayer(GetTriggerUnit())call GroupEnumUnitsInRange(ce[3],GetSpellTargetX(),GetSpellTargetY(),270.,null)loopset QC=FirstOfGroup(ce[3])exitwhen QC==nullcall GroupRemoveUnit(ce[3],QC)if IsUnitEnemy(QC,p)thencall UnitRemoveAbility(QC,1110455864)endifendloopset QC=nullset p=nullendfunctionfunction B6 takes nothing returns nothinglocal integer i=GetSpellAbilityId()if i==1095332709 thencall a6()returnendifendfunctionfunction C6 takes nothing returns nothingcall JA(1918987571,1095333940)call JA(1227895125,1093685077)call JA(1227895125,1093681729)call JA(1227895873,1095332462)call DisableTrigger(GetTriggeringTrigger())endfunctionfunction D6 takes nothing returns nothingcall Wa(1227894866,2,1227895113,1,1227895088,1,1667786099,0,1667786099,0,1667786099,0,1227894836)call Wa(1918986033,2,1227895347,1,1227895621,1,1667786099,0,1667786099,0,1667786099,0,1952998509)call Wa(1227894835,2,1227895090,1,1227895620,1,1667786099,0,1667786099,0,1667786099,0,1936093031)call Wa(1919512113,2,1227895366,1,1227895625,1,1667786099,0,1667786099,0,1667786099,0,1919182128)call Wa(1920169009,2,1227895349,1,1227894872,1,1667786099,0,1667786099,0,1667786099,0,1719104371)call Wa(1227895370,2,1734700404,1,1227895128,1,1667786099,0,1667786099,0,1667786099,0,1735618421)call Wa(1227894866,2,1227895115,1,1227895628,1,1667786099,0,1667786099,0,1667786099,0,1227895642)call Wa(1227894873,2,1227894838,0,1227895619,1,1667786099,0,1667786099,0,1667786099,0,1227895111)call Wa(1835233141,2,1227895113,1,1227895377,1,1667786099,0,1667786099,0,1667786099,0,1227895114)call Wa(1227895095,2,1868850534,1,1227895353,1,1667786099,0,1667786099,0,1667786099,0,1227895093)call Wa(1227894873,2,1227895113,1,1227895368,1,1667786099,0,1667786099,0,1667786099,0,1227895367)call Wa(1227894850,2,1227894838,1,1227895618,1,1667786099,0,1667786099,0,1667786099,0,1227895372)call Wa(1227894834,2,1227895386,1,1227895618,0,1667786099,0,1667786099,0,1667786099,0,1227895110)call Wa(1919512113,2,1227894867,1,1227894858,1,1667786099,0,1667786099,0,1667786099,0,1227895346)endfunctionfunction F6 takes nothing returns nothingcall Wa(1227895609,1,1920169009,1,1918986033,1,1919512113,1,0,0,0,0,1227895608)call Wa(1227894838,1,1227894840,1,0,0,0,0,0,0,0,0,1227895095)call Wa(1227894852,1,1227894851,1,1227895106,1,0,0,0,0,0,0,1227895108)call Wa(1920169009,1,1918986033,1,1919512113,1,1227894854,1,0,0,0,0,1227894865)call Wa(1920169009,1,1227894866,1,1227895370,1,1227895381,1,0,0,0,0,1227894853)call Wa(1919182129,1,1227894854,1,1227894835,1,0,0,0,0,0,0,1227894837)call Wa(1734700404,1,1227894850,1,1227894857,1,0,0,0,0,0,0,1227894856)call Wa(1227895876,1,1634099555,1,0,0,0,0,0,0,0,0,1227895635)call Wa(1227894834,1,1227894835,1,1227894867,1,0,0,0,0,0,0,1227894868)call Wa(1227894854,1,1227894871,1,1227894873,1,1227895617,1,0,0,0,0,1227895120)call Wa(1227894873,1,1227895116,1,1919512113,1,1227895121,1,0,0,0,0,1227895122)call Wa(1227895122,1,1227895121,1,0,0,0,0,0,0,0,0,1227896112)call Wa(1227895642,1,1227895881,1,0,0,0,0,0,0,0,0,1227895883)call Wa(1227895857,1,1227895881,1,0,0,0,0,0,0,0,0,1227895885)call Wa(1227895127,1,1227895881,1,0,0,0,0,0,0,0,0,1227895884)call Wa(1227895856,1,1227895881,1,0,0,0,0,0,0,0,0,1227895882)call Wa(1227894871,1,1227895090,1,1227895383,1,0,0,0,0,0,0,1227895089)call Wa(1227894860,1,1227895107,1,1227894838,1,1227895364,1,0,0,0,0,1227895094)call Wa(1227894873,1,1227895107,1,1227894866,1,1227895600,1,0,0,0,0,1227895105)call Wa(1227894839,1,1227894866,1,1227895376,1,0,0,0,0,0,0,1227894874)call Wa(1227895115,1,1227894838,1,1227895863,1,1227894850,1,0,0,0,0,1227895857)call Wa(1227894866,1,1227895112,1,1835233141,1,1227895116,1,0,0,0,0,1227895117)call Wa(1227895115,1,1227895116,1,1227895370,1,1227895363,1,0,0,0,0,1227895127)call Wa(1227894871,1,1920169009,1,1227895370,1,0,0,0,0,0,0,1227895092)call Wa(1227894854,1,1227895119,1,1919512113,1,0,0,0,0,0,0,1227894869)call Wa(1227894834,1,1227894854,1,1227895603,1,0,0,0,0,0,0,1227895375)call Wa(1868850534,1,1227895626,1,0,0,0,0,0,0,0,0,1227895627)call Wa(1801937260,1,1227894838,1,1227895606,1,0,0,0,0,0,0,1227895858)call Wa(1227895608,1,1227895118,1,1227895601,1,0,0,0,0,0,0,1227895091)call Wa(1227895115,1,1227895106,1,1227895889,1,0,0,0,0,0,0,1227895856)call Wa(1227894834,1,1227894866,1,1227895605,1,0,0,0,0,0,0,1227895374)call Wa(1227895106,1,1918986033,1,1227895361,1,0,0,0,0,0,0,1227895352)call Wa(1227895108,1,1227894859,1,0,0,0,0,0,0,0,0,1651663207)call Wa(1634625127,1,1936222318,1,1227894863,1,0,0,0,0,0,0,1986290796)call Wa(1784967790,1,1227895123,1,0,0,0,0,0,0,0,0,1953328500)call Wa(1227894865,1,1227894861,1,0,0,0,0,0,0,0,0,1634625127)call Wa(1953328500,1,1227895123,1,0,0,0,0,0,0,0,0,1751282792)call Wa(1835233141,1,1227895118,1,1227895123,1,0,0,0,0,0,0,1784967790)call Wa(1227895113,1,1919248950,1,1227895097,1,0,0,0,0,0,0,1918987572)call Wa(1227894868,1,1227895118,1,1227895345,1,0,0,0,0,0,0,1919841136)call Wa(1227894854,1,1869375794,1,1227895369,1,0,0,0,0,0,0,1936749157)call Wa(1227895107,1,1227894864,1,1227895633,1,0,0,0,0,0,0,1651270241)call Wa(1227894871,1,1227895370,1,1919512113,1,1227894862,1,0,0,0,0,1936222318)call Wa(1227894837,1,1227895089,1,1227894832,1,0,0,0,0,0,0,1835823988)call Wa(1227894864,1,1227895092,1,1227895629,1,0,0,0,0,0,0,1936421736)call Wa(1953330019,1,1685353314,1,1227894849,1,0,0,0,0,0,0,1651798900)call Wa(1634562659,1,1227895632,1,0,0,0,0,0,0,0,0,1735352941)call Wa(1227894871,1,1227895107,1,1227895632,1,0,0,0,0,0,0,1634562659)call Wa(1735352941,1,1227895632,1,0,0,0,0,0,0,0,0,1952803955)call Wa(1227895117,1,1227895112,1,0,0,0,0,0,0,0,0,1769431666)call Wa(1227894873,1,1936749157,1,1227895624,1,0,0,0,0,0,0,1918987570)call Wa(1801937260,1,1227894855,1,0,0,0,0,0,0,0,0,1919248950)call Wa(1227895370,1,1227895109,1,0,0,0,0,0,0,0,0,1936684396)call Wa(1227895116,1,1227895114,1,1227895630,1,0,0,0,0,0,0,1936683577)call Wa(1227894838,1,1227895602,1,1936684396,1,1227895106,1,0,0,0,0,1936880748)call Wa(1936093031,1,1919182128,1,1227895622,1,0,0,0,0,0,0,1718773604)call Wa(1952998509,1,1719104371,1,1227894833,1,0,0,0,0,0,0,1735156847)call Wa(1718773604,1,1735156847,1,1227894841,1,0,0,0,0,0,0,1918987571)call Wa(1227895107,1,1227894851,1,1227895634,1,0,0,0,0,0,0,1635279219)call Wa(1936749157,1,1227894854,1,1227895604,1,0,0,0,0,0,0,1868983399)call Wa(1227895865,1,1227895374,1,1227894869,1,0,0,0,0,0,0,1701738092)endfunctionfunction H6 takes nothing returns nothingcall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIlm\\AIlmTarget.mdl",GetTriggerUnit(),"origin"))endfunctionfunction l6 takes nothing returns nothinglocal unit u1=GetSpellTargetUnit()local integer id=GetSpellAbilityId()local real HPif id==1093683788 thencall UnitAddAbility(u1,1093684301)call TriggerSleepAction(10.)call UnitRemoveAbility(u1,1093684301)elseif id==1093683787 thenset HP=GetUnitState(u1,UNIT_STATE_LIFE)+GetUnitState(u1,UNIT_STATE_MAX_LIFE)*.07call SetUnitState(u1,UNIT_STATE_LIFE,HP)endifendifset u1=nullendfunctionfunction K6 takes nothing returns booleanreturn((GetSpellAbilityId()==1093684057))endfunctionfunction L6 takes nothing returns nothingcall UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),200.,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_FIRE)endfunctionfunction N6 takes nothing returns booleanreturn((GetSpellAbilityId()==1093684818))endfunctionfunction O6 takes nothing returns nothingset O7[31]=GetUnitLoc(GetTriggerUnit())call CreateNUnitsAtLoc(1,1747988528,GetOwningPlayer(GetTriggerUnit()),O7[31],bj_UNIT_FACING)call UnitApplyTimedLife(bj_lastCreatedUnit,1112045413,20.)call CreateNUnitsAtLoc(1,1747988805,GetOwningPlayer(GetTriggerUnit()),O7[31],bj_UNIT_FACING)call UnitAddAbility(bj_lastCreatedUnit,1093677634)call UnitApplyTimedLife(bj_lastCreatedUnit,1112045413,4.)call RemoveLocation(O7[31])endfunctionfunction Q6 takes nothing returns booleanreturn((UnitHasBuffBJ(GetTriggerUnit(),1110455878)))endfunctionfunction R6 takes nothing returns booleanreturn((IsUnitInvisible(GetTriggerUnit(),GetFilterPlayer())))endfunctionfunction S6 takes nothing returns nothingcall UnitRemoveAbility(GetTriggerUnit(),1110455878)if(((GetUnitStateSwap(UNIT_STATE_LIFE,GetTriggerUnit())*.14)<=115.))thencall UnitDamageTargetBJ(GetEventDamageSource(),GetTriggerUnit(),115.,ATTACK_TYPE_HERO,DAMAGE_TYPE_ACID)call CreateTextTagUnitBJ("TRIGSTR_7725",GetTriggerUnit(),0,8.,80.,50.,100.,0)elsecall UnitDamageTargetBJ(GetEventDamageSource(),GetTriggerUnit(),(.14*GetUnitStateSwap(UNIT_STATE_LIFE,GetTriggerUnit())),ATTACK_TYPE_HERO,DAMAGE_TYPE_ACID)call CreateTextTagUnitBJ(I2S(R2I((.14*GetUnitStateSwap(UNIT_STATE_LIFE,GetTriggerUnit())))),GetTriggerUnit(),0,8.,80.,50.,100,0)endifcall SetTextTagPermanent(bj_lastCreatedTextTag,false)call SetTextTagVelocityBJ(bj_lastCreatedTextTag,64.,90)call SetTextTagLifespan(bj_lastCreatedTextTag,2.)call SetTextTagFadepoint(bj_lastCreatedTextTag,1.5)set f4=Rz(Condition(function R6))call ShowTextTagForceBJ(false,bj_lastCreatedTextTag,f4)call DestroyForce(f4)endfunctionfunction U6 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u=LoadUnitHandle(o,qB,1)call UnitRemoveAbility(u,1093686597)call FlushChildHashtable(o,qB)call DestroyTimer(t)set t=nullset u=nullendfunctionfunction V6 takes nothing returns nothinglocal unit u=GetTriggerUnit()local timer t=CreateTimer()local integer qB=GetHandleId(t)call UnitAddAbility(u,1093686597)call UnitMakeAbilityPermanent(u,true,1093686597)call SaveUnitHandle(o,qB,1,u)call TimerStart(t,10.,false,function U6)set t=nullset u=nullendfunctionfunction W6 takes nothing returns booleanif GetSpellAbilityId()==1093678131 thencall V6()endifreturn falseendfunctionfunction Y6 takes nothing returns booleanif GetLearnedSkill()==1093678153 and IsUnitIllusion(GetTriggerUnit())!=true thencall SetUnitAbilityLevel(GetTriggerUnit(),1093677381,GetUnitAbilityLevel(GetTriggerUnit(),1093678153)+1)endifreturn falseendfunctionfunction dH takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit eH=LoadUnitHandle(o,qB,-$5E9EB4B3)local integer i=GetPlayerId(GetOwningPlayer(eH))+1local real xlocal real ylocal real dtlocal unit fHif(tw[i]>=300)thencall FlushChildHashtable(o,qB)call DestroyTimer(t)set tw[i]=0elseset tw[i]=(tw[i]+1)set x=GetUnitX(eH)set y=GetUnitY(eH)set dt=SquareRoot(Pow(x-uw[i],2)+Pow(y-vw[i],2))if dt>100. thenset fH=CreateUnit(GetOwningPlayer(eH),1747988822,x,y,0)call SetUnitAbilityLevel(fH,1093679417,GetUnitAbilityLevel(eH,1093679171))call UnitApplyTimedLife(fH,1112045413,10.)set uw[i]=xset vw[i]=yendifendifset eH=nullset t=nullset fH=nullendfunctionfunction gH takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)local unit eH=GetTriggerUnit()local integer i=GetPlayerId(GetOwningPlayer(eH))+1set uw[i]=GetUnitX(eH)set vw[i]=GetUnitY(eH)call SaveUnitHandle(o,qB,-$5E9EB4B3,eH)call TimerStart(t,.05,true,function dH)set eH=nullset t=nullendfunctionfunction hH takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit eH=LoadUnitHandle(o,qB,-$63F0AAA2)local integer i=GetPlayerId(GetOwningPlayer(eH))+1local unit iH=sw[i]local real x=GetUnitX(iH)local real y=GetUnitY(iH)local real x1local real y1local unit fHif rw[i]>=19 thencall FlushChildHashtable(o,qB)call DestroyTimer(t)elseset rw[i]=rw[i]+1set x1=x+420*Cos(I2R(rw[i]*20)*bj_DEGTORAD)set y1=y+420*Sin(I2R(rw[i]*20)*bj_DEGTORAD)set fH=CreateUnit(GetOwningPlayer(eH),1747989063,x1,y1,0)call UnitAddAbility(fH,1093682244)call SetUnitAbilityLevel(fH,1093682244,GetUnitAbilityLevel(eH,1093678154))call ShowUnit(fH,false)call UnitApplyTimedLife(fH,1112045413,1.)call IssueTargetOrderById(fH,$D007F,iH)endifset eH=nullset iH=nullset fH=nullset t=nullendfunctionfunction jH takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)local unit eH=GetTriggerUnit()local integer i=GetPlayerId(GetOwningPlayer(eH))+1set rw[i]=0set sw[i]=GetSpellTargetUnit()call SaveUnitHandle(o,qB,-$63F0AAA2,GetTriggerUnit())call TimerStart(t,.1,true,function hH)set t=nullset eH=nullendfunctionfunction kH takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit eH=LoadUnitHandle(o,qB,-$63F0AAA2)local integer i=GetPlayerId(GetOwningPlayer(eH))+1local unit iH=xw[i]local real x=GetUnitX(iH)local real y=GetUnitY(iH)local real x1local real y1local integer i2local unit fHif ww[i]==0 thencall FlushChildHashtable(o,qB)call DestroyTimer(t)elseset ww[i]=ww[i]-1set fH=CreateUnit(GetOwningPlayer(eH),1747989063,x,y,0)call UnitAddAbility(fH,1093679170)call ShowUnit(fH,false)call UnitApplyTimedLife(fH,1112045413,1.)call IssueTargetOrderById(fH,$D007F,iH)set i2=1loopexitwhen i2>4set x1=x+245.*Cos(I2R(i2*90)*bj_DEGTORAD)set y1=y+245.*Sin(I2R(i2*90)*bj_DEGTORAD)set fH=CreateUnit(GetOwningPlayer(eH),1747988805,x1,y1,0)call UnitAddAbility(fH,1093687351)call UnitApplyTimedLife(fH,1112045413,3.)call IssueTargetOrderById(fH,$D0097,iH)set i2=i2+1endloopcall UnitDamageTarget(eH,iH,175.,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_ACID,WEAPON_TYPE_WHOKNOWS)endifset t=nullset eH=nullset iH=nullset fH=nullendfunctionfunction mH takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)local unit eH=GetTriggerUnit()local integer i=GetPlayerId(GetOwningPlayer(eH))+1set ww[i]=3+GetUnitAbilityLevel(eH,1093679161)set xw[i]=GetSpellTargetUnit()call SaveUnitHandle(o,qB,-$63F0AAA2,GetTriggerUnit())call TimerStart(t,1.,true,function kH)set t=nullset eH=nullendfunctionfunction nH takes nothing returns booleanif GetSpellAbilityId()==1093679171 thencall gH()elseif GetSpellAbilityId()==1093678154 thencall jH()elseif GetSpellAbilityId()==1093679161 thencall mH()endifreturn falseendfunctionfunction pH takes nothing returns nothinglocal unit u=GetTriggerUnit()if GetUnitAbilityLevel(u,1093678156)==0 thencall UnitAddAbility(u,1093678156)call UnitAddAbility(u,1093678157)elsecall SetUnitAbilityLevel(u,1093678156,GetUnitAbilityLevel(u,1093678155))call SetUnitAbilityLevel(u,1093678157,GetUnitAbilityLevel(u,1093678155))endifset u=nullendfunctionfunction qH takes nothing returns booleanif GetLearnedSkill()==1093678155 and IsUnitIllusion(GetTriggerUnit())!=true thencall pH()endifreturn falseendfunctionfunction rH takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u3local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real a=GetUnitFacing(u1)*3.14159/ 180.local real x1local real y1local integer i=GetSpellAbilityId()if i==1093678155 thenset x1=x+100.*Cos(a)set y1=y+100.*Sin(a)elseif i==1093678156 thenset x1=x+400.*Cos(a)set y1=y+400.*Sin(a)elseif i==1093678157 thenset x1=x+700.*Cos(a)set y1=y+700.*Sin(a)endifendifendifset u3=CreateUnit(GetOwningPlayer(u1),1747989063,x1,y1,0)call UnitApplyTimedLife(u3,1112045413,.01)call ShowUnit(u3,false)set u3=CreateUnit(GetOwningPlayer(u1),1747988805,x1,y1,0)call UnitApplyTimedLife(u3,1112045413,4.)call UnitAddAbility(u3,1093682742)call SetUnitAbilityLevel(u3,1093682742,GetUnitAbilityLevel(u1,1093678155))call IssueImmediateOrderById(u3,$D009F)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",x1,y1))set u1=nullset u3=nullendfunctionfunction sH takes nothing returns booleanlocal integer i=GetSpellAbilityId()if i==1093678155 or i==1093678156 or i==1093678157 thencall rH()endifreturn falseendfunctionfunction tH takes nothing returns nothingcall TriggerRegisterUnitEvent(hj,GetTriggerUnit(),EVENT_UNIT_DAMAGED)set Re[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))+1]=trueif GetTriggerExecCount(GetTriggeringTrigger())==1 thencall TriggerRegisterAnyUnitEventBJ(ij,EVENT_PLAYER_UNIT_DEATH)endifendfunctionfunction uH takes nothing returns booleanif GetLearnedSkill()==1093678159 and GetUnitAbilityLevel(GetTriggerUnit(),1093678159)==1 and IsUnitIllusion(GetTriggerUnit())!=true thencall tH()endifreturn falseendfunctionfunction vH takes nothing returns booleanif GetLearnedSkill()==1093678160 and GetUnitAbilityLevel(GetTriggerUnit(),1093678160)==1 and IsUnitIllusion(GetTriggerUnit())!=true thencall TriggerRegisterUnitEvent(jj,GetTriggerUnit(),EVENT_UNIT_TARGET_IN_RANGE)endifreturn falseendfunctionfunction wH takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,-$63F0AAA2)local player p=GetOwningPlayer(u1)local integer i=GetPlayerId(p)+1local unit u3=yw[i]local integer xH=0local real xlocal real ylocal unit QCif GetUnitAbilityLevel(u1,1110455890)<=0 or GetUnitState(u1,UNIT_STATE_LIFE)<=0 thencall FlushChildHashtable(o,qB)call DestroyTimer(t)elseset x=GetUnitX(u1)set y=GetUnitY(u1)call SetUnitX(u3,x)call SetUnitY(u3,y)call GroupEnumUnitsInRange(ce[4],x,y,600.,null)loopset QC=FirstOfGroup(ce[4])exitwhen QC==null or xH>5call GroupRemoveUnit(ce[4],QC)if IsUnitEnemy(QC,p)and GetUnitState(QC,UNIT_STATE_LIFE)>1 and Zy(QC,UNIT_TYPE_STRUCTURE)!=true and GetUnitPointValue(QC)!=1 thenset xH=xH+1set zw[xH]=QCendifendloopcall GroupClear(ce[4])if xH>0 thencall IssueTargetOrderById(u3,$D007F,zw[GetRandomInt(1,xH)])endifendifset p=nullset QC=nullset u1=nullset u3=nullset t=nullendfunctionfunction yH takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)local unit u1=GetTriggerUnit()local integer i=GetPlayerId(GetOwningPlayer(u1))+1local unit u3=CreateUnit(GetOwningPlayer(u1),1747988805,.0,.0,0)call UnitAddAbility(u3,1093678161)call SetUnitAbilityLevel(u3,1093678161,GetUnitAbilityLevel(u1,1093677361))call UnitApplyTimedLife(u3,1112045413,30.)set yw[i]=u3call SaveUnitHandle(o,qB,-$63F0AAA2,GetTriggerUnit())call TimerStart(t,.8,true,function wH)set t=nullset u1=nullendfunctionfunction zH takes nothing returns booleanif GetSpellAbilityId()==1093677361 thencall yH()endifreturn falseendfunctionfunction AH takes trigger aH returns nothinglocal trigger rBlocal integer qB=GetHandleId(aH)set rB=CreateTrigger()call TriggerAddCondition(rB,Condition(function qH))call SaveTriggerHandle(We,qB,1,rB)set rB=CreateTrigger()call TriggerAddCondition(rB,Condition(function sH))call SaveTriggerHandle(We,qB,2,rB)set rB=CreateTrigger()call TriggerAddCondition(rB,Condition(function uH))call SaveTriggerHandle(We,qB,3,rB)set rB=CreateTrigger()call TriggerAddCondition(rB,Condition(function vH))call SaveTriggerHandle(We,qB,5,rB)set rB=CreateTrigger()call TriggerAddCondition(rB,Condition(function zH))call SaveTriggerHandle(We,qB,6,rB)set rB=nullendfunctionfunction BH takes nothing returns nothinglocal trigger rB=GetTriggeringTrigger()local integer qB=GetHandleId(rB)local unit u=B4if GetTriggerExecCount(rB)==1 thencall AH(rB)endifset rB=LoadTriggerHandle(We,qB,1)call TriggerRegisterUnitEvent(rB,u,EVENT_UNIT_HERO_SKILL)set rB=LoadTriggerHandle(We,qB,2)call TriggerRegisterUnitEvent(rB,u,EVENT_UNIT_SPELL_EFFECT)set rB=LoadTriggerHandle(We,qB,3)call TriggerRegisterUnitEvent(rB,u,EVENT_UNIT_HERO_SKILL)set rB=LoadTriggerHandle(We,qB,5)call TriggerRegisterUnitEvent(rB,u,EVENT_UNIT_HERO_SKILL)set rB=LoadTriggerHandle(We,qB,6)call TriggerRegisterUnitEvent(rB,u,EVENT_UNIT_SPELL_EFFECT)set u=nullset rB=nullendfunctionfunction CH takes nothing returns nothinglocal unit u1if GetEventDamage()>1. thenset u1=GetTriggerUnit()if GetRandomInt(1,100)<=4+4*GetUnitAbilityLevel(u1,1093678159)and GetUnitState(u1,UNIT_STATE_LIFE)/ GetUnitState(u1,UNIT_STATE_MAX_LIFE)*100.>=15. thencall SetUnitState(u1,UNIT_STATE_LIFE,GetUnitState(u1,UNIT_STATE_LIFE)+GetEventDamage())call SetUnitState(u1,UNIT_STATE_MANA,GetUnitState(u1,UNIT_STATE_MANA)-.02*GetUnitState(u1,UNIT_STATE_MAX_MANA))endifendifset u1=nullendfunctionfunction DH takes nothing returns nothinglocal integer i=GetPlayerId(GetOwningPlayer(GetKillingUnit()))+1local real EHif Re[i]thenset EH=GetUnitState(h4[i],UNIT_STATE_MANA)+2.+3.*I2R(GetUnitAbilityLevel(h4[i],1093678159))call SetUnitState(h4[i],UNIT_STATE_MANA,EH)endifendfunctionfunction GH takes nothing returns nothinglocal trigger rB=GetTriggeringTrigger()local integer qB=GetHandleId(rB)local unit u1=LoadUnitHandle(o,qB,-$5E9EB4B3)local unit u2=GetTriggerUnit()local integer i=GetPlayerId(GetOwningPlayer(u1))+1local real BF=I2R(GetHeroStr(u1,true))*.35*I2R(GetUnitAbilityLevel(u1,1093678160))call FlushChildHashtable(o,qB)call DestroyTrigger(rB)set t9[i]=falsecall TriggerRemoveCondition(rB,LoadTriggerConditionHandle(o,qB,$AD9C))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl",u2,"chest"))call UnitDamageTarget(u1,u2,BF,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)set rB=nullset u1=nullset u2=nullendfunctionfunction HH takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetEventTargetUnit()local trigger rBlocal integer qBlocal integer i=GetPlayerId(GetOwningPlayer(u1))+1local triggercondition uBif t9[i]==false and Zy(u2,UNIT_TYPE_STRUCTURE)==false thenset rB=CreateTrigger()set qB=GetHandleId(rB)set t9[i]=truecall SaveUnitHandle(o,qB,-$5E9EB4B3,u1)set uB=TriggerAddCondition(rB,Condition(function GH))call SaveTriggerConditionHandle(o,qB,$AD9C,uB)call TriggerRegisterUnitEvent(rB,u2,EVENT_UNIT_DAMAGED)call wB(rB,.3,uB,i)endifset uB=nullset rB=nullset u1=nullset u2=nullendfunctionfunction lH takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,-$5E9EB4B3)local integer i=GetPlayerId(GetOwningPlayer(u1))+1local real x1=GetUnitX(u1)local real y1=GetUnitY(u1)local real x2local real y2local real a=aw[i]if Aw[i]>45. thenset x2=(x1+(45.*Cos(a)))set y2=(y1+(45.*Sin(a)))set Aw[i]=Aw[i]-45call SetUnitX(u1,x2)call SetUnitY(u1,y2)elseset x2=(x1+(35*Cos(a)))set y2=(y1+(35*Sin(a)))call SetUnitX(u1,x2)call SetUnitY(u1,y2)call FlushChildHashtable(o,qB)call DestroyTimer(t)call UnitRemoveAbility(u1,1093679174)endifset t=nullset u1=nullendfunctionfunction JH takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)local unit u1=GetTriggerUnit()local integer i=GetPlayerId(GetOwningPlayer(u1))+1local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x1=GetSpellTargetX()local real y1=GetSpellTargetY()local real a=Atan2(y1-y,x1-x)local real dt=SquareRoot(Pow((x1-x),2)+Pow((y1-y),2))call UnitAddAbility(u1,1093679174)call SetUnitAbilityLevel(u1,1093679174,GetUnitAbilityLevel(u1,1093679173))set Aw[i]=dtset aw[i]=acall SaveUnitHandle(o,qB,-$5E9EB4B3,GetTriggerUnit())call TimerStart(t,.01,true,function lH)set t=nullset u1=nullendfunctionfunction KH takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u3local real x=GetSpellTargetX()local real y=GetSpellTargetY()set u3=CreateUnit(GetOwningPlayer(u1),1851942245,x,y,270)call UnitApplyTimedLife(u3,1112045413,2.)set u3=CreateUnit(GetOwningPlayer(u1),1747988805,x,y,0)call UnitApplyTimedLife(u3,1112045413,4.)call UnitAddAbility(u3,1093678166)call SetUnitAbilityLevel(u3,1093678166,GetUnitAbilityLevel(u1,1093678165))call IssueImmediateOrderById(u3,$D009F)set u1=nullset u3=nullendfunctionfunction LH takes nothing returns booleanlocal integer id=GetSpellAbilityId()if id==1093679173 thencall JH()elseif id==1093678165 thencall KH()endifreturn falseendfunctionfunction NH takes nothing returns nothingif GetUnitAbilityLevel(GetTriggerUnit(),1093678164)==0 thencall UnitAddAbility(GetTriggerUnit(),1093678164)call TriggerRegisterUnitEvent(nj,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)endifcall SetUnitAbilityLevel(GetTriggerUnit(),1093678164,GetUnitAbilityLevel(GetTriggerUnit(),1093677363))endfunctionfunction OH takes nothing returns booleanif GetLearnedSkill()==1093677363 and IsUnitIllusion(GetTriggerUnit())!=true thencall NH()endifreturn falseendfunctionfunction QH takes nothing returns booleanif GetSpellAbilityId()==1093677363 thencall UnitDamageTarget(GetTriggerUnit(),GetSpellTargetUnit(),I2R(GetHeroInt(GetTriggerUnit(),true))*2.,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)endifreturn falseendfunctionfunction SH takes nothing returns nothingcall UnitRemoveAbility(GetEnumUnit(),1093684290)endfunctionfunction TH takes nothing returns nothinglocal unit QC=GetEnumUnit()call SetUnitState(QC,UNIT_STATE_MANA,GetUnitState(QC,UNIT_STATE_MANA)+ny)set QC=nullendfunctionfunction UH takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,1)local integer i=GetPlayerId(GetOwningPlayer(u1))+1if bw[i]>$C thencall ForGroup(Bw[i],function SH)call FlushChildHashtable(o,qB)call DestroyGroup(Bw[i])call DestroyTimer(t)elseset bw[i]=bw[i]+1set ny=5.+5.*I2R(GetUnitAbilityLevel(u1,1093684289))call ForGroup(Bw[i],function TH)endifset u1=nullset t=nullendfunctionfunction VH takes nothing returns nothinglocal unit QClocal unit u1=GetTriggerUnit()local player p=GetOwningPlayer(u1)local timer t=CreateTimer()local integer qB=GetHandleId(t)local real x=GetUnitX(u1)local real y=GetUnitY(u1)local integer i=GetPlayerId(p)+1local integer BB=GetUnitAbilityLevel(u1,1093684289)set bw[i]=0set Bw[i]=CreateGroup()call SaveUnitHandle(o,qB,1,u1)call GroupEnumUnitsInRange(ce[6],x,y,300.,null)loopset QC=FirstOfGroup(ce[6])exitwhen QC==nullcall GroupRemoveUnit(ce[6],QC)if GetUnitState(QC,UNIT_STATE_LIFE)>0 and IsUnitAlly(QC,p)and Zy(QC,UNIT_TYPE_STRUCTURE)==false thencall GroupAddUnit(Bw[i],QC)call UnitAddAbility(QC,1093684290)call SetUnitAbilityLevel(QC,1093684290,BB)endifendloopcall TimerStart(t,1.,true,function UH)set QC=nullset t=nullset u1=nullset p=nullendfunctionfunction WH takes nothing returns booleanif GetSpellAbilityId()==1093684289 thencall VH()endifreturn falseendfunctionfunction XH takes nothing returns booleanif GetSpellAbilityId()==1093683542 thencall LB(0,"",1093678170,"thunderbolt",1697656887,1848651831,525,5,800,2)endifreturn falseendfunctionfunction YH takes trigger aH returns nothinglocal trigger rBlocal integer qB=GetHandleId(aH)set rB=CreateTrigger()call TriggerAddCondition(rB,Condition(function WH))call SaveTriggerHandle(We,qB,1,rB)set rB=CreateTrigger()call TriggerAddCondition(rB,Condition(function XH))call SaveTriggerHandle(We,qB,2,rB)set rB=nullendfunctionfunction ZH takes nothing returns nothinglocal trigger rB=GetTriggeringTrigger()local integer qB=GetHandleId(rB)local unit u=B4if GetTriggerExecCount(rB)==1 thencall YH(rB)call TriggerRegisterAnyUnitEventBJ(pj,EVENT_PLAYER_UNIT_SPELL_EFFECT)endifset rB=LoadTriggerHandle(We,qB,1)call TriggerRegisterUnitEvent(rB,u,EVENT_UNIT_SPELL_EFFECT)set rB=LoadTriggerHandle(We,qB,2)call TriggerRegisterUnitEvent(rB,u,EVENT_UNIT_SPELL_EFFECT)set u=nullset rB=nullendfunctionfunction eI takes nothing returns booleanlocal unit u2=GetSpellTargetUnit()if GetUnitAbilityLevel(u2,1093678384)>0 and IsUnitEnemy(GetTriggerUnit(),GetOwningPlayer(u2))and P8[GetPlayerId(GetOwningPlayer(u2))+1]==false thenset u2=nullreturn trueelseset u2=nullreturn falseendifendfunctionfunction fI takes nothing returns nothinglocal unit u2=GetSpellTargetUnit()local integer i=GetPlayerId(GetOwningPlayer(u2))+1local real tB=44.-8.*I2R(GetUnitAbilityLevel(u2,1093678384))call UnitAddAbility(u2,1093684300)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Demon\\ReviveDemon\\ReviveDemon.mdl",u2,"chest"))set P8[i]=truecall xA(3.)call UnitRemoveAbility(u2,1093684300)call xA(tB)set P8[i]=falseset u2=nullendfunctionfunction hI takes nothing returns nothingcall TriggerRegisterUnitEvent(rj,B4,EVENT_UNIT_HERO_LEVEL)call TriggerRegisterUnitEvent(sj,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterPlayerUnitEventSimple(tj,GetOwningPlayer(B4),EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerRegisterPlayerUnitEventSimple(uj,GetOwningPlayer(B4),EVENT_PLAYER_UNIT_DEATH)call TriggerRegisterPlayerUnitEventSimple(vj,GetOwningPlayer(B4),EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(wj,B4,EVENT_UNIT_HERO_SKILL)set z8[0]=1093687126set z8[1]=1093687127set z8[2]=1093687125endfunctionfunction jI takes nothing returns booleanreturn((ModuloInteger(GetHeroLevel(GetTriggerUnit()),4)==0))endfunctionfunction kI takes nothing returns nothingcall SetPlayerTechResearchedSwap(1382573922,(GetHeroLevel(GetTriggerUnit())/ 4),GetOwningPlayer(GetTriggerUnit()))endfunctionfunction nI takes nothing returns booleanreturn((GetSpellAbilityId()==1093678425))endfunctionfunction oI takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))local integer qB=GetHandleId(u1)local unit u3local real x=GetSpellTargetX()local real y=GetSpellTargetY()local item pIlocal item qIlocal integer rIlocal integer sIcall SaveUnitHandle(Ae,qB,3,LoadUnitHandle(Ae,qB,2))call SaveUnitHandle(Ae,qB,2,LoadUnitHandle(Ae,qB,1))call DisableTrigger(tj)set u3=CreateUnit(GetOwningPlayer(u1),1852340589,x,y,0)call UnitAddAbility(u3,1093678386)call SetUnitAbilityLevel(u3,1093678386,GetUnitAbilityLevel(u1,1093678425))if((GetUnitAbilityLevel(u1,1093678425)!=1))thencall UnitAddAbility(u3,z8[(GetUnitAbilityLevel(u1,1093678425)-2)])endifcall SaveUnitHandle(Ae,qB,1,u3)set pI=UnitItemInSlot(u1,0)set qI=UnitItemInSlot(u1,1)set rI=GetItemTypeId(pI)set sI=GetItemTypeId(qI)if((rI!=1227895126)and(rI!=1227895366)and(rI!=1919182128)and(rI!=1718773604)and(rI!=1918987571)and(rI!=1734700404)and(rI!=1718055527)and(rI!=1634626408)and(rI!=1227895110)and(rI!=1227895861)and(rI!=1227895860)and(rI!=1936683576)and(rI!=1668051812)and(rI!=1818715240)and(rI!=GetItemTypeId(null)))thencall UnitAddItemToSlotById(u3,rI,0)call SetItemDroppable(UnitItemInSlotBJ(u3,1),false)call SetItemDropOnDeath(UnitItemInSlotBJ(u3,1),false)elsecall UnitAddItemToSlotById(u3,1227895639,0)endifif((sI!=1227895126)and(sI!=1734700404)and(sI!=1918987571)and(sI!=1718773604)and(sI!=1919182128)and(sI!=1227895366)and(sI!=1718055527)and(sI!=1227895110)and(sI!=1634626408)and(sI!=1227895861)and(sI!=1936683576)and(sI!=1668051812)and(sI!=GetItemTypeId(null))and(sI!=1818715240))thencall UnitAddItemToSlotById(u3,sI,1)call SetItemDroppable(UnitItemInSlotBJ(u3,2),false)call SetItemDropOnDeath(UnitItemInSlotBJ(u3,2),false)elsecall UnitAddItemToSlotById(u3,1227895639,1)endifcall EnableTrigger(tj)if((IsUnitAliveBJ(LoadUnitHandle(Ae,qB,3))))thencall KillUnit(LoadUnitHandle(Ae,qB,3))endifset u1=nullset u3=nullset pI=nullset qI=nullendfunctionfunction uI takes nothing returns booleanreturn((GetUnitTypeId(GetTriggerUnit())==1852340589))endfunctionfunction vI takes nothing returns nothingcall UnitRemoveItemSwapped(GetManipulatedItem(),GetTriggerUnit())endfunctionfunction xI takes nothing returns booleanreturn((GetUnitTypeId(GetTriggerUnit())==1852340589))endfunctionfunction yI takes nothing returns nothingcall RemoveItem(UnitItemInSlot(GetTriggerUnit(),0))call RemoveItem(UnitItemInSlot(GetTriggerUnit(),1))if((IsUnit(GetDyingUnit(),LoadUnitHandle(Ae,(GetHandleId((h4[(1+GetPlayerId(GetOwningPlayer(GetTriggerUnit())))]))),1))))thencall SaveUnitHandle(Ae,(GetHandleId((h4[(1+GetPlayerId(GetOwningPlayer(GetTriggerUnit())))]))),1,LoadUnitHandle(Ae,(GetHandleId((h4[(1+GetPlayerId(GetOwningPlayer(GetTriggerUnit())))]))),2))call SaveUnitHandle(Ae,(GetHandleId((h4[(1+GetPlayerId(GetOwningPlayer(GetTriggerUnit())))]))),2,null)endifendfunctionfunction AI takes nothing returns booleanreturn((GetUnitTypeId(GetTriggerUnit())==1852340589))endfunctionfunction aI takes nothing returns nothingcall ConditionalTriggerExecute(Ni)endfunctionfunction bI takes nothing returns booleanreturn((GetLearnedSkill()==1093683530)and(IsUnitIllusion(GetTriggerUnit())!=true))endfunctionfunction CI takes nothing returns nothingcall SetPlayerTechResearchedSwap(1382576737,GetUnitAbilityLevel(GetTriggerUnit(),1093683530),GetOwningPlayer(GetTriggerUnit()))endfunctionfunction DI takes nothing returns nothinglocal integer i=GetPlayerId(GetOwningPlayer(B4))+1call TriggerRegisterUnitEvent(yj,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(zj,B4,EVENT_UNIT_HERO_SKILL)set Ue[i]=CreateTimer()call SaveInteger(o,GetHandleId(Ue[i]),-$5E9EB4B3,i)endfunctionfunction FI takes nothing returns booleanreturn GetSpellAbilityId()==1093682512endfunctionfunction GI takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local integer BB=GetUnitAbilityLevel(u1,1093682512)local real EHcall TriggerSleepAction(.0)call SetUnitPosition(u1,GetUnitX(u2),GetUnitY(u2))set EH=GetUnitState(u2,UNIT_STATE_MANA)-40.-60.*I2R(BB)call SetUnitState(u2,UNIT_STATE_MANA,EH)call IssueTargetOrderById(u1,$D000F,u2)set u1=nullset u2=nullendfunctionfunction II takes nothing returns booleanif GetLearnedSkill()==1093678390 and GetUnitAbilityLevel(GetTriggerUnit(),1093678390)==1 and IsUnitIllusion(GetTriggerUnit())!=true thencall TriggerRegisterUnitEvent(Aj,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(aj,GetTriggerUnit(),EVENT_UNIT_DAMAGED)endifreturn falseendfunctionfunction JI takes nothing returns nothinglocal integer i=LoadInteger(o,GetHandleId(GetExpiredTimer()),-$5E9EB4B3)call SetUnitAbilityLevel(h4[i],1093682226,1)call PauseTimer(GetExpiredTimer())endfunctionfunction KI takes nothing returns booleanlocal timer tlocal unit u1=GetTriggerUnit()local integer i=GetPlayerId(GetOwningPlayer(u1))+1if GetUnitAbilityLevel(u1,1093682226)<4+GetUnitAbilityLevel(u1,1093678390)thencall IncUnitAbilityLevel(u1,1093682226)endifcall PauseTimer(Ue[i])call TimerStart(Ue[i],8.,false,function JI)set t=nullset u1=nullreturn falseendfunctionfunction MI takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer i=GetPlayerId(GetOwningPlayer(u1))+1local real Rif GetUnitAbilityLevel(u1,1093682226)<=3+GetUnitAbilityLevel(u1,1093678390)thenset R=I2R(GetUnitAbilityLevel(u1,1093682226)-1)*.05elseset R=I2R(GetUnitAbilityLevel(u1,1093678390)+3)*.05endifcall SetUnitState(u1,UNIT_STATE_LIFE,GetUnitState(u1,UNIT_STATE_LIFE)+GetEventDamage()*R)set u1=nullendfunctionfunction NI takes nothing returns booleanif GetEventDamage()>1. and GetUnitAbilityLevel(GetTriggerUnit(),1093682226)>1 thencall MI()endifreturn falseendfunctionfunction PI takes nothing returns nothingcall TriggerRegisterUnitEvent(bj,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(cj,B4,EVENT_UNIT_SPELL_EFFECT)endfunctionfunction RI takes nothing returns booleanreturn((GetLearnedSkill()==1093678404))endfunctionfunction SI takes nothing returns nothingcall DisableTrigger(GetTriggeringTrigger())call TriggerRegisterAnyUnitEventBJ(Cj,EVENT_PLAYER_UNIT_ATTACKED)endfunctionfunction UI takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetAttacker()local real BF=.1*GetUnitState(u1,UNIT_STATE_LIFE)call SetUnitState(u2,UNIT_STATE_LIFE,GetUnitState(u2,UNIT_STATE_LIFE)+BF)call UnitDamageTarget(u2,u1,BF,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_ACID,WEAPON_TYPE_WHOKNOWS)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GargoyleMissile\\GargoyleMissile.mdl",u1,"head"))set u1=nullset u2=nullendfunctionfunction VI takes nothing returns booleanif GetUnitAbilityLevel(GetAttacker(),1110454607)>0 and GetRandomInt(1,100)<=17 and Zy(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==false and Zy(GetTriggerUnit(),UNIT_TYPE_MECHANICAL)==false thencall UI()endifreturn falseendfunctionfunction XI takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u=LoadUnitHandle(o,qB,-$63F0AAA2)local real hp=(.01*GetUnitState(u,UNIT_STATE_MAX_LIFE)*75.)if GetUnitAbilityLevel(u,1110454608)>0 thencall SetUnitState(u,UNIT_STATE_LIFE,GetUnitState(u,UNIT_STATE_LIFE)+hp)elsecall FlushChildHashtable(o,qB)call DestroyTimer(t)call UnitRemoveAbility(u,1093684022)endifset t=nullset u=nullendfunctionfunction YI takes nothing returns nothinglocal unit u=GetTriggerUnit()local player p=GetOwningPlayer(u)local integer i=GetPlayerId(p)+1local timer t=CreateTimer()local integer qB=GetHandleId(t)local integer BB=GetUnitAbilityLevel(u,1093678405)local real tB=(31.-6.*I2R(BB))call UnitAddAbility(u,1093684022)call SetUnitAbilityLevel(u,1093684022,BB)call SetUnitState(u,UNIT_STATE_LIFE,GetUnitState(u,UNIT_STATE_MAX_LIFE))call SaveUnitHandle(o,qB,-$63F0AAA2,u)call TimerStart(t,tB,true,function XI)set u=nullset t=nullset p=nullendfunctionfunction ZI takes nothing returns booleanif GetSpellAbilityId()==1093678405 thencall YI()endifreturn falseendfunctionfunction el takes nothing returns nothingcall EnableTrigger(Ej)call TriggerRegisterUnitEvent(Fj,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Gj,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Hj,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(Jj,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Kj,B4,EVENT_UNIT_SPELL_EFFECT)endfunctionfunction gl takes nothing returns booleanif IsTriggerEnabled(GetTriggeringTrigger())and GetUnitAbilityLevel(h4[GetPlayerId(GetOwningPlayer(GetKillingUnit()))+1],1093684824)>0 thencall SetHeroAgi(GetKillingUnit(),GetHeroAgi(GetKillingUnit(),false)+3,true)endifreturn falseendfunctionfunction il takes nothing returns booleanreturn((GetSpellAbilityId()==1093678407))endfunctionfunction jl takes nothing returns nothinglocal unit QClocal unit u1=GetTriggerUnit()local player p=GetOwningPlayer(u1)local real BF=(I2R(GetHeroAgi(u1,true))*(.8+(.2*I2R(GetUnitAbilityLevel(u1,1093678407)))))call GroupEnumUnitsInRange(ce[7],GetUnitX(u1),GetUnitY(u1),925.,null)loopset QC=FirstOfGroup(ce[7])exitwhen QC==nullcall GroupRemoveUnit(ce[7],QC)if IsUnitEnemy(QC,p)and GetUnitState(QC,UNIT_STATE_LIFE)>0 and Zy(QC,UNIT_TYPE_STRUCTURE)==false thencall UnitDamageTargetBJ(u1,QC,BF,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNKNOWN)endifendloopset QC=nullset u1=nullset p=nullendfunctionfunction ml takes nothing returns booleanreturn((GetSpellAbilityId()==1093683532))endfunctionfunction nl takes nothing returns nothinglocal unit u1=GetTriggerUnit()call UnitAddAbility(u1,1093678918)call SetUnitAbilityLevel(u1,1093678918,GetUnitAbilityLevel(u1,1093683532))call TriggerSleepAction(10.)call UnitRemoveAbility(u1,1093678918)set u1=nullendfunctionfunction pl takes nothing returns booleanreturn((GetLearnedSkill()==1093678410)and(GetUnitAbilityLevel(GetTriggerUnit(),1093678410)==1))endfunctionfunction ql takes nothing returns nothingcall TriggerRegisterUnitEvent(lj,GetTriggerUnit(),EVENT_UNIT_TARGET_IN_RANGE)call TriggerRegisterUnitEvent(Ij,GetTriggerUnit(),EVENT_UNIT_DAMAGED)endfunctionfunction sl takes nothing returns booleanreturn GetUnitAbilityLevel(GetEventDamageSource(),1110454609)==0 and Zy(GetEventDamageSource(),UNIT_TYPE_STRUCTURE)==false and q9[GetPlayerId(GetTriggerPlayer())+1]==falseendfunctionfunction tl takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetEventDamageSource()local unit u3local real x=GetUnitX(u1)local real y=GetUnitY(u1)local player p=GetOwningPlayer(u1)local integer i=GetPlayerId(p)+1set r9[i]=r9[i]+1set u3=CreateUnit(p,1747988805,x,y,0)call UnitApplyTimedLife(u3,1112045413,4.)call UnitAddAbility(u3,1093684551)call IssueTargetOrderById(u3,$D00B5,u2)if r9[i]>=5 thenset r9[i]=0set q9[i]=truecall TriggerSleepAction(22.-4.*I2R(GetUnitAbilityLevel(u1,1093678410)))set q9[i]=falseendifset p=nullset u1=nullset u2=nullset u3=nullendfunctionfunction vl takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetEventTargetUnit()local player p=GetOwningPlayer(u1)local real BF=GetHeroAgi(u1,true)*1.4local texttag ttlocal string s=("+ "+(I2S(R2I(BF))+" dmg"))local integer fA=(TB(((80.)*1.),$FF))local integer eA=(TB(((20.)*1.),$FF))local integer gA=(TB(((90.)*1.),$FF))local integer hA=(TB(((100.)*1.),$FF))local real oF=64*.071/ $80local real pF=oF*Cos(90*bj_DEGTORAD)local real qF=oF*Sin(90*bj_DEGTORAD)call UnitRemoveAbility(u2,1110454609)call UnitDamageTarget(u1,u2,BF,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_ACID,WEAPON_TYPE_WHOKNOWS)call SetUnitState(u1,UNIT_STATE_LIFE,GetUnitState(u1,UNIT_STATE_LIFE)+.02*GetUnitState(u1,UNIT_STATE_MAX_LIFE))set tt=CreateTextTag()call SetTextTagText(tt,s,9.*.023/ $A)call SetTextTagPosUnit(tt,u2,0)call SetTextTagColor(tt,fA,eA,gA,hA)call SetTextTagPermanent(tt,false)call SetTextTagLifespan(tt,5.)call SetTextTagFadepoint(tt,2.5)call SetTextTagVelocity(tt,pF,qF)if IsPlayerEnemy(GetLocalPlayer(),p)thencall SetTextTagVisibility(tt,false)endifset tt=nullset s=nullset p=nullset u1=nullset u2=nullendfunctionfunction wl takes nothing returns booleanif GetUnitAbilityLevel(GetEventTargetUnit(),1110454609)>0 thencall vl()endifreturn falseendfunctionfunction yl takes nothing returns booleanreturn((GetSpellAbilityId()==1093684552))endfunctionfunction zl takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))set s9[i]=0call SetPlayerAbilityAvailable(GetOwningPlayer(u1),1093684552,false)call UnitAddAbility(u1,1093684553)call UnitAddAbility(u1,1093678411)call TriggerSleepAction(22.)call SetPlayerAbilityAvailable(GetOwningPlayer(u1),1093684552,true)call UnitRemoveAbility(u1,1093684553)call UnitRemoveAbility(u1,1093678411)set u1=nullendfunctionfunction al takes nothing returns booleanreturn((GetSpellAbilityId()==1093684553))endfunctionfunction Bl takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))local real x1=GetUnitX(u2)local real y1=GetUnitY(u2)call TriggerSleepAction(.0)call SetUnitX(u1,x1)call SetUnitY(u1,y1)set s9[i]=(s9[i]+1)call UnitDamageTargetBJ(u1,u2,(I2R(GetHeroAgi(u1,true))*1.25),ATTACK_TYPE_HERO,DAMAGE_TYPE_ACID)call IssueTargetOrderById(u1,$D000F,u2)if((s9[i]>=(1+(GetUnitAbilityLevel(u1,1093684552)*2))))thencall SetPlayerAbilityAvailable(GetOwningPlayer(u1),1093684552,true)call UnitRemoveAbility(u1,1093684553)call UnitRemoveAbility(u1,1093678411)endifset u1=nullset u2=nullendfunctionfunction cl takes nothing returns nothingcall TriggerRegisterUnitEvent(Mj,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Nj,B4,EVENT_UNIT_SPELL_CHANNEL)call TriggerRegisterUnitEvent(Oj,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Pj,B4,EVENT_UNIT_HERO_SKILL)endfunctionfunction El takes nothing returns booleanreturn GetSpellAbilityId()==1093678415endfunctionfunction Fl takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetSpellTargetX()local real y=GetSpellTargetY()call TriggerSleepAction(.0)call SetUnitPosition(u1,x,y)set u1=nullendfunctionfunction Hl takes nothing returns booleanif GetSpellAbilityId()==1093678415 and IsTerrainPathable(GetSpellTargetX(),GetSpellTargetY(),PATHING_TYPE_WALKABILITY)thencall DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,3.,"TRIGSTR_12200")call IssueImmediateOrderById(GetTriggerUnit(),$D0004)endifreturn falseendfunctionfunction ll takes nothing returns booleanreturn GetSpellAbilityId()==1093678416endfunctionfunction Jl takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local real r1=80.+120.*I2R(GetUnitAbilityLevel(u1,1093678416))local real r2=GetUnitState(u1,UNIT_STATE_LIFE)*(.01+.01*I2R(GetUnitAbilityLevel(u1,1093678416)))call UnitDamageTarget(u1,u2,r1,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)call UnitDamageTarget(u1,u2,r2,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)set u1=nullset u2=nullendfunctionfunction Ll takes nothing returns booleanreturn((GetLearnedSkill()==1093678417)and(GetUnitAbilityLevel(GetTriggerUnit(),1093678417)==1)and(IsUnitIllusion(GetTriggerUnit())!=true))endfunctionfunction Ml takes nothing returns nothingcall TriggerRegisterUnitEvent(Qj,GetTriggerUnit(),EVENT_UNIT_TARGET_IN_RANGE)if((GetTriggerExecCount(GetTriggeringTrigger())==1))thencall TriggerRegisterAnyUnitEventBJ(Rj,EVENT_PLAYER_UNIT_DEATH)endifendfunctionfunction Ol takes nothing returns nothinglocal trigger rB=GetTriggeringTrigger()local integer qB=GetHandleId(rB)local unit u1=LoadUnitHandle(o,qB,-$5E9EB4B3)local unit u2=GetTriggerUnit()local integer i=GetPlayerId(GetOwningPlayer(u1))+1local real BF=.01*I2R(GetUnitAbilityLevel(u1,1093678417)+1)*GetUnitState(u1,UNIT_STATE_LIFE)call TriggerRemoveCondition(rB,LoadTriggerConditionHandle(o,qB,$AD9C))call DestroyTrigger(rB)call FlushChildHashtable(o,qB)set t9[i]=falsecall DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HeroBloodElfBlood.mdl",u2,"chest"))call UnitDamageTarget(u1,u2,BF,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_ACID,WEAPON_TYPE_WHOKNOWS)set rB=nullset u1=nullset u2=nullendfunctionfunction Pl takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetEventTargetUnit()local trigger rBlocal integer qBlocal integer i=GetPlayerId(GetOwningPlayer(u1))+1local triggercondition uBif t9[i]==false and Zy(u2,UNIT_TYPE_STRUCTURE)==false thenset rB=CreateTrigger()set qB=GetHandleId(rB)set t9[i]=truecall SaveUnitHandle(o,qB,-$5E9EB4B3,u1)set uB=TriggerAddCondition(rB,Condition(function Ol))call SaveTriggerConditionHandle(o,qB,$AD9C,uB)call TriggerRegisterUnitEvent(rB,u2,EVENT_UNIT_DAMAGED)call wB(rB,.3,uB,i)endifset rB=nullset uB=nullset u1=nullset u2=nullendfunctionfunction Rl takes nothing returns booleanreturn((GetUnitAbilityLevel(GetKillingUnit(),1093678417)!=0))endfunctionfunction Sl takes nothing returns nothingcall SetWidgetLife(GetKillingUnit(),(GetUnitStateSwap(UNIT_STATE_LIFE,GetKillingUnit())+(GetUnitStateSwap(UNIT_STATE_MAX_LIFE,GetTriggerUnit())*(.01*(5.+I2R(GetUnitAbilityLevelSwapped(1093678417,GetKillingUnit())))))))endfunctionfunction Ul takes nothing returns nothingcall TriggerRegisterUnitEvent(Uj,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Tj,B4,EVENT_UNIT_HERO_LEVEL)call TriggerRegisterUnitEvent(Vj,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(Wj,B4,EVENT_UNIT_SPELL_EFFECT)endfunctionfunction Wl takes nothing returns booleanreturn((GetUnitLevel(GetTriggerUnit())>=8)and(GetUnitAbilityLevel(GetTriggerUnit(),1093683799)==0))endfunctionfunction Xl takes nothing returns nothingcall UnitAddAbility(GetTriggerUnit(),1093683799)call UnitMakeAbilityPermanent(GetTriggerUnit(),true,1093683799)endfunctionfunction Zl takes nothing returns booleanreturn((GetSpellAbilityId()==1093687362))endfunctionfunction d1 takes nothing returns nothinglocal unit u1=GetTriggerUnit()call TriggerSleepAction(.0)call SetUnitAbilityLevel(u1,1093685590,GetUnitAbilityLevel(u1,1093687362))set u1=nullendfunctionfunction h1 takes nothing returns booleanreturn((GetLearnedSkill()==1093683800)and(IsUnitIllusion(GetTriggerUnit())!=true))endfunctionfunction i1 takes nothing returns nothingif((GetUnitAbilityLevel(GetTriggerUnit(),1093683800)==1))thencall UnitAddAbility(GetTriggerUnit(),1093683801)call UnitMakeAbilityPermanent(GetTriggerUnit(),true,1093683801)endifcall SetUnitAbilityLevel(GetTriggerUnit(),1093683801,GetUnitAbilityLevelSwapped(1093683800,GetTriggerUnit()))endfunctionfunction k1 takes nothing returns booleanreturn((GetSpellAbilityId()==1093684016))endfunctionfunction m1 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,-$5E9EB4B3)local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))set Cw[i]=(Cw[i]-1)if(Cw[i]<=0)or GetUnitState(u1,UNIT_STATE_LIFE)<=0 thencall FlushChildHashtable(o,qB)call DestroyTimer(t)elsecall SetUnitX(u9[i],GetUnitX(u1))call SetUnitY(u9[i],GetUnitY(u1))call IssueTargetOrderById(u9[i],$D0132,u1)endifset u1=nullset t=nullendfunctionfunction o1 takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)local unit u1=GetTriggerUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))local real x=GetUnitX(u1)local real y=GetUnitY(u1)set u9[i]=CreateUnit(GetOwningPlayer(u1),1747988805,x,y,0)call UnitApplyTimedLife(u9[i],1112045413,17.)call UnitAddAbility(u9[i],1093683802)set Cw[i]=$Ccall SaveUnitHandle(o,qB,-$5E9EB4B3,GetTriggerUnit())call TimerStart(t,(.9-(.2*I2R(GetUnitAbilityLevel(u1,1093684016)))),true,function m1)set t=nullset u1=nullendfunctionfunction v1 takes nothing returns nothingcall TriggerRegisterPlayerUnitEventSimple(Yj,GetOwningPlayer(B4),EVENT_PLAYER_UNIT_DEATH)call TriggerRegisterUnitEvent(dk,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(ek,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(fk,B4,EVENT_UNIT_SPELL_EFFECT)call EnableTrigger(Zj)endfunctionfunction z1 takes nothing returns booleanreturn((GetUnitTypeId(GetDyingUnit())==1865429320))endfunctionfunction A1 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x1local real y1local real alocal integer i=1local unit u3loopexitwhen i>20set a=I2R(18*i)*bj_DEGTORADset x1=x+400.*Cos(a)set y1=y+400.*Sin(a)call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\SkeletalMageMissile\\SkeletalMageMissile.mdl",x1,y1))set i=i+1endloopset u3=CreateUnit(GetOwningPlayer(u1),1869836340,x,y,270.)call UnitApplyTimedLife(u3,1112820806,5.)set u1=nullset u3=nullendfunctionfunction C1 takes nothing returns booleanreturn((GetUnitTypeId(GetAttacker())==1869836340))endfunctionfunction c1 takes nothing returns nothingcall UnitDamageTargetBJ(GetAttacker(),GetTriggerUnit(),(1.3*I2R(GetHeroAgi(h4[(1+GetPlayerId(GetOwningPlayer(GetAttacker())))],true))),ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL)endfunctionfunction E1 takes nothing returns booleanreturn((GetLearnedSkill()==1093678423))endfunctionfunction F1 takes nothing returns nothingif((GetUnitAbilityLevel(GetTriggerUnit(),1093677907)==0))thencall UnitAddAbility(GetTriggerUnit(),1093677907)endifcall SetUnitAbilityLevel(GetTriggerUnit(),1093677907,GetUnitAbilityLevel(GetTriggerUnit(),1093678423))endfunctionfunction H1 takes nothing returns booleanreturn((GetSpellAbilityId()==1093684291))endfunctionfunction I1 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit QClocal real x=GetSpellTargetX()local real y=GetSpellTargetY()local integer BB=GetUnitAbilityLevel(u1,1093684291)local player p=GetOwningPlayer(u1)call GroupEnumUnitsInRange(ce[3],x,y,300.,null)loopset QC=FirstOfGroup(ce[3])exitwhen QC==nullcall GroupRemoveUnit(ce[3],QC)if(GetUnitState(QC,UNIT_STATE_LIFE)>0 and IsUnitEnemy(QC,p)and(Zy(QC,UNIT_TYPE_STRUCTURE)==false))thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\CarrionSwarm\\CarrionSwarmDamage.mdl",QC,"head"))if Zy(QC,UNIT_TYPE_MAGIC_IMMUNE)thencall UnitDamageTargetBJ(u1,QC,(150.*I2R(BB)),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_ACID)elsecall UnitDamageTargetBJ(u1,QC,(100.*I2R(BB)),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)endifendifendloopset p=nullset QC=nullset u1=nullendfunctionfunction J1 takes nothing returns booleanreturn((GetSpellAbilityId()==1093678169))endfunctionfunction K1 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x1local real y1local real alocal integer i=1loopexitwhen i>$Fset a=I2R(24*i)*3.14159/ $B4set x1=x+105.*Cos(a)set y1=y+105.*Sin(a)call DestroyEffect(AddSpecialEffect("Abilities\\Weapons\\AvengerMissile\\AvengerMissile.mdl",x1,y1))set i=i+1endloopset u1=nullendfunctionfunction M1 takes nothing returns booleanreturn((GetSpellAbilityId()==1093678641))endfunctionfunction N1 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u3=CreateUnit(GetOwningPlayer(u1),1747989063,GetSpellTargetX(),GetSpellTargetY(),0)call UnitApplyTimedLife(u3,1112045413,.01)call ShowUnit(u3,false)set u3=CreateUnit(GetOwningPlayer(u1),1747988805,GetSpellTargetX(),GetSpellTargetY(),0)call UnitApplyTimedLife(u3,1112045413,4.)call UnitAddAbility(u3,1093678642)call SetUnitAbilityLevel(u3,1093678642,GetUnitAbilityLevel(u1,1093678641))call IssueImmediateOrderById(u3,$D009F)set u1=nullset u3=nullendfunctionfunction P1 takes nothing returns nothingcall TriggerRegisterUnitEvent(ik,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(jk,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(kk,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(nk,B4,EVENT_UNIT_SPELL_EFFECT)endfunctionfunction R1 takes nothing returns booleanreturn((GetSpellAbilityId()==1093678643))endfunctionfunction S1 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x1=GetSpellTargetX()local real y1=GetSpellTargetY()local unit u3=CreateUnit(GetOwningPlayer(u1),1747988805,x,y,0)call UnitApplyTimedLife(u3,1112045413,4.)call UnitAddAbility(u3,1093678645)call SetUnitAbilityLevel(u3,1093678645,GetUnitAbilityLevel(u1,1093678643))call IssuePointOrderById(u3,$D02AC,x1,y1)set u1=nullset u3=nullendfunctionfunction U1 takes nothing returns booleanreturn((GetSpellAbilityId()==1093678646))endfunctionfunction V1 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit QClocal player p=GetOwningPlayer(u1)local real x=GetUnitX(u1)local real y=GetUnitY(u1)call GroupEnumUnitsInRange(ce[3],x,y,630.,null)loopset QC=FirstOfGroup(ce[3])exitwhen QC==nullcall GroupRemoveUnit(ce[3],QC)if IsUnitEnemy(QC,p)and GetUnitState(QC,UNIT_STATE_LIFE)>0 and Zy(QC,UNIT_TYPE_STRUCTURE)==false and Zy(QC,UNIT_TYPE_MECHANICAL)==false and GetUnitPointValue(QC)!=1 and IsUnitHidden(QC)!=true thencall SetUnitPosition(QC,x,y)endifendloopset QC=nullset u1=nullset p=nullendfunctionfunction X1 takes nothing returns booleanreturn((GetLearnedSkill()==1093678647)and(GetUnitAbilityLevel(GetTriggerUnit(),1093678647)==1)and(IsUnitIllusion(GetTriggerUnit())!=true))endfunctionfunction Y1 takes nothing returns nothingcall TriggerRegisterUnitEvent(mk,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)endfunctionfunction dJ takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer i=GetUnitAbilityLevel(u1,1093678647)local real r=GetUnitState(u1,UNIT_STATE_LIFE)/ GetUnitState(u1,UNIT_STATE_MAX_LIFE)*100.call SetUnitState(u1,UNIT_STATE_MANA,GetUnitState(u1,UNIT_STATE_MANA)+GetUnitState(u1,UNIT_STATE_MAX_MANA)*2.*I2R(i)*.01)if r<50. thencall SetUnitState(u1,UNIT_STATE_LIFE,GetUnitState(u1,UNIT_STATE_LIFE)+GetUnitState(u1,UNIT_STATE_MAX_LIFE)*I2R(i)*.01)endifset u1=nullendfunctionfunction fJ takes nothing returns booleanreturn((GetSpellAbilityId()==1093678648))endfunctionfunction gJ takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,-$5E9EB4B3)local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))local real x=GetUnitX(u1)local real y=GetUnitY(u1)if((cw[i]==17))thencall FlushChildHashtable(o,qB)call DestroyTimer(t)elseset cw[i]=cw[i]+1call SetUnitX(t4[i],x)call SetUnitY(t4[i],y)call IssueImmediateOrderById(t4[i],$D0080)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",x,y))endifset u1=nullset t=nullendfunctionfunction hJ takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)local unit u1=GetTriggerUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))set cw[i]=0set t4[i]=CreateUnit(GetOwningPlayer(u1),1747988805,GetUnitX(u1),GetUnitY(u1),0)call UnitApplyTimedLife(t4[i],1112045413,15.)call UnitAddAbility(t4[i],1093678649)call SetUnitAbilityLevel(t4[i],1093678649,GetUnitAbilityLevel(u1,1093678648))call SaveUnitHandle(o,qB,-$5E9EB4B3,u1)call TimerStart(t,.5,true,function gJ)set t=nullset u1=nullendfunctionfunction jJ takes nothing returns nothingcall TriggerRegisterUnitEvent(pk,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(qk,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(sk,B4,EVENT_UNIT_HERO_SKILL)endfunctionfunction mJ takes nothing returns nothinglocal unit u1=GetTriggerUnit()local player p=GetOwningPlayer(u1)local unit u3=CreateUnit(p,1747988805,GetUnitX(u1),GetUnitY(u1),0)local unit QCcall UnitApplyTimedLife(u3,1112045413,5.)call UnitAddAbility(u3,1093678659)call GroupEnumUnitsInRange(ce[7],GetUnitX(u1),GetUnitY(u1),650.,null)loopset QC=FirstOfGroup(ce[7])exitwhen QC==nullcall GroupRemoveUnit(ce[7],QC)if GetUnitState(QC,UNIT_STATE_LIFE)>0 and IsPlayerEnemy(GetOwningPlayer(QC),p)and Zy(QC,UNIT_TYPE_STRUCTURE)==false and GetUnitLifePercent(QC)<65. thencall IssueTargetOrderById(u3,$D007F,QC)endifendloopset u1=nullset u3=nullset QC=nullset p=nullendfunctionfunction nJ takes nothing returns booleanif GetSpellAbilityId()==1093678658 thencall mJ()endifreturn falseendfunctionfunction pJ takes nothing returns booleanif GetLearnedSkill()==1093678660 and GetUnitAbilityLevel(GetTriggerUnit(),1093678660)==1 and IsUnitIllusion(GetTriggerUnit())==false thencall TriggerRegisterUnitEvent(rk,GetTriggerUnit(),EVENT_UNIT_ATTACKED)endifreturn falseendfunctionfunction rJ takes nothing returns booleanlocal unit u=GetTriggerUnit()local unit u2=GetAttacker()local integer BB=GetUnitAbilityLevel(u,1093678660)local real BF=(20.*I2R(BB))if Zy(GetAttacker(),UNIT_TYPE_STRUCTURE)==false thencall UnitDamageTarget(u,u2,BF,true,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNKNOWN,WEAPON_TYPE_WHOKNOWS)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\ThornsAura\\ThornsAuraDamage.mdl",u2,"chest"))endifset u=nullset u2=nullreturn falseendfunctionfunction tJ takes nothing returns nothinglocal integer qB=GetHandleId(GetExpiredTimer())local unit u=LoadUnitHandle(o,qB,-$5E9EB4B3)local integer BB=GetUnitAbilityLevel(u,1093678661)local real hp=(100.-GetUnitLifePercent(u))/(25.-(5.*I2R(BB)))local integer i=R2I(hp)if i<=BB+4 thencall SetUnitAbilityLevel(u,1093678663,i+1)call SetUnitAbilityLevel(u,1093678662,i+1)elsecall SetUnitAbilityLevel(u,1093678663,BB+4)call SetUnitAbilityLevel(u,1093678662,BB+4)endifset u=nullendfunctionfunction uJ takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)local unit u=GetTriggerUnit()call SaveUnitHandle(o,qB,-$5E9EB4B3,u)call TimerStart(t,1.,true,function tJ)set t=nullset u=nullendfunctionfunction vJ takes nothing returns booleanif GetLearnedSkill()==1093678661 and GetUnitAbilityLevel(GetTriggerUnit(),1093678661)==1 thencall uJ()endifreturn falseendfunctionfunction xJ takes nothing returns nothingcall TriggerRegisterUnitEvent(uk,B4,EVENT_UNIT_HERO_LEVEL)call TriggerRegisterUnitEvent(vk,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(wk,B4,EVENT_UNIT_SUMMON)call TriggerRegisterUnitEvent(xk,B4,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(yk,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(zk,B4,EVENT_UNIT_SPELL_EFFECT)endfunctionfunction zJ takes nothing returns nothingcall SetPlayerTechResearchedSwap(1382572402,(GetHeroLevel(GetTriggerUnit())/ 2),GetOwningPlayer(GetTriggerUnit()))endfunctionfunction aJ takes nothing returns booleanreturn((GetSpellAbilityId()==1093678665))endfunctionfunction BJ takes nothing returns nothinglocal unit QClocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x1=GetSpellTargetX()local real y1=GetSpellTargetY()local real x2local real y2local player p=GetOwningPlayer(u1)local integer BB=GetUnitAbilityLevel(u1,1093678665)local unit u3=CreateUnit(p,1747988805,x,y,0)local integer i=1local real aloopexitwhen i>8set a=I2R(i)*45*3.14159/ 180.set x2=x1+220.*Cos(a)set y2=y1+220.*Sin(a)call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\NightElf\\EntBirthTarget\\EntBirthTarget.mdl",x1,y1))set u3=CreateUnit(p,1701341552,x2,y2,0)call UnitApplyTimedLife(u3,1112045413,(1.5+(.5*I2R(BB))))set i=i+1endloopcall UnitApplyTimedLife(u3,1112045413,5.)call UnitAddAbility(u3,1093678666)call GroupEnumUnitsInRange(ce[6],x1,y1,$C8,null)loopset QC=FirstOfGroup(ce[6])exitwhen QC==nullcall GroupRemoveUnit(ce[6],QC)if GetUnitState(QC,UNIT_STATE_LIFE)>0 and IsUnitEnemy(QC,p)and(Zy(QC,UNIT_TYPE_STRUCTURE)==false)thencall IssueTargetOrderById(u3,$D00CB,QC)endifendloopset u1=nullset u3=nullset QC=nullset p=nullendfunctionfunction CJ takes nothing returns booleanreturn((GetUnitTypeId(GetSummonedUnit())==1701212014))endfunctionfunction cJ takes nothing returns nothingcall SelectUnitAddForPlayer(GetSummonedUnit(),GetOwningPlayer(GetSummoningUnit()))endfunctionfunction EJ takes nothing returns booleanreturn((IsUnitIllusion(GetTriggerUnit())!=true))endfunctionfunction FJ takes nothing returns nothingcall KillUnit(GetEnumUnit())endfunctionfunction GJ takes nothing returns nothinglocal group PClocal unit QCset P7[2]=Vz(GetOwningPlayer(GetDyingUnit()),1701212014)call ForGroupBJ(P7[2],function FJ)call GroupClear(P7[2])call DestroyGroup(P7[2])set PC=nullset QC=nullendfunctionfunction IJ takes nothing returns booleanreturn((GetSpellAbilityId()==1093678667)and(IsUnitEnemy(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()))))endfunctionfunction lJ takes nothing returns nothingcall UnitDamageTargetBJ(GetTriggerUnit(),GetSpellTargetUnit(),(100.+(100.*I2R(GetUnitAbilityLevelSwapped(1093678667,GetTriggerUnit())))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)endfunctionfunction KJ takes nothing returns nothinglocal unit QClocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,-$5E9EB4B3)local player p=GetOwningPlayer(u1)local integer i=GetPlayerId(p)+1local real rif Dw[i]>=60 thenif GetUnitState(w9[i],UNIT_STATE_LIFE)>1 thenset r=(500.+(400.*I2R(GetUnitAbilityLevel(u1,1093679191))))call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",GetUnitX(w9[i]),GetUnitY(w9[i])))call GroupEnumUnitsInRange(ce[6],GetUnitX(w9[i]),GetUnitY(w9[i]),800.,null)loopset QC=FirstOfGroup(ce[6])exitwhen QC==nullcall GroupRemoveUnit(ce[6],QC)if Zy(QC,UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(QC,p)and GetUnitState(QC,UNIT_STATE_LIFE)>0 thencall DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\NightElf\\NEDeathSmall\\NEDeathSmall.mdl",QC,"chest"))call UnitDamageTarget(u1,QC,r,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_ACID,WEAPON_TYPE_WHOKNOWS)endifendloopcall KillUnit(w9[i])endifcall FlushChildHashtable(o,qB)call DestroyTimer(t)elsecall SetUnitScalePercent(w9[i],(100.+(15.*I2R(Dw[i]))),(100.+(15.*I2R(Dw[i]))),(100.+(15.*I2R(Dw[i]))))set Dw[i]=Dw[i]+1endifset QC=nullset t=nullset u1=nullendfunctionfunction LJ takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)local unit u1=GetTriggerUnit()local integer i=GetPlayerId(GetOwningPlayer(u1))+1set w9[i]=CreateUnit(GetOwningPlayer(u1),1752000876,GetSpellTargetX(),GetSpellTargetY(),0)set Dw[i]=0call SaveUnitHandle(o,qB,-$5E9EB4B3,u1)call TimerStart(t,.05,true,function KJ)set t=nullset u1=nullendfunctionfunction MJ takes nothing returns booleanif GetSpellAbilityId()==1093679191 thencall LJ()endifreturn falseendfunctionfunction OJ takes nothing returns nothingset y9[(1+GetPlayerId(GetOwningPlayer(B4)))]=B4call TriggerRegisterUnitEvent(ak,B4,EVENT_UNIT_HERO_LEVEL)call TriggerRegisterUnitEvent(Bk,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterPlayerUnitEventSimple(bk,GetOwningPlayer(B4),EVENT_PLAYER_UNIT_SPELL_CHANNEL)call TriggerRegisterPlayerUnitEventSimple(Ck,GetOwningPlayer(B4),EVENT_PLAYER_UNIT_SPELL_FINISH)call TriggerRegisterPlayerUnitEventSimple(ck,GetOwningPlayer(B4),EVENT_PLAYER_UNIT_DEATH)call TriggerRegisterUnitEvent(Dk,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(Ek,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Fk,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Gk,B4,EVENT_UNIT_SPELL_EFFECT)call SetPlayerAbilityAvailableBJ(false,1093678670,GetOwningPlayer(B4))call SetPlayerAbilityAvailableBJ(false,1093678669,GetOwningPlayer(B4))call SetPlayerAbilityAvailableBJ(false,1093678671,GetOwningPlayer(B4))endfunctionfunction QJ takes nothing returns nothingif ModuloInteger(GetHeroLevel(GetTriggerUnit()),2)==0 thencall SetPlayerTechResearched(GetTriggerPlayer(),1382576237,(GetHeroLevel(GetTriggerUnit())/ 2))endifendfunctionfunction SJ takes nothing returns nothinglocal unit u=GetTriggerUnit()local real x=GetUnitX(u)local real y=GetUnitY(u)local player p=GetTriggerPlayer()local integer i=GetPlayerId(p)+1local integer BB=GetUnitAbilityLevel(u,1093678675)local unit u2=x9[i]if u2==null thenset u2=CreateUnit(p,1865429080,x,y,0)set x9[i]=u2elsecall SetUnitX(u2,x)call SetUnitY(u2,y)call SetUnitState(u2,UNIT_STATE_LIFE,GetUnitState(u2,UNIT_STATE_MAX_LIFE))endifif GetUnitAbilityLevel(u,1093678672)==4 thencall UnitAddAbility(u2,1093678669)endifif BB!=0 thencall UnitAddAbility(u2,1093684299)call SetUnitAbilityLevel(u2,1093684299,BB)endifset p=nullset u=nullset u2=nullendfunctionfunction TJ takes nothing returns booleanif GetSpellAbilityId()==1093682224 thencall SJ()endifreturn falseendfunctionfunction VJ takes nothing returns nothinglocal unit u1=GetTriggerUnit()local player p=GetOwningPlayer(u1)local integer i=GetPlayerId(p)+1local unit u2=y9[i]local real x1=GetUnitX(u1)local real y1=GetUnitY(u1)local real x2=GetUnitX(u2)local real y2=GetUnitY(u2)local real dx=x2-x1local real dy=y2-y1local real dt=SquareRoot(Pow(dx,2)+Pow(dy,2))local boolean b=dt>1000.local string s="望月千代女 距離過遠"if b thencall DisplayTimedTextToPlayer(p,0,0,3.,s)call IssueImmediateOrderById(u1,$D0004)endifset u1=nullset u2=nullset p=nullendfunctionfunction WJ takes nothing returns booleanif GetSpellAbilityId()==1093678671 thencall VJ()endifreturn falseendfunctionfunction YJ takes nothing returns nothinglocal unit u1=GetTriggerUnit()local player p=GetOwningPlayer(u1)local integer i=GetPlayerId(p)+1local unit u2=y9[i]local real x1=GetUnitX(u1)local real y1=GetUnitY(u1)local real x2=GetUnitX(u2)local real y2=GetUnitY(u2)local real iz=GetUnitFacing(u1)call SetUnitX(u1,x2)call SetUnitY(u1,y2)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Blink\\BlinkTarget.mdl",u2,"chest"))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\Blink\\BlinkTarget.mdl",u1,"chest"))call SetUnitPosition(u2,x1,y1)set u1=nullset u2=nullset p=nullendfunctionfunction ZJ takes nothing returns booleanif GetSpellAbilityId()==1093678671 thencall YJ()endifreturn falseendfunctionfunction eK takes nothing returns booleanif GetUnitTypeId(GetTriggerUnit())==1865429080 and IsUnitIllusion(GetTriggerUnit())!=true thenset x9[GetPlayerId(GetTriggerPlayer())+1]=nullendifreturn falseendfunctionfunction gK takes nothing returns nothinglocal unit u=GetTriggerUnit()local player p=GetTriggerPlayer()local integer BB=GetUnitAbilityLevel(u,1093678672)if BB>=2 thencall SetPlayerAbilityAvailable(p,1093678670,true)endifif BB>=3 thencall SetPlayerAbilityAvailable(p,1093678671,true)endifif BB>=4 thencall UnitAddAbility(x9[GetPlayerId(p)+1],1093678669)endifset u=nullset p=nullendfunctionfunction hK takes nothing returns booleanif GetLearnedSkill()==1093678672 and IsUnitIllusion(GetTriggerUnit())!=true thencall gK()endifreturn falseendfunctionfunction jK takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u=LoadUnitHandle(o,qB,1)local player p=GetOwningPlayer(u)local integer id=GetPlayerId(p)+1call FlushChildHashtable(o,qB)call DestroyTimer(t)call SetUnitAbilityLevel(u,1093678673,1)call SetUnitAbilityLevel(x9[id],1093678673,1)set t=nullset u=nullset p=nullendfunctionfunction kK takes nothing returns nothinglocal unit u=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local player p=GetTriggerPlayer()local integer i=GetPlayerId(p)+1local integer BB=GetUnitAbilityLevel(u,1093678672)local real BF=(100.*I2R(BB))local unit u3=x9[i]local timer t=CreateTimer()local integer qB=GetHandleId(t)local real tB=10.call SaveUnitHandle(o,qB,1,u)call TimerStart(t,tB,false,function jK)call UnitDamageTarget(u,u2,BF,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\BattleRoar\\RoarCaster.mdl",u3,"chest"))call SetUnitX(u3,GetUnitX(u2))call SetUnitY(u3,GetUnitY(u2))call IssueTargetOrderById(x9[i],$D000F,u2)call SetUnitAbilityLevel(u,1093678673,BB+1)call SetUnitAbilityLevel(x9[i],1093678673,BB+1)set u=nullset u2=nullset u3=nullset p=nullendfunctionfunction mK takes nothing returns booleanif GetSpellAbilityId()==1093678672 thencall kK()endifreturn falseendfunctionfunction oK takes nothing returns nothinglocal unit u=GetTriggerUnit()local player p=GetTriggerPlayer()local real x=GetUnitX(u)local real y=GetUnitY(u)local unit u3=CreateUnit(p,1853319027,x,y,270.)set u=nullset u3=nullset p=nullendfunctionfunction pK takes nothing returns booleanif GetSpellAbilityId()==1093678674 thencall oK()endifreturn falseendfunctionfunction rK takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u=LoadUnitHandle(o,qB,1)local player p=GetOwningPlayer(u)local integer i=GetPlayerId(p)+1call FlushChildHashtable(o,qB)call DestroyTimer(t)call UnitRemoveAbility(u,1093684312)call UnitRemoveAbility(x9[i],1093684312)call UnitRemoveAbility(u,1093686322)call UnitRemoveAbility(x9[i],1093686322)set p=nullset t=nullset u=nullendfunctionfunction sK takes nothing returns nothinglocal unit u=GetTriggerUnit()local player p=GetOwningPlayer(u)local integer i=GetPlayerId(p)+1local timer t=CreateTimer()local integer qB=GetHandleId(t)local integer BB=GetUnitAbilityLevel(u,GetSpellAbilityId())local real tB=(8.+7.*I2R(BB))call SaveUnitHandle(o,qB,1,u)call TimerStart(t,tB,false,function rK)call UnitAddAbility(u,1093684312)call UnitAddAbility(x9[i],1093684312)call UnitAddAbility(u,1093686322)call UnitAddAbility(x9[i],1093686322)set u=nullset t=nullset p=nullendfunctionfunction tK takes nothing returns booleanif GetSpellAbilityId()==1093677131 thencall sK()endifreturn falseendfunctionfunction vK takes nothing returns nothingcall TriggerRegisterUnitEvent(lk,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(Ik,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Jk,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Kk,B4,EVENT_UNIT_SPELL_EFFECT)endfunctionfunction xK takes unit u2 returns nothinglocal trigger rB=GetTriggeringTrigger()local integer qB=GetHandleId(rB)local unit u1=LoadUnitHandle(o,qB,1)local real x=GetUnitX(u2)local real y=GetUnitY(u2)call SetUnitX(u1,x)call SetUnitY(u1,y)call DestroyTrigger(rB)call FlushChildHashtable(o,qB)set rB=nullset u1=nullendfunctionfunction yK takes nothing returns nothinglocal trigger rB=GetTriggeringTrigger()local integer qB=GetHandleId(rB)local unit u2=GetTriggerUnit()if u2==null thencall DestroyTrigger(rB)call FlushChildHashtable(o,qB)elseif(GetUnitAbilityLevel(u2,1110458700)>0)thencall xK(u2)endifset u2=nullset rB=nullendfunctionfunction zK takes nothing returns nothinglocal trigger rB=CreateTrigger()local integer qB=GetHandleId(rB)local unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()call SaveUnitHandle(o,qB,1,u1)call TriggerRegisterUnitEvent(rB,u2,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEventSingle(rB,5.)call TriggerAddCondition(rB,Condition(function yK))set rB=nullset u1=nullset u2=nullendfunctionfunction AK takes nothing returns booleanif GetSpellAbilityId()==1093678681 thencall zK()endifreturn falseendfunctionfunction BK takes nothing returns booleanif GetLearnedSkill()==1093678919 thencall AddPlayerTechResearched(GetTriggerPlayer(),1378889784,1)endifreturn falseendfunctionfunction CK takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u=LoadUnitHandle(o,qB,5566)call FlushChildHashtable(o,qB)call DestroyTimer(t)call SetUnitVertexColor(u,$FF,$FF,$FF,$FF)call UnitRemoveAbility(u,1093678682)call UnitRemoveAbility(u,1093677143)set u=nullset t=nullendfunctionfunction cK takes nothing returns nothinglocal unit u=GetTriggerUnit()local timer t=CreateTimer()local integer qB=GetHandleId(t)local real r=(2.+I2R(GetUnitAbilityLevel(u,1093678919)))call UnitAddAbility(u,1093677143)call UnitAddAbility(u,1093678682)call SetUnitAbilityLevel(u,1093678682,GetUnitAbilityLevel(u,1093678919))call SetUnitVertexColor(u,$96,$96,$FF,$FF)call SaveUnitHandle(o,qB,5566,u)call TimerStart(t,r,false,function CK)set u=nullendfunctionfunction DK takes nothing returns booleanif GetSpellAbilityId()==1093678919 thencall cK()endifreturn falseendfunctionfunction FK takes real yA,boolean GK,location HK,real IK,real lK,real JK,real KK,real LK returns terraindeformationlocal real MKlocal real NKlocal real OKif(lK<=0 or LK<=0 or KK<=0)thenreturn nullendifset NK=2.*yA/ KKset MK=2.*lK/ LKset OK=IK/ lKset bj_lastCreatedTerrainDeformation=TerrainDeformRipple(GetLocationX(HK),GetLocationY(HK),lK,JK,R2I(yA*$3E8),1,MK,NK,OK,GK)return bj_lastCreatedTerrainDeformationendfunctionfunction PK takes nothing returns nothinglocal unit u=GetTriggerUnit()local real BF=GetEventDamage()local integer BB=GetUnitAbilityLevel(u,1093678896)local real QK=(.2+.15*I2R(BB))if BF>1. thencall SetUnitState(u,UNIT_STATE_LIFE,GetUnitState(u,UNIT_STATE_LIFE)+BF*QK)endifset u=nullendfunctionfunction RK takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local trigger rB=LoadTriggerHandle(o,qB,1)local triggercondition uB=LoadTriggerConditionHandle(o,qB,2)call FlushChildHashtable(o,qB)call DestroyTimer(t)call TriggerRemoveCondition(rB,uB)call DestroyTrigger(rB)set t=nullset rB=nullset uB=nullendfunctionfunction SK takes nothing returns nothinglocal unit u=GetTriggerUnit()local location TK=GetUnitLoc(u)local player p=GetOwningPlayer(u)local integer i=GetPlayerId(p)+1local trigger rB=CreateTrigger()local integer BB=GetUnitAbilityLevel(u,1093678896)local real tB=(4.+1.5*I2R(BB))local timer t=CreateTimer()local integer qB=GetHandleId(t)local triggercondition uBcall FK(2.,false,TK,1000.,1000.,64,.4,250.)call RemoveLocation(TK)set uB=TriggerAddCondition(rB,Condition(function PK))call TriggerRegisterUnitEvent(rB,u,EVENT_UNIT_DAMAGED)call SaveTriggerHandle(o,qB,1,rB)call SaveTriggerConditionHandle(o,qB,2,uB)call TimerStart(t,tB,false,function RK)set u=nullset TK=nullset rB=nullset p=nullset t=nullset uB=nullendfunctionfunction UK takes nothing returns booleanif GetSpellAbilityId()==1093678896 thencall SK()endifreturn falseendfunctionfunction WK takes nothing returns nothingcall TriggerRegisterUnitEvent(Mk,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Nk,B4,EVENT_UNIT_SPELL_EFFECT)endfunctionfunction YK takes nothing returns booleanreturn((GetSpellAbilityId()==1093678899))endfunctionfunction ZK takes nothing returns nothinglocal unit u1=GetTriggerUnit()call UnitAddAbility(u1,1093678898)call SetUnitAbilityLevel(u1,1093678898,GetUnitAbilityLevel(u1,1093678899))call xA(12.)call UnitRemoveAbility(u1,1093678898)set u1=nullendfunctionfunction eL takes nothing returns booleanreturn((GetSpellAbilityId()==1093678900))endfunctionfunction fL takes nothing returns nothinglocal unit QClocal unit u1=GetTriggerUnit()local unit u3local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x1local real y1local real alocal player p=GetOwningPlayer(u1)call GroupEnumUnitsInRange(ce[4],GetSpellTargetX(),GetSpellTargetY(),600.,null)loopset QC=FirstOfGroup(ce[4])exitwhen QC==nullcall GroupRemoveUnit(ce[4],QC)if((IsUnitEnemy(QC,p))and GetUnitState(QC,UNIT_STATE_LIFE)>0 and GetUnitPointValue(QC)!=1 and Zy(QC,UNIT_TYPE_STRUCTURE)!=true)thenset u3=CreateUnit(p,1747988805,x,y,0)call UnitApplyTimedLife(u3,1112045413,5.)call UnitAddAbility(u3,1093678901)call SetUnitAbilityLevel(u3,1093678901,GetUnitAbilityLevel(u1,1093678900))call IssueTargetOrderById(u3,$D0097,QC)endifendloopset u1=nullset u3=nullset p=nullset QC=nullendfunctionfunction hL takes nothing returns nothingcall TriggerRegisterUnitEvent(Pk,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Qk,B4,EVENT_UNIT_HERO_SKILL)endfunctionfunction jL takes nothing returns booleanreturn((GetSpellAbilityId()==1093682765))endfunctionfunction kL takes nothing returns nothinglocal unit u1=GetTriggerUnit()call UnitAddAbility(u1,1093682766)call SetUnitAbilityLevel(u1,1093682766,GetUnitAbilityLevel(u1,1093682765))call xA(8.)call UnitRemoveAbility(u1,1093682766)set u1=nullendfunctionfunction nL takes nothing returns booleanreturn((GetLearnedSkill()==1093678904))endfunctionfunction oL takes nothing returns nothingcall IncUnitAbilityLevel(GetTriggerUnit(),1093683030)endfunctionfunction qL takes nothing returns nothingcall TriggerRegisterUnitEvent(Sk,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Tk,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Uk,B4,EVENT_UNIT_SPELL_EFFECT)endfunctionfunction sL takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer i=GetPlayerId(GetOwningPlayer(u1))+1set Y4[i]=Y4[i]+GetEventDamage()call SetUnitState(u1,UNIT_STATE_LIFE,(GetUnitState(u1,UNIT_STATE_LIFE)+GetEventDamage()))set u1=nullendfunctionfunction tL takes nothing returns booleanreturn GetSpellAbilityId()==1093678915endfunctionfunction uL takes nothing returns nothinglocal unit QClocal unit u1=GetTriggerUnit()local player p=GetOwningPlayer(u1)local integer i=GetPlayerId(p)+1local trigger rBset rB=CreateTrigger()call TriggerAddCondition(rB,Condition(function sL))call TriggerRegisterUnitEvent(rB,u1,EVENT_UNIT_DAMAGED)set Y4[i]=.0call TriggerSleepAction(2.45)call DestroyTrigger(rB)if((Y4[i]>=GetUnitState(u1,UNIT_STATE_MAX_LIFE)))thenset Y4[i]=GetUnitState(u1,UNIT_STATE_MAX_LIFE)endifcall GroupEnumUnitsInRange(ce[4],GetUnitX(u1),GetUnitY(u1),700.,null)loopset QC=FirstOfGroup(ce[4])exitwhen QC==nullcall GroupRemoveUnit(ce[4],QC)if IsUnitEnemy(QC,p)and GetUnitState(QC,UNIT_STATE_LIFE)>0 and Zy(QC,UNIT_TYPE_STRUCTURE)!=true thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl",QC,"chest"))call UnitDamageTarget(u1,QC,Y4[i],true,false,ATTACK_TYPE_MELEE,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)endifendloopset u1=nullset QC=nullset rB=nullendfunctionfunction wL takes nothing returns booleanreturn((GetSpellAbilityId()==1093678917))endfunctionfunction xL takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()call TriggerSleepAction(.0)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIam\\AIamTarget.mdl",u1,"origin"))call SetUnitPosition(u1,GetUnitX(u2),GetUnitY(u2))if IsUnitEnemy(u2,GetOwningPlayer(u1))thencall UnitDamageTargetBJ(u1,u2,((2.5*I2R(GetHeroAgi(u1,true)))+(85.+(55.*I2R(GetUnitAbilityLevel(u1,1093678917))))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)if((GetUnitLifePercent(u2)<=60.))thencall SetWidgetLife(u1,(GetUnitState(u1,UNIT_STATE_LIFE)+(.18*GetUnitState(u1,UNIT_STATE_MAX_LIFE))))call SetUnitManaBJ(u1,(GetUnitState(u1,UNIT_STATE_MANA)+(.18*GetUnitState(u1,UNIT_STATE_MAX_MANA))))endifcall IssueImmediateOrderById(u2,$D0004)endifset u1=nullset u2=nullendfunctionfunction zL takes nothing returns booleanreturn((GetSpellAbilityId()==1093684308))endfunctionfunction AL takes nothing returns nothinglocal real a=GetUnitFacing(GetTriggerUnit())local unit u3=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1697656885,GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),a)set u3=nullendfunctionfunction BL takes nothing returns nothingcall TriggerRegisterUnitEvent(Wk,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Xk,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Yk,B4,EVENT_UNIT_HERO_SKILL)set a9[(1+GetPlayerId(GetOwningPlayer(B4)))]=CreateGroup()endfunctionfunction CL takes nothing returns booleanreturn((GetSpellAbilityId()==1093678924))endfunctionfunction cL takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()call TriggerSleepAction(.0)call UnitAddAbility(u1,1093678925)call SetUnitAbilityLevel(u1,1093678925,GetUnitAbilityLevel(u1,1093678924))call SetUnitX(u1,GetUnitX(u2))call SetUnitY(u1,GetUnitY(u2))call IssueTargetOrderById(u1,$D000F,u2)call TriggerSleepAction(7.9)call UnitRemoveAbility(u1,1093678925)set u1=nullset u2=nullendfunctionfunction EL takes nothing returns booleanreturn((GetSpellAbilityId()==1093678921))endfunctionfunction FL takes nothing returns nothinglocal unit QClocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,1)local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real a=Fw[i]local real x2local real y2local real x4local real y4local unit u3local player p=GetOwningPlayer(u1)if Ew[i]>55. thenset Ew[i]=Ew[i]-55.set x2=x+55.*Cos(a)set y2=y+55.*Sin(a)elseset x2=x+Ew[i]*Cos(a)set y2=y+Ew[i]*Sin(a)call FlushChildHashtable(o,qB)call DestroyTimer(t)endifcall SetUnitX(u1,x2)call SetUnitY(u1,y2)call GroupEnumUnitsInRange(ce[5],x2,y2,190.,null)loopset QC=FirstOfGroup(ce[5])exitwhen QC==nullcall GroupRemoveUnit(ce[5],QC)if((IsUnitInGroup(QC,a9[i])!=true)and IsUnitEnemy(QC,p)and GetUnitState(QC,UNIT_STATE_LIFE)>0 and(Zy(QC,UNIT_TYPE_STRUCTURE)!=true))thencall GroupAddUnit(a9[i],QC)set u3=CreateUnit(p,1747989063,x,y,0)call UnitAddAbility(u3,1093678922)call SetUnitAbilityLevel(u3,1093678922,GetUnitAbilityLevel(u1,1093678921))call IssueTargetOrderById(u3,$D007F,QC)call UnitApplyTimedLife(u3,1112820806,2.5)endifendloopcall DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl",x2,y2))set t=nullset u1=nullset QC=nullset p=nullset u3=nullendfunctionfunction GL takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x1=GetSpellTargetX()local real y1=GetSpellTargetY()local real a=Atan2(y1-y,x1-x)local real dt=SquareRoot(Pow((x1-x),2)+Pow((y1-y),2))local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))local timer t=CreateTimer()local integer qB=GetHandleId(t)set Fw[i]=aset Ew[i]=dtcall GroupClear(a9[i])call SaveUnitHandle(o,qB,1,u1)call TimerStart(t,.01,true,function FL)set t=nullset u1=nullendfunctionfunction IL takes nothing returns booleanreturn((GetLearnedSkill()==1093678422)and(GetUnitAbilityLevel(GetTriggerUnit(),1093678422)==1)and(IsUnitIllusion(GetTriggerUnit())!=true))endfunctionfunction lL takes nothing returns nothingcall TriggerRegisterUnitEvent(Zk,GetTriggerUnit(),EVENT_UNIT_ATTACKED)endfunctionfunction KL takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local integer i=LoadInteger(o,qB,1)set B9[i]=falsecall DestroyTimer(t)call FlushChildHashtable(o,qB)set t=nullendfunctionfunction LL takes nothing returns nothinglocal unit QClocal unit u1=GetTriggerUnit()local real MLlocal real NLlocal player p=GetOwningPlayer(u1)local integer i=(1+GetPlayerId(p))local integer BB=GetUnitAbilityLevel(u1,1093678422)local timer t=CreateTimer()local integer qB=GetHandleId(t)local real tB=4.set ML=80.+10.*I2R(BB)set NL=30.+10.*I2R(BB)if((Zy(GetAttacker(),UNIT_TYPE_HERO)))thenset ML=ML*2set NL=NL*2elseset ML=ML*1set NL=NL*1endifcall SetUnitState(u1,UNIT_STATE_MANA,GetUnitState(u1,UNIT_STATE_MANA)+NL)call GroupEnumUnitsInRange(ce[6],GetUnitX(u1),GetUnitY(u1),550.,null)loopset QC=FirstOfGroup(ce[6])exitwhen QC==nullcall GroupRemoveUnit(ce[6],QC)if(IsUnitEnemy(QC,p)and GetUnitState(QC,UNIT_STATE_LIFE)>0 and(Zy(QC,UNIT_TYPE_STRUCTURE)!=true))thencall UnitDamageTargetBJ(u1,QC,ML,ATTACK_TYPE_HERO,DAMAGE_TYPE_ACID)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\FrostWyrmMissile\\FrostWyrmMissile.mdl",QC,"chest"))endifendloopset B9[i]=truecall SaveInteger(o,qB,1,i)call TimerStart(t,tB,false,function KL)set u1=nullset QC=nullendfunctionfunction OL takes nothing returns booleanif(B9[(1+GetPlayerId(GetOwningPlayer(GetTriggerUnit())))]==false)thencall LL()endifreturn falseendfunctionfunction QL takes nothing returns nothingcall TriggerRegisterUnitEvent(em,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(fm,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gm,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(hm,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(im,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(jm,B4,EVENT_UNIT_SPELL_EFFECT)endfunctionfunction SL takes nothing returns booleanreturn((GetLearnedSkill()==1093679185))endfunctionfunction TL takes nothing returns nothingcall UnitAddAbility(GetTriggerUnit(),1093678928)call SetUnitAbilityLevel(GetTriggerUnit(),1093678928,GetUnitAbilityLevelSwapped(1093679185,GetTriggerUnit()))endfunctionfunction VL takes nothing returns booleanreturn((GetSpellAbilityId()==1093679185))endfunctionfunction WL takes nothing returns nothinglocal unit u1=GetTriggerUnit()call UnitAddAbility(u1,1093685584)call SetUnitAbilityLevel(u1,1093685584,GetUnitAbilityLevelSwapped(1093679185,u1))call xA(9.)call UnitRemoveAbility(u1,1093685584)set u1=nullendfunctionfunction YL takes nothing returns booleanreturn((GetLearnedSkill()==1093684297))endfunctionfunction ZL takes nothing returns nothingcall UnitAddAbility(GetTriggerUnit(),1093679409)call SetUnitAbilityLevel(GetTriggerUnit(),1093679409,GetUnitAbilityLevelSwapped(1093684297,GetTriggerUnit()))endfunctionfunction eM takes nothing returns booleanreturn((GetSpellAbilityId()==1093684297))endfunctionfunction fM takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,1)local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))local real x=GetUnitX(u1)local real y=GetUnitY(u1)local unit u3=CreateUnit(GetOwningPlayer(u1),1747988805,x,y,0)call SetUnitScalePercent(u3,150.,150.,150.)call UnitApplyTimedLife(u3,1112045413,2.5)call UnitAddAbility(u3,1093678929)call SetUnitAbilityLevel(u3,1093678929,GetUnitAbilityLevel(u1,1093684297))set Gw[i]=Gw[i]+1if Gw[i]>=8 thencall FlushChildHashtable(o,qB)call DestroyTimer(t)elsecall IssuePointOrderById(u3,$D0271,x,y)endifset t=nullset u1=nullset u3=nullendfunctionfunction gM takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local timer t=CreateTimer()local integer qB=GetHandleId(t)local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))set Gw[i]=0call SaveUnitHandle(o,qB,1,u1)call UnitAddAbility(u1,1093686577)call SetUnitAbilityLevel(u1,1093686577,GetUnitAbilityLevel(u1,1093684297))call TimerStart(t,1.,true,function fM)call xA(7.)call UnitRemoveAbility(u1,1093686577)set t=nullset u1=nullendfunctionfunction iM takes nothing returns booleanreturn GetSpellAbilityId()==1093681721endfunctionfunction jM takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer i=GetPlayerId(GetOwningPlayer(u1))+1set Iw[i]=1call DestroyEffect(b9[i])call UnitAddAbility(u1,1093682255)call xA(6.)call UnitRemoveAbility(u1,1093682255)set Iw[i]=0set b9[i]=AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",u1,"origin")set u1=nullendfunctionfunction kM takes nothing returns nothinglocal unit QClocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,1)local player p=GetOwningPlayer(u1)local real BF=5.+5*GetHeroLevel(u1)*Iw[GetPlayerId(p)+1]+15.*I2R(GetUnitAbilityLevel(u1,1093681721))call GroupEnumUnitsInRange(ce[4],GetUnitX(u1),GetUnitY(u1),450.,null)loopset QC=FirstOfGroup(ce[4])exitwhen QC==nullcall GroupRemoveUnit(ce[4],QC)if IsUnitEnemy(QC,p)and GetUnitState(QC,UNIT_STATE_LIFE)>1 and Zy(QC,UNIT_TYPE_STRUCTURE)!=true thencall UnitDamageTarget(u1,QC,BF,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_ACID,WEAPON_TYPE_WHOKNOWS)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\SoulBurn\\SoulBurnbuff.mdl",QC,"origin"))endifendloopset p=nullset u1=nullset QC=nullset t=nullendfunctionfunction mM takes nothing returns nothinglocal unit u1=GetTriggerUnit()local timer t=CreateTimer()local integer qB=GetHandleId(t)local integer i=GetPlayerId(GetOwningPlayer(u1))+1local trigger rB=CreateTrigger()call TriggerAddAction(rB,function jM)call TriggerAddCondition(rB,Condition(function iM))call TriggerRegisterUnitEvent(rB,u1,EVENT_UNIT_SPELL_EFFECT)set Hw[i]=tset Iw[i]=0call DestroyEffect(b9[i])set b9[i]=AddSpecialEffectTarget("Environment\\LargeBuildingFire\\LargeBuildingFire1.mdl",u1,"origin")call SaveUnitHandle(o,qB,1,u1)call TimerStart(Hw[i],2.,true,function kM)set t=nullset u1=nullset rB=nullendfunctionfunction nM takes nothing returns booleanif GetLearnedSkill()==1093681721 and GetUnitAbilityLevel(GetTriggerUnit(),1093681721)==1 thencall mM()endifreturn falseendfunctionfunction pM takes nothing returns booleanreturn((GetSpellAbilityId()==1093678931))endfunctionfunction qM takes nothing returns nothinglocal unit u1=GetTriggerUnit()call UnitAddAbility(u1,1093678406)call xA(25.)call UnitRemoveAbility(u1,1093678406)set u1=nullendfunctionfunction sM takes nothing returns booleanif GetLearnedSkill()==1093684811 thencall UnitAddAbility(GetTriggerUnit(),1093684570)call SetUnitAbilityLevel(GetTriggerUnit(),1093684570,GetUnitAbilityLevel(GetTriggerUnit(),1093684811))call UnitMakeAbilityPermanent(GetTriggerUnit(),true,1093684570)endifreturn falseendfunctionfunction uM takes nothing returns booleanreturn GetSpellAbilityId()==1093684811endfunctionfunction vM takes nothing returns nothinglocal unit u1=GetTriggerUnit()call TriggerSleepAction(.0)call SetUnitAbilityLevel(u1,1093683257,GetUnitAbilityLevel(u1,1093684811))set u1=nullendfunctionfunction xM takes nothing returns nothingcall TriggerRegisterUnitEvent(pm,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(om,B4,EVENT_UNIT_HERO_LEVEL)call TriggerRegisterUnitEvent(qm,B4,EVENT_UNIT_SPELL_EFFECT)endfunctionfunction zM takes nothing returns booleanreturn((ModuloInteger(GetHeroLevel(GetTriggerUnit()),2)==0))endfunctionfunction AM takes nothing returns nothingcall SetPlayerTechResearchedSwap(1382575461,(GetHeroLevel(GetTriggerUnit())/ 2),GetOwningPlayer(GetTriggerUnit()))endfunctionfunction BM takes nothing returns booleanreturn((GetSpellAbilityId()==1093678937))endfunctionfunction bM takes nothing returns nothinglocal unit QClocal unit u1=GetTriggerUnit()local real x=GetSpellTargetX()local real y=GetSpellTargetY()local real BF=135.*I2R(GetUnitAbilityLevel(u1,1093678937))local player p=GetOwningPlayer(u1)local unit u3=CreateUnit(p,1747989060,x,y,0)call UnitApplyTimedLife(u3,1112045413,5.)call UnitAddAbility(u3,1093687106)call SetUnitAbilityLevel(u3,1093687106,GetUnitAbilityLevel(u1,1093678937))call GroupEnumUnitsInRange(ce[3],x,y,415.,null)loopset QC=FirstOfGroup(ce[3])exitwhen QC==nullcall GroupRemoveUnit(ce[3],QC)if IsUnitEnemy(QC,p)and GetUnitState(QC,UNIT_STATE_LIFE)>0 and Zy(QC,UNIT_TYPE_STRUCTURE)!=true thencall UnitDamageTargetBJ(u1,QC,BF,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl",QC,"chest"))endifendloopset p=nullset u1=nullset u3=nullset QC=nullendfunctionfunction cM takes nothing returns booleanreturn((GetSpellAbilityId()==1093678389))endfunctionfunction DM takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x1local real y1local unit u3local real alocal integer i=1set u3=CreateUnit(GetOwningPlayer(u1),1747988805,x,y,0)call UnitApplyTimedLife(u3,1112820806,3.)call UnitAddAbility(u3,1093679155)call SetUnitAbilityLevel(u3,1093679155,GetUnitAbilityLevel(u1,1093678389))loopexitwhen i>32set a=I2R(i)*11.25*3.14159/ 180.set x1=x+$C8*Cos(a)set y1=y+$C8*Sin(a)call IssuePointOrderById(u3,$D0250,x1,y1)set i=i+1endloopset u1=nullset u3=nullendfunctionfunction FM takes nothing returns nothingcall TriggerRegisterUnitEvent(sm,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(tm,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(um,B4,EVENT_UNIT_HERO_SKILL)endfunctionfunction HM takes nothing returns booleanreturn((GetSpellAbilityId()==1093679413))endfunctionfunction IM takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u3=CreateUnit(GetOwningPlayer(u1),1747989063,GetSpellTargetX(),GetSpellTargetY(),0)call UnitApplyTimedLife(u3,1112045413,1.2)call UnitAddAbility(u3,1093678158)call SetUnitAbilityLevel(u3,1093678158,GetUnitAbilityLevel(u1,1093679413))call IssueImmediateOrderById(u3,$D009F)set u1=nullset u3=nullendfunctionfunction JM takes nothing returns booleanreturn GetSpellAbilityId()==1093682517endfunctionfunction KM takes nothing returns nothinglocal unit QClocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,1)local player p=GetOwningPlayer(u1)local integer i=GetPlayerId(p)+1local group g=CreateGroup()local unit u2local unit u3local integer LM=0local real x=GetUnitX(u1)local real y=GetUnitY(u1)set lw[i]=lw[i]+1if lw[i]==$A or GetUnitState(u1,UNIT_STATE_LIFE)<=0 thencall FlushChildHashtable(o,qB)call DestroyTimer(t)elsecall GroupEnumUnitsInRange(ce[7],x,y,600.,null)loopset QC=FirstOfGroup(ce[7])exitwhen QC==null or LM==4call GroupRemoveUnit(ce[7],QC)if IsUnitEnemy(QC,p)and GetUnitState(QC,UNIT_STATE_LIFE)>1 and GetUnitPointValue(QC)!=1 and Zy(QC,UNIT_TYPE_STRUCTURE)!=true thenset LM=LM+1set zw[LM]=QCendifendloopcall GroupClear(ce[7])if LM>0 thenset QC=zw[GetRandomInt(1,LM)]set x=GetUnitX(QC)set y=GetUnitY(QC)set u3=CreateUnit(p,1747989063,x,y,0)call UnitApplyTimedLife(u3,1112045413,1.2)call UnitAddAbility(u3,1093682518)call SetUnitAbilityLevel(u3,1093682518,GetUnitAbilityLevel(u1,1093682517))call IssueImmediateOrderById(u3,$D009F)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Volcano\\VolcanoDeath.mdl",x,y))endifendifset t=nullset u1=nullset u3=nullset QC=nullset p=nullendfunctionfunction MM takes nothing returns nothinglocal unit u1=GetTriggerUnit()local timer t=CreateTimer()local integer qB=GetHandleId(t)local integer i=GetPlayerId(GetOwningPlayer(u1))+1set lw[i]=0call SaveUnitHandle(o,qB,1,u1)call TimerStart(t,1.,true,function KM)set t=nullset u1=nullendfunctionfunction OM takes nothing returns nothinglocal timer t=GetExpiredTimer()local unit u=LoadUnitHandle(o,GetHandleId(t),-$5E9EB4B3)local integer BB=GetUnitAbilityLevel(u,1093682519)local real r=(24.*I2R(BB))call SetUnitVertexColor(u,$FF,$FF,$FF,PercentTo255(100.-r))set t=nullset u=nullendfunctionfunction PM takes nothing returns nothinglocal timer tlocal unit u=GetTriggerUnit()local integer BB=GetUnitAbilityLevel(u,1093682519)local player p=GetTriggerPlayer()call SetPlayerTechResearched(p,1382577012,BB)if BB==1 thenset t=CreateTimer()call SaveUnitHandle(o,GetHandleId(t),-$5E9EB4B3,u)call TimerStart(t,1.,true,function OM)endifset u=nullset p=nullset t=nullendfunctionfunction QM takes nothing returns booleanif GetLearnedSkill()==1093682519 thencall PM()endifreturn falseendfunctionfunction SM takes nothing returns nothingcall TriggerRegisterUnitEvent(wm,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(xm,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(ym,B4,EVENT_UNIT_TARGET_IN_RANGE)call TriggerRegisterUnitEvent(zm,B4,EVENT_UNIT_HERO_SKILL)endfunctionfunction UM takes nothing returns booleanreturn((GetSpellAbilityId()==1093682522))endfunctionfunction VM takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u3local integer ilocal integer BB=GetUnitAbilityLevel(u1,1093682522)local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x1=GetSpellTargetX()local real y1=GetSpellTargetY()local real x2local real y2local real x3local real y3local real a1=Atan2(y1-y,x1-x)set u3=CreateUnit(GetOwningPlayer(u1),1852009331,x1,y1,270)call SetUnitAbilityLevel(u3,1093682736,BB)call SetUnitAbilityLevel(u3,1093682737,BB)call UnitApplyTimedLife(u3,1112045413,16.)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\DarkRitual\\DarkRitualTarget.mdl",x1,y1))set i=1loopexitwhen i>8set x2=x1+138.*I2R(i)*Cos(a1+90.*3.14159/ $B4)set y2=y1+138.*I2R(i)*Sin(a1+90.*3.14159/ $B4)set x3=x1+138.*I2R(i)*Cos(a1-90.*3.14159/ $B4)set y3=y1+138.*I2R(i)*Sin(a1-90.*3.14159/ $B4)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\DarkRitual\\DarkRitualTarget.mdl",x2,y2))call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\DarkRitual\\DarkRitualTarget.mdl",x3,y3))set u3=CreateUnit(GetOwningPlayer(u1),1852009331,x2,y2,270)call SetUnitAbilityLevel(u3,1093682736,BB)call SetUnitAbilityLevel(u3,1093682737,BB)call UnitApplyTimedLife(u3,1112045413,16.)set u3=CreateUnit(GetOwningPlayer(u1),1852009331,x3,y3,270)call SetUnitAbilityLevel(u3,1093682736,BB)call SetUnitAbilityLevel(u3,1093682737,BB)call UnitApplyTimedLife(u3,1112045413,16.)set i=i+1endloopset u1=nullset u3=nullendfunctionfunction XM takes nothing returns nothinglocal unit u1=GetTriggerUnit()local player p=GetOwningPlayer(u1)local integer i=GetPlayerId(p)+1set u7[i]=6call UnitAddAbility(u1,1093682740)call SetUnitAbilityLevel(u1,1093682740,GetUnitAbilityLevel(u1,1093682739))set u1=nullset p=nullendfunctionfunction YM takes nothing returns booleanif GetSpellAbilityId()==1093682739 thencall XM()endifreturn falseendfunctionfunction dN takes nothing returns booleanreturn((GetUnitAbilityLevelSwapped(1093682740,GetTriggerUnit())!=0))endfunctionfunction eN takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))set u7[i]=(u7[i]-1)if((u7[i]==0))thencall UnitRemoveAbility(u1,1093682740)endifset u1=nullendfunctionfunction gN takes nothing returns booleanreturn((GetLearnedSkill()==1093682741)and(GetUnitAbilityLevel(GetTriggerUnit(),1093682741)==1)and(IsUnitIllusion(GetTriggerUnit())!=true))endfunctionfunction hN takes nothing returns nothingcall TriggerRegisterUnitEvent(Am,GetTriggerUnit(),EVENT_UNIT_SPELL_EFFECT)endfunctionfunction jN takes nothing returns booleanlocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local unit u3=CreateUnit(GetOwningPlayer(u1),1747988805,x,y,0)call UnitApplyTimedLife(u3,1112820806,3.)call UnitAddAbility(u3,1093682777)call SetUnitAbilityLevel(u3,1093682777,GetUnitAbilityLevel(u1,1093682741))call IssueImmediateOrderById(u3,$D0080)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\NightElf\\\\BattleRoar\\RoarCaster.mdl",x,y))call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",x,y))set u1=nullset u3=nullreturn falseendfunctionfunction mN takes nothing returns nothingcall TriggerRegisterUnitEvent(Bm,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(bm,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Cm,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(cm,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(Dm,B4,EVENT_UNIT_SPELL_EFFECT)endfunctionfunction oN takes nothing returns nothinglocal unit u1=LoadUnitHandle(o,GetHandleId(GetExpiredTimer()),-$5E9EB4B3)if ModuloReal(GetFloatGameState(GAME_STATE_TIME_OF_DAY)+6.,24.)<12. thenif GetUnitAbilityLevel(u1,1093682758)==0 thencall UnitAddAbility(u1,1093682758)endifelseif GetUnitAbilityLevel(u1,1093682758)==1 thencall UnitRemoveAbility(u1,1093682758)endifset u1=nullendfunctionfunction pN takes nothing returns nothinglocal timer tcall SetUnitAbilityLevel(GetTriggerUnit(),1093682759,GetUnitAbilityLevel(GetTriggerUnit(),1093683025)+1)if GetUnitAbilityLevel(GetTriggerUnit(),1093683025)==1 thenset t=CreateTimer()call SaveUnitHandle(o,GetHandleId(t),-$5E9EB4B3,GetTriggerUnit())call TimerStart(t,1.,true,function oN)endifset t=nullendfunctionfunction qN takes nothing returns booleanif GetLearnedSkill()==1093683025 thencall pN()endifreturn falseendfunctionfunction sN takes nothing returns booleanreturn GetSpellAbilityId()==1093682743endfunctionfunction tN takes nothing returns nothinglocal unit QClocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local real BF=20.+80.*I2R(GetUnitAbilityLevel(u1,1093682743))+I2R(GetHeroStr(u1,true))local player p=GetOwningPlayer(u1)local integer i=GetPlayerId(p)+1call GroupEnumUnitsInRange(ce[6],GetUnitX(u2),GetUnitY(u2),400.,null)loopset QC=FirstOfGroup(ce[6])exitwhen QC==nullcall GroupRemoveUnit(ce[6],QC)if IsUnitEnemy(QC,p)and GetUnitState(QC,UNIT_STATE_LIFE)>0 and Zy(QC,UNIT_TYPE_STRUCTURE)==false thencall UnitDamageTarget(u1,QC,BF,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",QC,"chest"))endifendloopif ModuloReal(GetFloatGameState(GAME_STATE_TIME_OF_DAY)+6.,24.)>12. thencall xA(.1)call UnitRemoveAbility(u2,1112560453)endifset u1=nullset u2=nullset QC=nullset p=nullendfunctionfunction vN takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local integer i=GetPlayerId(GetOwningPlayer(u1))+1local unit u3=CreateUnit(GetOwningPlayer(u1),1747988805,GetUnitX(u1),GetUnitY(u1),0)call UnitApplyTimedLife(u3,1112820806,3.)call UnitAddAbility(u3,1093682754)call SetUnitAbilityLevel(u3,1093682754,GetUnitAbilityLevel(u1,1093682745))call IssueTargetOrderById(u3,$D02BC,u2)if ModuloReal(GetFloatGameState(GAME_STATE_TIME_OF_DAY)+6.,24.)<12. thenset u3=CreateUnit(GetOwningPlayer(u1),1747988805,GetUnitX(u1),GetUnitY(u1),0)call UnitApplyTimedLife(u3,1112820806,3.)call UnitAddAbility(u3,1093682774)call SetUnitAbilityLevel(u3,1093682774,GetUnitAbilityLevel(u1,1093682745))call IssueTargetOrderById(u3,$D00DA,u1)endifset u1=nullset u2=nullset u3=nullendfunctionfunction wN takes nothing returns booleanif GetSpellAbilityId()==1093682745 thencall vN()endifreturn falseendfunctionfunction yN takes nothing returns nothinglocal unit u1if GetEventDamage()>1 thenset u1=GetTriggerUnit()call SetUnitState(u1,UNIT_STATE_LIFE,GetUnitState(u1,UNIT_STATE_LIFE)+GetEventDamage()*(.02+.05*I2R(GetUnitAbilityLevel(u1,1093682757))))endifset u1=nullendfunctionfunction zN takes nothing returns nothinglocal unit u1=GetTriggerUnit()local trigger rB=CreateTrigger()call TriggerAddCondition(rB,Condition(function yN))call TriggerRegisterUnitEvent(rB,u1,EVENT_UNIT_DAMAGED)set u1=nullset rB=nullendfunctionfunction AN takes nothing returns booleanif GetLearnedSkill()==1093682757 and GetUnitAbilityLevel(GetTriggerUnit(),1093682757)==1 and IsUnitIllusion(GetTriggerUnit())!=true thencall zN()endifreturn falseendfunctionfunction BN takes nothing returns booleanreturn((GetSpellAbilityId()==1093683025))endfunctionfunction bN takes nothing returns nothinglocal unit u1=GetTriggerUnit()call SetUnitMoveSpeed(u1,(GetUnitDefaultMoveSpeed(u1)+(GetUnitDefaultMoveSpeed(u1)*(.05+(.1*I2R(GetUnitAbilityLevel(u1,GetSpellAbilityId())))))))call UnitAddAbility(u1,1093683026)call SetUnitAbilityLevel(u1,1093683026,GetUnitAbilityLevel(u1,1093683025))call xA(20.)call SetUnitMoveSpeed(u1,GetUnitDefaultMoveSpeed(u1))call UnitRemoveAbility(u1,1093683026)set u1=nullendfunctionfunction cN takes nothing returns nothingcall TriggerRegisterUnitEvent(Gm,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Fm,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Hm,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Im,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(lm,B4,EVENT_UNIT_SPELL_EFFECT)call SetPlayerAbilityAvailableBJ(false,1093684807,GetOwningPlayer(B4))set Be[(1+GetPlayerId(GetOwningPlayer(B4)))]=CreateGroup()endfunctionfunction EN takes nothing returns booleanreturn((GetSpellAbilityId()==1093684806))endfunctionfunction FN takes nothing returns nothinglocal unit QClocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,1)local real BF=(5.+(3.*I2R(GetUnitAbilityLevel(u1,1093684806))))local player p=GetOwningPlayer(u1)call GroupEnumUnitsInRange(ce[4],GetUnitX(u1),GetUnitY(u1),500.,null)loopset QC=FirstOfGroup(ce[4])exitwhen QC==nullcall GroupRemoveUnit(ce[4],QC)if(IsUnitEnemy(QC,p)and(GetUnitState(QC,UNIT_STATE_LIFE)>0)and(Zy(QC,UNIT_TYPE_STRUCTURE)==false))thencall UnitDamageTargetBJ(u1,QC,BF,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\LordofFlameMissile\\LordofFlameMissile.mdl",QC,"head"))endifendloopset u1=nullset QC=nullset p=nullendfunctionfunction GN takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u3local integer qBlocal integer i=(1+GetPlayerId(GetOwningPlayer(u1)))set Jw[i]=truecall SetPlayerAbilityAvailable(GetOwningPlayer(u1),1093684806,false)call SetPlayerAbilityAvailable(GetOwningPlayer(u1),1093684807,true)set Kw[i]=CreateTimer()set qB=GetHandleId(Kw[i])call SaveUnitHandle(o,qB,1,u1)call TimerStart(Kw[i],.2,true,function FN)call xA(8.)call PauseTimer(Kw[i])call DestroyTimer(Kw[i])call FlushChildHashtable(o,qB)call SetPlayerAbilityAvailable(GetOwningPlayer(u1),1093684806,true)call SetPlayerAbilityAvailable(GetOwningPlayer(u1),1093684807,false)if((Jw[i]))thenset u3=CreateUnit(GetOwningPlayer(u1),1747988805,GetUnitX(u1),GetUnitY(u1),0)call UnitApplyTimedLife(u3,1112820806,3.)call UnitAddAbility(u3,1093683765)call SetUnitAbilityLevel(u3,1093683765,GetUnitAbilityLevel(u1,1093684806))call IssueImmediateOrderById(u3,$D0080)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",GetUnitX(u1),GetUnitY(u1)))endifset Jw[i]=falseset u1=nullset u3=nullendfunctionfunction IN takes nothing returns booleanreturn((GetSpellAbilityId()==1093684807))endfunctionfunction lN takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u3local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))local integer qB=GetHandleId(Kw[i])set Jw[i]=falsecall PauseTimer(Kw[i])call DestroyTimer(Kw[i])call FlushChildHashtable(o,qB)set u3=CreateUnit(GetOwningPlayer(u1),1747988805,GetUnitX(u1),GetUnitY(u1),0)call UnitApplyTimedLife(u3,1112820806,3.)call UnitAddAbility(u3,1093683765)call SetUnitAbilityLevel(u3,1093683765,GetUnitAbilityLevel(u1,1093684806))call IssueImmediateOrderById(u3,$D0080)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",GetUnitX(u1),GetUnitY(u1)))call SetPlayerAbilityAvailable(GetOwningPlayer(u1),1093684807,false)call SetPlayerAbilityAvailable(GetOwningPlayer(u1),1093684806,true)set u1=nullset u3=nullendfunctionfunction KN takes nothing returns booleanreturn((GetSpellAbilityId()==1093682251))endfunctionfunction LN takes nothing returns nothinglocal unit u1=GetTriggerUnit()call UnitAddAbility(u1,1093677143)call SetUnitVertexColor(u1,$FF,100,50,$FF)call xA((2.+(1.*I2R(GetUnitAbilityLevelSwapped(1093682251,u1)))))call UnitRemoveAbility(u1,1093677143)call SetUnitVertexColor(u1,$FF,$FF,$FF,$FF)set u1=nullendfunctionfunction NN takes nothing returns booleanreturn((GetEventDamage()>1.)and(GetRandomInt(1,100)<=(GetUnitAbilityLevel(GetTriggerUnit(),1093682513)*4)+1))endfunctionfunction ON takes nothing returns nothingcall DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\LavaSpawnMissile\\LavaSpawnMissile.mdl",GetTriggerUnit(),"overhead"))call SetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE,GetUnitState(GetTriggerUnit(),UNIT_STATE_LIFE)+GetEventDamage())endfunctionfunction PN takes nothing returns booleanreturn((GetLearnedSkill()==1093682513)and(GetUnitAbilityLevel(GetTriggerUnit(),1093682513)==1)and(IsUnitIllusion(GetTriggerUnit())!=true))endfunctionfunction QN takes nothing returns nothinglocal unit u1=GetTriggerUnit()local trigger rB=CreateTrigger()call TriggerAddAction(rB,function ON)call TriggerAddCondition(rB,Condition(function NN))call TriggerRegisterUnitEvent(rB,u1,EVENT_UNIT_DAMAGED)set u1=nullset rB=nullendfunctionfunction SN takes nothing returns booleanreturn((GetSpellAbilityId()==1093687371))endfunctionfunction TN takes nothing returns nothinglocal unit u1=GetTriggerUnit()call UnitAddAbility(u1,1093683248)call xA((7.+(4.*I2R(GetUnitAbilityLevel(u1,1093687371)))))call UnitRemoveAbility(u1,1093683248)set u1=nullendfunctionfunction VN takes nothing returns nothinglocal unit u3=GetEnumUnit()local real x1=GetUnitX(u3)local real y1=GetUnitY(u3)local real x2local real y2local real dx=(M8[$E9]-x1)local real dy=(N8[$E9]-y1)if((SquareRoot(((dx*dx)+(dy*dy)))>1201.))thenset x2=(M8[$E9]+(175.*Cos(D9*bj_DEGTORAD)))set y2=(N8[$E9]+(175.*Sin(D9*bj_DEGTORAD)))call SetUnitPosition(u3,x2,y2)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\NightElf\\Blink\\BlinkTarget.mdl",x2,y2))endifset u3=nullendfunctionfunction WN takes nothing returns nothinglocal group PClocal unit QClocal integer iset B8[$E9]=LoadUnitHandle(o,GetHandleId(GetExpiredTimer()),-$5E9EB4B3)set M8[$E9]=GetUnitX(B8[$E9])set N8[$E9]=GetUnitY(B8[$E9])set D9=(GetUnitFacing(B8[$E9])+180.)set i=(1+GetPlayerId(GetOwningPlayer(B8[$E9])))call ForGroupBJ(c9[i],function VN)set PC=nullset QC=nullendfunctionfunction XN takes nothing returns nothinglocal timer hFlocal integer LF=LoadInteger(o,GetHandleId(GetTriggeringTrigger()),-$3021938A)set LF=LF+3call SaveInteger(o,GetHandleId(GetTriggeringTrigger()),-$3021938A,LF)call SaveInteger(o,GetHandleId(GetTriggeringTrigger()),-$1317DA19,LF)call TriggerRegisterUnitEvent(Km,B4,EVENT_UNIT_HERO_LEVEL)call TriggerRegisterUnitEvent(Lm,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterPlayerUnitEventSimple(Mm,GetOwningPlayer(B4),EVENT_PLAYER_UNIT_SUMMON)call TriggerRegisterPlayerUnitEventSimple(Nm,GetOwningPlayer(B4),EVENT_PLAYER_UNIT_DEATH)call TriggerRegisterUnitEvent(Om,B4,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(Pm,B4,EVENT_UNIT_SUMMON)call TriggerRegisterUnitEvent(Qm,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Rm,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Sm,B4,EVENT_UNIT_SPELL_ENDCAST)call TriggerRegisterUnitEvent(Tm,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Um,B4,EVENT_UNIT_SPELL_ENDCAST)set c9[(1+GetPlayerId(GetOwningPlayer(B4)))]=CreateGroup()set hF=CreateTimer()call SaveUnitHandle(o,GetHandleId(hF),-$5E9EB4B3,B4)call TimerStart(hF,1.,true,function WN)call FlushChildHashtable(o,GetHandleId(GetTriggeringTrigger())*LF)set hF=nullendfunctionfunction ZN takes nothing returns nothingcall SetPlayerTechResearchedSwap(1382380397,GetHeroLevel(GetTriggerUnit()),GetOwningPlayer(GetTriggerUnit()))endfunctionfunction eO takes nothing returns booleanreturn((GetLearnedSkill()==1093684304))endfunctionfunction fO takes nothing returns nothingcall IncUnitAbilityLevel(GetTriggerUnit(),1093683249)endfunctionfunction hO takes nothing returns booleanreturn((GetUnitTypeId(GetSummonedUnit())==1852270641)and(IsUnitIllusion(GetSummonedUnit())==false))endfunctionfunction iO takes nothing returns nothingcall GroupAddUnit(c9[(1+GetPlayerId(GetOwningPlayer(GetTriggerUnit())))],GetSummonedUnit())call SelectUnitAddForPlayer(GetSummonedUnit(),GetOwningPlayer(GetSummoningUnit()))endfunctionfunction kO takes nothing returns booleanreturn((GetUnitTypeId(GetTriggerUnit())==1852270641)and(IsUnitIllusion(GetTriggerUnit())==false))endfunctionfunction mO takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))call GroupRemoveUnit(c9[i],u1)call SetUnitManaPercentBJ(h4[i],(GetUnitManaPercent(h4[i])-15.))set u1=nullendfunctionfunction oO takes nothing returns nothinglocal unit u1local integer iif GetEventDamage()>.0 thenset u1=GetTriggerUnit()set i=(1+GetPlayerId(GetOwningPlayer(u1)))call SetUnitState(u1,UNIT_STATE_LIFE,GetUnitState(u1,UNIT_STATE_LIFE)+GetEventDamage()*I2R(CountUnitsInGroup(c9[i]))*.14)endifset u1=nullendfunctionfunction qO takes nothing returns booleanreturn((GetUnitTypeId(GetSummonedUnit())==1751671916))endfunctionfunction rO takes nothing returns nothingcall SetUnitPosition(GetEnumUnit(),GetUnitX(GetSummonedUnit()),GetUnitY(GetSummonedUnit()))endfunctionfunction sO takes nothing returns nothinglocal group PClocal unit QClocal unit u1=GetTriggerUnit()local unit u2=GetSummonedUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))local real i2=I2R(CountUnitsInGroup(c9[i]))local real i3=I2R(GetUnitAbilityLevelSwapped(1093679428,u1))call SetUnitAbilityLevelSwapped(1093683251,u2,GetUnitAbilityLevelSwapped(1093679428,u1))call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Items\\AIam\\AIamTarget.mdl",GetUnitX(u2),GetUnitY(u2)))call ForGroupBJ(c9[i],function rO)set PC=CreateGroup()call GroupEnumUnitsInRange(PC,GetUnitX(u2),GetUnitY(u2),200.,null)loopset QC=FirstOfGroup(PC)exitwhen QC==nullcall GroupRemoveUnit(PC,QC)if((IsUnitEnemy(QC,GetOwningPlayer(u1)))and(IsUnitAliveBJ(QC))and(Zy(QC,UNIT_TYPE_MAGIC_IMMUNE)==false)and(GetUnitPointValue(QC)!=1)and(Zy(QC,UNIT_TYPE_STRUCTURE)==false)and(Zy(QC,UNIT_TYPE_MECHANICAL)==false))thencall UnitDamageTargetBJ(u1,QC,(i2*(30.+(25.*i3))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNIVERSAL)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",QC,"chest"))endifendloopcall DestroyGroup(PC)set u1=nullset u2=nullset PC=nullset QC=nullendfunctionfunction uO takes nothing returns booleanreturn((GetSpellAbilityId()==1093683252))endfunctionfunction vO takes nothing returns nothinglocal unit u1=GetEnumUnit()local unit u2=GetSpellTargetUnit()local unit u3=CreateUnit(GetOwningPlayer(u1),1747988805,GetUnitX(u1),GetUnitY(u1),0)call ShowUnit(u3,false)call UnitApplyTimedLife(u3,1112045413,5.)call UnitAddAbility(u3,1093683253)call SetUnitAbilityLevel(u3,1093683253,GetUnitAbilityLevel(u1,1093683252))call VA(u3,u2,0)call IssueTargetOrderById(u3,$D022F,u2)set u1=nullset u2=nullset u3=nullendfunctionfunction wO takes nothing returns nothinglocal group PClocal unit QClocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local unit u3set u3=CreateUnit(GetOwningPlayer(u1),1747988805,GetUnitX(u1),GetUnitY(u1),0)call ShowUnit(u3,false)call UnitApplyTimedLife(u3,1112045413,5.)call UnitAddAbility(u3,1093683253)call SetUnitAbilityLevel(u3,1093683253,GetUnitAbilityLevel(u1,1093683252))call VA(u3,u2,0)call IssueTargetOrderById(u3,$D022F,u2)call ForGroupBJ(c9[(1+GetPlayerId(GetOwningPlayer(u1)))],function vO)set u1=nullset u2=nullset u3=nullset PC=nullset QC=nullendfunctionfunction yO takes nothing returns booleanreturn((GetSpellAbilityId()==1093683254))endfunctionfunction zO takes nothing returns nothingcall UnitAddAbility(GetEnumUnit(),1093677143)endfunctionfunction AO takes nothing returns nothingcall UnitRemoveAbility(GetEnumUnit(),1093677143)endfunctionfunction aO takes nothing returns nothinglocal group PClocal unit QClocal unit u1=GetTriggerUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))set E9[i]=AddSpecialEffectTarget("war3mapImported\\tranquility_purple.mdx",u1,"origin")call UnitAddAbility(u1,1093677143)call ForGroupBJ(c9[i],function zO)call xA(4.)call UnitRemoveAbility(u1,1093677143)call ForGroupBJ(c9[i],function AO)set u1=nullset PC=nullset QC=nullendfunctionfunction bO takes nothing returns booleanreturn((GetSpellAbilityId()==1093683254))endfunctionfunction CO takes nothing returns nothingcall UnitRemoveAbility(GetEnumUnit(),1093677143)endfunctionfunction cO takes nothing returns nothinglocal group PClocal unit QClocal unit u1=GetTriggerUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))call DestroyEffect(E9[i])call UnitRemoveAbility(u1,1093677143)call ForGroupBJ(c9[i],function CO)set u1=nullset PC=nullset QC=nullendfunctionfunction EO takes nothing returns booleanreturn((GetSpellAbilityId()==1093684304))endfunctionfunction FO takes nothing returns nothingcall UnitAddAbility(GetEnumUnit(),1093682998)endfunctionfunction GO takes nothing returns nothinglocal group PClocal unit QClocal unit u1=GetTriggerUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))set F9[i]=AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Voodoo\\VoodooAura.mdl",u1,"origin")call ForGroupBJ(c9[i],function FO)set u1=nullset PC=nullset QC=nullendfunctionfunction IO takes nothing returns booleanreturn((GetSpellAbilityId()==1093684304))endfunctionfunction lO takes nothing returns nothingcall UnitRemoveAbility(GetEnumUnit(),1093682998)endfunctionfunction JO takes nothing returns nothinglocal group PClocal unit QClocal unit u1=GetTriggerUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))call DestroyEffect(F9[i])call ForGroupBJ(c9[i],function lO)set u1=nullset PC=nullset QC=nullendfunctionfunction LO takes nothing returns nothingcall TriggerRegisterUnitEvent(Wm,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Xm,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Ym,B4,EVENT_UNIT_SPELL_ENDCAST)call TriggerRegisterUnitEvent(Zm,B4,EVENT_UNIT_SPELL_EFFECT)set R7[(1+GetPlayerId(GetOwningPlayer(B4)))]=CreateTimer()endfunctionfunction NO takes nothing returns booleanreturn((GetSpellAbilityId()==1093677875))endfunctionfunction OO takes nothing returns booleanreturn(IsUnitInvisible(GetTriggerUnit(),GetFilterPlayer()))endfunctionfunction PO takes nothing returns nothinglocal integer i=LoadInteger(o,GetHandleId(GetExpiredTimer()),-$5E9EB4B3)local unit u2=Lw[i]local real BFset G9[i]=(G9[i]+1)set BF=G9[i]*Mw[i]if GetUnitState(u2,UNIT_STATE_LIFE)<=0 or G9[i]>=H9[i]thencall DestroyEffect(I9[i])call FlushChildHashtable(o,GetHandleId(GetExpiredTimer()))call DestroyTimer(GetExpiredTimer())elsecall UnitDamageTargetBJ(h4[i],u2,BF,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNIVERSAL)call CreateTextTagUnitBJ(I2S(R2I(BF)),u2,0,8.,25.,60.,100.,0)call SetTextTagVelocityBJ(bj_lastCreatedTextTag,64,90)call SetTextTagPermanent(bj_lastCreatedTextTag,false)call SetTextTagLifespan(bj_lastCreatedTextTag,3.)call SetTextTagFadepoint(bj_lastCreatedTextTag,2.)call ShowTextTagForceBJ(false,bj_lastCreatedTextTag,Rz(Condition(function OO)))endifset u2=nullendfunctionfunction QO takes nothing returns nothinglocal integer i=LoadInteger(o,GetHandleId(GetTriggeringTrigger()),-$5E9EB4B3)if((H9[i]>=$D))thenset H9[i]=$Delseset H9[i]=(H9[i]+1)endifendfunctionfunction RO takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))local timer t=CreateTimer()local integer qB=GetHandleId(t)local trigger rBset G9[i]=0set H9[i]=8set Mw[i]=((5.+(5.*I2R(GetUnitAbilityLevel(u1,1093677875)))))set I9[i]=AddSpecialEffectTarget("Abilities\\Spells\\Items\\ScrollOfRejuvenation\\ScrollManaHealth.mdl",GetSpellTargetUnit(),"chest")set Lw[i]=GetSpellTargetUnit()call SaveInteger(o,qB,-$5E9EB4B3,i)call TimerStart(t,1.,true,function PO)set rB=CreateTrigger()set qB=GetHandleId(rB)call SaveInteger(o,qB,-$5E9EB4B3,i)call TriggerAddCondition(rB,Condition(function QO))call TriggerRegisterUnitEvent(rB,u2,EVENT_UNIT_SPELL_EFFECT)call xA(13.)call DestroyTrigger(rB)call FlushChildHashtable(o,qB)set t=nullset u1=nullset rB=nullendfunctionfunction TO takes nothing returns booleanreturn((GetSpellAbilityId()==1093677141))endfunctionfunction UO takes nothing returns nothinglocal unit QClocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local integer i=LoadInteger(o,qB,-$5E9EB4B3)local unit u1=h4[i]local unit u2=C4[i]local player p=GetOwningPlayer(u1)call DestroyEffect(AddSpecialEffectTarget("Units\\NightElf\\Wisp\\WispExplode.mdl",u2,"origin"))call GroupEnumUnitsInRange(ce[7],GetUnitX(u2),GetUnitY(u2),350.,null)loopset QC=FirstOfGroup(ce[7])exitwhen QC==nullcall GroupRemoveUnit(ce[7],QC)if GetUnitState(QC,UNIT_STATE_LIFE)>0 and IsUnitEnemy(QC,p)and Zy(QC,UNIT_TYPE_STRUCTURE)==false thencall UnitDamageTargetBJ(u1,QC,Nw[i],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)endifendloopset p=nullset u1=nullset u2=nullset t=nullset QC=nullendfunctionfunction VO takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local integer qBlocal integer iset i=(1+GetPlayerId(GetOwningPlayer(u1)))set qB=GetHandleId(R7[i])set C4[i]=u2set Nw[i]=(55.+GetUnitState(u1,UNIT_STATE_MAX_MANA)*(.01+(.03*I2R(GetUnitAbilityLevel(u1,1093677141)))))call SaveInteger(o,qB,-$5E9EB4B3,i)call PauseTimer(R7[i])call TimerStart(R7[i],.5,true,function UO)call TriggerSleepAction(.0)if j9[(1+GetPlayerId(GetOwningPlayer(u2)))] thencall PauseTimer(R7[i])call IssueImmediateOrderById(u1,$D0004)endifset u1=nullset u2=nullendfunctionfunction XO takes nothing returns booleanreturn((GetSpellAbilityId()==1093677141))endfunctionfunction YO takes nothing returns nothinglocal integer i=(1+GetPlayerId(GetOwningPlayer(GetTriggerUnit())))call FlushChildHashtable(o,GetHandleId(R7[i]))call PauseTimer(R7[i])endfunctionfunction d0 takes nothing returns booleanreturn((GetSpellAbilityId()==1093683285))endfunctionfunction e0 takes nothing returns nothinglocal unit QClocal unit u1=GetTriggerUnit()local real x1local real y1local real x2=GetSpellTargetX()local real y2=GetSpellTargetY()local integer i=1local player p=GetOwningPlayer(u1)local real BF=(250.+(150.*I2R(GetUnitAbilityLevel(u1,1093683285))))loopexitwhen i>45set x1=(x2+900.*Cos((8.*(I2R(i)))*bj_DEGTORAD))set y1=(y2+900.*Sin((8.*(I2R(i)))*bj_DEGTORAD))call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\DarkRitual\\DarkRitualTarget.mdl",x1,y1))set i=i+1endloopcall GroupEnumUnitsInRange(ce[7],x2,y2,925.,null)loopset QC=FirstOfGroup(ce[7])exitwhen QC==nullcall GroupRemoveUnit(ce[7],QC)if IsUnitEnemy(QC,p)and GetUnitState(QC,UNIT_STATE_LIFE)>0 and Zy(QC,UNIT_TYPE_STRUCTURE)==false thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DarkRitual\\DarkRitualTarget.mdl",QC,"origin"))call UnitDamageTargetBJ(u1,QC,BF,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)call SetUnitManaBJ(QC,(GetUnitState(QC,UNIT_STATE_MANA)*.4))endifendloopset QC=nullset u1=nullset p=nullendfunctionfunction g0 takes nothing returns nothingcall TriggerRegisterUnitEvent(en,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(fn,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gn,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(in,B4,EVENT_UNIT_SPELL_EFFECT)endfunctionfunction i0 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit QClocal unit u=LoadUnitHandle(o,qB,1)local real x=LoadReal(o,qB,2)local real y=LoadReal(o,qB,3)local player p=GetOwningPlayer(u)local real BF=(100.+(100.*I2R(GetUnitAbilityLevel(u,1093683789))))local real iz=GetUnitFacing(u)local real x1local real y1local integer ilocal real x2=GetUnitX(ct)local real y2=GetUnitY(ct)local real x3=GetUnitX(Cu)local real y3=GetUnitY(Cu)local real j0=GetUnitX(u)local real k0=GetUnitY(u)local real dt=138.local real m0local real n0local real o0local real p0local boolean b=falsecall FlushChildHashtable(o,qB)call DestroyTimer(t)set m0=j0-x2set n0=k0-y2set o0=SquareRoot(Pow(m0,2)+Pow(n0,2))set m0=j0-x3set n0=k0-y3set p0=SquareRoot(Pow(m0,2)+Pow(n0,2))set b=(o0>800.)and(p0>800.)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\OrbOfDeath\\OrbOfDeathMissile.mdl",x,y))set i=1loopexitwhen i>16set x1=(x+225.*Cos((22.5*(I2R(i)))*bj_DEGTORAD))set y1=(y+225.*Sin((22.5*(I2R(i)))*bj_DEGTORAD))call DestroyEffect(AddSpecialEffect("Doodads\\Cinematic\\GlowingRunes\\GlowingRunes7.mdl",x1,y1))set i=i+1endloopset x1=j0+dt*Cos(iz*bj_DEGTORAD)set y1=k0+dt*Sin(iz*bj_DEGTORAD)call GroupEnumUnitsInRange(ce[4],x,y,230.,null)loopset QC=FirstOfGroup(ce[4])exitwhen QC==nullcall GroupRemoveUnit(ce[4],QC)if GetUnitState(QC,UNIT_STATE_LIFE)>0 and GetUnitPointValue(QC)!=1 and Zy(QC,UNIT_TYPE_STRUCTURE)==false and Zy(QC,UNIT_TYPE_MECHANICAL)==false thenif GetOwningPlayer(QC)!=Player($C)and b thencall SetUnitPosition(QC,x1,y1)if Zy(QC,UNIT_TYPE_HERO)thenif(GetLocalPlayer()==GetOwningPlayer(QC))thencall PanCameraToTimed(x1,y1,0)endifendifendifif IsUnitEnemy(QC,p)thencall UnitDamageTarget(u,QC,BF,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)endifendifendloopset QC=nullset u=nullset t=nullset p=nullendfunctionfunction q0 takes nothing returns nothinglocal unit QClocal unit u=GetTriggerUnit()local real x=GetSpellTargetX()local real y=GetSpellTargetY()local real BF=(100.+(100.*I2R(GetUnitAbilityLevel(u,1093683789))))local real tB=1.9local timer t=CreateTimer()local integer qB=GetHandleId(t)call SaveUnitHandle(o,qB,1,u)call SaveReal(o,qB,2,x)call SaveReal(o,qB,3,y)call TimerStart(t,tB,false,function i0)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\BlackArrow\\BlackArrowMissile.mdl",x,y))set u=nullset t=nullendfunctionfunction r0 takes nothing returns booleanif GetSpellAbilityId()==1093683789 thencall q0()endifreturn falseendfunctionfunction t0 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real iG=(100.*I2R(GetUnitAbilityLevel(u1,1093684018)))local player p=GetOwningPlayer(u1)local real x1local real y1local integer ilocal unit QCcall DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\BlackArrow\\BlackArrowMissile.mdl",x,y))set i=1loopexitwhen i>45set x1=x+500.*Cos(8.*I2R(i)*bj_DEGTORAD)set y1=y+500.*Sin(8.*I2R(i)*bj_DEGTORAD)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Undead\\DeathandDecay\\DeathandDecayTarget.mdl",x1,y1))set i=i+1endloopcall GroupEnumUnitsInRange(ce[4],x,y,500.,null)loopset QC=FirstOfGroup(ce[4])exitwhen QC==nullcall GroupRemoveUnit(ce[4],QC)if IsUnitAlly(QC,p)and GetUnitState(QC,UNIT_STATE_LIFE)>1 and Zy(QC,UNIT_TYPE_STRUCTURE)!=true thencall SetUnitState(QC,UNIT_STATE_LIFE,GetUnitState(QC,UNIT_STATE_LIFE)+iG)endifendloopset QC=nullset u1=nullset p=nullendfunctionfunction u0 takes nothing returns booleanif GetSpellAbilityId()==1093684018 thencall t0()endifreturn falseendfunctionfunction w0 takes nothing returns booleanif GetLearnedSkill()==1093684296 and GetUnitAbilityLevel(GetTriggerUnit(),1093684296)==1 and IsUnitIllusion(GetTriggerUnit())!=true thencall TriggerRegisterUnitEvent(hn,GetTriggerUnit(),EVENT_UNIT_TARGET_IN_RANGE)endifreturn falseendfunctionfunction y0 takes nothing returns nothinglocal trigger rB=GetTriggeringTrigger()local integer qB=GetHandleId(rB)local unit u1=LoadUnitHandle(o,qB,-$5E9EB4B3)local unit u2=GetTriggerUnit()local integer i=GetPlayerId(GetOwningPlayer(u1))+1local real BF=I2R(GetHeroInt(u1,true))*.01*(10.+(25.*I2R(GetUnitAbilityLevel(u1,1093684296))))call TriggerRemoveCondition(rB,LoadTriggerConditionHandle(o,qB,$AD9C))call DestroyTrigger(rB)call FlushChildHashtable(o,qB)set t9[i]=falsecall UnitDamageTarget(u1,u2,BF,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)set rB=nullset u1=nullset u2=nullendfunctionfunction z0 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetEventTargetUnit()local integer i=GetPlayerId(GetOwningPlayer(u1))+1local trigger rBlocal integer qBlocal triggercondition uBif t9[i]==false and Zy(u2,UNIT_TYPE_STRUCTURE)==false thenset rB=CreateTrigger()set qB=GetHandleId(rB)set t9[i]=truecall SaveUnitHandle(o,qB,-$5E9EB4B3,u1)set uB=TriggerAddCondition(rB,Condition(function y0))call SaveTriggerConditionHandle(o,qB,$AD9C,uB)call TriggerRegisterUnitEvent(rB,u2,EVENT_UNIT_DAMAGED)call wB(rB,.4,uB,i)endifset rB=nullset uB=nullset u1=nullset u2=nullendfunctionfunction a0 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u=LoadUnitHandle(o,qB,1)call FlushChildHashtable(o,qB)call DestroyTimer(t)call UnitRemoveAbility(u,1093684039)set t=nullset u=nullendfunctionfunction B0 takes nothing returns nothinglocal unit u=GetTriggerUnit()local integer BB=GetUnitAbilityLevel(u,1093684036)local timer t=CreateTimer()local integer qB=GetHandleId(t)local real tB=(4.+6.*I2R(BB))call SaveUnitHandle(o,qB,1,u)call TimerStart(t,tB,false,function a0)call UnitAddAbility(u,1093684039)call SetUnitAbilityLevel(u,1093684039,BB)set t=nullset u=nullendfunctionfunction b0 takes nothing returns booleanif GetSpellAbilityId()==1093684036 thencall B0()endifreturn falseendfunctionfunction c0 takes nothing returns nothingcall TriggerRegisterUnitEvent(kn,B4,EVENT_UNIT_SUMMON)call TriggerRegisterUnitEvent(nn,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(on,B4,EVENT_UNIT_ATTACKED)call TriggerRegisterUnitEvent(pn,B4,EVENT_UNIT_SPELL_EFFECT)endfunctionfunction E0 takes nothing returns nothinglocal unit QClocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,1)local player p=GetOwningPlayer(u1)local integer i=GetPlayerId(p)+1local real x=GetUnitX(u1)local real y=GetUnitY(u1)if Ow[i]<=0 or GetUnitState(u1,UNIT_STATE_LIFE)<=0 thencall KillUnit(u1)call FlushChildHashtable(o,qB)call DestroyTimer(t)elsecall GroupEnumUnitsInRange(ce[4],x,y,400.,null)loopset QC=FirstOfGroup(ce[4])exitwhen QC==nullcall GroupRemoveUnit(ce[4],QC)if Zy(QC,UNIT_TYPE_HERO)and IsUnitInGroup(QC,Pw[i])!=true and IsUnitEnemy(QC,p)and GetUnitPointValue(QC)!=1 and GetUnitState(QC,UNIT_STATE_LIFE)>0 and Zy(QC,UNIT_TYPE_MAGIC_IMMUNE)!=true thencall GroupAddUnit(Pw[i],QC)set c8=bj_RADTODEG*Atan2(GetUnitY(QC)-y,GetUnitX(QC)-x)set C8=falseset D8=20.set l8=.95set E8=1.5set F8=QCset G8=(.15/ 10.)set H8=mnset Ce=icall TriggerExecute(zi)set Ow[i]=Ow[i]-1call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",QC,"overhead"))call UnitDamageTarget(u1,QC,100.,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)endifendloopendifset t=nullset u1=nullset QC=nullset p=nullendfunctionfunction F0 takes nothing returns nothingcall E0()call TimerStart(GetExpiredTimer(),.3,true,function E0)endfunctionfunction G0 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local timer t=CreateTimer()local integer qB=GetHandleId(t)local integer i=GetPlayerId(GetOwningPlayer(u1))+1call DestroyGroup(Pw[i])set Pw[i]=CreateGroup()set Ow[i]=4+2*GetUnitAbilityLevel(u1,1093683779)call SaveUnitHandle(o,qB,1,GetSummonedUnit())call TimerStart(t,.0,false,function F0)set t=nullset u1=nullendfunctionfunction H0 takes nothing returns booleanif GetUnitTypeId(GetSummonedUnit())==1869836338 thencall G0()endifreturn falseendfunctionfunction l0 takes nothing returns nothingcall GroupRemoveUnit(Pw[Ce],F8)endfunctionfunction K0 takes nothing returns booleanreturn((GetSpellAbilityId()==1093683780))endfunctionfunction L0 takes nothing returns nothingcall IssueTargetOrderById(GetEnumUnit(),$D000F,B4)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\QuillSprayMissile\\QuillSprayMissile.mdl",GetEnumUnit(),"overhead"))endfunctionfunction M0 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,1)local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))set B4=u1if(Qw[i]<=0)thencall FlushChildHashtable(o,qB)call DestroyTimer(t)elseset Qw[i]=(Qw[i]-1)call ForGroup(Rw[i],function L0)endifset u1=nullset t=nullendfunctionfunction N0 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local timer t=CreateTimer()local integer qB=GetHandleId(t)local player p=GetOwningPlayer(u1)local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))local unit QCcall UnitAddAbility(u1,1093678424)call SetUnitAbilityLevel(u1,1093678424,GetUnitAbilityLevel(u1,1093683780))call DestroyGroup(Rw[i])set Rw[i]=CreateGroup()call GroupEnumUnitsInRange(ce[4],GetSpellTargetX(),GetSpellTargetY(),290.,null)loopset QC=FirstOfGroup(ce[4])exitwhen QC==nullcall GroupRemoveUnit(ce[4],QC)if(IsUnitEnemy(QC,p)and GetUnitState(QC,UNIT_STATE_LIFE)>0 and(GetUnitPointValue(QC)!=1)and(Zy(QC,UNIT_TYPE_STRUCTURE)==false)and(Zy(QC,UNIT_TYPE_MECHANICAL)==false))thencall GroupAddUnit(Rw[i],QC)endifendloopset Qw[i]=(6+(6*GetUnitAbilityLevel(u1,1093683780)))call SaveUnitHandle(o,qB,1,u1)call TimerStart(t,.1,true,function M0)call xA(10.)call UnitRemoveAbility(u1,1093678424)set p=nullset QC=nullset t=nullset u1=nullendfunctionfunction P0 takes nothing returns booleanreturn GetRandomInt(1,100)<=18 and GetUnitAbilityLevel(GetTriggerUnit(),1093683781)!=0 and n9[GetPlayerId(GetTriggerPlayer())+1]==falseendfunctionfunction Q0 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetAttacker()local player p=GetOwningPlayer(u1)local unit u3local integer i=GetPlayerId(p)+1set u3=CreateUnit(p,1747988805,GetUnitX(u1),GetUnitY(u1),0)call UnitApplyTimedLife(u3,1112045413,4.)call UnitAddAbility(u3,1093683782)call SetUnitAbilityLevel(u3,1093683782,GetUnitAbilityLevel(u1,1093683781))call IssuePointOrderById(u3,$D02AC,GetUnitX(u2),GetUnitY(u2))set n9[i]=truecall xA(.3)set n9[i]=falseset u1=nullset u2=nullset u3=nullendfunctionfunction S0 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local player p=GetOwningPlayer(u1)local real x1local real y1local real alocal unit QClocal integer ilocal unit u3=CreateUnit(p,1747988805,x,y,0)call UnitAddAbility(u3,1093684281)call UnitApplyTimedLife(u3,1112045413,2.)call GroupEnumUnitsInRange(ce[4],x,y,600.,null)loopset QC=FirstOfGroup(ce[4])exitwhen QC==nullcall GroupRemoveUnit(ce[4],QC)if Zy(QC,UNIT_TYPE_HERO)and IsUnitEnemy(QC,p)and GetUnitState(QC,UNIT_STATE_LIFE)>0 thencall IssueTargetOrderById(u3,$D0267,QC)endifendloopset i=1loopexitwhen i>16set a=(22.5*I2R(i))*bj_DEGTORADset x1=x+420.*Cos(a)set y1=y+420.*Sin(a)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\WarStomp\\WarStompCaster.mdl",x1,y1))set u3=CreateUnit(p,1752331380,x1,y1,0)call UnitApplyTimedLife(u3,1112045413,4.)set i=i+1endloopset p=nullset QC=nullset u1=nullset u3=nullendfunctionfunction T0 takes nothing returns booleanif GetSpellAbilityId()==1093684280 thencall S0()endifreturn falseendfunctionfunction V0 takes nothing returns nothingcall TriggerRegisterUnitEvent(sn,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(tn,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(un,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(vn,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(wn,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(xn,B4,EVENT_UNIT_TARGET_IN_RANGE)call SetPlayerAbilityAvailableBJ(false,1093685834,GetOwningPlayer(B4))call SetPlayerAbilityAvailableBJ(false,1093687370,GetOwningPlayer(B4))endfunctionfunction X0 takes nothing returns booleanreturn((GetSpellAbilityId()==1093685047))endfunctionfunction Y0 takes nothing returns nothinglocal unit QClocal unit u1=GetTriggerUnit()local player p=GetOwningPlayer(u1)local integer i=(1+GetPlayerId(p))local real x=GetSpellTargetX()local real y=GetSpellTargetY()local real BF=(100.+(100.*I2R(GetUnitAbilityLevel(u1,1093685047))))local unit u3=CreateUnit(p,1848651846,x,y,0)call UnitApplyTimedLife(u3,1112045413,5.)call SetUnitAnimation(u3,"Birth")set M9[i]=u3if(IsTerrainPathable(x,y,PATHING_TYPE_WALKABILITY)!=true)thencall SetPlayerAbilityAvailable(p,1093687370,true)call xA(1.)set u3=CreateUnit(p,1747988805,x,y,0)call UnitApplyTimedLife(u3,1112045413,2.)call UnitAddAbility(u3,1093685059)call GroupEnumUnitsInRange(ce[7],x,y,340.,null)loopset QC=FirstOfGroup(ce[7])exitwhen QC==nullcall GroupRemoveUnit(ce[7],QC)if IsUnitEnemy(QC,p)and GetUnitState(QC,UNIT_STATE_LIFE)>0 and Zy(QC,UNIT_TYPE_STRUCTURE)!=true thencall IssueTargetOrderById(u3,$D006B,QC)call UnitDamageTargetBJ(u1,QC,BF,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)endifendloopcall xA(4.)call SetPlayerAbilityAvailable(p,1093687370,false)endifset p=nullset u1=nullset u3=nullset QC=nullendfunctionfunction dP takes nothing returns booleanreturn((GetSpellAbilityId()==1093687370)and GetUnitState(M9[(1+GetPlayerId(GetOwningPlayer(GetTriggerUnit())))],UNIT_STATE_LIFE)>0)endfunctionfunction eP takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))call SetUnitX(u1,GetUnitX(M9[i]))call SetUnitY(u1,GetUnitY(M9[i]))call SetPlayerAbilityAvailable(GetOwningPlayer(u1),1093687370,false)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl",u1,"origin"))set u1=nullendfunctionfunction gP takes nothing returns nothinglocal trigger rB=GetTriggeringTrigger()local integer qB=GetHandleId(rB)local real r=GetEventDamage()local unit u1=GetTriggerUnit()if LoadReal(o,qB,1)<r or u1==null thencall SetUnitState(u1,UNIT_STATE_LIFE,GetUnitState(u1,UNIT_STATE_LIFE)+LoadReal(o,qB,1))call DestroyTimer(LoadTimerHandle(o,qB,$8235))call DestroyEffect(LoadEffectHandle(o,qB,2))call TriggerRemoveCondition(rB,LoadTriggerConditionHandle(o,qB,$AD9C))call DestroyTrigger(rB)call FlushChildHashtable(o,qB)elseif r>0 thencall SetUnitState(u1,UNIT_STATE_LIFE,GetUnitState(u1,UNIT_STATE_LIFE)+r)call SaveReal(o,qB,1,LoadReal(o,qB,1)-r)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\WingedSerpentMissile\\WingedSerpentMissile.mdl",u1,"chest"))endifendifset rB=nullset u1=nullendfunctionfunction hP takes trigger rB,unit u,real r,effect e,integer qB,triggercondition uB,timer t returns nothingcall SaveReal(o,qB,1,r)call SaveEffectHandle(o,qB,2,e)call SaveTriggerConditionHandle(o,qB,$AD9C,uB)call TimerStart(t,4.,false,null)call SaveTimerHandle(o,qB,$8235,t)call TriggerRegisterUnitEvent(rB,u,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerExpireEvent(rB,t)endfunctionfunction iP takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,1)call FlushChildHashtable(o,qB)call DestroyTimer(t)call UnitRemoveAbility(u1,1093687373)set t=nullset u1=nullendfunctionfunction jP takes nothing returns nothinglocal unit QClocal unit u1=GetTriggerUnit()local integer i=0local integer BB=GetUnitAbilityLevel(u1,1093686086)local real r=120.+130.*I2R(BB)+GetUnitState(u1,UNIT_STATE_MAX_MANA)*.23local trigger rB=CreateTrigger()local integer qB=GetHandleId(rB)local triggercondition uBlocal timer t=CreateTimer()local effect e=AddSpecialEffectTarget("war3mapImported\\HeroKanetsuguNaoeShieldTarget.mdx",u1,"origin")set uB=TriggerAddCondition(rB,Condition(function gP))call hP(rB,u1,r,e,qB,uB,t)call GroupEnumUnitsInRange(ce[7],GetUnitX(u1),GetUnitY(u1),512,null)loopset QC=FirstOfGroup(ce[7])exitwhen QC==null or i==1call GroupRemoveUnit(ce[7],QC)if Zy(QC,UNIT_TYPE_HERO)and QC!=u1 and GetUnitPointValue(QC)!=1 and IsUnitAlly(QC,GetOwningPlayer(u1))and GetUnitState(QC,UNIT_STATE_LIFE)>0 thenset i=1set t=CreateTimer()set rB=CreateTrigger()set qB=GetHandleId(rB)set e=AddSpecialEffectTarget("war3mapImported\\HeroKanetsuguNaoeShieldTarget.mdx",QC,"origin")set uB=TriggerAddCondition(rB,Condition(function gP))call hP(rB,QC,r,e,qB,uB,t)endifendloopcall GroupClear(ce[7])if i==0 thenset t=CreateTimer()set qB=GetHandleId(t)call UnitAddAbility(u1,1093687373)call SetUnitAbilityLevel(u1,1093687373,BB)call SaveUnitHandle(o,qB,1,u1)call TimerStart(t,6.,false,function iP)endifset rB=nullset u1=nullset QC=nullset uB=nullset t=nullendfunctionfunction kP takes nothing returns booleanif GetSpellAbilityId()==1093686086 thencall jP()endifreturn falseendfunctionfunction nP takes nothing returns booleanif GetLearnedSkill()==1093685063 thencall SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093685834,true)call SetUnitAbilityLevel(GetTriggerUnit(),1093685834,GetUnitAbilityLevel(GetTriggerUnit(),1093685063))endifreturn falseendfunctionfunction pP takes nothing returns booleanreturn GetSpellAbilityId()==1093685063endfunctionfunction qP takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,1)local integer i=GetPlayerId(GetOwningPlayer(u1))+1local unit u2=Tw[i]local real BFset Sw[i]=Sw[i]+1call SetUnitFlyHeight(u2,486.-1.5*Pow(I2R(Sw[i])-18.,2.),.0)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl",u2,"origin"))if Sw[i]>=36 thencall SetUnitTimeScale(u2,100.*.01)call SetUnitPathing(u2,true)set BF=.16*(GetUnitState(u2,UNIT_STATE_MAX_LIFE)-GetUnitState(u2,UNIT_STATE_LIFE))call UnitDamageTarget(u1,u2,BF,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)call FlushChildHashtable(o,GetHandleId(t))call DestroyTimer(t)endifset t=nullset u1=nullset u2=nullendfunctionfunction rP takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)local unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local integer i=GetPlayerId(GetOwningPlayer(u1))+1local real BF=3.*I2R(GetHeroInt(u1,true))call SetUnitPathing(u2,false)call SetUnitTimeScale(u2,40.*.01)call SetUnitAnimation(u2,"attack slam")call UnitAddAbility(u2,1097691750)call UnitRemoveAbility(u2,1097691750)call UnitDamageTarget(u1,u2,BF,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\FlakCannons\\FlakTarget.mdl",u2,"origin"))call SaveUnitHandle(o,qB,1,u1)set Sw[i]=0set Tw[i]=u2call TimerStart(t,.07/ 2.,true,function qP)set t=nullset u1=nullset u2=nullendfunctionfunction tP takes nothing returns nothinglocal trigger rB=GetTriggeringTrigger()local integer qB=GetHandleId(rB)local unit u1=LoadUnitHandle(o,qB,-$5E9EB4B3)local unit u2=GetTriggerUnit()local integer i=GetPlayerId(GetOwningPlayer(u1))+1local real BF=GetUnitState(u2,UNIT_STATE_MAX_LIFE)*.05call TriggerRemoveCondition(rB,LoadTriggerConditionHandle(o,qB,$AD9C))call DestroyTrigger(rB)call FlushChildHashtable(o,qB)set t9[i]=falsecall UnitDamageTarget(u1,u2,BF,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_ACID,WEAPON_TYPE_WHOKNOWS)set rB=nullset u1=nullset u2=nullendfunctionfunction uP takes nothing returns booleanreturn GetUnitTypeId(GetTriggerUnit())==1160785992endfunctionfunction vP takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetEventTargetUnit()local trigger rBlocal integer qBlocal integer i=GetPlayerId(GetOwningPlayer(u1))+1local triggercondition uBif t9[i]==false and Zy(u2,UNIT_TYPE_STRUCTURE)==false and Zy(u2,UNIT_TYPE_MECHANICAL)==false thenset rB=CreateTrigger()set qB=GetHandleId(rB)set t9[i]=truecall SaveUnitHandle(o,qB,-$5E9EB4B3,u1)set uB=TriggerAddCondition(rB,Condition(function tP))call SaveTriggerConditionHandle(o,qB,$AD9C,uB)call TriggerRegisterUnitEvent(rB,u2,EVENT_UNIT_DAMAGED)call wB(rB,.4,uB,i)endifset rB=nullset uB=nullset u1=nullset u2=nullendfunctionfunction xP takes nothing returns nothingcall TriggerRegisterUnitEvent(zn,B4,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(An,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Bn,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(bn,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Cn,B4,EVENT_UNIT_SPELL_EFFECT)call SetPlayerAbilityAvailableBJ(false,1093683761,GetOwningPlayer(B4))endfunctionfunction zP takes nothing returns nothinglocal unit u1if(GetEventDamage()>1.)thenset u1=GetTriggerUnit()call SetUnitState(u1,UNIT_STATE_LIFE,(GetUnitState(u1,UNIT_STATE_LIFE)+(GetEventDamage()*.1)))call SetUnitState(u1,UNIT_STATE_MANA,(GetUnitState(u1,UNIT_STATE_MANA)+(GetEventDamage()*.2)))endifset u1=nullendfunctionfunction aP takes nothing returns booleanreturn((GetSpellAbilityId()==1093684531))endfunctionfunction BP takes nothing returns nothinglocal unit QClocal unit u1=GetTriggerUnit()local real r=30.+(I2R(GetUnitAbilityLevel(u1,1093684531))*45.)local player p=GetOwningPlayer(u1)local unit u3=CreateUnit(p,1747988805,GetUnitX(u1),GetUnitY(u1),0)call UnitApplyTimedLife(u3,1112820806,3.)call UnitAddAbility(u3,1093684548)call GroupEnumUnitsInRange(ce[8],GetUnitX(u1),GetUnitY(u1),650.,null)loopset QC=FirstOfGroup(ce[8])exitwhen QC==nullcall GroupRemoveUnit(ce[8],QC)if((GetUnitState(QC,UNIT_STATE_LIFE)>0)and IsUnitAlly(QC,p)and(Zy(QC,UNIT_TYPE_STRUCTURE)==false)and(GetUnitPointValue(QC)!=1))thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\ReplenishHealth\\ReplenishHealthCaster.mdl",QC,"origin"))call IssueTargetOrderById(u3,$D0085,QC)call SetUnitState(QC,UNIT_STATE_LIFE,GetUnitState(QC,UNIT_STATE_LIFE)+r)endifendloopset p=nullset u1=nullset u3=nullset QC=nullendfunctionfunction CP takes nothing returns booleanreturn((GetSpellAbilityId()==1093683525))endfunctionfunction cP takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,1)local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))local unit u2=Vw[i]local real x=GetUnitX(u2)local real y=GetUnitY(u2)local real x1local real y1local unit u3if Uw[i]>=18 thencall FlushChildHashtable(o,qB)call DestroyTimer(t)elseset Uw[i]=Uw[i]+1set x1=x+420.*Cos(20.*I2R(Uw[i])*3.14159/ $B4)set y1=y+420.*Sin(20.*I2R(Uw[i])*3.14159/ $B4)set u3=CreateUnit(GetOwningPlayer(u1),1747989063,x1,y1,0)call UnitApplyTimedLife(u3,1112820806,1.)call ShowUnit(u3,false)call UnitAddAbility(u3,1093683537)call SetUnitAbilityLevel(u3,1093683537,GetUnitAbilityLevel(u1,1093683525))call IssueTargetOrderById(u3,$D007F,u2)endifset t=nullset u1=nullset u2=nullset u3=nullendfunctionfunction DP takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)local unit u1=GetTriggerUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))set Uw[i]=0set Vw[i]=GetSpellTargetUnit()call SaveUnitHandle(o,qB,1,u1)call TimerStart(t,.06,true,function cP)set t=nullset u1=nullendfunctionfunction FP takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,1)call DestroyTimer(t)call FlushChildHashtable(o,qB)call UnitRemoveAbility(u1,1093677106)set u1=nullset t=nullendfunctionfunction GP takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer BB=GetUnitAbilityLevel(u1,1093684549)local timer t=CreateTimer()local integer qB=GetHandleId(t)local real tB=4.9call UnitAddAbility(u1,1093677106)call SetUnitAbilityLevel(u1,1093677106,BB)call SaveUnitHandle(o,qB,1,u1)call TimerStart(t,tB,false,function FP)set u1=nullset t=nullendfunctionfunction IP takes nothing returns booleanif GetSpellAbilityId()==1093684549 thencall GP()endifreturn falseendfunctionfunction JP takes nothing returns booleanreturn((GetSpellAbilityId()==1093677107))endfunctionfunction KP takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer i=GetUnitAbilityLevel(u1,1093677107)call UnitAddAbility(u1,1093683761)call SetUnitAbilityLevel(u1,1093683760,i)call SetUnitAbilityLevel(u1,1093677108,i)call TriggerSleepAction(7.)call UnitRemoveAbility(u1,1093683761)set u1=nullendfunctionfunction MP takes nothing returns booleanreturn((GetSpellAbilityId()==1093677110))endfunctionfunction NP takes nothing returns nothingcall SetWidgetLife(GetTriggerUnit(),(GetUnitStateSwap(UNIT_STATE_LIFE,GetTriggerUnit())+(100.*I2R(GetUnitAbilityLevelSwapped(1093677110,GetTriggerUnit())))))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Invisibility\\InvisibilityTarget.mdl",GetTriggerUnit(),"hand right"))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Invisibility\\InvisibilityTarget.mdl",GetTriggerUnit(),"hand left"))endfunctionfunction PP takes nothing returns booleanreturn((GetSpellAbilityId()==1093677113))endfunctionfunction QP takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,1)local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))local real x=Yw[i]local real y=Zw[i]local unit u2=Ww[i]local real x1=GetUnitX(u2)local real y1=GetUnitY(u2)local real dt=SquareRoot((Pow((x1-x),2))+Pow((y1-y),2))local real r=(700.-(100.*I2R(GetUnitAbilityLevel(u1,1093677113))))set Xw[i]=Xw[i]+dtset Yw[i]=x1set Zw[i]=y1if(Xw[i]>=r)and GetUnitAbilityLevel(u2,1112436833)>0 and GetUnitState(u2,UNIT_STATE_LIFE)>0 thenset Xw[i]=Xw[i]-rcall DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\ChimaeraAcidMissile\\ChimaeraAcidMissile.mdl",u2,"head"))call UnitDamageTargetBJ(u1,u2,115.,ATTACK_TYPE_HERO,DAMAGE_TYPE_ACID)endifset u1=nullset t=nullset u2=nullendfunctionfunction RP takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local timer t=CreateTimer()local integer qB=GetHandleId(t)local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))set Ww[i]=u2set Xw[i]=.0set Yw[i]=GetUnitX(u2)set Zw[i]=GetUnitY(u2)call SaveUnitHandle(o,qB,1,u1)call TimerStart(t,.1,true,function QP)call xA(10.)call FlushChildHashtable(o,qB)call DestroyTimer(t)set t=nullset u1=nullset u2=nullendfunctionfunction TP takes nothing returns booleanlocal unit u1=GetTriggerUnit()local integer BB=GetUnitAbilityLevel(u1,1093687375)local integer hero_of_human_name=1328558153local integer UP=1093687374local integer VP=1093677123if GetLearnedSkill()==1093687375 thencall SetPlayerAbilityAvailable(GetOwningPlayer(u1),UP,true)call SetPlayerAbilityAvailable(GetOwningPlayer(u1),VP,true)call SetPlayerTechResearchedSwap(1378889799,BB,GetOwningPlayer(u1))endifset u1=nullreturn falseendfunctionfunction XP takes nothing returns nothingcall TriggerRegisterUnitEvent(Gn,B4,EVENT_UNIT_HERO_LEVEL)call TriggerRegisterUnitEvent(Hn,B4,EVENT_UNIT_SUMMON)call TriggerRegisterUnitEvent(In,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Jn,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Kn,B4,EVENT_UNIT_SPELL_ENDCAST)endfunctionfunction ZP takes integer dQ,integer eQ returns integerlocal integer fQ=dQ-(dQ/ eQ)*eQif(fQ<0)thenset fQ=fQ+eQendifreturn fQendfunctionfunction gQ takes nothing returns booleanif ZP(GetHeroLevel(GetTriggerUnit()),2)==0 thencall SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()),1383035489,GetHeroLevel(GetTriggerUnit())/ 2)endifreturn falseendfunctionfunction iQ takes nothing returns booleanlocal integer id=GetUnitTypeId(GetSummonedUnit())if id==1752654196 or id==1752658994 or id==1752658995 or id==1747988570 thenif(GetLocalPlayer()==GetOwningPlayer(GetSummoningUnit()))thencall SelectUnit(GetSummonedUnit(),true)endifendifreturn falseendfunctionfunction kQ takes nothing returns nothinglocal trigger rB=GetTriggeringTrigger()local integer qB=GetHandleId(rB)local real r=GetEventDamage()local unit u1=LoadUnitHandle(o,qB,$196A8)local integer i=GetPlayerId(GetOwningPlayer(u1))+1local unit u3if GetTriggerUnit()==null thencall DestroyEffect(gx[i])call FlushChildHashtable(o,qB)call DestroyTrigger(rB)elseif(r>=ex[i])thencall FlushChildHashtable(o,qB)call DestroyTrigger(rB)set u3=CreateUnit(GetOwningPlayer(fx[i]),1747988805,GetUnitX(fx[i]),GetUnitY(fx[i]),0)call UnitApplyTimedLife(u3,1112045413,5.)call UnitAddAbility(u3,1093683022)call SetUnitAbilityLevel(u3,1093683022,GetUnitAbilityLevel(u1,1093683021))call IssueImmediateOrderById(u3,$D009F)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl",fx[i],"origin"))call DestroyEffect(gx[i])call SetUnitState(fx[i],UNIT_STATE_LIFE,GetUnitState(fx[i],UNIT_STATE_LIFE)+ex[i])elseset ex[i]=ex[i]-rcall SetUnitState(fx[i],UNIT_STATE_LIFE,GetUnitState(fx[i],UNIT_STATE_LIFE)+r)endifendifset rB=nullset u1=nullset u3=nullendfunctionfunction mQ takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local integer i=GetPlayerId(GetOwningPlayer(u1))+1local trigger rB=CreateTrigger()local integer qB=GetHandleId(rB)set ex[i]=(125.+(125.*I2R(GetUnitAbilityLevel(u1,1093683021))))set fx[i]=u2set gx[i]=AddSpecialEffectTarget("Abilities\\Spells\\Undead\\FrostArmor\\FrostArmorTarget.mdl",u2,"chest")call SaveUnitHandle(o,qB,$196A8,u1)call TriggerAddCondition(rB,Condition(function kQ))call TriggerRegisterTimerEvent(rB,10.,false)call TriggerRegisterUnitEvent(rB,u2,EVENT_UNIT_DAMAGED)set rB=nullset u1=nullset u2=nullendfunctionfunction nQ takes nothing returns booleanif GetSpellAbilityId()==1093683021 thencall mQ()endifreturn falseendfunctionfunction pQ takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer qB=GetHandleId(u1)local player p=GetOwningPlayer(u1)local integer i=GetPlayerId(p)+1local real x=GetSpellTargetX()local real y=GetSpellTargetY()set hx[i]=CreateUnit(p,1848652375,x,y,0)call UnitApplyTimedLife(hx[i],1112045413,7.)call UnitAddAbility(hx[i],1093683028)set u1=nullendfunctionfunction qQ takes nothing returns booleanif GetSpellAbilityId()==1093677129 thencall pQ()endifreturn falseendfunctionfunction sQ takes nothing returns nothinglocal unit u1=GetTriggerUnit()local player p=GetOwningPlayer(u1)local integer i=GetPlayerId(p)+1call KillUnit(hx[i])set u1=nullset p=nullendfunctionfunction tQ takes nothing returns booleanif GetSpellAbilityId()==1093677129 thencall sQ()endifreturn falseendfunctionfunction vQ takes nothing returns nothingcall TriggerRegisterUnitEvent(Mn,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Nn,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(On,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(Qn,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Rn,B4,EVENT_UNIT_SPELL_EFFECT)call SetPlayerAbilityAvailableBJ(false,1093684786,GetOwningPlayer(B4))endfunctionfunction xQ takes nothing returns booleanreturn((GetSpellAbilityId()==1093677132))endfunctionfunction yQ takes nothing returns nothinglocal unit u1=GetTriggerUnit()local effect e=AddSpecialEffectTarget("Abilities\\Spells\\Human\\HolyBolt\\\\HolyBoltMissile.mdl",u1,"weapon")call UnitAddAbility(u1,1093677133)call SetUnitAbilityLevel(u1,1093677133,GetUnitAbilityLevel(u1,1093677132))call TriggerSleepAction(4.)call UnitRemoveAbility(u1,1093677133)call DestroyEffect(e)set u1=nullset e=nullendfunctionfunction AQ takes nothing returns booleanreturn((GetSpellAbilityId()==1093684298))endfunctionfunction aQ takes nothing returns nothinglocal unit BQif(GetEventDamage()>0)thenset BQ=GetTriggerUnit()call SetUnitState(BQ,UNIT_STATE_LIFE,GetUnitState(BQ,UNIT_STATE_LIFE)+GetEventDamage()*.5)endifset BQ=nullendfunctionfunction bQ takes nothing returns nothinglocal trigger rB=CreateTrigger()local unit u1=GetTriggerUnit()call TriggerAddCondition(rB,Condition(function aQ))call TriggerRegisterUnitEvent(rB,u1,EVENT_UNIT_DAMAGED)call xA((2.+I2R(GetUnitAbilityLevel(u1,1093684298))))call DestroyTrigger(rB)set rB=nullset u1=nullendfunctionfunction cQ takes nothing returns booleanreturn((GetLearnedSkill()==1093683029))endfunctionfunction DQ takes nothing returns nothinglocal integer lv=GetUnitAbilityLevel(GetTriggerUnit(),1093683029)if(lv==1)thenset Ed[(1+GetPlayerId(GetOwningPlayer(GetTriggerUnit())))]=truecall TriggerRegisterUnitEvent(Pn,GetTriggerUnit(),EVENT_UNIT_DAMAGED)elsecall SetUnitAbilityLevel(GetTriggerUnit(),1093684786,lv)endifendfunctionfunction FQ takes nothing returns nothinglocal unit u1local integer ilocal real BF=GetEventDamage()if BF>0 thenset u1=GetTriggerUnit()set i=(1+GetPlayerId(GetOwningPlayer(u1)))if Ed[i]thenset Dd[i]=Dd[i]+BFif(Dd[i]>=250.)thenset Dd[i]=(Dd[i]-250.)call DestroyEffect(Fd[i])call SetPlayerAbilityAvailable(GetOwningPlayer(u1),1093684786,true)call SetPlayerAbilityAvailable(GetOwningPlayer(u1),1093683029,false)set Fd[i]=AddSpecialEffectTarget("Abilities\\Spells\\Orc\\SpiritLink\\SpiritLinkTarget.mdl",u1,"weapon")set Ed[i]=falseendifendifendifset u1=nullendfunctionfunction HQ takes nothing returns booleanreturn((GetSpellAbilityId()==1093684786))endfunctionfunction IQ takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))set Ed[i]=truecall SetPlayerAbilityAvailable(GetOwningPlayer(u1),1093684786,false)call SetPlayerAbilityAvailable(GetOwningPlayer(u1),1093683029,true)call DestroyEffect(Fd[i])set u1=nullendfunctionfunction JQ takes nothing returns booleanreturn((GetSpellAbilityId()==1093678426))endfunctionfunction KQ takes nothing returns nothinglocal unit BQif(GetEventDamage()>0)thenset BQ=GetTriggerUnit()if GetEventDamageSource()==LoadUnitHandle(o,GetHandleId(GetTriggeringTrigger()),1)thencall SetUnitState(BQ,UNIT_STATE_LIFE,GetUnitState(BQ,UNIT_STATE_LIFE)+GetEventDamage()*.5)elsecall SetUnitState(BQ,UNIT_STATE_LIFE,GetUnitState(BQ,UNIT_STATE_LIFE)+GetEventDamage())endifendifset BQ=nullendfunctionfunction LQ takes nothing returns nothinglocal unit u1=GetTriggerUnit()local trigger rB=CreateTrigger()call SaveUnitHandle(o,GetHandleId(rB),1,GetSpellTargetUnit())call TriggerAddCondition(rB,Condition(function KQ))call TriggerRegisterUnitEvent(rB,u1,EVENT_UNIT_DAMAGED)call xA((4.+3.*I2R(GetUnitAbilityLevel(u1,1093678426))))call FlushChildHashtable(o,GetHandleId(rB))call DestroyTrigger(rB)set rB=nullset u1=nullendfunctionfunction NQ takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer i=GetPlayerId(GetOwningPlayer(u1))+1set Hd[i]=Hd[i]+1if Hd[i]>=7 thencall UnitRemoveAbility(u1,1093684048)call UnitRemoveAbility(u1,1093683528)set Gd[i]=falseendifset u1=nullendfunctionfunction OQ takes nothing returns booleanif Gd[GetPlayerId(GetTriggerPlayer())+1]thencall NQ()endifreturn falseendfunctionfunction PQ takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,5566)set Gd[GetPlayerId(GetOwningPlayer(u1))+1]=truecall UnitRemoveAbility(u1,1093684048)call UnitRemoveAbility(u1,1093683528)call FlushChildHashtable(o,qB)call DestroyTimer(t)set u1=nullset t=nullendfunctionfunction QQ takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer i=GetPlayerId(GetOwningPlayer(u1))+1local timer t=CreateTimer()local integer qB=GetHandleId(t)call UnitAddAbility(u1,1093684048)call UnitAddAbility(u1,1093683528)call SetUnitAbilityLevel(u1,1093683528,GetUnitAbilityLevel(u1,1093684826))set Gd[i]=trueset Hd[i]=0call SaveUnitHandle(o,qB,5566,u1)call TimerStart(t,20.,false,function PQ)set u1=nullset t=nullendfunctionfunction RQ takes nothing returns booleanif GetSpellAbilityId()==1093684826 thencall QQ()endifreturn falseendfunctionfunction SQ takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer i=GetPlayerId(GetOwningPlayer(u1))+1set Id[i]=0call SetPlayerAbilityAvailable(GetOwningPlayer(u1),1093682254,false)set u1=nullendfunctionfunction TQ takes nothing returns booleanif GetSpellAbilityId()==1093682254 thencall SQ()endifreturn falseendfunctionfunction UQ takes nothing returns booleanlocal integer i=GetPlayerId(GetTriggerPlayer())+1set Id[i]=Id[i]+1if Id[i]==5 thencall SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093682254,true)endifreturn falseendfunctionfunction VQ takes nothing returns booleanif GetLearnedSkill()==1093677137 thenif GetUnitAbilityLevel(GetTriggerUnit(),1093677137)==1 thencall TriggerRegisterUnitEvent(jx,GetTriggerUnit(),EVENT_UNIT_TARGET_IN_RANGE)endifcall SetUnitAbilityLevel(GetTriggerUnit(),1093682254,GetUnitAbilityLevel(GetTriggerUnit(),1093677137))endifreturn falseendfunctionfunction WQ takes nothing returns nothingcall TriggerRegisterUnitEvent(ix,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(kx,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(mx,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(nx,B4,EVENT_UNIT_TARGET_IN_RANGE)call SetPlayerAbilityAvailable(GetOwningPlayer(B4),1093682254,false)endfunctionfunction YQ takes nothing returns nothingcall TriggerRegisterUnitEvent(Un,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Vn,B4,EVENT_UNIT_HERO_SKILL)endfunctionfunction dR takes nothing returns booleanreturn((GetSpellAbilityId()==1093683545))endfunctionfunction eR takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real rif((GetUnitTypeId(u1)==1328558129))thenset r=(GetUnitState(u1,UNIT_STATE_LIFE)+(.08*GetUnitState(u1,UNIT_STATE_MAX_LIFE)))call SetUnitState(u1,UNIT_STATE_LIFE,r)call UnitAddAbility(u1,1093683536)call SetUnitAbilityLevel(u1,1093683536,2)call UnitMakeAbilityPermanent(u1,true,1093683536)elseset r=(GetUnitState(u1,UNIT_STATE_LIFE)+(.04*GetUnitState(u1,UNIT_STATE_MAX_LIFE)))call SetUnitState(u1,UNIT_STATE_LIFE,r)call UnitAddAbility(u1,1093683536)call UnitMakeAbilityPermanent(u1,true,1093683536)endifcall TriggerSleepAction(3.)call UnitMakeAbilityPermanent(u1,false,1093683536)call UnitRemoveAbility(u1,1093683536)set u1=nullendfunctionfunction gR takes nothing returns booleanreturn((GetLearnedSkill()==1093683512))endfunctionfunction hR takes nothing returns nothingcall SetUnitAbilityLevel(GetTriggerUnit(),1093683545,(GetUnitAbilityLevel(GetTriggerUnit(),1093683512)+1))endfunctionfunction jR takes nothing returns booleanreturn GetSpellAbilityId()==1093684793endfunctionfunction kR takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real BF=50.+100.*I2R(GetUnitAbilityLevel(u1,1093684793))call UnitAddAbility(u1,1093684801)call SetUnitAbilityLevel(u1,1093684801,GetUnitAbilityLevel(u1,1093684793))call UnitMakeAbilityPermanent(u1,true,1093684801)call UnitDamageTarget(u1,GetSpellTargetUnit(),BF,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_ACID,WEAPON_TYPE_WHOKNOWS)call xA(8.)call UnitMakeAbilityPermanent(u1,false,1093684801)call UnitRemoveAbility(u1,1093684801)set u1=nullendfunctionfunction mR takes nothing returns booleanlocal unit u1local real hpif GetSpellAbilityId()==1093684788 thenset u1=GetTriggerUnit()set hp=GetUnitState(u1,UNIT_STATE_LIFE)+.2*(GetUnitState(u1,UNIT_STATE_MAX_LIFE)-GetUnitState(u1,UNIT_STATE_LIFE))call SetUnitState(u1,UNIT_STATE_LIFE,hp)endifset u1=nullreturn falseendfunctionfunction nR takes nothing returns booleanif GetLearnedSkill()==1093677360 and GetUnitAbilityLevel(GetTriggerUnit(),1093677360)==1 thencall TriggerRegisterUnitEvent(Xn,GetTriggerUnit(),EVENT_UNIT_TARGET_IN_RANGE)endifreturn falseendfunctionfunction InitTrig_A08R_Learn takes nothing returns nothinglocal trigger rB=CreateTrigger()call TriggerAddCondition(rB,Condition(function nR))call SaveTriggerHandle(We,GetHandleId(GetTriggeringTrigger()),3,rB)set rB=nullendfunctionfunction oR takes nothing returns booleanif GetLearnedSkill()==1093684787 and IsUnitIllusion(GetTriggerUnit())!=true thencall SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()),1383035490,GetUnitAbilityLevel(GetTriggerUnit(),1093684787)+1)endifreturn falseendfunctionfunction pR takes trigger aH returns nothinglocal trigger rBlocal integer qB=GetHandleId(aH)set rB=CreateTrigger()call TriggerAddCondition(rB,Condition(function jR))call TriggerAddAction(rB,function kR)call SaveTriggerHandle(We,qB,1,rB)set rB=CreateTrigger()call TriggerAddCondition(rB,Condition(function mR))call SaveTriggerHandle(We,qB,2,rB)set rB=CreateTrigger()call TriggerAddCondition(rB,Condition(function nR))call SaveTriggerHandle(We,qB,3,rB)set rB=CreateTrigger()call TriggerAddCondition(rB,Condition(function oR))call SaveTriggerHandle(We,qB,4,rB)set rB=nullendfunctionfunction qR takes nothing returns nothinglocal trigger rB=GetTriggeringTrigger()local integer qB=GetHandleId(rB)local unit u=B4if GetTriggerExecCount(rB)==1 thencall pR(rB)endifset rB=LoadTriggerHandle(We,qB,1)call TriggerRegisterUnitEvent(rB,u,EVENT_UNIT_SPELL_EFFECT)set rB=LoadTriggerHandle(We,qB,2)call TriggerRegisterUnitEvent(rB,u,EVENT_UNIT_SPELL_EFFECT)set rB=LoadTriggerHandle(We,qB,3)call TriggerRegisterUnitEvent(rB,u,EVENT_UNIT_HERO_SKILL)set rB=LoadTriggerHandle(We,qB,4)call TriggerRegisterUnitEvent(rB,u,EVENT_UNIT_HERO_SKILL)set u=nullset rB=nullendfunctionfunction sR takes nothing returns nothinglocal trigger rB=GetTriggeringTrigger()local integer qB=GetHandleId(rB)local unit u1=LoadUnitHandle(o,qB,-$5E9EB4B3)local unit u2=GetTriggerUnit()local real ZA=GetUnitState(u1,UNIT_STATE_LIFE)local real tR=GetUnitState(u1,UNIT_STATE_MAX_LIFE)local real uR=ZA/ tR*100.local integer i=GetPlayerId(GetOwningPlayer(u1))+1local real BF=10.*I2R(GetUnitAbilityLevel(u1,1093677360))+I2R(1+2*GetUnitAbilityLevel(u1,1093677360))*R2I((100.-uR)/ 10.)call TriggerRemoveCondition(rB,LoadTriggerConditionHandle(o,qB,$AD9C))call DestroyTrigger(rB)call FlushChildHashtable(o,qB)set t9[i]=falsecall UnitDamageTarget(u1,u2,BF,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_ACID,WEAPON_TYPE_WHOKNOWS)set rB=nullset u1=nullset u2=nullendfunctionfunction vR takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetEventTargetUnit()local trigger rBlocal integer qBlocal integer i=GetPlayerId(GetOwningPlayer(u1))+1local triggercondition uBif t9[i]==false and Zy(u2,UNIT_TYPE_STRUCTURE)==false thenset rB=CreateTrigger()set qB=GetHandleId(rB)set t9[i]=truecall SaveUnitHandle(o,qB,-$5E9EB4B3,u1)set uB=TriggerAddCondition(rB,Condition(function sR))call SaveTriggerConditionHandle(o,qB,$AD9C,uB)call TriggerRegisterUnitEvent(rB,u2,EVENT_UNIT_DAMAGED)call wB(rB,.3,uB,i)endifset rB=nullset uB=nullset u1=nullset u2=nullendfunctionfunction xR takes nothing returns nothingcall TriggerRegisterUnitEvent(Zn,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(do,B4,EVENT_UNIT_SPELL_CHANNEL)call TriggerRegisterUnitEvent(eo,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(fo,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(go,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(ho,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(io,B4,EVENT_UNIT_HERO_SKILL)endfunctionfunction zR takes nothing returns booleanreturn((GetSpellAbilityId()==1093677367))endfunctionfunction AR takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x1=GetSpellTargetX()local real y1=GetSpellTargetY()call TriggerSleepAction(.0)call SetUnitX(u1,x1)call SetUnitY(u1,y1)call TriggerSleepAction(2.8)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathPact\\DeathPactTarget.mdl",u1,"chest"))call SetUnitX(GetTriggerUnit(),x)call SetUnitY(GetTriggerUnit(),y)set u1=nullendfunctionfunction BR takes nothing returns booleanreturn((GetSpellAbilityId()==1093677367)and(IsTerrainPathable(GetSpellTargetX(),GetSpellTargetY(),PATHING_TYPE_WALKABILITY)))endfunctionfunction bR takes nothing returns nothingcall DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,3.,"TRIGSTR_12387")call IssueNeutralImmediateOrderById(GetOwningPlayer(GetTriggerUnit()),GetTriggerUnit(),$D0004)endfunctionfunction cR takes nothing returns booleanreturn((GetSpellAbilityId()==1093677366))endfunctionfunction DR takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,$10A613)local unit u2=LoadUnitHandle(o,qB,$10A614)if(IsPlayerAlly(GetOwningPlayer(u2),GetOwningPlayer(u1)))thencall SetUnitState(u2,UNIT_STATE_LIFE,(GetUnitState(u2,UNIT_STATE_LIFE)+(100.+(100.*I2R(GetUnitAbilityLevel(u1,1093677366))))))elsecall UnitDamageTargetBJ(u1,u2,(100.+(100.*I2R(GetUnitAbilityLevel(u1,1093677366)))),ATTACK_TYPE_HERO,DAMAGE_TYPE_ACID)endifset t=nullset u1=nullset u2=nullendfunctionfunction ER takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)call SaveUnitHandle(o,qB,$10A613,GetTriggerUnit())call SaveUnitHandle(o,qB,$10A614,GetSpellTargetUnit())call TimerStart(t,2.6,false,function DR)set t=nullendfunctionfunction GR takes nothing returns booleanreturn((GetSpellAbilityId()==1093677364))endfunctionfunction HR takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x1=GetSpellTargetX()local real y1=GetSpellTargetY()local real a=Atan2(y1-y,x1-x)local real x2=x+$A*Cos(a)local real y2=y+$A*Sin(a)local unit u3=CreateUnit(GetOwningPlayer(u1),1747988805,x,y,0)call UnitApplyTimedLife(u3,1112045413,10.)call UnitAddAbility(u3,1093677365)call SetUnitAbilityLevel(u3,1093677365,GetUnitAbilityLevel(u1,1093677364))call IssuePointOrderById(u3,$D0271,x2,y2)set u1=nullset u3=nullendfunctionfunction lR takes nothing returns booleanlocal integer id=GetSpellAbilityId()return((((id==1093677367)or(id==1093677366)or(id==1093677362)or(id==1093683505)))and GetUnitAbilityLevel(GetTriggerUnit(),1093677364)>0)endfunctionfunction JR takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x1local real y1local unit u2local real alocal unit u3if((GetSpellAbilityId()==1093677366)and(GetSpellAbilityId()==1093677362))thenset u2=GetSpellTargetUnit()set x1=GetUnitX(u2)set y1=GetUnitY(u2)elseset x1=GetSpellTargetX()set y1=GetSpellTargetY()endifset u3=CreateUnit(GetOwningPlayer(u1),1747989063,x1,y1,0)call UnitApplyTimedLife(u3,1112045413,1.)call ShowUnit(u3,false)set u3=CreateUnit(GetOwningPlayer(u1),1747988805,x1,y1,0)call UnitApplyTimedLife(u3,1112045413,10.)call UnitAddAbility(u3,1093684302)call SetUnitAbilityLevel(u3,1093684302,GetUnitAbilityLevel(u1,1093677364))call IssuePointOrderById(u3,$D0271,x,y)set u1=nullset u2=nullset u3=nullendfunctionfunction LR takes nothing returns booleanreturn((GetSpellAbilityId()==1093677362))endfunctionfunction MR takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x1=GetUnitX(u1)local real y1=GetUnitY(u1)local unit u2=GetSpellTargetUnit()local real x2=GetUnitX(u2)local real y2=GetUnitY(u2)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",x1,y1))call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl",x2,y2))call SetUnitX(u1,x2)call SetUnitY(u1,y2)call SetUnitX(u2,x1)call SetUnitY(u2,y1)if(IsUnitEnemy(u2,GetOwningPlayer(u1)))thencall UnitDamageTargetBJ(u1,u2,(140.+(65.*I2R(GetUnitAbilityLevel(u1,GetSpellAbilityId())))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)endifset u1=nullset u2=nullendfunctionfunction OR takes nothing returns booleanreturn((GetLearnedSkill()==1093683505)and(IsUnitIllusion(GetTriggerUnit())!=true))endfunctionfunction PR takes nothing returns nothingcall SetUnitAbilityLevelSwapped(1093677367,GetTriggerUnit(),(GetUnitAbilityLevel(GetTriggerUnit(),1093683505)+1))endfunctionfunction RR takes nothing returns nothingcall TriggerRegisterUnitEvent(ko,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(mo,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(oo,B4,EVENT_UNIT_SPELL_EFFECT)endfunctionfunction TR takes nothing returns booleanreturn((GetSpellAbilityId()==1093677368))endfunctionfunction UR takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x1=GetSpellTargetX()local real y1=GetSpellTargetY()local unit u3=CreateUnit(GetOwningPlayer(u1),1869836337,x1,y1,0)call UnitApplyTimedLife(u3,1112045413,8.)call UnitAddAbility(u3,1093677369)call SetUnitAbilityLevel(u3,1093677369,GetUnitAbilityLevel(u1,1093677368))call IssuePointOrderById(u3,$D0079,x1,y1)set u1=nullset u3=nullendfunctionfunction WR takes nothing returns booleanreturn((GetLearnedSkill()==1093677378)and(IsUnitIllusion(GetTriggerUnit())!=true))endfunctionfunction XR takes nothing returns nothingif((GetUnitAbilityLevel(GetTriggerUnit(),1093677378)==1))thencall UnitAddAbility(GetTriggerUnit(),1093679437)call UnitMakeAbilityPermanent(GetTriggerUnit(),true,1093679437)call EnableTrigger(no)elsecall SetUnitAbilityLevel(GetTriggerUnit(),1093679437,(GetUnitAbilityLevel(GetTriggerUnit(),1093677378)+0))endifendfunctionfunction ZR takes nothing returns booleanreturn(GetUnitAbilityLevel(GetTriggerUnit(),1110456642)>0)endfunctionfunction dS takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,1)local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))call FlushChildHashtable(o,qB)call DestroyTimer(t)set ox[i]=falseset t=nullset u1=nullendfunctionfunction eS takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit QClocal integer ilocal timer tcall GroupEnumUnitsInRange(ce[0],GetUnitX(u1),GetUnitY(u1),700.,null)loopset QC=FirstOfGroup(ce[0])exitwhen QC==nullcall GroupRemoveUnit(ce[0],QC)if GetUnitPointValue(QC)==110 and IsUnitEnemy(u1,GetOwningPlayer(QC))and IsUnitIllusion(QC)!=true and GetUnitAbilityLevel(QC,1093677378)>0 and ox[(1+GetPlayerId(GetOwningPlayer(QC)))]==false thenset ox[(1+GetPlayerId(GetOwningPlayer(QC)))]=truecall UnitDamageTargetBJ(QC,u1,((1.+(.2*I2R(GetUnitAbilityLevel(QC,1093677378))))*I2R(GetHeroInt(QC,true))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNKNOWN)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl",u1,"chest"))set t=CreateTimer()call SaveUnitHandle(o,GetHandleId(t),1,QC)call TimerStart(t,.25,false,function dS)endifendloopset QC=nullset t=nullset u1=nullendfunctionfunction gS takes nothing returns booleanreturn((GetSpellAbilityId()==1093684279))endfunctionfunction hS takes nothing returns nothinglocal unit u1=oy[0]call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl",GetEnumUnit(),"origin"))call SetUnitState(u1,UNIT_STATE_LIFE,(GetUnitState(u1,UNIT_STATE_LIFE)+(I2R(GetHeroInt(u1,true))*.5)))call UnitDamageTargetBJ(u1,GetEnumUnit(),I2R(GetHeroInt(u1,true)),ATTACK_TYPE_HERO,DAMAGE_TYPE_ACID)set u1=nullendfunctionfunction iS takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,-$5E9EB4B3)local unit QClocal real x1=GetUnitX(u1)local real y1=GetUnitY(u1)local player p=GetOwningPlayer(u1)call GroupClear(ce[1])if((GetUnitTypeId(u1)!=1328558391)or GetUnitState(u1,UNIT_STATE_LIFE)<=1)thencall FlushChildHashtable(o,qB)call DestroyTimer(t)elsecall GroupEnumUnitsInRange(ce[0],x1,y1,800.,null)loopset QC=FirstOfGroup(ce[0])exitwhen QC==nullcall GroupRemoveUnit(ce[0],QC)if GetUnitAbilityLevel(QC,1110454350)>0 and IsUnitEnemy(QC,p)thencall GroupAddUnit(ce[1],QC)endifendloopendifset oy[0]=u1call ForGroup(HA(3,ce[1]),function hS)call GroupClear(ce[1])set p=nullset t=nullset u1=nullset QC=nullendfunctionfunction jS takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)call SaveUnitHandle(o,qB,-$5E9EB4B3,GetTriggerUnit())call TimerStart(t,1.5,true,function iS)set t=nullendfunctionfunction mS takes nothing returns nothingcall TriggerRegisterUnitEvent(qo,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(ro,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(so,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(to,B4,EVENT_UNIT_SPELL_EFFECT)endfunctionfunction oS takes nothing returns booleanreturn((GetLearnedSkill()==1093677384)and(IsUnitIllusion(GetTriggerUnit())!=true))endfunctionfunction pS takes nothing returns nothingcall SetUnitAbilityLevel(GetTriggerUnit(),1093677381,(GetUnitAbilityLevel(GetTriggerUnit(),1093677384)+1))endfunctionfunction rS takes nothing returns booleanreturn((GetSpellAbilityId()==1093677384))endfunctionfunction sS takes nothing returns nothingcall TriggerSleepAction(.79)if(GetLocalPlayer()==GetOwningPlayer(GetTriggerUnit()))thencall PanCameraToTimed(GetUnitX(GetTriggerUnit()),GetUnitY(GetTriggerUnit()),.5)endifendfunctionfunction uS takes nothing returns booleanreturn((GetSpellAbilityId()==1093677383))endfunctionfunction vS takes nothing returns nothinglocal unit QClocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,-$5E9EB4B3)local unit u2=LoadUnitHandle(o,qB,-$6329FB8A)local integer i=LoadInteger(o,qB,-$63F0AAA2)local boolean b=LoadBoolean(o,qB,-$5CF6751E)local integer wS=GetHandleId(u1)local integer Index_totallocal integer xSlocal real xlocal real ylocal real x1local real y1local real alocal unit u3if(b==false)thenset i=i+1call SaveInteger(o,qB,-$63F0AAA2,i)set x=GetUnitX(u1)set y=GetUnitY(u1)set a=GetUnitFacing(u1)*bj_DEGTORADset x1=x+40.*I2R(i)*Cos(a)set y1=y+40.*I2R(i)*Sin(a)call GroupEnumUnitsInRange(ce[0],x1,y1,150.,null)loopset QC=FirstOfGroup(ce[0])exitwhen(QC==null)call GroupRemoveUnit(ce[0],QC)if((Zy(QC,UNIT_TYPE_GROUND))and(GetUnitState(QC,UNIT_STATE_LIFE)>1)and(Zy(QC,UNIT_TYPE_MECHANICAL)==false)and(Zy(QC,UNIT_TYPE_STRUCTURE)==false)and(GetOwningPlayer(QC)!=GetOwningPlayer(u1)))thenset b=trueif IsUnitEnemy(QC,GetOwningPlayer(u1))thencall UnitDamageTargetBJ(u1,QC,(I2R(GetUnitAbilityLevel(u1,1093677383))*100.),ATTACK_TYPE_HERO,DAMAGE_TYPE_ACID)endifcall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl",QC,"overhead"))call SaveUnitHandle(o,qB,-$6329FB8A,QC)endifendloopcall SaveUnitHandle(o,wS,i,CreateUnit(GetOwningPlayer(u1),1966092336,x1,y1,a*bj_RADTODEG))if((i>(5+GetUnitAbilityLevel(u1,1093677383)*5))or(b))thenset b=trueendifcall SaveBoolean(o,qB,-$5CF6751E,b)elseif(u2!=null)thenset u3=LoadUnitHandle(o,wS,i)set x1=GetUnitX(u3)set y1=GetUnitY(u3)call SetUnitX(u2,x1)call SetUnitY(u2,y1)call RemoveUnit(u3)set i=i-1call SaveInteger(o,qB,-$63F0AAA2,i)elseset u3=LoadUnitHandle(o,wS,i)call RemoveUnit(u3)set i=i-1call SaveInteger(o,qB,-$63F0AAA2,i)endifif(i==0)thencall FlushChildHashtable(o,qB)call FlushChildHashtable(o,wS)call DestroyTimer(t)endifendifset u1=nullset u2=nullset u3=nullset QC=nullset t=nullendfunctionfunction yS takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)call SaveUnitHandle(o,qB,-$5E9EB4B3,GetTriggerUnit())call SaveInteger(o,qB,-$63F0AAA2,0)call SaveBoolean(o,qB,-$5CF6751E,false)call SaveUnitHandle(o,qB,-$6329FB8A,null)call TimerStart(t,.03,true,function vS)set t=nullendfunctionfunction AS takes nothing returns booleanreturn((GetSpellAbilityId()==1093682485))endfunctionfunction aS takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x1=GetSpellTargetX()local real y1=GetSpellTargetY()local real a=Atan2(y1-y,x1-x)local real x2=x+$A*Cos(a)local real y2=y+$A*Sin(a)local unit u3call ShowUnit(u1,false)set u3=CreateUnit(GetOwningPlayer(u1),1747989063,x,y,0)call UnitApplyTimedLife(u3,1112045413,5.)call UnitAddAbility(u3,1093682484)call SetUnitAbilityLevel(u3,1093682484,GetUnitAbilityLevel(u1,1093682485))call IssuePointOrderById(u3,$D0271,x2,y2)call TriggerSleepAction(3.5)call ShowUnit(u1,true)if(GetLocalPlayer()==GetOwningPlayer(u1))thencall ClearSelection()call SelectUnit(u1,true)endifset u1=nullset u3=nullendfunctionfunction bS takes nothing returns nothingcall TriggerRegisterUnitEvent(vo,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(xo,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(yo,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(Ao,B4,EVENT_UNIT_SPELL_EFFECT)endfunctionfunction cS takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x2=GetUnitX(u2)local real y2=GetUnitY(u2)local player p=GetOwningPlayer(u1)local integer i=GetPlayerId(p)+1set c8=Atan2(y2-y,x2-x)*bj_RADTODEGset C8=falseset D8=40.set l8=.95set E8=1.5set F8=u2set G8=(.25/ 10.)set H8=woset Ce=icall TriggerExecute(zi)set u1=nullset u2=nullendfunctionfunction DS takes nothing returns booleanif GetSpellAbilityId()==1093677385 thencall cS()endifreturn falseendfunctionfunction FS takes nothing returns nothinglocal real x=GetUnitX(F8)local real y=GetUnitY(F8)local unit u1=h4[Ce]local player p=Player(Ce-1)local unit u3=CreateUnit(p,1747989063,x,y,0)call ShowUnit(u3,false)call UnitApplyTimedLife(u3,1112045413,1.)call UnitAddAbility(u3,1093677387)call SetUnitAbilityLevel(u3,1093677387,GetUnitAbilityLevel(u1,1093677385))call IssueImmediateOrderById(u3,$D0080)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",x,y))set u1=nullset u3=nullendfunctionfunction HS takes nothing returns booleanreturn((GetSpellAbilityId()==1093677389))endfunctionfunction IS takes nothing returns nothinglocal integer i=1local unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x1=GetUnitX(u2)local real y1=GetUnitY(u2)local real a=Atan2(y1-y,x1-x)local real x2=x+720.*Cos(a)local real y2=y+720.*Sin(a)local real x3local real y3local real x4local real y4call TriggerSleepAction(.0)call SetUnitPathing(u1,false)loopexitwhen i>(720/ 60)set x3=x+60.*I2R(i)*Cos(a)set y3=y+60.*I2R(i)*Sin(a)set x4=x3+100.*Cos(a)set y4=y3+100.*Sin(a)if(IsTerrainPathable(x4,y4,PATHING_TYPE_WALKABILITY))thenset i=100elsecall SetUnitPosition(u1,x3,y3)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\MirrorImage\\MirrorImageCaster.mdl",x3,y3))endifset i=i+1endloopcall SetUnitPathing(u1,true)set u1=nullset u2=nullendfunctionfunction JS takes nothing returns booleanreturn((GetLearnedSkill()==1093677390)and(GetUnitAbilityLevel(GetTriggerUnit(),1093677390)==1)and(IsUnitIllusion(GetTriggerUnit())!=true))endfunctionfunction KS takes nothing returns nothingcall UnitAddAbility(GetTriggerUnit(),1093677391)call TriggerRegisterUnitEvent(zo,GetTriggerUnit(),EVENT_UNIT_TARGET_IN_RANGE)endfunctionfunction MS takes nothing returns booleanlocal unit u1=GetTriggerUnit()local unit u2=GetEventTargetUnit()local integer i=GetPlayerId(GetOwningPlayer(u1))+1if((u2!=Ld[i])and(Ld[i]!=null))thenset Kd[i]=1elseif Kd[i]<1+5*GetUnitAbilityLevel(u1,1093677390)thenset Kd[i]=Kd[i]+1endifendifcall DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GryphonRiderMissile\\GryphonRiderMissile.mdl",u1,"weapon"))set Ld[i]=u2call SetUnitAbilityLevel(u1,1093677391,Kd[i])set u1=nullset u2=nullreturn falseendfunctionfunction OS takes nothing returns booleanreturn((GetSpellAbilityId()==1093677392))endfunctionfunction PS takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))set Kd[i]=(Kd[i]+(2+(3*GetUnitAbilityLevel(u1,1093677392))))set Ld[i]=nullcall SetUnitAbilityLevel(u1,1093677391,Kd[i])call UnitAddAbility(u1,1093677393)call SetUnitPathing(u1,false)call TriggerSleepAction((9.+(3.*I2R(GetUnitAbilityLevel(u1,1093677392)))))call UnitRemoveAbility(u1,1093677393)call SetUnitPathing(u1,true)set u1=nullendfunctionfunction RS takes nothing returns nothingset r8[1]=1227895878set r8[2]=1227895879set r8[3]=1227895880call TriggerRegisterUnitEvent(Bo,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(bo,B4,EVENT_UNIT_SPELL_EFFECT)endfunctionfunction TS takes nothing returns booleanreturn((GetLearnedSkill()==1093677398))endfunctionfunction US takes nothing returns nothingcall SetPlayerTechResearchedSwap(1382378855,GetUnitAbilityLevelSwapped(1093677398,GetTriggerUnit()),GetOwningPlayer(GetTriggerUnit()))endfunctionfunction WS takes nothing returns booleanreturn((GetSpellAbilityId()==1093677399))endfunctionfunction XS takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,$46B)local integer i=GetUnitAbilityLevel(u1,1093677399)if(LoadInteger(o,qB,$46C)>=($C+(8*i)))or GetUnitState(u1,UNIT_STATE_LIFE)<=1 thencall FlushChildHashtable(o,qB)call DestroyTimer(t)elsecall SaveInteger(o,qB,$46C,LoadInteger(o,qB,$46C)+1)call UnitRemoveAbility(u1,1110454604)call RemoveItem(UnitAddItemById(u1,r8[i]))endifset t=nullset u1=nullendfunctionfunction YS takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)call SaveUnitHandle(o,qB,$46B,GetTriggerUnit())call SaveInteger(o,qB,$46C,0)call TimerStart(t,.5,true,function XS)set t=nullendfunctionfunction d5 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x1=GetSpellTargetX()local real y1=GetSpellTargetY()local unit u3=CreateUnit(GetOwningPlayer(u1),1747988805,x,y,0)call UnitApplyTimedLife(u3,1112045413,5.)call UnitAddAbility(u3,1093677401)call SetUnitAbilityLevel(u3,1093677401,GetUnitAbilityLevel(u1,1093677618))call IssuePointOrderById(u3,$D02AC,x1,y1)set u1=nullset u3=nullendfunctionfunction e5 takes nothing returns booleanif GetSpellAbilityId()==1093677618 thencall d5()endifreturn falseendfunctionfunction g5 takes nothing returns nothingcall TriggerRegisterUnitEvent(Do,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Eo,B4,EVENT_UNIT_SPELL_EFFECT)endfunctionfunction j5 takes nothing returns booleanreturn((GetUnitAbilityLevel(GetTriggerUnit(),1093677621)!=0)and((GetSpellAbilityId()==1093677619)or(GetSpellAbilityId()==1093677620)or(GetSpellAbilityId()==1093677657)))endfunctionfunction k5 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x1local real y1local unit QClocal real BF=I2R(GetHeroInt(u1,true))*1.7local player p=GetOwningPlayer(u1)if(((GetSpellAbilityId()==1093677619)or(GetSpellAbilityId()==1093677657)))thenset x1=GetSpellTargetX()set y1=GetSpellTargetY()elseset x1=GetUnitX(GetSpellTargetUnit())set y1=GetUnitY(GetSpellTargetUnit())endifcall GroupEnumUnitsInRange(ce[0],x1,y1,400.,null)loopset QC=FirstOfGroup(ce[0])exitwhen(QC==null)call GroupRemoveUnit(ce[0],QC)if(GetUnitState(QC,UNIT_STATE_LIFE)>1 and IsUnitEnemy(QC,p)and(Zy(QC,UNIT_TYPE_STRUCTURE)==false))thencall UnitDamageTargetBJ(u1,QC,BF,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNIVERSAL)call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\DeathPactTarget.mdx",QC,"chest"))endifendloopset p=nullset u1=nullset QC=nullendfunctionfunction o5 takes nothing returns booleanreturn((GetSpellAbilityId()==1093677657))endfunctionfunction p5 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,1)local integer i2=(1+GetPlayerId(GetOwningPlayer(u1)))local unit u3local real x=px[i2]local real y=qx[i2]local real a=LoadReal(o,qB,3)*bj_RADTODEGlocal real x2local real y2local integer i=1local integer wz=LoadInteger(o,qB,2)local player q5=GetOwningPlayer(u1)local integer BB=GetUnitAbilityLevel(u1,1093677657)if(wz>=25)thencall FlushChildHashtable(o,qB)call DestroyTimer(t)elsecall SaveInteger(o,qB,2,wz+1)loopexitwhen i>3set x2=x+100.*I2R(wz)*Cos(((a-36.)+(18.*I2R(i)))*bj_DEGTORAD)set y2=y+100.*I2R(wz)*Sin(((a-36.)+(18.*I2R(i)))*bj_DEGTORAD)set u3=CreateUnit(q5,1747989303,x2,y2,0)call UnitApplyTimedLife(u3,1112045413,12.)call SetUnitAbilityLevel(u3,1093677654,BB)set i=i+1endloopendifset u1=nullset u3=nullset t=nullset q5=nullendfunctionfunction r5 takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)local unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x1=GetSpellTargetX()local real y1=GetSpellTargetY()local real a=Atan2(y1-y,x1-x)local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))call SaveUnitHandle(o,qB,1,GetTriggerUnit())call SaveInteger(o,qB,2,0)call SaveReal(o,qB,3,a)set px[i]=xset qx[i]=ycall TimerStart(t,.02,true,function p5)set t=nullset u1=nullendfunctionfunction u5 takes nothing returns nothingcall TriggerRegisterUnitEvent(Go,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(Ho,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Io,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(lo,B4,EVENT_UNIT_SUMMON)call TriggerRegisterUnitEvent(Jo,B4,EVENT_UNIT_SPELL_EFFECT)endfunctionfunction w5 takes nothing returns booleanif GetLearnedSkill()==1093677650 and IsUnitIllusion(GetTriggerUnit())!=true thencall SetUnitAbilityLevel(GetTriggerUnit(),1093677623,GetUnitAbilityLevel(GetTriggerUnit(),1093677650)+1)endifreturn falseendfunctionfunction y5 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local real x1=GetUnitX(u2)local real y1=GetUnitY(u2)local unit QClocal integer BB=GetUnitAbilityLevel(u1,1093683033)local real r=GetUnitState(u2,UNIT_STATE_MANA)*(.1+(.05*I2R(BB)))local player p=GetOwningPlayer(u1)local real BF=100.+rlocal texttag ttlocal string s=I2S(R2I(BF))local integer fA=(TB(((30.)*1.),$FF))local integer eA=(TB(((30.)*1.),$FF))local integer gA=(TB(((100.)*1.),$FF))local integer hA=(TB(((100.)*1.),$FF))local real oF=64*.071/ $80local real pF=oF*Cos(90*bj_DEGTORAD)local real qF=oF*Sin(90*bj_DEGTORAD)call SetUnitState(u2,UNIT_STATE_MANA,GetUnitState(u2,UNIT_STATE_MANA)-r)set tt=CreateTextTag()call SetTextTagText(tt,s,10.*.023/ $A)call SetTextTagPosUnit(tt,u2,0)call SetTextTagColor(tt,fA,eA,gA,hA)call SetTextTagPermanent(tt,false)call SetTextTagLifespan(tt,2.)call SetTextTagFadepoint(tt,2.)call SetTextTagVelocity(tt,pF,qF)if IsUnitInvisible(u1,GetLocalPlayer())thencall SetTextTagVisibility(tt,false)endifcall GroupEnumUnitsInRange(ce[0],x1,y1,600.,null)loopset QC=FirstOfGroup(ce[0])exitwhen(QC==null)call GroupRemoveUnit(ce[0],QC)if GetUnitState(QC,UNIT_STATE_LIFE)>1 and IsUnitEnemy(QC,p)and Zy(QC,UNIT_TYPE_STRUCTURE)==false thencall UnitDamageTarget(u1,QC,BF,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GreenDragonMissile\\GreenDragonMissile.mdl",QC,"chest"))endifendloopset p=nullset u1=nullset u2=nullset QC=nullset tt=nullset s=nullendfunctionfunction z5 takes nothing returns booleanif GetSpellAbilityId()==1093683033 thencall y5()endifreturn falseendfunctionfunction a5 takes nothing returns booleanif GetLearnedSkill()==1093677651 and IsUnitIllusion(GetTriggerUnit())!=true thencall SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()),1383031411,GetUnitAbilityLevel(GetTriggerUnit(),1093677651))endifreturn falseendfunctionfunction b5 takes nothing returns booleanif GetUnitTypeId(GetSummonedUnit())==1848652361 thencall SetUnitAbilityLevel(GetSummonedUnit(),1093677653,GetUnitAbilityLevel(GetTriggerUnit(),1093677651))endifreturn falseendfunctionfunction c5 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u2=LoadUnitHandle(o,qB,1)local player p=GetOwningPlayer(u2)if LoadInteger(o,qB,2)>=24 thencall DestroyEffect(LoadEffectHandle(o,qB,3))call FlushChildHashtable(o,qB)call DestroyTimer(t)elsecall SaveInteger(o,qB,2,LoadInteger(o,qB,2)+1)if GetPlayerId(p)+1<=5 thencall IssuePointOrderById(u2,$D0012,7000,-7000)elsecall IssuePointOrderById(u2,$D0012,-7000,7000)endifif GetLocalPlayer()==p thencall SelectUnit(u2,false)endifendifset p=nullset t=nullset u2=nullendfunctionfunction D5 takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)call SaveUnitHandle(o,qB,1,GetSpellTargetUnit())call SaveInteger(o,qB,2,0)call SaveEffectHandle(o,qB,3,AddSpecialEffectTarget("Abilities\\Spells\\Other\\TalkToMe\\TalkToMe.mdl",GetSpellTargetUnit(),"overhead"))call TimerStart(t,.25,true,function c5)set t=nullendfunctionfunction E5 takes nothing returns booleanif GetSpellAbilityId()==1093679426 thencall D5()endifreturn falseendfunctionfunction G5 takes nothing returns nothingcall TriggerRegisterUnitEvent(Lo,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Mo,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(No,B4,EVENT_UNIT_SPELL_EFFECT)endfunctionfunction I5 takes nothing returns booleanreturn((GetSpellAbilityId()==1093677645))endfunctionfunction l5 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x1=GetSpellTargetX()local real y1=GetSpellTargetY()local unit u3=CreateUnit(GetOwningPlayer(u1),1747989063,x1,y1,0)call ShowUnit(u3,false)call UnitApplyTimedLife(u3,1112045413,2.)call UnitAddAbility(u3,1093677646)call SetUnitAbilityLevel(u3,1093677646,GetUnitAbilityLevel(u1,1093677645))call IssueImmediateOrderById(u3,$D009F)call UnitAddAbility(u1,1093677647)call SetUnitAbilityLevel(u1,1093677647,GetUnitAbilityLevel(u1,1093677645))call TriggerSleepAction(8.)call UnitRemoveAbility(u1,1093677647)set u1=nullset u3=nullendfunctionfunction K5 takes nothing returns booleanreturn((GetLearnedSkill()==1093677648))endfunctionfunction L5 takes nothing returns nothingcall SetPlayerTechResearchedSwap(1383033958,GetUnitAbilityLevel(GetTriggerUnit(),1093677648),GetOwningPlayer(GetTriggerUnit()))endfunctionfunction N5 takes nothing returns booleanreturn((GetSpellAbilityId()==1093677658))endfunctionfunction O5 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,1)local real x=GetUnitX(u1)local real y=GetUnitY(u1)local unit u3if(LoadReal(o,qB,2)>=8.)thencall FlushChildHashtable(o,qB)call DestroyTimer(t)elsecall SaveReal(o,qB,2,LoadReal(o,qB,2)+.25)set u3=CreateUnit(GetOwningPlayer(u1),1752002674,x,y,0)call UnitApplyTimedLife(u3,1112045413,3.)endifset t=nullset u1=nullset u3=nullendfunctionfunction P5 takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)call SaveUnitHandle(o,qB,1,GetTriggerUnit())call SaveReal(o,qB,2,.0)call TimerStart(t,.25,true,function O5)set t=nullendfunctionfunction R5 takes nothing returns nothingcall TriggerRegisterUnitEvent(Po,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Qo,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Ro,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(So,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterPlayerUnitEventSimple(To,GetOwningPlayer(B4),EVENT_PLAYER_UNIT_DEATH)endfunctionfunction T5 takes nothing returns booleanreturn((GetSpellAbilityId()==1093683283))endfunctionfunction U5 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetSpellTargetX()local real y=GetSpellTargetY()local unit u3local real alocal real x1local real y1local real hB=(60.+(30.*I2R(GetUnitAbilityLevel(u1,1093683283))))set a=GetRandomReal(0,360)*bj_DEGTORADset x1=x+100.*Cos(a)set y1=y+100.*Sin(a)set u3=CreateUnit(GetOwningPlayer(u1),1852271725,x1,y1,GetRandomReal(0,360))call UnitApplyTimedLife(u3,1112045413,hB)set a=GetRandomReal(0,360)*bj_DEGTORADset x1=x+100.*Cos(a)set y1=y+100.*Sin(a)set u3=CreateUnit(GetOwningPlayer(u1),1852271725,x1,y1,GetRandomReal(0,360))call UnitApplyTimedLife(u3,1112045413,hB)set u1=nullset u3=nullendfunctionfunction W5 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local player p=GetOwningPlayer(u1)local real BB=(.5+(.3*I2R(GetUnitAbilityLevel(u1,GetSpellAbilityId()))))local real x2local real y2local real alocal unit QCcall GroupEnumUnitsInRange(ce[7],x,y,350.,null)loopset QC=FirstOfGroup(ce[7])exitwhen(QC==null)call GroupRemoveUnit(ce[7],QC)if(GetUnitState(QC,UNIT_STATE_LIFE)>0 and IsUnitEnemy(QC,p)and(Zy(QC,UNIT_TYPE_MECHANICAL)==false)and(Zy(QC,UNIT_TYPE_STRUCTURE)==false)and(GetUnitPointValue(QC)!=1))thenset x2=GetUnitX(QC)set y2=GetUnitY(QC)set a=Atan2(y2-y,x2-x)*bj_RADTODEGset c8=aset C8=falseset D8=20.set l8=.95set E8=BBset F8=QCset G8=(.2/ 10.)set Ce=1set H8=f9call UnitDamageTarget(u1,QC,200.,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Incinerate\\FireLordDeathExplode.mdl",QC,"chest"))call TriggerExecute(zi)endifendloopset p=nullset u1=nullset QC=nullendfunctionfunction X5 takes nothing returns booleanif((GetSpellAbilityId()==1093678408))thencall W5()endifreturn falseendfunctionfunction Z5 takes nothing returns booleanreturn((GetLearnedSkill()==1093677635)and(IsUnitIllusion(GetTriggerUnit())!=true))endfunctionfunction dT takes nothing returns nothingcall SetUnitAbilityLevel(GetTriggerUnit(),1093683283,(GetUnitAbilityLevelSwapped(1093677635,GetTriggerUnit())+1))endfunctionfunction fT takes nothing returns booleanreturn((GetSpellAbilityId()==1093684802))endfunctionfunction gT takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))set Md[i]=Md[i]+1if Md[i]==2 thenset Nd[i]=AddSpecialEffectTarget("Abilities\\Weapons\\BatTrollMissile\\BatTrollMissile.mdl",u1,"overhead")elseif Md[i]==3 thencall DestroyEffect(Nd[i])endifendifset u1=nullendfunctionfunction iT takes nothing returns booleanreturn((GetUnitTypeId(GetTriggerUnit())==1848651833))endfunctionfunction jT takes nothing returns nothinglocal unit u1=GetTriggerUnit()local player p=GetOwningPlayer(u1)local integer i=(1+GetPlayerId(p))local unit QClocal real x=GetUnitX(u1)local real y=GetUnitY(u1)local real r=((100.+(60.*I2R(GetUnitAbilityLevel(h4[i],1093684802))))+(10.*I2R(GetHeroLevel(h4[i]))))local unit u3local boolean b=falseif Md[i]==3 thenset b=trueset Md[i]=0set u3=CreateUnit(p,1747989063,x,y,0)call UnitApplyTimedLife(u3,1112045413,2.)call UnitAddAbility(u3,1093683280)endifcall GroupEnumUnitsInRange(ce[0],x,y,350.,null)loopset QC=FirstOfGroup(ce[0])exitwhen(QC==null)call GroupRemoveUnit(ce[0],QC)if(GetUnitState(QC,UNIT_STATE_LIFE)>0 and IsUnitEnemy(QC,p)and(Zy(QC,UNIT_TYPE_MECHANICAL)==false)and(Zy(QC,UNIT_TYPE_STRUCTURE)==false)and(GetUnitPointValue(QC)!=1))thencall UnitDamageTargetBJ(h4[i],QC,r,ATTACK_TYPE_HERO,DAMAGE_TYPE_ACID)if b thencall IssueTargetOrderById(u3,$D007F,QC)endifendifendloopset p=nullset u1=nullset u3=nullset QC=nullendfunctionfunction mT takes nothing returns nothingcall TriggerRegisterUnitEvent(Vo,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Wo,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Xo,B4,EVENT_UNIT_HERO_SKILL)set i7[0]=1227895384set i7[1]=1227895373set i7[2]=1227895371set i7[3]=1227895362endfunctionfunction oT takes nothing returns booleanreturn((GetSpellAbilityId()==1093677636))endfunctionfunction pT takes nothing returns nothingcall UnitAddItemByIdSwapped(i7[(GetUnitAbilityLevelSwapped(1093677636,GetTriggerUnit())-1)],GetTriggerUnit())call RemoveItem(bj_lastCreatedItem)endfunctionfunction rT takes nothing returns booleanreturn((GetSpellAbilityId()==1093677637))endfunctionfunction sT takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetSpellTargetX()local real y=GetSpellTargetY()local unit u3=CreateUnit(GetOwningPlayer(u1),1865429061,x,y,0)call UnitApplyTimedLife(u3,1112820806,16.)call SetUnitAbilityLevel(u3,1093677638,GetUnitAbilityLevel(u1,1093677637))call SetUnitAbilityLevel(u3,1093684050,GetUnitAbilityLevel(u1,1093677637))call IssueTargetOrderById(u3,$D0085,u1)set u1=nullset u3=nullendfunctionfunction uT takes nothing returns booleanreturn((GetLearnedSkill()==1093677130)and(IsUnitIllusion(GetTriggerUnit())!=true))endfunctionfunction vT takes nothing returns nothingcall SetPlayerTechResearchedSwap(1383035760,GetUnitAbilityLevelSwapped(1093677130,GetTriggerUnit()),GetOwningPlayer(GetTriggerUnit()))endfunctionfunction xT takes nothing returns nothingcall TriggerRegisterUnitEvent(Zo,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(dp,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(ep,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(fp,B4,EVENT_UNIT_HERO_LEVEL)call TriggerRegisterUnitEvent(gp,B4,EVENT_UNIT_SUMMON)endfunctionfunction zT takes nothing returns booleanreturn((GetSpellAbilityId()==1093677639))endfunctionfunction AT takes nothing returns nothinglocal unit QClocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x1=GetUnitX(u2)local real y1=GetUnitY(u2)local real x2local real y2local real alocal player p=GetOwningPlayer(u1)local unit u3=CreateUnit(GetOwningPlayer(u1),1747989063,x,y,0)call UnitApplyTimedLife(u3,1112045413,1.)call UnitAddAbility(u3,1093684017)call SetUnitAbilityLevel(u3,1093684017,GetUnitAbilityLevel(u1,1093677639))call GroupEnumUnitsInRange(ce[0],x1,y1,500.,null)loopset QC=FirstOfGroup(ce[0])exitwhen(QC==null)call GroupRemoveUnit(ce[0],QC)if(IsUnitIllusion(QC)==false and IsUnitEnemy(QC,p))thencall IssueTargetOrderById(u3,$D0216,QC)endifendloopset p=nullset u1=nullset u3=nullset QC=nullendfunctionfunction BT takes nothing returns booleanreturn((GetSpellAbilityId()==1093683791))endfunctionfunction bT takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,1)local unit u2=LoadUnitHandle(o,qB,2)local real x=GetUnitX(u1)local real y=GetUnitY(u1)local unit u3=CreateUnit(GetOwningPlayer(u1),1747988805,x,y,0)call UnitApplyTimedLife(u3,1112045413,3.)if LoadInteger(o,qB,3)>=6 thencall FlushChildHashtable(o,qB)call DestroyTimer(t)elsecall SaveInteger(o,qB,3,LoadInteger(o,qB,3)+1)if IsUnitAlly(u2,GetOwningPlayer(u1))thencall UnitAddAbility(u3,1093677640)call SetUnitAbilityLevel(u3,1093677640,GetUnitAbilityLevel(u1,1093683791))call IssueTargetOrderById(u3,$D0215,u2)elsecall UnitAddAbility(u3,1093683797)call SetUnitAbilityLevel(u3,1093683797,GetUnitAbilityLevel(u1,1093683791))call IssueTargetOrderById(u3,$D0097,u2)endifendifset t=nullset u1=nullset u2=nullset u3=nullendfunctionfunction CT takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)local unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local unit u3=CreateUnit(GetOwningPlayer(u1),1747988805,x,y,0)call UnitApplyTimedLife(u3,1112045413,3.)if IsUnitAlly(u2,GetOwningPlayer(u1))thencall UnitAddAbility(u3,1093677640)call SetUnitAbilityLevel(u3,1093677640,GetUnitAbilityLevel(u1,1093683791))call IssueTargetOrderById(u3,$D0215,u2)elsecall UnitAddAbility(u3,1093683797)call SetUnitAbilityLevel(u3,1093683797,GetUnitAbilityLevel(u1,1093683791))call IssueTargetOrderById(u3,$D0097,u2)endifcall SaveUnitHandle(o,qB,1,u1)call SaveUnitHandle(o,qB,2,u2)call SaveInteger(o,qB,3,0)call TimerStart(t,1.,true,function bT)set t=nullset u1=nullset u2=nullendfunctionfunction DT takes nothing returns booleanreturn((GetSpellAbilityId()==1093677643))endfunctionfunction ET takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetSpellTargetX()local real y=GetSpellTargetY()local unit u3=CreateUnit(GetOwningPlayer(u1),1747989063,x,y,0)call UnitApplyTimedLife(u3,1112045413,4.)call UnitAddAbility(u3,1093677642)call SetUnitAbilityLevel(u3,1093677642,GetUnitAbilityLevel(u1,1093677643))call IssuePointOrderById(u3,$D0079,x,y)call UnitAddAbility(u3,1093677641)set u1=nullset u3=nullendfunctionfunction GT takes nothing returns booleanreturn((GetHeroLevel(GetTriggerUnit())>6))endfunctionfunction HT takes nothing returns nothingcall SetPlayerTechResearchedSwap(1383036787,((GetHeroLevel(GetTriggerUnit())-6)/ 2),GetOwningPlayer(GetTriggerUnit()))endfunctionfunction lT takes nothing returns booleanreturn((GetUnitTypeId(GetSummonedUnit())==1752197240))endfunctionfunction JT takes nothing returns nothingcall SetUnitAbilityLevelSwapped(1097889894,GetTriggerUnit(),GetUnitAbilityLevel(GetTriggerUnit(),1093678136))endfunctionfunction LT takes nothing returns nothingcall TriggerRegisterUnitEvent(kp,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(op,B4,EVENT_UNIT_SPELL_EFFECT)call EnableTrigger(np)endfunctionfunction NT takes nothing returns booleanreturn((GetSpellAbilityId()==1093677876))endfunctionfunction OT takes nothing returns nothinglocal unit QClocal unit u1=GetTriggerUnit()local player p=GetOwningPlayer(u1)local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x1=GetSpellTargetX()local real y1=GetSpellTargetY()local unit u3=CreateUnit(GetOwningPlayer(u1),1747988805,x,y,0)call UnitApplyTimedLife(u3,1112045413,10.)call UnitAddAbility(u3,1093677877)call SetUnitAbilityLevel(u3,1093677877,GetUnitAbilityLevel(u1,1093677876))call GroupEnumUnitsInRange(ce[0],x1,y1,410.,null)loopset QC=FirstOfGroup(ce[0])exitwhen(QC==null)call GroupRemoveUnit(ce[0],QC)if(IsUnitEnemy(QC,p)and GetUnitState(QC,UNIT_STATE_LIFE)>1 and(Zy(QC,UNIT_TYPE_STRUCTURE)==false))thencall IssueTargetOrderById(u3,$D022F,QC)endifendloopset p=nullset u1=nullset u3=nullset QC=nullendfunctionfunction QT takes nothing returns booleanreturn(GetUnitAbilityLevel(GetTriggerUnit(),1110454582)>0)endfunctionfunction RT takes nothing returns nothinglocal unit QClocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local unit u3=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1747989063,x,y,0)call ShowUnit(u3,false)call UnitApplyTimedLife(u3,1112045413,4.)call UnitAddAbility(u3,1093683513)call IssueTargetOrderById(u3,$D006B,u1)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\NightElf\\FaerieDragonInvis\\FaerieDragon_Invis.mdl",u1,"overhead"))call GroupEnumUnitsInRange(ce[0],x,y,700.,null)loopset QC=FirstOfGroup(ce[0])exitwhen QC==nullcall GroupRemoveUnit(ce[0],QC)if((GetUnitPointValue(QC)==121)and(IsUnitIllusion(QC)!=true)and(IsUnitEnemy(u1,GetOwningPlayer(QC)))and(GetUnitAbilityLevel(QC,1093677879)!=0))thencall SetUnitState(u1,UNIT_STATE_MANA,((GetUnitState(u1,UNIT_STATE_MANA)+7.)-(7.*I2R(GetUnitAbilityLevel(QC,1093677879)))))endifendloopset u3=nullset u1=nullset QC=nullendfunctionfunction TT takes nothing returns booleanreturn((GetSpellAbilityId()==1093678148))endfunctionfunction UT takes nothing returns nothingcall SetWidgetLife(GetTriggerUnit(),(GetUnitStateSwap(UNIT_STATE_LIFE,GetTriggerUnit())+(150.+(200.*I2R(GetUnitAbilityLevelSwapped(1093678148,GetTriggerUnit()))))))endfunctionfunction WT takes nothing returns nothingcall TriggerRegisterUnitEvent(rp,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(qp,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(tp,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(vp,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(wp,B4,EVENT_UNIT_SPELL_CHANNEL)endfunctionfunction YT takes nothing returns booleanreturn((GetSpellAbilityId()==1093678149))endfunctionfunction ZT takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local real x=GetSpellTargetX()local real y=GetSpellTargetY()local real hB=(8.+(2.*I2R(GetUnitAbilityLevel(u1,1093678149))))local unit u3local integer i=1loopexitwhen i>3set u3=CreateUnit(GetOwningPlayer(u1),1869838129,x,y,0)call UnitApplyTimedLife(u3,1112045413,hB)call IssueTargetOrderById(u3,$D000F,u2)set i=i+1endloopset u1=nullset u2=nullset u3=nullendfunctionfunction eU takes nothing returns booleanreturn((GetLearnedSkill()==1093678149))endfunctionfunction fU takes nothing returns nothingcall AddPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()),1383031398,1)if((GetTriggerExecCount(GetTriggeringTrigger())==1))thencall TriggerRegisterAnyUnitEventBJ(sp,EVENT_PLAYER_UNIT_ATTACKED)endifendfunctionfunction hU takes nothing returns booleanreturn GetUnitTypeId(GetAttacker())==1869838129 and Zy(GetTriggerUnit(),UNIT_TYPE_STRUCTURE)==falseendfunctionfunction iU takes nothing returns nothinglocal unit u1=GetAttacker()local integer i=GetPlayerId(GetOwningPlayer(u1))+1call UnitDamageTarget(u1,GetTriggerUnit(),I2R(GetHeroInt(py[i],true))*.5,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)set u1=nullendfunctionfunction kU takes nothing returns booleanreturn((GetLearnedSkill()==1093677881))endfunctionfunction mU takes nothing returns nothingcall SetPlayerTechResearchedSwap(1383031154,GetUnitAbilityLevel(GetTriggerUnit(),1093677881),GetOwningPlayer(GetTriggerUnit()))endfunctionfunction oU takes nothing returns booleanreturn((GetSpellAbilityId()==1093677889))endfunctionfunction pU takes nothing returns nothingset B8[122]=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1747989063,GetSpellTargetX(),GetSpellTargetY(),0)call UnitApplyTimedLife(B8[122],1112820806,12.)endfunctionfunction rU takes nothing returns booleanreturn((GetSpellAbilityId()==1093677889))endfunctionfunction sU takes nothing returns nothinglocal real x=GetSpellTargetX()local real y=GetSpellTargetY()local real x1=GetUnitX(ct)local real y1=GetUnitY(ct)local real x2=GetUnitX(Cu)local real y2=GetUnitY(Cu)local real sF=SquareRoot(Pow(x1-x,2)+Pow(y1-y,2))local real tF=SquareRoot(Pow(x2-x,2)+Pow(y2-y,2))if sF<=950. or tF<=950. thencall IssueImmediateOrderById(GetTriggerUnit(),$D0004)endifendfunctionfunction uU takes nothing returns nothingcall SetPlayerAbilityAvailable(GetOwningPlayer(B4),1093687123,false)call TriggerRegisterUnitEvent(yp,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(zp,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(Ap,B4,EVENT_UNIT_ISSUED_ORDER)endfunctionfunction wU takes nothing returns booleanreturn((GetSpellAbilityId()==1093677894))endfunctionfunction xU takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x1=GetSpellTargetX()local real y1=GetSpellTargetY()local effect e=AddSpecialEffectTarget("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl",u1,"weapon")local unit u3=CreateUnit(GetOwningPlayer(u1),1747988805,x,y,0)call UnitApplyTimedLife(u3,1112045413,10.)call SetUnitFlyHeight(u3,1000.,.0)call UnitAddAbility(u3,1093677893)call SetUnitAbilityLevel(u3,1093677893,GetUnitAbilityLevel(u1,1093677894))call IssuePointOrderById(u3,$D02B8,x1,y1)call UnitAddAbility(u1,1093683521)call SetUnitAbilityLevel(u1,1093683521,GetUnitAbilityLevel(u1,1093677894))call TriggerSleepAction(10.)call UnitRemoveAbility(u1,1093683521)call DestroyEffect(e)set u1=nullset u3=nullset e=nullendfunctionfunction zU takes nothing returns booleanreturn((GetLearnedSkill()==1093686871))endfunctionfunction AU takes nothing returns nothingcall IncUnitAbilityLevel(GetTriggerUnit(),1093687122)endfunctionfunction BU takes nothing returns nothingif GetIssuedOrderId()==$D00D2 thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call UnitRemoveAbility(GetTriggerUnit(),1093677892)elseif GetIssuedOrderId()==$D00D1 thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIem\\AIemTarget.mdl",GetTriggerUnit(),"origin"))call UnitAddAbility(GetTriggerUnit(),1093677892)endifendifendfunctionfunction CU takes nothing returns nothingcall TriggerRegisterUnitEvent(Bp,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(bp,B4,EVENT_UNIT_SPELL_CHANNEL)call TriggerRegisterUnitEvent(Cp,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(cp,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(Dp,B4,EVENT_UNIT_SPELL_EFFECT)set Wd[(1+GetPlayerId(GetOwningPlayer(B4)))]=CreateGroup()call SetPlayerAbilityAvailable(GetOwningPlayer(B4),1093685553,false)endfunctionfunction DU takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u=LoadUnitHandle(o,qB,1)local player p=GetOwningPlayer(u)call FlushChildHashtable(o,qB)call DestroyTimer(t)call SetPlayerAbilityAvailable(p,1093685553,false)set t=nullset p=nullset u=nullendfunctionfunction EU takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,1)local real a=LoadReal(o,qB,3)local real dt=LoadReal(o,qB,4)local real x=GetUnitX(u1)+dt*Cos(a)local real y=GetUnitY(u1)+dt*Sin(a)local integer ilocal boolean blocal unit u3local real rlocal unit QCcall SaveReal(o,qB,2,LoadReal(o,qB,2)+1.)set r=LoadReal(o,qB,2)call SetUnitX(u1,x)call SetUnitY(u1,y)call SetUnitFlyHeight(u1,((-1.5*Pow((r-18.),2.))+486.),.0)if r>=36. thencall SetUnitTimeScale(u1,100.*.01)call UnitRemoveAbility(u1,1093677896)call UnitRemoveAbility(u1,1093677897)call SetUnitPathing(u1,true)call PauseUnit(u1,false)set i=0call GroupEnumUnitsInRange(ce[0],x,y,260.,null)loopset QC=FirstOfGroup(ce[0])exitwhen(QC==null)or(i==1)call GroupRemoveUnit(ce[0],QC)if GetUnitState(QC,UNIT_STATE_LIFE)>0 and Zy(QC,UNIT_TYPE_STRUCTURE)==false and IsUnitEnemy(QC,GetOwningPlayer(u1))and GetUnitPointValue(QC)!=1 and GetUnitAbilityLevel(QC,1097625443)==0 thenset i=1endifendloopcall GroupClear(ce[0])call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\ThunderClap\\ThunderClapCaster.mdl",x,y))call DestroyEffect(LoadEffectHandle(o,qB,5))set b=LoadBoolean(o,qB,6)call FlushChildHashtable(o,qB)call DestroyTimer(t)if i==1 and b thenset u3=CreateUnit(GetOwningPlayer(u1),1747988805,x,y,0)call UnitApplyTimedLife(u3,1112045413,3.)call UnitAddAbility(u3,1093677898)call SetUnitAbilityLevel(u3,1093677898,GetUnitAbilityLevel(u1,1093677895))call IssueImmediateOrderById(u3,$D009F)call SetPlayerAbilityAvailable(GetOwningPlayer(u1),1093685553,true)call SetUnitAbilityLevel(u1,1093685553,GetUnitAbilityLevel(u1,1093677895))set t=CreateTimer()call SaveUnitHandle(o,GetHandleId(t),1,u1)call TimerStart(t,4.,false,function DU)elseset u3=CreateUnit(GetOwningPlayer(u1),1747988805,x,y,0)call UnitApplyTimedLife(u3,1112045413,3.)call UnitAddAbility(u3,1093685337)call SetUnitAbilityLevel(u3,1093685337,GetUnitAbilityLevel(u1,1093677895))call IssueImmediateOrderById(u3,$D009F)endifendifset t=nullset QC=nullset u1=nullset u3=nullendfunctionfunction FU takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x1=GetSpellTargetX()local real y1=GetSpellTargetY()local real a=Atan2(y1-y,x1-x)local real dt=SquareRoot(Pow((x1-x),2)+Pow((y1-y),2))local timer t=CreateTimer()local integer qB=GetHandleId(t)local player p=GetOwningPlayer(u1)local real tB=(.03/ 1.8)call SaveUnitHandle(o,qB,1,u1)call SaveReal(o,qB,2,.0)call SaveReal(o,qB,3,a)call SaveReal(o,qB,4,dt/ 41.)call SaveEffectHandle(o,qB,5,AddSpecialEffectTarget("Abilities\\Weapons\\ZigguratMissile\\ZigguratMissile.mdl",u1,"weapon"))if GetSpellAbilityId()==1093677895 thencall SaveBoolean(o,qB,6,true)elsecall SaveBoolean(o,qB,6,false)endifcall PauseUnit(u1,true)call SetUnitPathing(u1,false)call UnitAddAbility(u1,1093677896)call UnitAddAbility(u1,1093677897)call SetUnitTimeScale(u1,40.*.01)call SetUnitAnimation(u1,"attack slam")call TimerStart(t,tB,true,function EU)if(GetSpellAbilityId()==1093685553)thencall SetPlayerAbilityAvailable(p,1093685553,false)endifset p=nullset t=nullset u1=nullendfunctionfunction GU takes nothing returns booleanif GetSpellAbilityId()==1093677895 or GetSpellAbilityId()==1093685553 thencall FU()endifreturn falseendfunctionfunction IU takes nothing returns booleanlocal integer id=GetSpellAbilityId()if id==1093685553 or id==1093677895 and IsTerrainPathable(GetSpellTargetX(),GetSpellTargetY(),PATHING_TYPE_WALKABILITY)thencall DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,3.,"TRIGSTR_11422")call IssueNeutralImmediateOrderById(GetOwningPlayer(GetTriggerUnit()),GetTriggerUnit(),$D0004)endifreturn falseendfunctionfunction JU takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,1)local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))local unit u2=Od[i]local location p1=Rd[i]local location p2=Sd[i]set Qd[i]=(Qd[i]+1)call MoveLocation(p1,GetUnitX(u1),GetUnitY(u1))call MoveLocation(p2,GetUnitX(u2),GetUnitY(u2))call MoveLightningLoc(Td[i],p1,p2)if(((DistanceBetweenPoints(p1,p2)>=851.))or((IsUnitAliveBJ(u2)==false))or((Qd[i]>=61))or((IsUnitAliveBJ(u1)==false)))thencall DestroyEffect(LoadEffectHandle(o,qB,2))call DestroyEffect(LoadEffectHandle(o,qB,3))call FlushChildHashtable(o,qB)call DestroyTimer(t)call DestroyLightning(Td[i])call RemoveLocation(p1)call RemoveLocation(p2)elseif((ModuloInteger(Qd[i],$A)==0))thencall UnitDamageTargetBJ(u1,u2,Pd[i],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)call SetWidgetLife(u1,(GetUnitState(u1,UNIT_STATE_LIFE)+((GetUnitState(u1,UNIT_STATE_MAX_LIFE)-GetUnitState(u1,UNIT_STATE_LIFE))*.15)))endifendifset t=nullset u1=nullset u2=nullset p1=nullset p2=nullendfunctionfunction KU takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,1)local unit u2=LoadUnitHandle(o,qB,6)local player p=GetOwningPlayer(u1)local integer i=GetPlayerId(p)+1local player p2=GetOwningPlayer(u2)local integer i2=GetPlayerId(p2)+1if j9[i2]==false thencall SaveEffectHandle(o,qB,2,AddSpecialEffectTarget("Abilities\\Spells\\Other\\Drain\\DrainCaster.mdl",u1,"chest"))call SaveEffectHandle(o,qB,3,AddSpecialEffectTarget("Abilities\\Spells\\Other\\Drain\\DrainCaster.mdl",u2,"chest"))set Od[i]=u2set Pd[i]=(25.+(35.*I2R(GetUnitAbilityLevel(u1,1093685338))))set Qd[i]=0set Rd[i]=GetUnitLoc(u1)set Sd[i]=GetUnitLoc(u2)set Td[i]=AddLightningLoc("DRAL",Rd[i],Sd[i])call TimerStart(t,.1,true,function JU)endifset j9[i2]=falseset t=nullset u1=nullset u2=nullset p=nullset p2=nullendfunctionfunction LU takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)local unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local player p=GetOwningPlayer(u1)local integer i=GetPlayerId(p)+1local real tB=(.0001)call SaveUnitHandle(o,qB,1,u1)call SaveUnitHandle(o,qB,6,u2)call TimerStart(t,tB,false,function KU)set t=nullset u1=nullset u2=nullset p=nullendfunctionfunction MU takes nothing returns booleanif GetSpellAbilityId()==1093687369 thencall LU()endifreturn falseendfunctionfunction OU takes nothing returns booleanif GetLearnedSkill()==1093677899 thencall UnitAddAbility(GetTriggerUnit(),1093677900)call SetUnitAbilityLevel(GetTriggerUnit(),1093677900,GetUnitAbilityLevel(GetTriggerUnit(),1093677899))endifreturn falseendfunctionfunction QU takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,1)local player p=GetOwningPlayer(u1)local integer i=GetPlayerId(p)+1local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real a=Vd[i]local real x3=GetUnitX(h4[i])local real y3=GetUnitY(h4[i])local real x1local real y1local unit QClocal real x2local real y2local real rlocal real a1if(Ud[i]>=57)thencall FlushChildHashtable(o,qB)call DestroyTimer(t)call KillUnit(u1)call GroupClear(Wd[i])elseset Ud[i]=(Ud[i]+1)set x1=x+23.*Cos(a)set y1=y+23.*Sin(a)call SetUnitX(u1,x1)call SetUnitY(u1,y1)call GroupEnumUnitsInRange(ce[0],x1,y1,280.,null)loopset QC=FirstOfGroup(ce[0])exitwhen QC==nullcall GroupRemoveUnit(ce[0],QC)if IsUnitInGroup(QC,Wd[i])==false and IsUnitEnemy(QC,p)and GetUnitPointValue(QC)!=1 and GetUnitState(QC,UNIT_STATE_LIFE)>1 and Zy(QC,UNIT_TYPE_MECHANICAL)==false and Zy(QC,UNIT_TYPE_STRUCTURE)==false thencall GroupAddUnit(Wd[i],QC)set x2=GetUnitX(QC)set y2=GetUnitY(QC)set a1=Atan2(y3-y2,x3-x2)*bj_RADTODEGset r=(GetUnitState(QC,UNIT_STATE_LIFE)*(.15+(.05*I2R(GetUnitAbilityLevel(h4[i],1093686083)))))if r<=400. thenset r=400.endifcall UnitDamageTarget(h4[i],QC,r,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)if GetOwningPlayer(QC)!=Player($C)thenset c8=a1set C8=trueset D8=30.set l8=.95set E8=2.set F8=QCset G8=(.3/ 10.)set H8=nullcall TriggerExecute(zi)endifendifendloopendifset p=nullset t=nullset u1=nullset QC=nullendfunctionfunction RU takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)local unit u1=GetTriggerUnit()local player p=GetOwningPlayer(u1)local integer i=GetPlayerId(p)+1local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x1=GetSpellTargetX()local real y1=GetSpellTargetY()local real a=Atan2(y1-y,x1-x)set Vd[i]=aset Ud[i]=0call SaveUnitHandle(o,qB,1,CreateUnit(p,1697656910,x,y,a*bj_RADTODEG))call TimerStart(t,.02,true,function QU)set t=nullset u1=nullset p=nullendfunctionfunction SU takes nothing returns booleanif GetSpellAbilityId()==1093686083 thencall RU()endifreturn falseendfunctionfunction UU takes nothing returns booleanreturn((GetEventDamage()>=35.)and(GetUnitAbilityLevel(GetTriggerUnit(),1110455895)>0)and((GetUnitPointValue(GetEventDamageSource())==1)or(GetUnitPointValue(GetEventDamageSource())==$DAC)or(Zy(GetEventDamageSource(),UNIT_TYPE_HERO))))endfunctionfunction VU takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))if((X4[i]<=0))thencall UnitRemoveAbility(u1,1110455895)call DisableTrigger(Xd[i])elseset X4[i]=(X4[i]-1)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\OrbOfDeath\\AnnihilationMissile.mdl",u1,"chest"))call SetUnitState(u1,UNIT_STATE_LIFE,GetUnitState(u1,UNIT_STATE_LIFE)+GetEventDamage())endifset u1=nullendfunctionfunction WU takes nothing returns nothinglocal unit u1=B4local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))set Xd[i]=CreateTrigger()call TriggerAddCondition(Xd[i],Condition(function UU))call TriggerAddAction(Xd[i],function VU)call TriggerRegisterUnitEvent(Xd[i],u1,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(Fp,B4,EVENT_UNIT_SPELL_EFFECT)set u1=nullendfunctionfunction YU takes nothing returns booleanreturn((GetSpellAbilityId()==1093684557))endfunctionfunction ZU takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))set X4[i]=(GetUnitAbilityLevel(u1,1093684557)-1)call EnableTrigger(Xd[i])set u1=nullendfunctionfunction eV takes nothing returns nothingcall TriggerRegisterUnitEvent(Hp,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Ip,B4,EVENT_UNIT_SPELL_EFFECT)endfunctionfunction gV takes nothing returns booleanreturn((GetSpellAbilityId()==1093677906))endfunctionfunction hV takes nothing returns nothinglocal unit u3=CreateUnit(GetOwningPlayer(GetTriggerUnit()),1701672039,GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit()),270.)set u3=nullendfunctionfunction jV takes nothing returns booleanreturn((GetSpellAbilityId()==1093682231))endfunctionfunction kV takes nothing returns nothingset bj_forLoopAIndex=0set bj_forLoopAIndexEnd=5loopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndif((GetItemTypeId(UnitItemInSlot(GetTriggerUnit(),bj_forLoopAIndex))==1718378855))thenset K7[bj_forLoopAIndex]=GetItemTypeId(UnitItemInSlot(GetTriggerUnit(),bj_forLoopAIndex))call RemoveItem(UnitItemInSlot(GetTriggerUnit(),bj_forLoopAIndex))elseset K7[bj_forLoopAIndex]=GetItemTypeId(null)endifset bj_forLoopAIndex=bj_forLoopAIndex+1endloopcall UnitResetCooldown(GetTriggerUnit())set bj_forLoopAIndex=0set bj_forLoopAIndexEnd=5loopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndif((K7[bj_forLoopAIndex]!=GetItemTypeId(null)))thencall UnitAddItemToSlotById(GetTriggerUnit(),1718378855,bj_forLoopAIndex)endifset bj_forLoopAIndex=bj_forLoopAIndex+1endloopendfunctionfunction nV takes nothing returns nothingcall TriggerRegisterUnitEvent(Jp,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Kp,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Lp,B4,EVENT_UNIT_SPELL_EFFECT)set de[(1+GetPlayerId(GetOwningPlayer(B4)))]=CreateGroup()endfunctionfunction pV takes nothing returns booleanreturn((GetSpellAbilityId()==1093677909))endfunctionfunction qV takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,1)local player p=GetOwningPlayer(u1)local integer i=GetPlayerId(p)+1local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real a=ee[i]local real x1local real y1local unit QCset Yd[i]=Yd[i]+50set x1=x+50*Cos(a)set y1=y+50*Sin(a)if(Yd[i]>Zd[i])thencall SetUnitPosition(u1,x1,y1)call GroupClear(de[i])call FlushChildHashtable(o,qB)call DestroyTimer(t)elsecall SetUnitX(u1,x1)call SetUnitY(u1,y1)call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl",x1,y1))call GroupEnumUnitsInRange(ce[0],x1,y1,250.,null)loopset QC=FirstOfGroup(ce[0])exitwhen QC==nullcall GroupRemoveUnit(ce[0],QC)if((IsUnitInGroup(QC,de[i])==false)and(IsUnitEnemy(QC,p))and GetUnitState(QC,UNIT_STATE_LIFE)>0 and(Zy(QC,UNIT_TYPE_STRUCTURE)==false))thencall GroupAddUnit(de[i],QC)call UnitDamageTargetBJ(u1,QC,(100.+(100.*I2R(fe[i]))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)endifendloopendifset p=nullset t=nullset u1=nullset QC=nullendfunctionfunction rV takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)local unit u1=GetTriggerUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x1=GetSpellTargetX()local real y1=GetSpellTargetY()local real a=Atan2(y1-y,x1-x)set ee[i]=aset Zd[i]=SquareRoot((Pow((x1-x),2))+Pow((y1-y),2))set Yd[i]=.0set fe[i]=GetUnitAbilityLevel(u1,1093677909)call SaveUnitHandle(o,qB,1,u1)call TimerStart(t,.02,true,function qV)set t=nullset u1=nullendfunctionfunction tV takes nothing returns nothinglocal unit QClocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local player p=GetOwningPlayer(u1)local unit u3set u3=CreateUnit(p,1747989063,x,y,0)call UnitAddAbility(u3,1093677911)call UnitApplyTimedLife(u3,1112045413,10.)call GroupEnumUnitsInRange(ce[0],x,y,475.,null)loopset QC=FirstOfGroup(ce[0])exitwhen(QC==null)call GroupRemoveUnit(ce[0],QC)if(GetUnitState(QC,UNIT_STATE_LIFE)>1 and IsUnitEnemy(QC,p)and Zy(QC,UNIT_TYPE_STRUCTURE)==false)thencall IssueTargetOrderById(u3,$D0267,QC)endifendloopset u1=nullset u3=nullset QC=nullendfunctionfunction uV takes nothing returns booleanif GetSpellAbilityId()==1093677910 thencall tV()endifreturn falseendfunctionfunction wV takes nothing returns booleanreturn((GetSpellAbilityId()==1093677913))endfunctionfunction xV takes nothing returns nothinglocal unit QClocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,1)local player p=GetOwningPlayer(u1)local real x=GetUnitX(u1)local real y=GetUnitY(u1)local integer i=(1+GetPlayerId(p))local real x2local real y2local real BB=he[GetUnitAbilityLevel(u1,1093677913)]if(ie[i]>=6)thencall FlushChildHashtable(o,qB)call DestroyTimer(t)elseset ie[i]=(ie[i]+1)call GroupEnumUnitsInRange(ce[0],x,y,675.,null)loopset QC=FirstOfGroup(ce[0])exitwhen(QC==null)call GroupRemoveUnit(ce[0],QC)if((Zy(QC,UNIT_TYPE_HERO))and IsUnitEnemy(QC,p)and(GetUnitPointValue(QC)!=1))thenset x2=GetUnitX(QC)set y2=GetUnitY(QC)call UnitDamageTargetBJ(u1,QC,(GetUnitState(QC,UNIT_STATE_MAX_LIFE)*BB),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNIVERSAL)call SetUnitState(QC,UNIT_STATE_MANA,(GetUnitState(QC,UNIT_STATE_MANA)-(GetUnitState(QC,UNIT_STATE_MAX_LIFE)*BB)))call IssueImmediateOrderById(QC,$D0004)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Doom\\DoomDeath.mdl",x2,y2))endifendloopendifset u1=nullset QC=nullset t=nullset p=nullendfunctionfunction yV takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)local unit u1=GetTriggerUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))set he[1]=.05set he[2]=.06set he[3]=.07set ie[i]=0call SaveUnitHandle(o,qB,1,u1)call TimerStart(t,1.2,true,function xV)set t=nullset u1=nullendfunctionfunction AV takes nothing returns nothingcall TriggerRegisterUnitEvent(Np,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(Op,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Pp,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Qp,B4,EVENT_UNIT_TARGET_IN_RANGE)call TriggerRegisterUnitEvent(Rp,B4,EVENT_UNIT_ATTACKED)endfunctionfunction BV takes nothing returns booleanreturn((GetLearnedSkill()==1093682263))endfunctionfunction bV takes nothing returns nothinglocal unit u1=LoadUnitHandle(o,GetHandleId(GetExpiredTimer()),-$5E9EB4B3)if GetUnitAbilityLevel(u1,1110455368)>0 thenif((GetUnitAbilityLevel(u1,1093682265)==0))thencall UnitAddAbility(u1,1093682265)endifcall SetWidgetLife(u1,(GetUnitState(u1,UNIT_STATE_LIFE)+(6.*I2R(GetUnitAbilityLevel(u1,1093682263)))))elsecall UnitRemoveAbility(u1,1093682265)endifset u1=nullendfunctionfunction CV takes nothing returns nothingcall SetUnitAbilityLevel(GetEnumUnit(),1093682264,GetUnitAbilityLevel(GetTriggerUnit(),1093682263))endfunctionfunction cV takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))local timer hFlocal group g=Vz(GetOwningPlayer(u1),1852665957)if((GetUnitAbilityLevel(u1,1093682263)==1))thenset hF=CreateTimer()call SaveUnitHandle(o,GetHandleId(hF),-$5E9EB4B3,u1)call TimerStart(hF,1.,true,function bV)endifcall ForGroup(g,function CV)call DestroyGroup(g)set u1=nullset g=nullset hF=nullendfunctionfunction EV takes nothing returns booleanreturn((GetSpellAbilityId()==1093682263))endfunctionfunction FV takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer qB=GetHandleId(u1)local real x=GetSpellTargetX()local real y=GetSpellTargetY()local integer GV=(GetUnitAbilityLevel(u1,1093682263)+1)local integer i=1local integer Db=GVlocal integer i2local integer Eblocal unit u3=CreateUnit(GetOwningPlayer(u1),1852665957,x,y,0)call SetUnitAbilityLevel(u3,1093682264,GetUnitAbilityLevel(u1,1093682263))loopexitwhen i>GVif(LoadUnitHandle(ge,qB,i)==null)thencall SaveUnitHandle(ge,qB,i,u3)returnelseif(i==GV)thencall KillUnit(LoadUnitHandle(ge,qB,1))call RemoveUnit(LoadUnitHandle(ge,qB,1))set i2=1set Eb=(GV-1)loopexitwhen i2>Ebcall SaveUnitHandle(ge,qB,i2,LoadUnitHandle(ge,qB,(i2+1)))set i2=i2+1endloopcall SaveUnitHandle(ge,qB,GV,u3)endifendifset i=i+1endloopset u1=nullset u3=nullendfunctionfunction IV takes nothing returns booleanreturn((GetSpellAbilityId()==1093682266))endfunctionfunction lV takes nothing returns nothinglocal unit u1=GetEnumUnit()local unit u3=CreateUnit(GetOwningPlayer(oy[0]),1747989063,GetUnitX(u1),GetUnitY(u1),0)call ShowUnit(u3,false)call UnitApplyTimedLife(u3,1112045413,1.)call UnitAddAbility(u3,1093677624)call IssueTargetOrderById(u3,$D007F,u1)set u1=nullset u3=nullendfunctionfunction JV takes nothing returns booleanreturn(GetUnitAbilityLevel(GetFilterUnit(),1110455369)>0)endfunctionfunction KV takes nothing returns nothinglocal unit u1=GetTriggerUnit()local group g=CreateGroup()local location p=GetUnitLoc(u1)call TriggerSleepAction(.0)call GroupEnumUnitsInRangeOfLoc(g,p,600.,Condition(function JV))call RemoveLocation(p)call TriggerSleepAction(4.)set oy[0]=u1call ForGroup(g,function lV)call DestroyGroup(g)set u1=nullset p=nullset g=nullendfunctionfunction MV takes nothing returns booleanreturn((GetRandomInt(1,100)<=$D)and(GetUnitAbilityLevel(GetTriggerUnit(),1093682480)!=0)and Zy(GetEventTargetUnit(),UNIT_TYPE_STRUCTURE)==false and(je[(1+GetPlayerId(GetOwningPlayer(GetTriggerUnit())))]==false))endfunctionfunction NV takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real a=GetUnitFacing(u1)*bj_DEGTORADlocal real x2=x+10.*Cos(a)local real y2=y+10.*Sin(a)local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))local unit u3=CreateUnit(GetOwningPlayer(u1),1747989063,x,y,0)call UnitApplyTimedLife(u3,1112045413,1.)call ShowUnit(u3,false)set u3=CreateUnit(GetOwningPlayer(u1),1747988805,x,y,0)call UnitApplyTimedLife(u3,1112045413,5.)call UnitAddAbility(u3,1093682481)call SetUnitAbilityLevel(u3,1093682481,GetUnitAbilityLevel(u1,1093682480))call IssuePointOrderById(u3,$D0271,x2,y2)set je[i]=truecall TriggerSleepAction(.73)set je[i]=falseset u1=nullset u3=nullendfunctionfunction PV takes nothing returns booleanreturn((GetRandomInt(1,100)<=$D)and(GetUnitAbilityLevel(GetTriggerUnit(),1093682480)!=0)and Zy(GetAttacker(),UNIT_TYPE_STRUCTURE)==false and(je[(1+GetPlayerId(GetOwningPlayer(GetTriggerUnit())))]==false))endfunctionfunction QV takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetAttacker()local real x=GetUnitX(u2)local real y=GetUnitY(u2)local real a=GetUnitFacing(u2)*bj_DEGTORADlocal real x2=x+10.*Cos(a)local real y2=y+10.*Sin(a)local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))local unit u3=CreateUnit(GetOwningPlayer(u1),1747989063,x,y,0)call UnitApplyTimedLife(u3,1112045413,1.)call ShowUnit(u3,false)set u3=CreateUnit(GetOwningPlayer(u1),1747988805,x,y,0)call UnitApplyTimedLife(u3,1112045413,5.)call UnitAddAbility(u3,1093682481)call SetUnitAbilityLevel(u3,1093682481,GetUnitAbilityLevel(u1,1093682480))call IssuePointOrderById(u3,$D0271,x2,y2)set je[i]=truecall TriggerSleepAction(.73)set je[i]=falseset u1=nullset u2=nullset u3=nullendfunctionfunction SV takes nothing returns nothingcall TriggerRegisterUnitEvent(Tp,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Up,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Vp,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(Wp,B4,EVENT_UNIT_SPELL_EFFECT)set ke[(1+GetPlayerId(GetOwningPlayer(B4)))]=CreateTimer()endfunctionfunction UV takes nothing returns booleanreturn((GetSpellAbilityId()==1093681737))endfunctionfunction VV takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x1=GetSpellTargetX()local real y1=GetSpellTargetY()local unit QClocal real BF=(100.*I2R(GetUnitAbilityLevel(u1,1093681737)))local real r=27.+13.*GetUnitAbilityLevel(u1,1093681737)local player p=GetOwningPlayer(u1)call GroupEnumUnitsInRange(ce[0],x1,y1,500.,null)loopset QC=FirstOfGroup(ce[0])exitwhen QC==nullcall GroupRemoveUnit(ce[0],QC)if(GetUnitState(QC,UNIT_STATE_LIFE)>1 and IsUnitEnemy(QC,p)and(Zy(QC,UNIT_TYPE_STRUCTURE)==false)and(GetUnitPointValue(QC)!=1))thencall SetUnitState(u1,UNIT_STATE_LIFE,GetUnitState(u1,UNIT_STATE_LIFE)+r)call UnitDamageTargetBJ(u1,QC,BF,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\AnimateDead\\AnimateDeadTarget.mdl",QC,"chest"))endifendloopset p=nullset u1=nullset QC=nullendfunctionfunction XV takes nothing returns booleanreturn((GetSpellAbilityId()==1093682488))endfunctionfunction YV takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()call UnitAddAbility(u1,1093682489)call SetUnitAbilityLevel(u1,1093682489,GetUnitAbilityLevel(u1,1093682488))call UnitAddAbility(u2,1093682497)call SetUnitAbilityLevel(u2,1093682497,GetUnitAbilityLevel(u1,1093682488))call UnitMakeAbilityPermanent(u2,true,1093682497)call TriggerSleepAction(9.)call UnitRemoveAbility(u1,1093682489)call UnitMakeAbilityPermanent(u2,false,1093682497)call UnitRemoveAbility(u2,1093682497)set u1=nullset u2=nullendfunctionfunction dW takes nothing returns booleanreturn((GetLearnedSkill()==1093682498)and IsUnitIllusion(GetTriggerUnit())!=true)endfunctionfunction eW takes nothing returns nothinglocal integer qB=GetHandleId(GetExpiredTimer())local unit u1=LoadUnitHandle(o,qB,1)local unit u3=CreateUnit(GetOwningPlayer(u1),1747988805,GetUnitX(u1),GetUnitY(u1),0)call UnitAddAbility(u3,1093682499)call IssueTargetOrderById(u3,$D00DA,u1)set u1=nullset u3=nullendfunctionfunction fW takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))local timer t=ke[i]call PauseTimer(ke[i])call SaveUnitHandle(o,GetHandleId(t),1,u1)call TimerStart(t,(23.-(3.*I2R(GetUnitAbilityLevel(u1,1093682498)))),true,function eW)set t=nullset u1=nullendfunctionfunction hW takes nothing returns booleanreturn((GetSpellAbilityId()==1093682500))endfunctionfunction iW takes nothing returns nothingset e4[0]=GetUnitLoc(GetTriggerUnit())call CreateNUnitsAtLoc(1,1848652375,GetOwningPlayer(GetTriggerUnit()),e4[0],bj_UNIT_FACING)call UnitApplyTimedLifeBJ(2.,1112820806,bj_lastCreatedUnit)call UnitAddAbility(bj_lastCreatedUnit,1093683274)call IssueTargetOrderById(bj_lastCreatedUnit,$D007F,GetTriggerUnit())call RemoveLocation(e4[0])endfunctionfunction kW takes nothing returns nothingcall TriggerRegisterUnitEvent(Yp,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Zp,B4,EVENT_UNIT_HERO_SKILL)set me[(1+GetPlayerId(GetOwningPlayer(B4)))]=CreateTimer()endfunctionfunction nW takes nothing returns booleanreturn((GetSpellAbilityId()==1093685296))endfunctionfunction oW takes nothing returns nothinglocal integer i=LoadInteger(o,GetHandleId(GetExpiredTimer()),1)set ne[i]=0call DestroyEffect(oe[i])endfunctionfunction pW takes nothing returns nothinglocal unit QClocal unit u1=GetTriggerUnit()local real x1=GetSpellTargetX()local real y1=GetSpellTargetY()local player p=GetOwningPlayer(u1)local integer i=GetPlayerId(p)+1local timer t=me[i]local integer qB=GetHandleId(t)local real BF=(50.+90.*I2R(GetUnitAbilityLevel(u1,1093685296)))*(1+(.15*I2R(ne[i])))call SaveInteger(o,qB,1,i)call DestroyEffect(oe[i])set oe[i]=AddSpecialEffectTarget("war3mapImported\\EvilMissileofShadowyDOOMV2.mdx",u1,"chest")call PauseTimer(t)call TimerStart(t,8.,false,function oW)call GroupEnumUnitsInRange(ce[0],x1,y1,235.,null)loopset QC=FirstOfGroup(ce[0])exitwhen QC==nullcall GroupRemoveUnit(ce[0],QC)if GetUnitState(QC,UNIT_STATE_LIFE)>0 and IsUnitEnemy(QC,p)and Zy(QC,UNIT_TYPE_STRUCTURE)==false thencall UnitDamageTarget(u1,QC,BF,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\Earthshock.mdx",QC,"chest"))endifendloopset ne[i]=(ne[i]+1)if(ne[i]>=6)thenset ne[i]=5endifset p=nullset u1=nullset QC=nullset t=nullendfunctionfunction rW takes nothing returns booleanreturn GetLearnedSkill()==1093682508 and IsUnitIllusion(GetTriggerUnit())!=trueendfunctionfunction sW takes nothing returns nothinglocal unit u=GetTriggerUnit()call SetPlayerTechResearched(GetOwningPlayer(u),1383032174,GetUnitAbilityLevel(u,1093682508))if((GetUnitAbilityLevel(u,1093682508)==1))thencall TriggerRegisterUnitEvent(dq,u,EVENT_UNIT_SPELL_EFFECT)endifendfunctionfunction uW takes nothing returns booleanlocal integer id=GetSpellAbilityId()return id==1093685296 or id==1093682508 or id==1093682503 or id==1093686616endfunctionfunction vW takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local unit u3local real x2local real y2local unit QClocal integer xH=0local player p=GetOwningPlayer(u1)local real hB=5.+3.*I2R(GetUnitAbilityLevel(u1,1093682508))call GroupEnumUnitsInRange(ce[0],x,y,600.,null)loopset QC=FirstOfGroup(ce[0])exitwhen QC==null or xH==7call GroupRemoveUnit(ce[0],QC)if GetUnitState(QC,UNIT_STATE_LIFE)>1 and IsUnitEnemy(QC,p)and Zy(QC,UNIT_TYPE_STRUCTURE)==false and GetUnitPointValue(QC)!=1 thenset xH=xH+1set zw[xH]=QCendifendloopcall GroupClear(ce[0])if xH>0 thenset QC=zw[GetRandomInt(1,xH)]set x2=GetUnitX(QC)set y2=GetUnitY(QC)set u3=CreateUnit(p,1852204916,x2,y2,0)call UnitApplyTimedLife(u3,1112820806,hB)set u3=CreateUnit(p,1852204916,x2,y2,0)call UnitApplyTimedLife(u3,1112820806,hB)endifset p=nullset u1=nullset u3=nullset QC=nullendfunctionfunction xW takes nothing returns nothingcall TriggerRegisterUnitEvent(fq,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(gq,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(hq,B4,EVENT_UNIT_SPELL_EFFECT)endfunctionfunction zW takes nothing returns booleanreturn((GetLearnedSkill()==1093682505))endfunctionfunction AW takes nothing returns nothingcall SetPlayerTechResearchedSwap(1383035764,GetUnitAbilityLevelSwapped(1093682505,GetTriggerUnit()),GetOwningPlayer(GetTriggerUnit()))endfunctionfunction BW takes nothing returns booleanreturn GetLearnedSkill()==1093682506 and GetUnitAbilityLevel(GetTriggerUnit(),1093682506)==1endfunctionfunction bW takes nothing returns nothinglocal integer qB=GetHandleId(GetExpiredTimer())local unit u1=LoadUnitHandle(o,qB,1)local unit QClocal real r=pe[GetUnitAbilityLevel(u1,1093682506)]local player p=GetOwningPlayer(u1)call GroupEnumUnitsInRange(ce[1],GetUnitX(u1),GetUnitY(u1),930.,null)loopset QC=FirstOfGroup(ce[1])exitwhen(QC==null)call GroupRemoveUnit(ce[1],QC)if GetUnitAbilityLevel(QC,1110455378)>0 and IsUnitEnemy(QC,p)thencall UnitDamageTarget(u1,QC,r*GetUnitState(QC,UNIT_STATE_MAX_LIFE),true,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_ACID,WEAPON_TYPE_WHOKNOWS)endifendloopset p=nullset u1=nullset QC=nullendfunctionfunction CW takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)set pe[1]=(.03/ 2.)set pe[2]=.02set pe[3]=(.05/ 2.)set pe[4]=.03call SaveUnitHandle(o,qB,1,GetTriggerUnit())call TimerStart(t,1.,true,function bW)set t=nullendfunctionfunction DW takes nothing returns booleanreturn GetSpellAbilityId()==1093677386endfunctionfunction EW takes nothing returns nothinglocal unit uif GetEventDamage()>1 thenset u=GetTriggerUnit()if GetUnitAbilityLevel(u,1110454351)>0 thencall DisableTrigger(GetTriggeringTrigger())call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl",u,"chest"))call UnitDamageTarget(GetEventDamageSource(),u,.4*GetEventDamage(),true,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNKNOWN,WEAPON_TYPE_WHOKNOWS)call EnableTrigger(GetTriggeringTrigger())endifendifset u=nullendfunctionfunction FW takes nothing returns nothinglocal trigger rB=CreateTrigger()local triggercondition uB=TriggerAddCondition(rB,Condition(function EW))call TriggerRegisterUnitEvent(rB,GetSpellTargetUnit(),EVENT_UNIT_DAMAGED)call sB(rB,4.+2.*I2R(GetUnitAbilityLevel(GetTriggerUnit(),1093677386)),uB)set rB=nullset uB=nullendfunctionfunction HW takes nothing returns nothingcall TriggerRegisterUnitEvent(jq,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(kq,B4,EVENT_UNIT_SPELL_EFFECT)endfunctionfunction lW takes nothing returns booleanreturn((GetSpellAbilityId()==1093683001))endfunctionfunction JW takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))local unit u2=GetSpellTargetUnit()local unit u3local real xlocal real yset u2=GetSpellTargetUnit()if((u2==G4[i]))thencall TriggerSleepAction(2.)set x=GetUnitX(u2)set y=GetUnitY(u2)set u3=CreateUnit(GetOwningPlayer(u1),1747989063,x,y,0)call UnitApplyTimedLife(u3,1112045413,2.)call UnitAddAbility(u3,1093678926)call SetUnitAbilityLevel(u3,1093678926,GetUnitAbilityLevel(u1,1093683001))call IssueImmediateOrderById(u3,$D009F)call DestroyEffect(AddSpecialEffectTarget("Units\\Undead\\Abomination\\AbominationExplosion.mdl",u2,"origin"))elsecall TriggerSleepAction(2.)set x=GetUnitX(u2)set y=GetUnitY(u2)set u3=CreateUnit(GetOwningPlayer(u1),1747989063,x,y,0)call UnitApplyTimedLife(u3,1112045413,2.)call UnitAddAbility(u3,1093678923)call SetUnitAbilityLevel(u3,1093678923,GetUnitAbilityLevel(u1,1093683001))call IssueImmediateOrderById(u3,$D009F)call DestroyEffect(AddSpecialEffectTarget("Units\\Undead\\Abomination\\AbominationExplosion.mdl",u2,"origin"))endifset u3=nullset u1=nullset u2=nullendfunctionfunction LW takes nothing returns booleanreturn(IsUnitInvisible(GetTriggerUnit(),GetFilterPlayer()))endfunctionfunction MW takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,1)local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))local unit u2=G4[i]local location p1=qe[i]local location p2=ue[i]local real BFset te[i]=(te[i]+1)call MoveLocation(p2,GetUnitX(u2),GetUnitY(u2))call MoveLightningLoc(ve[i],p1,p2)if(te[i]==se[i])thencall DestroyEffect(re[i])call FlushChildHashtable(o,qB)call DestroyTimer(t)call DestroyLightning(ve[i])call RemoveLocation(p1)call RemoveLocation(p2)set G4[i]=nullelseif((ModuloInteger(te[i],$A)==0))thenset BF=((50.+I2R(GetHeroInt(u1,true)))*(1+(.05*(DistanceBetweenPoints(p1,p2)/(300.-(50.*I2R(GetUnitAbilityLevel(u1,1093683010))))))))call UnitDamageTargetBJ(u1,u2,BF,ATTACK_TYPE_HERO,DAMAGE_TYPE_ACID)call CreateTextTagUnitBJ(I2S(R2I(BF)),u2,0,8.,100,30.,30.,0)call ShowTextTagForceBJ(false,bj_lastCreatedTextTag,Rz(Condition(function LW)))call SetTextTagPermanent(bj_lastCreatedTextTag,false)call SetTextTagVelocityBJ(bj_lastCreatedTextTag,64,90)call SetTextTagLifespan(bj_lastCreatedTextTag,2.)call SetTextTagFadepoint(bj_lastCreatedTextTag,2.)endifendifset t=nullset u1=nullset u2=nullset p1=nullset p2=nullendfunctionfunction NW takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,1)local unit u2=LoadUnitHandle(o,qB,2)local player p=GetOwningPlayer(u1)local integer i=GetPlayerId(p)+1local player p2=GetOwningPlayer(u2)local integer i2=GetPlayerId(p2)+1local integer BB=GetUnitAbilityLevel(u1,1093683010)call PauseTimer(t)if j9[i2]==false thenset se[i]=(21+(BB*$A))set te[i]=0set qe[i]=GetUnitLoc(u1)set ue[i]=GetUnitLoc(u2)set ve[i]=AddLightningLoc("HWSB",qe[i],ue[i])set re[i]=AddSpecialEffectLoc("units\\orc\\StasisTotem\\StasisTotem.mdl",qe[i])call SetLightningColor(ve[i],1,.0,.0,1)call TimerStart(t,.1,true,function MW)endifset j9[i2]=falseset t=nullset u1=nullset u2=nullset p=nullset p2=nullendfunctionfunction OW takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)local unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local player p=GetOwningPlayer(u1)local integer i=GetPlayerId(p)+1local real tB=(.0001)set G4[i]=u2call SaveUnitHandle(o,qB,1,u1)call SaveUnitHandle(o,qB,2,u2)call TimerStart(t,tB,false,function NW)set t=nullset u1=nullset u2=nullset p=nullendfunctionfunction PW takes nothing returns booleanif GetSpellAbilityId()==1093683010 thencall OW()endifreturn falseendfunctionfunction RW takes nothing returns nothingcall TriggerRegisterUnitEvent(nq,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(oq,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(pq,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(rq,B4,EVENT_UNIT_SPELL_EFFECT)set xe[(1+GetPlayerId(GetOwningPlayer(B4)))]=CreateGroup()endfunctionfunction TW takes nothing returns booleanreturn((GetSpellAbilityId()==1093683266))endfunctionfunction UW takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local unit u3local real x=GetUnitX(u1)local real y=GetUnitY(u1)call UnitAddAbility(u1,1093683268)call SetUnitAbilityLevel(u1,1093683268,GetUnitAbilityLevel(u1,1093683266))call UnitAddAbility(u2,1093683267)call SetUnitAbilityLevel(u2,1093683267,GetUnitAbilityLevel(u1,1093683266))set u3=CreateUnit(GetOwningPlayer(u1),1747988805,x,y,0)call UnitApplyTimedLife(u3,1112045413,2.)call UnitAddAbility(u3,1093683269)call SetUnitAbilityLevel(u3,1093683269,GetUnitAbilityLevel(u1,1093683266))call IssueTargetOrderById(u3,$D0085,u1)call xA(6.)call UnitRemoveAbility(u1,1093683268)call UnitRemoveAbility(u2,1093683267)set u1=nullset u2=nullset u3=nullendfunctionfunction WW takes nothing returns booleanreturn((GetSpellAbilityId()==1093683270))endfunctionfunction XW takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real r=(GetEventDamage()*(.0+(.05*I2R(GetUnitAbilityLevel(u1,1093683270)))))call SetUnitState(u1,UNIT_STATE_LIFE,(GetUnitState(u1,UNIT_STATE_LIFE)+r))set u1=nullendfunctionfunction YW takes nothing returns nothinglocal trigger t=GetTriggeringTrigger()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,1)local real r=(GetEventDamage()*(.05+(.15*I2R(GetUnitAbilityLevel(u1,1093683270)))))call SetUnitState(u1,UNIT_STATE_LIFE,(GetUnitState(u1,UNIT_STATE_LIFE)+r))set t=nullset u1=nullendfunctionfunction ZW takes nothing returns nothinglocal trigger dX=CreateTrigger()local trigger eX=CreateTrigger()local integer qB=GetHandleId(eX)local effect e1=AddSpecialEffectTarget("war3mapImported\\Demonfilth.mdx",GetTriggerUnit(),"overhead")local effect e2=AddSpecialEffectTarget("war3mapImported\\Demonfilth.mdx",GetSpellTargetUnit(),"overhead")call TriggerAddCondition(dX,Condition(function XW))call TriggerRegisterUnitEvent(dX,GetTriggerUnit(),EVENT_UNIT_DAMAGED)call SaveUnitHandle(o,qB,1,GetTriggerUnit())call TriggerAddCondition(eX,Condition(function YW))call TriggerRegisterUnitEvent(eX,GetSpellTargetUnit(),EVENT_UNIT_DAMAGED)call xA(6.)call DestroyEffect(e1)call DestroyEffect(e2)call DestroyTrigger(dX)call DestroyTrigger(eX)call FlushChildHashtable(o,qB)set e1=nullset e2=nullset dX=nullset eX=nullendfunctionfunction gX takes nothing returns booleanreturn((GetLearnedSkill()==1093684294)and(GetUnitAbilityLevel(GetTriggerUnit(),1093684294)==1))endfunctionfunction hX takes nothing returns nothingcall TriggerRegisterUnitEvent(qq,GetTriggerUnit(),EVENT_UNIT_DAMAGED)endfunctionfunction jX takes nothing returns booleanreturn((GetEventDamage()>=2.))endfunctionfunction kX takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit QClocal real r=(GetEventDamage()*(.05+(.1*I2R(GetUnitAbilityLevel(u1,1093684294)))))local player p=GetOwningPlayer(u1)call GroupEnumUnitsInRange(ce[9],GetUnitX(u1),GetUnitY(u1),300.,null)loopset QC=FirstOfGroup(ce[9])exitwhen(QC==null)call GroupRemoveUnit(ce[9],QC)if(GetUnitState(QC,UNIT_STATE_LIFE)>0 and(IsUnitEnemy(QC,p))and(Zy(QC,UNIT_TYPE_STRUCTURE)==false))thencall UnitDamageTargetBJ(u1,QC,r,ATTACK_TYPE_HERO,DAMAGE_TYPE_ACID)call DestroyEffect(AddSpecialEffectTarget("Objects\\Spawnmodels\\Human\\HumanBlood\\HumanBloodRifleman.mdl",QC,"head"))endifendloopset p=nullset u1=nullset QC=nullendfunctionfunction nX takes nothing returns booleanreturn((GetSpellAbilityId()==1093684305))endfunctionfunction oX takes nothing returns nothinglocal unit QClocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,1)local player p=GetOwningPlayer(u1)local integer i=(1+GetPlayerId(p))local real x=tx[i]local real y=ux[i]local real a=rx[i]local real x1local real y1local unit u3local real BFset sx[i]=sx[i]+1if sx[i]<=7 thenset x1=x+300.*I2R(sx[i])*Cos(a)set y1=y+300.*I2R(sx[i])*Sin(a)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Orc\\FeralSpirit\\feralspirittarget.mdl",x1,y1))elseif(sx[i]>7)and(sx[i]<=$E)thenset BF=(200.+(200.*I2R(GetUnitAbilityLevel(u1,1093684305))))set x1=x+300.*I2R(sx[i]-7)*Cos(a)set y1=y+300.*I2R(sx[i]-7)*Sin(a)set u3=CreateUnit(p,1747989063,x1,y1,0)call UnitApplyTimedLife(u3,1112045413,2.)call UnitAddAbility(u3,1093683272)call SetUnitAbilityLevel(u3,1093683272,GetUnitAbilityLevel(u1,1093684305))call IssueImmediateOrderById(u3,$D009F)call DestroyEffect(AddSpecialEffect("war3mapImported\\Desecrate.mdx",x1,y1))call GroupEnumUnitsInRange(ce[1],x1,y1,300.,null)loopset QC=FirstOfGroup(ce[1])exitwhen QC==nullcall GroupRemoveUnit(ce[1],QC)if((IsUnitInGroup(QC,xe[i])==false)and(IsUnitEnemy(QC,p))and GetUnitState(QC,UNIT_STATE_LIFE)>1 and(Zy(QC,UNIT_TYPE_STRUCTURE)==false))thencall UnitDamageTargetBJ(u1,QC,BF,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)call GroupAddUnit(xe[i],QC)endifendloopendifendifif sx[i]>$E thencall FlushChildHashtable(o,qB)call DestroyTimer(t)endifset t=nullset u1=nullset QC=nullset p=nullendfunctionfunction pX takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)local unit u1=GetTriggerUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x1=GetSpellTargetX()local real y1=GetSpellTargetY()local real a=Atan2(y1-y,x1-x)call SaveUnitHandle(o,qB,1,GetTriggerUnit())set rx[i]=aset sx[i]=0set tx[i]=xset ux[i]=ycall GroupClear(xe[i])call TimerStart(t,.18,true,function oX)set t=nullset u1=nullendfunctionfunction rX takes nothing returns nothinglocal integer qB=GetHandleId(GetExpiredTimer())local unit u1=LoadUnitHandle(o,qB,1)local integer i=GetPlayerId(GetOwningPlayer(u1))+1if vx[i]<=16. thenset vx[i]=.0call UnitRemoveAbility(u1,1093687353)elsecall UnitAddAbility(u1,1093687353)if vx[i]>wx[i]thenset vx[i]=wx[i]set vx[i]=(vx[i]-16.)elseset vx[i]=(vx[i]-16.)endifendifset u1=nullendfunctionfunction sX takes nothing returns nothinglocal integer i=GetPlayerId(GetOwningPlayer(B4))+1local timer t=CreateTimer()local integer qB=GetHandleId(t)call TriggerRegisterUnitEvent(tq,B4,EVENT_UNIT_DAMAGED)call TriggerRegisterUnitEvent(uq,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(vq,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(wq,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(xq,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(yq,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(zq,B4,EVENT_UNIT_SPELL_EFFECT)set wx[i]=400.call SaveUnitHandle(o,qB,1,B4)call TimerStart(t,1.3,true,function rX)set t=nullendfunctionfunction uX takes nothing returns nothinglocal unit u1local real r=GetEventDamage()local integer iif r>2. thenset u1=GetTriggerUnit()set i=GetPlayerId(GetOwningPlayer(u1))+1if(vx[i]>=r)thenset vx[i]=(vx[i]-r)call SetUnitState(u1,UNIT_STATE_LIFE,(GetUnitState(u1,UNIT_STATE_LIFE)+r))elsecall SetUnitState(u1,UNIT_STATE_LIFE,(GetUnitState(u1,UNIT_STATE_LIFE)+vx[i]))set vx[i]=.0call UnitRemoveAbility(u1,1093687353)endifendifset u1=nullendfunctionfunction wX takes nothing returns booleanlocal integer id=GetSpellAbilityId()return id==1093683544 or id==1093684038 or id==1093684535 or id==1093683290 and GetUnitLifePercent(GetTriggerUnit())>15.endfunctionfunction xX takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer i=GetPlayerId(GetOwningPlayer(u1))+1local integer i2=0local integer id=GetSpellAbilityId()if id==1093683544 thenset i2=1set vx[i]=(vx[i]+(GetUnitState(u1,UNIT_STATE_MAX_LIFE)*.16))if xx[i]==false thencall SetUnitState(u1,UNIT_STATE_LIFE,(GetUnitState(u1,UNIT_STATE_LIFE)*.92))endifelseif id==1093684038 thenset i2=1set vx[i]=(vx[i]+(GetUnitState(u1,UNIT_STATE_MAX_LIFE)*.2))if xx[i]==false thencall SetUnitState(u1,UNIT_STATE_LIFE,(GetUnitState(u1,UNIT_STATE_LIFE)*.92))endifelseif id==1093683290 thenset i2=1set vx[i]=(vx[i]+(GetUnitState(u1,UNIT_STATE_MAX_LIFE)*.34))if xx[i]==false thencall SetUnitState(u1,UNIT_STATE_LIFE,(GetUnitState(u1,UNIT_STATE_LIFE)*.83))endifelseif id==1093684535 thenset i2=1set vx[i]=(vx[i]+(GetUnitState(u1,UNIT_STATE_MAX_LIFE)*.12))if xx[i]==false thencall SetUnitState(u1,UNIT_STATE_LIFE,(GetUnitState(u1,UNIT_STATE_LIFE)*.94))endifendifif vx[i]>.0 and i2==1 thencall UnitAddAbility(u1,1093687353)endifset u1=nullendfunctionfunction zX takes nothing returns booleanreturn((GetSpellAbilityId()==1093683544))endfunctionfunction AX takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,1)local player p=GetOwningPlayer(u1)local integer i=GetPlayerId(p)+1local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real a=yx[i]local real x1local real y1local unit QClocal integer i2=0local real BFlocal unit u3if(zx[i]>=40)thencall FlushChildHashtable(o,qB)call DestroyTimer(t)call KillUnit(u1)elseset zx[i]=(zx[i]+1)set x1=x+25.*Cos(a)set y1=y+25.*Sin(a)call SetUnitX(u1,x1)call SetUnitY(u1,y1)call GroupEnumUnitsInRange(ce[1],x1,y1,150.,null)loopset QC=FirstOfGroup(ce[1])exitwhen QC==null or i2==1call GroupRemoveUnit(ce[1],QC)if GetUnitState(QC,UNIT_STATE_LIFE)>1 and IsUnitEnemy(QC,p)and Zy(QC,UNIT_TYPE_STRUCTURE)==false and GetUnitPointValue(QC)!=1 thenset i2=1endifendloopcall GroupClear(ce[1])if(i2==1)thenset u3=CreateUnit(p,1747989063,x,y,0)call UnitApplyTimedLife(u3,1112045413,2.)call UnitAddAbility(u3,1093684023)set BF=(10.+(90.*I2R(GetUnitAbilityLevel(h4[i],1093683544))))call FlushChildHashtable(o,qB)call DestroyTimer(t)call KillUnit(u1)call GroupEnumUnitsInRange(ce[1],x1,y1,225.,null)loopset QC=FirstOfGroup(ce[1])exitwhen QC==nullcall GroupRemoveUnit(ce[1],QC)if GetUnitState(QC,UNIT_STATE_LIFE)>1 and IsUnitEnemy(QC,p)and Zy(QC,UNIT_TYPE_STRUCTURE)==false thencall UnitDamageTargetBJ(h4[i],QC,(BF+(GetUnitState(QC,UNIT_STATE_MAX_LIFE)*.11)),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)call IssueTargetOrderById(u3,$D006B,QC)endifendloopendifendifset t=nullset u1=nullset QC=nullset u3=nullendfunctionfunction aX takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x1=GetSpellTargetX()local real y1=GetSpellTargetY()local real a=Atan2(y1-y,x1-x)local integer i=GetPlayerId(GetOwningPlayer(u1))+1local timer t=CreateTimer()local integer qB=GetHandleId(t)local unit u3=CreateUnit(GetOwningPlayer(u1),1697656881,x,y,a*bj_RADTODEG)set yx[i]=aset zx[i]=0call SaveUnitHandle(o,qB,1,u3)call TimerStart(t,.03,true,function AX)set t=nullset u1=nullendfunctionfunction bX takes nothing returns booleanreturn((GetSpellAbilityId()==1093684038))endfunctionfunction CX takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,1)call UnitRemoveAbility(u1,1110455881)call FlushChildHashtable(o,qB)call DestroyTimer(t)set u1=nullset t=nullendfunctionfunction cX takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x1=GetUnitX(u2)local real y1=GetUnitY(u2)local real dt=SquareRoot((Pow((x1-x),2))+Pow((y1-y),2))local real r1local real r2local timer t=CreateTimer()local integer qB=GetHandleId(t)if dt<=148. thenset r2=1.8elseset r1=(dt/ 100.)set r2=(1.8/ I2R(R2I(r1)))endifcall UnitAddAbility(u1,1093677647)call SetUnitAbilityLevel(u1,1093677647,GetUnitAbilityLevel(u1,1093684038))call TriggerSleepAction(.0)call SaveUnitHandle(o,qB,1,u2)call TimerStart(t,r2,false,function CX)set x1=GetUnitX(u2)set y1=GetUnitY(u2)call SetUnitX(u1,x1)call SetUnitY(u1,y1)call IssueTargetOrderById(u1,$D000F,u2)call TriggerSleepAction(6.)call UnitRemoveAbility(u1,1093677647)set t=nullset u1=nullset u2=nullendfunctionfunction EX takes nothing returns booleanreturn((GetLearnedSkill()==1093684535)and(GetUnitAbilityLevel(GetTriggerUnit(),1093684535)==1))endfunctionfunction FX takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,1)local integer i=GetPlayerId(GetOwningPlayer(u1))+1local integer i2local real x=GetUnitX(u1)local real x1local real y=GetUnitY(u1)local real y1local real dtif i>5 thenset i2=1loopexitwhen i2>5set x1=GetUnitX(h4[i2])set y1=GetUnitY(h4[i2])set dt=SquareRoot((Pow((x1-x),2))+Pow((y1-y),2))if dt<=2500. and GetUnitLifePercent(h4[i2])<=5.+10.*I2R(GetUnitAbilityLevel(u1,1093684535))thencall UnitShareVision(h4[i2],GetOwningPlayer(u1),true)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Bloodlust\\BloodlustTarget.mdl",u1,"overhead"))elsecall UnitShareVision(h4[i2],GetOwningPlayer(u1),false)endifset i2=i2+1endloopelseset i2=6loopexitwhen i2>$Aset x1=GetUnitX(h4[i2])set y1=GetUnitY(h4[i2])set dt=SquareRoot((Pow((x1-x),2))+Pow((y1-y),2))if dt<=2500. and GetUnitLifePercent(h4[i2])<=5.+10.*I2R(GetUnitAbilityLevel(u1,1093684535))thencall UnitShareVision(h4[i2],GetOwningPlayer(u1),true)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Orc\\Bloodlust\\BloodlustTarget.mdl",u1,"overhead"))elsecall UnitShareVision(h4[i2],GetOwningPlayer(u1),false)endifset i2=i2+1endloopendifset u1=nullset t=nullendfunctionfunction GX takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)call SaveUnitHandle(o,qB,1,GetTriggerUnit())call TimerStart(t,2.,true,function FX)set t=nullendfunctionfunction IX takes nothing returns booleanif GetLearnedSkill()==1093683290 and IsUnitIllusion(GetTriggerUnit())!=true thencall IncUnitAbilityLevel(GetTriggerUnit(),1093683506)set my=GetPlayerId(GetTriggerPlayer())+1set wx[my]=wx[my]+100.endifreturn falseendfunctionfunction JX takes nothing returns booleanreturn((GetSpellAbilityId()==1093683290))endfunctionfunction KX takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer i=GetPlayerId(GetOwningPlayer(u1))+1set xx[i]=truecall xA(17.)set xx[i]=falseif(IsUnitAliveBJ(u1))thencall SetWidgetLife(u1,(GetUnitState(u1,UNIT_STATE_LIFE)+(GetUnitState(u1,UNIT_STATE_MAX_LIFE)*.5)))endifset u1=nullendfunctionfunction MX takes nothing returns nothingcall TriggerRegisterUnitEvent(aq,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Bq,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(bq,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(cq,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Dq,B4,EVENT_UNIT_TARGET_IN_RANGE)call TriggerRegisterUnitEvent(Eq,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Fq,B4,EVENT_UNIT_SPELL_EFFECT)call SetPlayerAbilityAvailable(GetOwningPlayer(B4),1093684528,false)call EnableTrigger(Gq)call TriggerRegisterUnitEvent(ai,B4,EVENT_UNIT_TARGET_IN_RANGE)call GroupAddUnit(S8,B4)endfunctionfunction OX takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))set Ax[i]=(Ax[i]+1)if((Ax[i]==4))thencall SetPlayerAbilityAvailable(GetOwningPlayer(u1),1093682776,false)call SetPlayerAbilityAvailable(GetOwningPlayer(u1),1093684528,true)endifset u1=nullendfunctionfunction QX takes nothing returns booleanreturn((GetSpellAbilityId()==1093684528))endfunctionfunction RX takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093682776,true)call SetPlayerAbilityAvailable(GetOwningPlayer(GetTriggerUnit()),1093684528,false)set ax[i]=trueset Ax[i]=0set u1=nullendfunctionfunction TX takes nothing returns booleanreturn((GetSpellAbilityId()==1093683543))endfunctionfunction UX takes nothing returns nothinglocal unit QClocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x2local real y2local real alocal player p=GetOwningPlayer(u1)local integer i=(1+GetPlayerId(p))call TriggerSleepAction(.1)call GroupEnumUnitsInRange(ce[7],x,y,485.,null)loopset QC=FirstOfGroup(ce[7])exitwhen(QC==null)call GroupRemoveUnit(ce[7],QC)if(GetUnitState(QC,UNIT_STATE_LIFE)>0 and IsUnitEnemy(QC,p)and(Zy(QC,UNIT_TYPE_MAGIC_IMMUNE)==false)and(Zy(QC,UNIT_TYPE_MECHANICAL)==false)and(Zy(QC,UNIT_TYPE_STRUCTURE)==false)and(GetUnitPointValue(QC)!=1))thenset x2=GetUnitX(QC)set y2=GetUnitY(QC)set a=Atan2(y2-y,x2-x)*bj_RADTODEGset c8=aset C8=falseset D8=20.set l8=.95set E8=1.5set F8=QCset G8=(.2/ 10.)set Ce=iif(ax[i])thenset H8=Cqelseset H8=f9endifcall DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\AncientProtectorMissile\\AncientProtectorMissile.mdl",QC,"overhead"))call TriggerExecute(zi)endifendloopset p=nullset u1=nullset QC=nullendfunctionfunction WX takes nothing returns nothinglocal unit u3set u3=CreateUnit(GetOwningPlayer(F8),1747989063,GetUnitX(F8),GetUnitY(F8),0)call ShowUnit(u3,false)call UnitApplyTimedLife(u3,1112045413,1.)call UnitAddAbility(u3,1093679430)call SetUnitAbilityLevel(u3,1093679430,GetUnitAbilityLevel(h4[Ce],1093683543))call IssueTargetOrderById(u3,$D008A,F8)set u3=nullendfunctionfunction YX takes nothing returns booleanreturn((GetSpellAbilityId()==1093683509))endfunctionfunction ZX takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))if(ax[i])thenset ax[i]=falseset ye[i]=truecall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Awaken\\Awaken.mdl",u1,"origin"))call TriggerSleepAction(14.8)set ye[i]=falseendifset u1=nullendfunctionfunction eY takes nothing returns booleanreturn(GetUnitAbilityLevel(GetTriggerUnit(),1110456136)>0 and(GetRandomInt(1,4)==1))endfunctionfunction fY takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))local real r=(GetUnitState(u1,UNIT_STATE_MAX_MANA)*(.02*I2R(GetUnitAbilityLevel(u1,1093683509))))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Items\\AIma\\AImaTarget.mdl",u1,"origin"))call SetUnitState(u1,UNIT_STATE_MANA,(GetUnitState(u1,UNIT_STATE_MANA)+r))if ye[i]thencall SetUnitState(u1,UNIT_STATE_LIFE,(GetUnitState(u1,UNIT_STATE_LIFE)+r))endifset u1=nullendfunctionfunction hY takes nothing returns booleanreturn((GetSpellAbilityId()==1093679159))endfunctionfunction iY takes nothing returns nothinglocal unit QClocal unit u1=GetTriggerUnit()local real x=GetSpellTargetX()local real y=GetSpellTargetY()local real x2local real y2local player p=GetOwningPlayer(u1)local integer i3=(1+GetPlayerId(p))local real BF=(50.+(100.*I2R(GetUnitAbilityLevel(u1,1093679159))))local integer i=1call TriggerSleepAction(.0)loopexitwhen i>60set x2=x+325.*Cos(I2R(i*6))set y2=y+325.*Sin(I2R(i*6))call AddSpecialEffect("Abilities\\Spells\\Undead\\ReplenishMana\\SpiritTouchTarget.mdl",x2,y2)set i=i+1endloopif ax[i3]thenset ax[i3]=falsecall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Awaken\\Awaken.mdl",u1,"origin"))call GroupEnumUnitsInRange(ce[1],x,y,395.,null)loopset QC=FirstOfGroup(ce[1])exitwhen QC==nullcall GroupRemoveUnit(ce[1],QC)if(GetUnitState(QC,UNIT_STATE_LIFE)>1 and(IsUnitEnemy(QC,p))and(GetUnitAbilityLevel(QC,1110456154)>0))thencall UnitDamageTargetBJ(u1,QC,BF,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)call UnitDamageTargetBJ(u1,QC,(.12*GetUnitState(QC,UNIT_STATE_MAX_LIFE)),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)endifendloopelsecall GroupEnumUnitsInRange(ce[1],x,y,395.,null)loopset QC=FirstOfGroup(ce[1])exitwhen QC==nullcall GroupRemoveUnit(ce[1],QC)if(GetUnitState(QC,UNIT_STATE_LIFE)>1 and(IsUnitEnemy(QC,p))and(GetUnitAbilityLevel(QC,1110456154)>0))thencall UnitDamageTargetBJ(u1,QC,BF,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)endifendloopendifset p=nullset u1=nullset QC=nullendfunctionfunction kY takes nothing returns booleanreturn((GetSpellAbilityId()==1093684810)and(GetUnitAbilityLevel(GetSpellTargetUnit(),1093687361)==0)and(IsUnitInGroup(GetSpellTargetUnit(),L8)!=true))endfunctionfunction mY takes nothing returns nothingcall GroupAddUnit(L8,GetSpellTargetUnit())call UnitAddAbility(GetSpellTargetUnit(),1093687361)call UnitMakeAbilityPermanent(GetSpellTargetUnit(),true,1093687361)call TriggerRegisterUnitEvent(J8[K8],GetSpellTargetUnit(),EVENT_UNIT_DAMAGED)endfunctionfunction oY takes nothing returns booleanreturn(IsTriggerEnabled(GetTriggeringTrigger()))and(GetUnitPointValue(GetEventDamageSource())==$87)and(GetUnitAbilityLevel(GetTriggerUnit(),1110456135)>0)or(GetUnitAbilityLevel(GetTriggerUnit(),1110456138)>0)endfunctionfunction pY takes nothing returns nothinglocal unit u2=GetTriggerUnit()local unit u1=GetEventDamageSource()local real r=GetUnitState(u1,UNIT_STATE_MANA)*(.15+(.04*I2R(GetUnitAbilityLevel(u1,1093684810))))local force f=Qz(GetOwningPlayer(u1))local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))call UnitRemoveAbility(u2,1110456135)call UnitRemoveAbility(u2,1110456138)call UnitDamageTargetBJ(u1,u2,r,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNIVERSAL)call CreateTextTagUnitBJ(("+"+I2S(R2I(r))),u2,0,10.,50.,50.,100.,0)call ShowTextTagForceBJ(false,bj_lastCreatedTextTag,f)call SetTextTagPermanent(bj_lastCreatedTextTag,false)call SetTextTagVelocityBJ(bj_lastCreatedTextTag,64,90)call SetTextTagLifespan(bj_lastCreatedTextTag,3.)call SetTextTagFadepoint(bj_lastCreatedTextTag,2.)call DestroyForce(f)if(ax[i])thenset ax[i]=falsecall SetUnitManaBJ(u1,(GetUnitState(u1,UNIT_STATE_MANA)+((35.+(50.*I2R(GetUnitAbilityLevel(u1,1093684810))))*3.)))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Awaken\\Awaken.mdl",u1,"origin"))endifset u1=nullset u2=nullset f=nullendfunctionfunction rY takes nothing returns nothingcall TriggerRegisterUnitEvent(Iq,B4,EVENT_UNIT_SUMMON)call TriggerRegisterPlayerUnitEventSimple(lq,GetOwningPlayer(B4),EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Jq,B4,EVENT_UNIT_DAMAGED)call EnableTrigger(Jq)endfunctionfunction tY takes nothing returns booleanreturn((GetUnitTypeId(GetSummonedUnit())==1869836339))endfunctionfunction uY takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))local integer qB=GetHandleId(u1)local integer vYlocal integer wYcall SetUnitAbilityLevel(GetSummonedUnit(),1093684278,GetUnitAbilityLevel(u1,1093684275))call SetUnitPathing(GetSummonedUnit(),false)set vY=1set wY=2*GetUnitAbilityLevel(u1,1093684275)loopexitwhen vY>wYif LoadUnitHandle(j7,qB,vY)==null thencall SaveUnitHandle(j7,qB,vY,GetSummonedUnit())returnelseif(vY==wY)thencall KillUnit(LoadUnitHandle(j7,qB,1))call RemoveUnit(LoadUnitHandle(j7,qB,1))set bj_forLoopBIndex=1set bj_forLoopBIndexEnd=(wY-1)loopexitwhen bj_forLoopBIndex>bj_forLoopBIndexEndcall SaveUnitHandle(j7,qB,bj_forLoopBIndex,LoadUnitHandle(j7,qB,(bj_forLoopBIndex+1)))set bj_forLoopBIndex=bj_forLoopBIndex+1endloopcall SaveUnitHandle(j7,qB,wY,GetSummonedUnit())endifendifset vY=vY+1endloopset u1=nullendfunctionfunction yY takes nothing returns booleanreturn((GetSpellAbilityId()==1093684278))endfunctionfunction zY takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))local integer is=1local integer Db=GetUnitAbilityLevel(h4[i],1093684275)*2call TriggerSleepAction(.0)loopexitwhen is>Dbif(LoadUnitHandle(j7,GetHandleId(h4[i]),is)==u1)thencall KillUnit(u1)call SaveUnitHandle(j7,GetHandleId(h4[i]),is,null)returnendifset is=is+1endloopset u1=nullendfunctionfunction aY takes nothing returns nothinglocal unit u1local real rlocal real BF=GetEventDamage()if BF>1. thenset u1=GetTriggerUnit()if GetUnitAbilityLevel(u1,1110455634)>0 thenif((GetUnitState(u1,UNIT_STATE_LIFE)-BF)<(GetUnitState(u1,UNIT_STATE_MAX_LIFE)*(.06*I2R(GetUnitAbilityLevel(u1,1093684276)))))thenset r=(GetUnitState(u1,UNIT_STATE_LIFE)-(GetUnitState(u1,UNIT_STATE_MAX_LIFE)*(.06*I2R(GetUnitAbilityLevel(u1,1093684276)))))if(r>.0)thenset r=(BF-r)call SetUnitState(u1,UNIT_STATE_LIFE,GetUnitState(u1,UNIT_STATE_LIFE)+r)elsecall SetUnitState(u1,UNIT_STATE_LIFE,GetUnitState(u1,UNIT_STATE_LIFE)+BF)endifendifendifendifset u1=nullendfunctionfunction bY takes nothing returns nothinglocal unit QClocal timer t=GetExpiredTimer()local unit u1=LoadUnitHandle(o,GetHandleId(t),-$5E9EB4B3)local integer i2=GetPlayerId(GetOwningPlayer(u1))+1local real alocal real BF=LoadReal(o,GetHandleId(t),-$5CF6751E)local player p=GetOwningPlayer(u1)call GroupEnumUnitsInRange(ce[1],GetUnitX(u1),GetUnitY(u1),550.,null)loopset QC=FirstOfGroup(ce[1])exitwhen QC==nullcall GroupRemoveUnit(ce[1],QC)if GetUnitState(QC,UNIT_STATE_LIFE)>0 and IsUnitEnemy(QC,p)and Zy(QC,UNIT_TYPE_STRUCTURE)==false and GetUnitPointValue(QC)!=1 thenif not IsUnitInGroup(QC,N9[i2])thencall GroupAddUnit(N9[i2],QC)call SetUnitPathing(QC,false)endifif Zy(QC,UNIT_TYPE_HERO)thencall IssueImmediateOrderById(QC,$D0004)elsecall PauseUnit(QC,true)endifset a=Atan2(GetUnitY(u1)-GetUnitY(QC),GetUnitX(u1)-GetUnitX(QC))+80*bj_DEGTORADcall SetUnitX(QC,GetUnitX(QC)+20*Cos(a))call SetUnitY(QC,GetUnitY(QC)+20*Sin(a))call UnitDamageTarget(u1,QC,BF,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,null)endifendloopset p=nullset u1=nullset t=nullset QC=nullendfunctionfunction CY takes nothing returns nothingcall SetUnitPathing(GetEnumUnit(),true)call PauseUnit(GetEnumUnit(),false)endfunctionfunction cY takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer i=GetPlayerId(GetOwningPlayer(u1))+1if GetTriggerEventId()==EVENT_UNIT_SPELL_EFFECT thencall SaveUnitHandle(o,GetHandleId(O9[i]),-$5E9EB4B3,GetTriggerUnit())call SaveReal(o,GetHandleId(O9[i]),-$5CF6751E,I2R(8+6*GetUnitAbilityLevel(GetTriggerUnit(),1093678420)))call TimerStart(O9[i],.05,true,function bY)elsecall FlushChildHashtable(o,GetHandleId(O9[i]))call ForGroup(N9[i],function CY)call GroupClear(N9[i])call PauseTimer(O9[i])endifset u1=nullendfunctionfunction DY takes nothing returns booleanif GetSpellAbilityId()==1093678420 thencall cY()endifreturn falseendfunctionfunction EY takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer i=GetPlayerId(GetOwningPlayer(B4))+1call TriggerRegisterUnitEvent(Lq,B4,EVENT_UNIT_HERO_LEVEL)call TriggerRegisterUnitEvent(Mq,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Nq,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(Bx,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Bx,B4,EVENT_UNIT_SPELL_ENDCAST)set N9[i]=CreateGroup()set O9[i]=CreateTimer()set u1=nullendfunctionfunction GY takes nothing returns nothingcall SetPlayerTechResearchedSwap(1383428705,GetHeroLevel(GetTriggerUnit()),GetOwningPlayer(GetTriggerUnit()))endfunctionfunction IY takes nothing returns booleanreturn((GetSpellAbilityId()==1093679193))endfunctionfunction lY takes nothing returns nothinglocal real JYlocal real xlocal real ylocal timer t=GetExpiredTimer()local unit u1=LoadUnitHandle(o,GetHandleId(t),-$5E9EB4B3)local unit u2=LoadUnitHandle(o,GetHandleId(t),-$63F0AAA2)local integer i=LoadInteger(o,GetHandleId(t),-$5CF6751E)if((i>=(1+(1*GetUnitAbilityLevel(u1,1093679193)))))thencall FlushChildHashtable(o,GetHandleId(t))call DestroyTimer(t)elseset JY=bj_RADTODEG*Atan2(GetUnitY(u1)-GetUnitY(u2),GetUnitX(u1)-GetUnitX(u2))set x=GetUnitX(u2)+$81*Cos(JY*bj_DEGTORAD)set y=GetUnitY(u2)+$81*Sin(JY*bj_DEGTORAD)call SetUnitX(u2,x)call SetUnitY(u2,y)call UnitDamageTargetBJ(u1,u2,100.,ATTACK_TYPE_HERO,DAMAGE_TYPE_ACID)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Undead\\DeathCoil\\DeathCoilSpecialArt.mdl",u2,"foot"))call SaveInteger(o,GetHandleId(t),-$5CF6751E,(i+1))endifset u1=nullset u2=nullendfunctionfunction KY takes nothing returns nothinglocal timer hF=CreateTimer()call SaveUnitHandle(o,GetHandleId(hF),-$5E9EB4B3,GetTriggerUnit())call SaveUnitHandle(o,GetHandleId(hF),-$63F0AAA2,GetSpellTargetUnit())call SaveInteger(o,GetHandleId(hF),-$5CF6751E,0)call TimerStart(hF,.5,true,function lY)set hF=nullendfunctionfunction MY takes nothing returns booleanreturn((GetLearnedSkill()==1093681970)and(IsUnitIllusion(GetTriggerUnit())!=true))endfunctionfunction NY takes nothing returns nothingcall SetPlayerTechResearchedSwap(1383425894,GetUnitAbilityLevel(GetTriggerUnit(),1093681970),GetOwningPlayer(GetTriggerUnit()))if((GetTriggerExecCount(GetTriggeringTrigger())==1))thencall TriggerRegisterAnyUnitEventBJ(Oq,EVENT_PLAYER_UNIT_DEATH)endifendfunctionfunction PY takes nothing returns booleanreturn((GetUnitAbilityLevel(h4[(1+GetPlayerId(GetOwningPlayer(GetKillingUnit())))],1093681970)!=0)and(GetUnitTypeId(GetKillingUnit())!=1969451825))endfunctionfunction QY takes nothing returns nothinglocal unit u1=GetKillingUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))local unit u3=CreateUnit(GetOwningPlayer(u1),1969451825,GetUnitX(h4[i]),GetUnitY(h4[i]),0)set u1=nullset u3=nullendfunctionfunction SY takes nothing returns nothingcall TriggerRegisterUnitEvent(Qq,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Rq,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Sq,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(Tq,B4,EVENT_UNIT_SPELL_EFFECT)endfunctionfunction UY takes nothing returns booleanreturn((GetSpellAbilityId()==1093681740))endfunctionfunction VY takes nothing returns nothinglocal unit QClocal unit u1=GetTriggerUnit()local player p=GetOwningPlayer(u1)local unit u3=CreateUnit(p,1747988805,GetUnitX(u1),GetUnitY(u1),0)call UnitApplyTimedLife(u3,1112045413,3.)call UnitAddAbility(u3,1093679416)call SetUnitAbilityLevel(u3,1093679416,GetUnitAbilityLevel(u1,1093681740))call GroupEnumUnitsInRange(ce[1],GetSpellTargetX(),GetSpellTargetY(),230.,null)loopset QC=FirstOfGroup(ce[1])exitwhen QC==nullcall GroupRemoveUnit(ce[1],QC)if(GetUnitState(QC,UNIT_STATE_LIFE)>0 and IsUnitEnemy(QC,p))thencall IssueTargetOrderById(u3,$D007F,QC)endifendloopset p=nullset u1=nullset u3=nullset QC=nullendfunctionfunction XY takes nothing returns booleanreturn((GetSpellAbilityId()==1093682229))endfunctionfunction YY takes nothing returns nothinglocal timer t=GetExpiredTimer()local unit u1=LoadUnitHandle(o,GetHandleId(t),-$5E9EB4B3)local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))local unit u3local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x1=x+50.*Cos(Cx[i])local real y1=y+50.*Sin(Cx[i])if bx[i]>=60 or IsTerrainPathable(x,y,PATHING_TYPE_FLYABILITY)thencall FlushChildHashtable(o,GetHandleId(t))call DestroyTimer(t)call KillUnit(u1)elseset bx[i]=bx[i]+1call SetUnitX(u1,x1)call SetUnitY(u1,y1)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Volcano\\VolcanoMissile.mdl",x,y))set u3=CreateUnit(GetOwningPlayer(u1),1747988529,x,y,0)call UnitApplyTimedLife(u3,1112045413,12.)call SetUnitAbilityLevel(u3,1093677388,cx[i])endifset u1=nullset u3=nullset t=nullendfunctionfunction ZY takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)local unit u1=GetTriggerUnit()local unit u3=CreateUnit(GetOwningPlayer(u1),1697656882,GetUnitX(u1),GetUnitY(u1),bj_RADTODEG*Atan2(GetSpellTargetY()-GetUnitY(u1),GetSpellTargetX()-GetUnitX(u1)))local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))call SaveUnitHandle(o,qB,-$5E9EB4B3,u3)set bx[i]=0set Cx[i]=Atan2(GetSpellTargetY()-GetUnitY(u1),GetSpellTargetX()-GetUnitX(u1))set cx[i]=GetUnitAbilityLevel(u1,1093682229)call TimerStart(t,.03,true,function YY)set t=nullset u1=nullset u3=nullendfunctionfunction h2 takes nothing returns booleanreturn((GetLearnedSkill()==1093679425)and(IsUnitIllusion(GetTriggerUnit())!=true))endfunctionfunction j2 takes nothing returns nothingcall SetUnitAbilityLevel(GetTriggerUnit(),1093683534,(R2I(I2R(GetUnitAbilityLevel(GetTriggerUnit(),1093679425)))+1))endfunctionfunction m2 takes nothing returns booleanreturn((GetSpellAbilityId()==1093682248))endfunctionfunction o2 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local unit u3local real x=GetUnitX(u2)local real y=GetUnitY(u2)local real x1local real y1local integer i=1loopexitwhen i>$Aset x1=(x+300.*Cos((I2R(i)*36.)*bj_DEGTORAD))set y1=(y+300.*Sin((I2R(i)*36.)*bj_DEGTORAD))set u3=CreateUnit(GetOwningPlayer(u1),1848652342,x1,y1,(bj_RADTODEG*Atan2(y-y1,x-x1)))call UnitApplyTimedLife(u3,1112045413,10.)call IssueTargetOrderById(u3,$D000F,u2)set i=i+1endloopset u1=nullset u2=nullset u3=nullendfunctionfunction t2 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local real rlocal integer BB=GetUnitAbilityLevel(u1,1093683541)local real BF=0if GetUnitState(u2,UNIT_STATE_LIFE)<=30.+120.*I2R(BB)thenset r=GetUnitState(u1,UNIT_STATE_LIFE)+GetUnitState(u2,UNIT_STATE_LIFE)call SetUnitState(u1,UNIT_STATE_LIFE,r)call SetUnitState(u2,UNIT_STATE_LIFE,1.)call UnitDamageTarget(u1,u2,500,true,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_NORMAL,WEAPON_TYPE_WHOKNOWS)elseset r=GetUnitState(u1,UNIT_STATE_LIFE)+30.+120.*I2R(BB)set BF=30.+120.*I2R(BB)call SetUnitState(u1,UNIT_STATE_LIFE,r)call UnitDamageTarget(u1,u2,BF,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_ACID,WEAPON_TYPE_WHOKNOWS)endifcall DestroyEffect(AddSpecialEffectTarget("units\\creeps\\VoidWalker\\VoidWalker.mdl",u2,"chest"))set u1=nullset u2=nullendfunctionfunction v2 takes nothing returns booleanif GetSpellAbilityId()==1093683541 thencall t2()endifreturn falseendfunctionfunction z2 takes nothing returns nothingset Y7[1]=.3set Y7[2]=.5set Y7[3]=.7set Y7[4]=.9call TriggerRegisterUnitEvent(Wq,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Xq,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Yq,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Zq,B4,EVENT_UNIT_SPELL_EFFECT)endfunctionfunction B2 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit QClocal player p=GetOwningPlayer(u1)call GroupEnumUnitsInRange(ce[1],GetUnitX(u1),GetUnitY(u1),650.,null)loopset QC=FirstOfGroup(ce[1])exitwhen QC==nullcall GroupRemoveUnit(ce[1],QC)if(GetUnitState(QC,UNIT_STATE_LIFE)>1 and IsUnitAlly(QC,p)and(Zy(QC,UNIT_TYPE_STRUCTURE)==false))thencall SetUnitState(QC,UNIT_STATE_LIFE,(GetUnitState(QC,UNIT_STATE_LIFE)+(GetUnitState(QC,UNIT_STATE_MAX_LIFE)*.05)))call SetUnitState(QC,UNIT_STATE_MANA,(GetUnitState(QC,UNIT_STATE_MANA)+(GetUnitState(QC,UNIT_STATE_MAX_MANA)*.04)))endifendloopset p=nullset u1=nullset QC=nullendfunctionfunction c2 takes nothing returns booleanreturn((GetSpellAbilityId()==1093683271))endfunctionfunction D2 takes nothing returns nothinglocal timer t=GetExpiredTimer()call UnitRemoveAbility(LoadUnitHandle(o,GetHandleId(t),-$5E9EB4B3),1110456374)call FlushChildHashtable(o,GetHandleId(t))call DestroyTimer(t)set t=nullendfunctionfunction E2 takes nothing returns nothinglocal timer t=GetExpiredTimer()local unit u1=LoadUnitHandle(o,GetHandleId(t),-$5E9EB4B3)local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))local real rlocal real r2local unit u2=Fx[i]local unit u3if(Ex[i]>=25 or GetUnitState(u1,UNIT_STATE_LIFE)<=0 or GetUnitState(u2,UNIT_STATE_LIFE)<=0)thencall FlushChildHashtable(o,GetHandleId(t))call DestroyTimer(t)call DestroyLightning(Dx[i])if Ex[i]>=25 thenif(DistanceBetweenPoints(Gx[i],Hx[i])>=1001.)thenset r=1000.elseset r=DistanceBetweenPoints(Gx[i],Hx[i])endifset r2=(1000.-r)set r=(r*(.18+(.17*I2R(GetUnitAbilityLevel(u1,1093683271)))))call UnitDamageTargetBJ(u1,u2,r,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)set u3=CreateUnit(GetOwningPlayer(u1),1747989063,GetUnitX(u2),GetUnitY(u2),0)call UnitApplyTimedLife(u3,1112045413,.01)call ShowUnit(u3,false)set u3=CreateUnit(GetOwningPlayer(u2),1747988805,GetUnitX(u2),GetUnitY(u2),0)call UnitApplyTimedLife(u3,1112045413,3.)call UnitAddAbility(u3,1093683278)call IssueTargetOrderById(u3,$D008A,u2)set r2=((r2/ 200.)+1.)set t=CreateTimer()call SaveUnitHandle(o,GetHandleId(t),-$5E9EB4B3,u2)call TimerStart(t,(I2R(R2I(r2))*Y7[GetUnitAbilityLevel(u1,1093683271)]),false,function D2)endifcall RemoveLocation(Gx[i])call RemoveLocation(Hx[i])elseset Ex[i]=Ex[i]+1call MoveLocation(Gx[i],GetUnitX(u1),GetUnitY(u1))call MoveLocation(Hx[i],GetUnitX(u2),GetUnitY(u2))call MoveLightningLoc(Dx[i],Gx[i],Hx[i])endifset t=nullset u1=nullset u2=nullendfunctionfunction F2 takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)local unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))set Gx[i]=GetUnitLoc(u1)set Hx[i]=GetUnitLoc(u2)set Dx[i]=AddLightningLoc("LEAS",Gx[i],Hx[i])set Fx[i]=u2set Ex[i]=0call SaveUnitHandle(o,qB,-$5E9EB4B3,u1)call TimerStart(t,.1,true,function E2)set t=nullset u1=nullset u2=nullendfunctionfunction H2 takes nothing returns booleanreturn((GetSpellAbilityId()==1093683020))endfunctionfunction I2 takes nothing returns nothinglocal unit QClocal unit u1=GetTriggerUnit()local player p=GetOwningPlayer(u1)local real r=((40.+(60.*I2R(GetUnitAbilityLevel(u1,GetSpellAbilityId()))))+(I2R(GetHeroInt(u1,true))*2.))call GroupEnumUnitsInRange(ce[1],GetSpellTargetX(),GetSpellTargetY(),210.,null)loopset QC=FirstOfGroup(ce[1])exitwhen QC==nullcall GroupRemoveUnit(ce[1],QC)if(GetUnitState(QC,UNIT_STATE_LIFE)>0 and IsUnitEnemy(QC,p)and(Zy(QC,UNIT_TYPE_STRUCTURE)==false))thencall UnitDamageTargetBJ(u1,QC,r,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)endifendloopset p=nullset QC=nullset u1=nullendfunctionfunction J2 takes nothing returns booleanreturn((GetSpellAbilityId()==1093679440))endfunctionfunction K2 takes nothing returns nothinglocal unit QClocal unit u1=GetTriggerUnit()local real r=(350.+(150.*I2R(GetUnitAbilityLevel(u1,1093679440))))local real r2=(.2+(.1*I2R(GetUnitAbilityLevel(u1,1093679440))))local player p=GetOwningPlayer(u1)call GroupEnumUnitsInRange(ce[1],GetSpellTargetX(),GetSpellTargetY(),610.,null)loopset QC=FirstOfGroup(ce[1])exitwhen QC==nullcall GroupRemoveUnit(ce[1],QC)if(GetUnitState(QC,UNIT_STATE_LIFE)>1 and(Zy(QC,UNIT_TYPE_STRUCTURE)!=true))thenif IsUnitEnemy(QC,p)thenif((GetUnitState(QC,UNIT_STATE_MAX_LIFE)*.25)<=(r))thencall UnitDamageTargetBJ(u1,QC,r,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)elsecall UnitDamageTargetBJ(u1,QC,(GetUnitState(QC,UNIT_STATE_MAX_LIFE)*.25),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)endifelsecall SetUnitState(QC,UNIT_STATE_LIFE,(GetUnitState(QC,UNIT_STATE_LIFE)+(GetUnitState(QC,UNIT_STATE_MAX_LIFE)*r2)))endifendifendloopset p=nullset u1=nullset QC=nullendfunctionfunction M2 takes nothing returns nothingcall TriggerRegisterUnitEvent(er,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(fr,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(gr,B4,EVENT_UNIT_HERO_SKILL)endfunctionfunction O2 takes nothing returns booleanreturn((GetSpellAbilityId()==1093678413))endfunctionfunction P2 takes nothing returns nothinglocal unit u2=GetSpellTargetUnit()local real r=GetUnitState(u2,UNIT_STATE_MANA)call SetUnitState(u2,UNIT_STATE_MANA,.0)call TriggerSleepAction((4.5+I2R(GetUnitAbilityLevel(GetTriggerUnit(),1093678413))))call SetUnitState(u2,UNIT_STATE_MANA,(GetUnitState(u2,UNIT_STATE_MANA)+r))set u2=nullendfunctionfunction R2 takes nothing returns booleanreturn((GetSpellAbilityId()==1093682487))endfunctionfunction S2 takes nothing returns nothingif((GetTriggerUnit()==GetSpellTargetUnit()))thencall SetWidgetLife(GetTriggerUnit(),(GetUnitStateSwap(UNIT_STATE_LIFE,GetSpellTargetUnit())+(200.+(100.*I2R(GetUnitAbilityLevel(GetTriggerUnit(),1093682487))))))elsecall SetWidgetLife(GetTriggerUnit(),(GetUnitStateSwap(UNIT_STATE_LIFE,GetTriggerUnit())+(100.+(50.*I2R(GetUnitAbilityLevel(GetTriggerUnit(),1093682487))))))call SetWidgetLife(GetSpellTargetUnit(),(GetUnitStateSwap(UNIT_STATE_LIFE,GetSpellTargetUnit())+(200.+(100.*I2R(GetUnitAbilityLevel(GetTriggerUnit(),1093682487))))))endifendfunctionfunction U2 takes nothing returns booleanreturn((GetLearnedSkill()==1093679444))endfunctionfunction V2 takes nothing returns nothingif((GetUnitAbilityLevel(GetTriggerUnit(),1093679444)==1))thencall UnitAddAbility(GetTriggerUnit(),1093682482)elsecall SetUnitAbilityLevel(GetTriggerUnit(),1093682482,R2I(I2R(GetUnitAbilityLevel(GetTriggerUnit(),1093679444))))endifendfunctionfunction X2 takes nothing returns nothingcall TriggerRegisterUnitEvent(ir,B4,EVENT_UNIT_ATTACKED)call TriggerRegisterUnitEvent(jr,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(kr,B4,EVENT_UNIT_SPELL_EFFECT)set Q9[1]=50.set Q9[2]=70.set Q9[3]=90.set Q9[4]=110.endfunctionfunction Z2 takes nothing returns booleanreturn GetUnitAbilityLevel(GetTriggerUnit(),1110454874)>0 and P9[GetPlayerId(GetTriggerPlayer())+1]==falseendfunctionfunction dZ takes nothing returns nothinglocal unit QClocal unit u1=GetTriggerUnit()local integer i=GetPlayerId(GetTriggerPlayer())+1local integer BB=GetUnitAbilityLevel(u1,1093679445)local player p=GetOwningPlayer(u1)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\DemolisherFireMissile\\DemolisherFireMissile.mdl",u1,"chest"))call GroupEnumUnitsInRange(ce[1],GetUnitX(u1),GetUnitY(u1),300.,null)loopset QC=FirstOfGroup(ce[1])exitwhen QC==nullcall GroupRemoveUnit(ce[1],QC)if GetUnitState(QC,UNIT_STATE_LIFE)>0 and IsUnitEnemy(QC,p)and Zy(QC,UNIT_TYPE_STRUCTURE)==false thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\LordofFlameMissile\\LordofFlameMissile.mdl",QC,"chest"))call UnitDamageTarget(u1,QC,Q9[BB],true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)endifendloopset P9[i]=truecall TriggerSleepAction(.29)set P9[i]=falseset p=nullset QC=nullset u1=nullendfunctionfunction fZ takes nothing returns booleanreturn((GetSpellAbilityId()==1093679446))endfunctionfunction gZ takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,-$63F0AAA2)call SaveInteger(o,qB,-$5E9EB4B3,(LoadInteger(o,qB,-$5E9EB4B3)+1))if(((LoadInteger(o,qB,-$5E9EB4B3)>=8))or GetUnitState(u1,UNIT_STATE_LIFE)<=0)thencall FlushChildHashtable(o,qB)call DestroyTimer(t)elsecall SetUnitState(u1,UNIT_STATE_LIFE,(GetUnitState(u1,UNIT_STATE_LIFE)+(GetUnitState(u1,UNIT_STATE_MAX_LIFE)*(.03/ 2.))))endifset t=nullset u1=nullendfunctionfunction hZ takes nothing returns nothinglocal timer t=CreateTimer()local unit u1=GetTriggerUnit()call SetUnitState(u1,UNIT_STATE_LIFE,(GetUnitState(u1,UNIT_STATE_LIFE)+(100.+(100.*I2R(GetUnitAbilityLevel(u1,GetSpellAbilityId()))))))call SaveInteger(o,GetHandleId(t),-$5E9EB4B3,0)call SaveUnitHandle(o,GetHandleId(t),-$63F0AAA2,u1)call TimerStart(t,1.,true,function gZ)set t=nullset u1=nullendfunctionfunction jZ takes nothing returns booleanreturn((GetSpellAbilityId()==1093679447))endfunctionfunction kZ takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x1local real y1local integer i=1loopexitwhen i>$Cset x1=(x+256.*Cos((30.*(I2R(i)))*bj_DEGTORAD))set y1=(y+256.*Sin((30.*(I2R(i)))*bj_DEGTORAD))call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl",x1,y1))set i=i+1endloopset u1=nullendfunctionfunction nZ takes nothing returns nothingcall TriggerRegisterUnitEvent(nr,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(pr,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(qr,B4,EVENT_UNIT_HERO_SKILL)endfunctionfunction pZ takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u=LoadUnitHandle(o,qB,1)call FlushChildHashtable(o,qB)call DestroyTimer(t)call UnitRemoveAbility(u,1093679450)call UnitRemoveAbility(u,1093683256)set t=nullset u=nullendfunctionfunction qZ takes nothing returns nothinglocal unit u=GetTriggerUnit()local integer i=GetUnitAbilityLevel(u,1093678644)local timer t=CreateTimer()local integer qB=GetHandleId(t)local real tB=12.if GetUnitAbilityLevel(u,1093681460)!=0 and GetUnitAbilityLevel(u,1093686870)!=0 thencall UnitRemoveAbility(u,1093686870)call UnitAddAbility(u,1093683256)call SetUnitAbilityLevel(u,1093683256,i)call UnitAddAbility(u,1093679450)call SetUnitAbilityLevel(u,1093679450,i)elsecall UnitAddAbility(u,1093679450)call SetUnitAbilityLevel(u,1093679450,i)endifcall SaveUnitHandle(o,qB,1,u)call TimerStart(t,tB,false,function pZ)set u=nullset t=nullendfunctionfunction rZ takes nothing returns booleanif GetSpellAbilityId()==1093678644 thencall qZ()endifreturn falseendfunctionfunction tZ takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,1)local location p=LoadLocationHandle(o,qB,2)local real x=GetLocationX(p)local real y=GetLocationY(p)local integer BB=GetUnitAbilityLevel(u1,1093679172)local unit u3if LoadInteger(o,qB,3)>=3 thencall FlushChildHashtable(o,qB)call DestroyTimer(t)call RemoveLocation(p)elsecall DestroyEffect(AddSpecialEffect("war3mapImported\\firaga.mdx",x,y))set u3=CreateUnit(GetOwningPlayer(u1),1747989063,x,y,0)call ShowUnit(u3,false)call UnitApplyTimedLife(u3,1112045413,.1)call UnitAddAbility(u3,1093687093)call SetUnitAbilityLevel(u3,1093687093,BB)call IssueImmediateOrderById(u3,$D009F)if GetRandomInt(1,100)<=$F+$A*BB thencall SaveInteger(o,qB,3,LoadInteger(o,qB,3)+1)elsecall FlushChildHashtable(o,qB)call PauseTimer(t)call DestroyTimer(t)call RemoveLocation(p)endifendifset p=nullset u1=nullset u3=nullset t=nullendfunctionfunction uZ takes nothing returns booleanreturn GetSpellAbilityId()==1093679172endfunctionfunction vZ takes nothing returns nothinglocal unit u1=GetTriggerUnit()local boolean b=falselocal real x=GetSpellTargetX()local real y=GetSpellTargetY()local location p=GetSpellTargetLoc()local timer t=CreateTimer()local integer qB=GetHandleId(t)local real tB=1.4local unit u3if GetUnitAbilityLevel(u1,1093686870)!=0 thencall UnitRemoveAbility(u1,1093686870)set b=trueelseset b=falseendifcall TriggerSleepAction(tB)call DestroyEffect(AddSpecialEffect("war3mapImported\\firaga.mdx",x,y))set u3=CreateUnit(GetOwningPlayer(u1),1747989063,x,y,0)call ShowUnit(u3,false)call UnitApplyTimedLife(u3,1112045413,.05)call UnitAddAbility(u3,1093679178)call SetUnitAbilityLevel(u3,1093679178,GetUnitAbilityLevel(u1,1093679172))call IssueImmediateOrderById(u3,$D009F)if b thencall SaveUnitHandle(o,qB,1,u1)call SaveLocationHandle(o,qB,2,p)call SaveInteger(o,qB,3,0)call TimerStart(t,.7,true,function tZ)elsecall RemoveLocation(p)endifset u1=nullset u3=nullset t=nullset p=nullendfunctionfunction xZ takes nothing returns nothinglocal unit u=LoadUnitHandle(o,GetHandleId(GetExpiredTimer()),-$5E9EB4B3)if GetUnitAbilityLevel(u,1093686870)==0 thencall UnitAddAbility(u,1093686870)endifset u=nullendfunctionfunction yZ takes nothing returns nothinglocal timer t=CreateTimer()call SaveUnitHandle(o,GetHandleId(t),-$5E9EB4B3,GetTriggerUnit())call TimerStart(t,10.,true,function xZ)set t=nullendfunctionfunction zZ takes nothing returns booleanif GetLearnedSkill()==1093681460 and IsUnitIllusion(GetTriggerUnit())!=true and GetUnitAbilityLevel(GetTriggerUnit(),1093681460)==1 thencall yZ()endifreturn falseendfunctionfunction aZ takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local integer BB=GetUnitAbilityLevel(u1,1093681463)local real BF=450.+150.*I2R(BB)if GetUnitState(u2,UNIT_STATE_LIFE)<BF thencall UnitDamageTarget(u1,u2,1200.,true,false,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)endifcall aB(u1,1093682247,BB,30.,false)set u1=nullset u2=nullendfunctionfunction BZ takes nothing returns booleanif GetSpellAbilityId()==1093681463 thencall aZ()endifreturn falseendfunctionfunction bZ takes nothing returns booleanif GetLearnedSkill()==1093681462 thenif GetUnitAbilityLevel(GetTriggerUnit(),1093681462)==1 thencall TriggerRegisterUnitEvent(ur,GetTriggerUnit(),EVENT_UNIT_TARGET_IN_RANGE)endifcall UnitAddAbility(GetTriggerUnit(),1093686600)endifreturn falseendfunctionfunction CZ takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real a=(GetUnitFacing(u1)*bj_DEGTORAD)local real xlocal real ylocal real x1local real y1local item zC=CreateItem(1227895124,0,0)set x=GetUnitX(u1)set y=GetUnitY(u1)set x1=x+650.*Cos(a)set y1=y+650.*Sin(a)call UnitAddItem(u1,zC)call RemoveItem(zC)call zB(u1,x1,y1,.005,false)set u1=nullset zC=nullendfunctionfunction cZ takes nothing returns booleanif GetSpellAbilityId()==1093683762 thencall CZ()endifreturn falseendfunctionfunction DZ takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u3local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x1=GetSpellTargetX()local real y1=GetSpellTargetY()local integer i=GetPlayerId(GetOwningPlayer(u1))+1set u3=CreateUnit(GetOwningPlayer(u1),1747989061,x,y,0)call UnitApplyTimedLife(u3,1112045413,6.)call UnitAddAbility(u3,1093678145)call SetUnitAbilityLevel(u3,1093678145,GetUnitAbilityLevel(u1,1093681461))call IssuePointOrderById(u3,$D0264,x1,y1)set u1=nullset u3=nullendfunctionfunction EZ takes nothing returns booleanif GetSpellAbilityId()==1093681461 thencall DZ()endifreturn falseendfunctionfunction FZ takes trigger aH returns nothinglocal trigger rBlocal integer qB=GetHandleId(aH)set rB=CreateTrigger()call TriggerAddCondition(rB,Condition(function EZ))call SaveTriggerHandle(We,qB,1,rB)set rB=CreateTrigger()call TriggerAddCondition(rB,Condition(function cZ))call SaveTriggerHandle(We,qB,2,rB)set rB=CreateTrigger()call TriggerAddCondition(rB,Condition(function bZ))call SaveTriggerHandle(We,qB,3,rB)set rB=CreateTrigger()call TriggerAddCondition(rB,Condition(function BZ))call SaveTriggerHandle(We,qB,4,rB)set rB=nullendfunctionfunction GZ takes nothing returns nothinglocal trigger rB=GetTriggeringTrigger()local integer qB=GetHandleId(rB)local unit u=B4if GetTriggerExecCount(rB)==1 thencall FZ(rB)call EnableTrigger(sr)endifset rB=LoadTriggerHandle(We,qB,1)call TriggerRegisterUnitEvent(rB,u,EVENT_UNIT_SPELL_EFFECT)set rB=LoadTriggerHandle(We,qB,2)call TriggerRegisterUnitEvent(rB,u,EVENT_UNIT_SPELL_EFFECT)set rB=LoadTriggerHandle(We,qB,3)call TriggerRegisterUnitEvent(rB,u,EVENT_UNIT_HERO_SKILL)set rB=LoadTriggerHandle(We,qB,4)call TriggerRegisterUnitEvent(rB,u,EVENT_UNIT_SPELL_EFFECT)set u=nullset rB=nullendfunctionfunction IZ takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local unit u3=CreateUnit(GetOwningPlayer(GetEventDamageSource()),1747989063,x,y,0)call ShowUnit(u3,false)call UnitApplyTimedLife(u3,1112045413,.1)call UnitAddAbility(u3,1093683802)call IssueTargetOrderById(u3,$D0132,u1)set u1=nullset u3=nullendfunctionfunction lZ takes nothing returns booleanif IsTriggerEnabled(sr)and GetUnitTypeId(GetEventDamageSource())==1747989061 thencall IZ()endifreturn falseendfunctionfunction KZ takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetEventTargetUnit()local real x=GetUnitX(u2)local real y=GetUnitY(u2)local player p=GetOwningPlayer(u1)local unit u3=CreateUnit(p,1747988805,x,y,0)local integer BB=GetUnitAbilityLevel(u1,1093681462)local real tB=(23.5-4.*I2R(BB))call UnitApplyTimedLife(u3,1112045413,.01)call ShowUnit(u3,false)call UnitAddAbility(u3,1093683763)call IssueTargetOrderById(u3,$D0132,u2)call CB(u1,1093686600,1,tB)call UnitRemoveAbility(u1,1093686600)set u1=nullset u2=nullset u3=nullset p=nullendfunctionfunction LZ takes nothing returns booleanlocal unit u=GetTriggerUnit()local unit u2=GetEventTargetUnit()if GetUnitAbilityLevel(u,1093686600)!=0 and Zy(u2,UNIT_TYPE_STRUCTURE)==false and Zy(u2,UNIT_TYPE_ANCIENT)==false and IsUnitEnemy(u2,GetOwningPlayer(u))thencall KZ()endifset u=nullset u2=nullreturn falseendfunctionfunction NZ takes nothing returns nothinglocal timer t=GetExpiredTimer()local unit u1=LoadUnitHandle(o,GetHandleId(t),-$5E9EB4B3)local unit u3=LoadUnitHandle(o,GetHandleId(t),-$63F0AAA2)if Zy(u1,UNIT_TYPE_DEAD)thencall FlushChildHashtable(o,GetHandleId(t))call DestroyTimer(t)elsecall SetUnitX(u3,GetUnitX(u1))call SetUnitY(u3,GetUnitY(u1))call IssueImmediateOrderById(u3,$D009F)endifset t=nullset u1=nullset u3=nullendfunctionfunction OZ takes nothing returns nothinglocal timer t=CreateTimer()local unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x2=GetSpellTargetX()local real y2=GetSpellTargetY()local real a=Atan2(y2-y,x2-x)local real x3=x+1500.*Cos(a)local real y3=y+1500.*Sin(a)local unit u3=CreateUnit(GetOwningPlayer(u1),1697656902,x,y,a*bj_RADTODEG)local unit u4=CreateUnit(GetOwningPlayer(u1),1747988805,x,y,0)local integer i=GetUnitAbilityLevel(u1,1093681473)call SetUnitAbilityLevel(u3,1093681474,i)call IssuePointOrderById(u3,$D0012,x3,y3)call UnitApplyTimedLife(u4,1112045413,10.)call UnitAddAbility(u4,1093681474)call SetUnitAbilityLevel(u4,1093681474,i)call SaveUnitHandle(o,GetHandleId(t),-$5E9EB4B3,u3)call SaveUnitHandle(o,GetHandleId(t),-$63F0AAA2,u4)call TimerStart(t,.57,true,function NZ)set t=nullset u1=nullset u3=nullset u4=nullendfunctionfunction PZ takes nothing returns booleanif GetSpellAbilityId()==1093681473 thencall OZ()endifreturn falseendfunctionfunction RZ takes nothing returns nothingcall TriggerRegisterUnitEvent(xr,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(yr,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(zr,B4,EVENT_UNIT_ISSUED_ORDER)call TriggerRegisterUnitEvent(Ar,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(ar,B4,EVENT_UNIT_SPELL_CHANNEL)set Q7[1]=350.set Q7[2]=450.set Q7[3]=550.set Q7[4]=650.set R9[(1+GetPlayerId(GetOwningPlayer(B4)))]=CreateTimer()endfunctionfunction TZ takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local player p=GetOwningPlayer(u1)local unit u3=CreateUnit(p,1747988805,x,y,0)local integer BB=GetUnitAbilityLevel(u1,1093684556)local real tB=(1.2+(1.*I2R(BB)))call UnitApplyTimedLife(u3,1112045413,tB)call UnitAddAbility(u3,1093681476)call SetUnitAbilityLevel(u3,1093681476,BB)set p=nullset u1=nullset u3=nullendfunctionfunction UZ takes nothing returns booleanif GetSpellAbilityId()==1093684556 thencall TZ()endifreturn falseendfunctionfunction WZ takes nothing returns nothinglocal timer t=GetExpiredTimer()local unit u1=LoadUnitHandle(o,GetHandleId(t),-$5E9EB4B3)local real r=((.01+(.01*I2R(GetUnitAbilityLevel(u1,1093681477))))+(.01*I2R(R2I((I2R(GetHeroInt(u1,true))/ 50.)))))local player p=GetOwningPlayer(u1)local unit QCif GetUnitAbilityLevel(u1,1110455092)<=0 thencall FlushChildHashtable(o,GetHandleId(t))call UnitRemoveAbility(u1,1093681480)call PauseTimer(R9[GetPlayerId(p)+1])elsecall GroupEnumUnitsInRange(ce[2],GetUnitX(u1),GetUnitY(u1),540.,null)loopset QC=FirstOfGroup(ce[2])exitwhen QC==nullcall GroupRemoveUnit(ce[2],QC)if(GetUnitAbilityLevel(QC,1110455094)>0 and IsUnitEnemy(QC,p))thencall UnitDamageTarget(u1,QC,GetUnitState(QC,UNIT_STATE_MAX_LIFE)*r,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)endifendloopendifset p=nullset t=nullset u1=nullset QC=nullendfunctionfunction XZ takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer i=GetPlayerId(GetOwningPlayer(u1))+1call UnitAddAbility(u1,1093681480)call SaveUnitHandle(o,GetHandleId(R9[i]),-$5E9EB4B3,u1)call PauseTimer(R9[i])call TimerStart(R9[i],1.,true,function WZ)set u1=nullendfunctionfunction YZ takes nothing returns booleanif((GetSpellAbilityId()==1093681477))thencall XZ()endifreturn falseendfunctionfunction d44 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer i=GetPlayerId(GetOwningPlayer(u1))+1call FlushChildHashtable(o,GetHandleId(R9[i]))call PauseTimer(R9[i])call UnitRemoveAbility(u1,1093681480)set u1=nullendfunctionfunction d74 takes nothing returns booleanif GetIssuedOrderId()==852178thencall d44()endifreturn falseendfunctionfunction d94 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer BB=GetUnitAbilityLevel(u1,1093681478)local real BF=100.+100.*I2R(BB)local real x=GetSpellTargetX()local real y=GetSpellTargetY()local unit QClocal player p=GetOwningPlayer(u1)call GroupEnumUnitsInRange(ce[2],x,y,Q7[BB],null)loopset QC=FirstOfGroup(ce[2])exitwhen QC==nullcall GroupRemoveUnit(ce[2],QC)if Zy(QC,UNIT_TYPE_DEAD)==false and IsUnitEnemy(QC,p)and Zy(QC,UNIT_TYPE_MECHANICAL)==false and Zy(QC,UNIT_TYPE_STRUCTURE)==false and GetUnitPointValue(QC)!=1 thencall UnitDamageTarget(u1,QC,BF,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)call SetUnitPosition(QC,x,y)endifendloopset p=nullset u1=nullset QC=nullendfunctionfunction dd4 takes nothing returns booleanif GetSpellAbilityId()==1093681478 thencall d94()endifreturn falseendfunctionfunction df4 takes nothing returns booleanif(IsTerrainPathable(GetSpellTargetX(),GetSpellTargetY(),PATHING_TYPE_WALKABILITY))thencall DisplayTimedTextToPlayer(GetOwningPlayer(GetTriggerUnit()),0,0,3.,"TRIGSTR_9789")call IssueImmediateOrderById(GetTriggerUnit(),$D0004)endifreturn falseendfunctionfunction dh4 takes nothing returns booleanif GetLearnedSkill()==1093681483 thencall SetPlayerTechResearched(GetOwningPlayer(GetTriggerUnit()),1378889785,GetUnitAbilityLevel(GetTriggerUnit(),1093681483))endifreturn falseendfunctionfunction dj4 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,1)local location p=LoadLocationHandle(o,qB,2)local integer i=1local real x=GetLocationX(p)local real y=GetLocationY(p)local player dk4=GetOwningPlayer(u1)local real x1local real y1local unit u3local real acall FlushChildHashtable(o,qB)call DestroyTimer(t)call RemoveLocation(p)loopexitwhen i>16set a=22.5*I2R(i)set x1=x+400.*Cos(a)set y1=y+400.*Sin(a)call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Monsoon\\MonsoonBoltTarget.mdl",x1,y1))set i=i+1endloopset u3=CreateUnit(dk4,1747989063,x,y,0)call UnitApplyTimedLife(u3,1112045413,.5)call UnitAddAbility(u3,1093683255)call SetUnitAbilityLevel(u3,1093683255,GetUnitAbilityLevel(u1,1093678418))call IssueImmediateOrderById(u3,$D009F)call SetUnitMoveSpeed(u1,GetUnitDefaultMoveSpeed(u1))call SetUnitTimeScale(u1,1.)call SetUnitPosition(u1,x,y)if(GetLocalPlayer()==dk4)thencall PanCameraToTimed(x,y,0)endifset p=nullset u1=nullset u3=nullset t=nullset dk4=nullendfunctionfunction dm4 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,1)call SetUnitTimeScale(u1,4.)call SetUnitAnimation(u1,"attack")call TimerStart(t,.2,false,function dj4)set t=nullset u1=nullendfunctionfunction dn4 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetSpellTargetX()local real y=GetSpellTargetY()local location p=GetSpellTargetLoc()local integer i=1local timer t=CreateTimer()local integer qB=GetHandleId(t)local unit u3call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Monsoon\\MonsoonBoltTarget.mdl",x,y))call SetUnitMoveSpeed(u1,0)call SaveUnitHandle(o,qB,1,u1)call SaveLocationHandle(o,qB,2,p)call TimerStart(t,.6,false,function dm4)set p=nullset u1=nullset u3=nullendfunctionfunction do4 takes nothing returns booleanif GetSpellAbilityId()==1093678418 thencall dn4()endifreturn falseendfunctionfunction dq4 takes nothing returns nothinglocal item dr4=GetManipulatedItem()local unit u1=GetTriggerUnit()local unit u3local integer qB=GetHandleId(dr4)local integer i=LoadInteger(o,qB,$D903)local integer i2=LoadInteger(o,qB,-$5E9EB4B3)local integer BB=GetUnitAbilityLevel(h4[i2],1093686345)local real BF=100.*I2R(BB)local real x=GetUnitX(u1)local real y=GetUnitY(u1)call FlushChildHashtable(o,qB)call RemoveItem(dr4)set dr4=CreateItem(i,x,y)call UnitAddItem(u1,dr4)set u3=CreateUnit(GetOwningPlayer(h4[i2]),1747989063,x,y,0)call UnitApplyTimedLife(u3,1112045413,.01)set u3=CreateUnit(GetOwningPlayer(u1),1747989063,x,y,0)call UnitApplyTimedLife(u3,1112045413,.01)call UnitAddAbility(u3,1093679182)call SetUnitAbilityLevel(u3,1093679182,BB)call IssueTargetOrderById(u3,$D008A,u1)call UnitDamageTarget(h4[i2],u1,BF,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)set u1=nullset dr4=nullset u3=nullendfunctionfunction ds4 takes nothing returns booleanif GetItemTypeId(GetManipulatedItem())==1227895126 thencall dq4()endifreturn falseendfunctionfunction du4 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local integer i=1local integer i2=0local integer i3=GetPlayerId(GetOwningPlayer(u1))+1local real x=GetUnitX(u1)local real y=GetUnitY(u1)local item SGlocal integer wblocal player plocal integer qBlocal item dr4set i2=0set i=1loopexitwhen i>6set SG=UnitItemInSlot(u2,i-1)if SG!=null and GetItemTypeId(SG)!=1227895126 thenset i2=i2+1set v8[i2]=UnitItemInSlot(u2,i-1)endifset i=i+1endloopif i2>=1 thenif IsUnitPaused(u2) thencall DisplayTimedTextToPlayer(GetOwningPlayer(u1),0,0,5,"目標處於異常狀態 無法掉換物品")elseset i2=GetRandomInt(1,i2)set w8[x8]=GetItemTypeId(v8[i2])set x8=(x8+1)set i=GetItemTypeId(v8[i2])call RemoveItem(v8[i2])set dr4=CreateItem(1227895126,x,y)call UnitAddItem(u2,dr4)set qB=GetHandleId(dr4)call SaveInteger(o,qB,$D903,i)call SaveInteger(o,qB,-$5E9EB4B3,i3)endifendifset wb=$E+9*GetUnitAbilityLevel(u1,1093686345)set p=GetOwningPlayer(u1)call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)+wb)set p=GetOwningPlayer(u2)call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)-wb)call UnitDamageTarget(u1,u2,X9[i3],true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_ACID,WEAPON_TYPE_WHOKNOWS)set p=nullset u1=nullset u2=nullset dr4=nullendfunctionfunction dv4 takes nothing returns booleanif GetSpellAbilityId()==1093686345 thencall du4()endifreturn falseendfunctionfunction dw4 takes nothing returns nothinglocal trigger rBcall TriggerRegisterUnitEvent(Dr,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Er,B4,EVENT_UNIT_TARGET_IN_RANGE)set rB=CreateTrigger()call TriggerAddCondition(rB,Condition(function dv4))call TriggerRegisterUnitEvent(rB,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Fr,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(Ir,B4,EVENT_UNIT_SPELL_EFFECT)set U9[1]=60.set U9[2]=90.set U9[3]=120.set U9[4]=150.if GetTriggerExecCount(GetTriggeringTrigger())==1 thencall TriggerRegisterAnyUnitEventBJ(cr,EVENT_PLAYER_UNIT_DEATH)set rB=CreateTrigger()call TriggerAddCondition(rB,Condition(function ds4))call TriggerRegisterAnyUnitEventBJ(rB,EVENT_PLAYER_UNIT_USE_ITEM)endifset rB=nullendfunctionfunction dy4 takes nothing returns nothinglocal player p=GetOwningPlayer(GetKillingUnit())if Zy(GetTriggerUnit(),UNIT_TYPE_HERO)thencall SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)+100)elsecall SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)+4)endifset p=nullendfunctionfunction dz4 takes nothing returns booleanif GetUnitTypeId(GetKillingUnit())==1214345325 thencall dy4()endifreturn falseendfunctionfunction da4 takes nothing returns booleanif GetSpellAbilityId()==1093686861 thenset S9[GetPlayerId(GetTriggerPlayer())+1]=GetUnitAbilityLevel(GetTriggerUnit(),1093686861)+3endifreturn falseendfunctionfunction db4 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer iif GetUnitAbilityLevel(u1,1110455106)>0 thenset i=GetPlayerId(GetTriggerPlayer())+1if S9[i]<=0 thencall UnitRemoveAbility(u1,1110455106)elseset S9[i]=(S9[i]-1)endifendifset u1=nullendfunctionfunction dc4 takes nothing returns booleanlocal unit u=GetTriggerUnit()if GetLearnedSkill()==1093686862 and IsUnitIllusion(u)!=true and GetUnitAbilityLevel(u,1093686862)==1 thencall TriggerRegisterUnitEvent(Gr,u,EVENT_UNIT_TARGET_IN_RANGE)call TriggerRegisterUnitEvent(Hr,u,EVENT_UNIT_SPELL_EFFECT)endifset u=nullreturn falseendfunctionfunction dE4 takes nothing returns nothinglocal trigger rB=GetTriggeringTrigger()local integer qB=GetHandleId(rB)local unit u1=LoadUnitHandle(o,qB,-$5E9EB4B3)local unit u2=GetTriggerUnit()local integer i=GetPlayerId(GetOwningPlayer(u1))+1local real r=.05*I2R(GetPlayerState(GetOwningPlayer(u1),PLAYER_STATE_RESOURCE_GOLD))local real BFlocal integer BB=GetUnitAbilityLevel(u1,1093686862)if r>=U9[BB]thenset BF=U9[BB]+V9[i]elseset BF=r+V9[i]endifcall TriggerRemoveCondition(rB,LoadTriggerConditionHandle(o,qB,$AD9C))call DestroyTrigger(rB)call FlushChildHashtable(o,qB)set t9[i]=falsecall UnitDamageTarget(u1,u2,BF,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_ACID,WEAPON_TYPE_WHOKNOWS)set rB=nullset u1=nullset u2=nullendfunctionfunction d34 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetEventTargetUnit()local trigger rBlocal integer qBlocal integer i=GetPlayerId(GetOwningPlayer(u1))+1local triggercondition uBif t9[i]==false and Zy(u2,UNIT_TYPE_STRUCTURE)==false thenset rB=CreateTrigger()set qB=GetHandleId(rB)set t9[i]=truecall SaveUnitHandle(o,qB,-$5E9EB4B3,u1)set uB=TriggerAddCondition(rB,Condition(function dE4))call SaveTriggerConditionHandle(o,qB,$AD9C,uB)call TriggerRegisterUnitEvent(rB,u2,EVENT_UNIT_DAMAGED)call wB(rB,.3,uB,i)endifset rB=nullset uB=nullset u1=nullset u2=nullendfunctionfunction dG4 takes nothing returns booleanreturn GetSpellAbilityId()==1093686862endfunctionfunction d64 takes nothing returns nothinglocal trigger rBlocal integer qBlocal unit u1local integer ilocal real BF=GetEventDamage()if BF>1 thenset u1=GetTriggerUnit()set i=GetPlayerId(GetTriggerPlayer())+1if Z4[i]<=BF thenset rB=GetTriggeringTrigger()set qB=GetHandleId(rB)call UnitRemoveAbility(u1,1093687352)call SetUnitState(u1,UNIT_STATE_LIFE,GetUnitState(u1,UNIT_STATE_LIFE)+Z4[i])call TriggerRemoveCondition(rB,LoadTriggerConditionHandle(o,qB,$AD9C))call DestroyTrigger(rB)call FlushChildHashtable(o,qB)elsecall SetUnitState(u1,UNIT_STATE_LIFE,GetUnitState(u1,UNIT_STATE_LIFE)+BF)set Z4[i]=Z4[i]-BFendifendifset u1=nullset rB=nullendfunctionfunction dH4 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer i=GetPlayerId(GetTriggerPlayer())+1local trigger rB=CreateTrigger()local triggercondition uBcall UnitAddAbility(u1,1093687352)set Z4[i]=100.+100.*I2R(GetUnitAbilityLevel(u1,1093686862))set Z4[i]=Z4[i]+.05*I2R(GetPlayerState(GetOwningPlayer(u1),PLAYER_STATE_RESOURCE_GOLD))set Z4[i]=Z4[i]+W9[i]set uB=TriggerAddCondition(rB,Condition(function d64))call SaveTriggerConditionHandle(o,GetHandleId(rB),$AD9C,uB)call TriggerRegisterUnitEvent(rB,u1,EVENT_UNIT_DAMAGED)call xA(10.)set Z4[i]=.0if rB!=null thencall UnitRemoveAbility(u1,1093687352)call TriggerRemoveCondition(rB,uB)call DestroyTrigger(rB)endifset u1=nullset rB=nullset uB=nullendfunctionfunction dl4 takes nothing returns booleanreturn GetSpellAbilityId()==1093681491endfunctionfunction d14 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local player p=GetOwningPlayer(u1)local player p2=GetOwningPlayer(u2)local integer i=GetPlayerId(p)+1local integer wbif(GetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD)<=300)thenset wb=GetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD)call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)+wb)call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,0)elseset wb=300call SetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p,PLAYER_STATE_RESOURCE_GOLD)+wb)call SetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD,GetPlayerState(p2,PLAYER_STATE_RESOURCE_GOLD)-wb)endifset W9[i]=300.set V9[i]=50.set X9[i]=400.set S9[i]=S9[i]+2call xA(30.)set W9[i]=.0set V9[i]=.0set X9[i]=.0set u1=nullset u2=nullset p=nullset p2=nullendfunctionfunction dK4 takes nothing returns nothingcall TriggerRegisterUnitEvent(Jr,B4,EVENT_UNIT_ISSUED_ORDER)call TriggerRegisterUnitEvent(Kr,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Lr,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Mr,B4,EVENT_UNIT_SPELL_EFFECT)endfunctionfunction dM4 takes nothing returns booleanset f8[GetPlayerId(GetTriggerPlayer())+1]=GetIssuedOrderId()==$D01FEreturn falseendfunctionfunction dO4 takes nothing returns nothinglocal integer id=GetSpellAbilityId()local unit u1if id==1093681494 or id==1093683539 or id==1093681497 or id==1093681498 and f8[GetPlayerId(GetTriggerPlayer())+1]thenset u1=GetTriggerUnit()call SetUnitState(u1,UNIT_STATE_MANA,GetUnitState(u1,UNIT_STATE_MANA)-.06*GetUnitState(u1,UNIT_STATE_MAX_MANA))endifset u1=nullendfunctionfunction dP4 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetSpellTargetX()local real y=GetSpellTargetY()local unit u3=CreateUnit(GetOwningPlayer(u1),1747989063,x,y,0)call UnitApplyTimedLife(u3,1112045413,.01)call ShowUnit(u3,false)set u3=CreateUnit(GetOwningPlayer(u1),1747988805,x,y,0)call UnitApplyTimedLife(u3,1112045413,13.)call UnitAddAbility(u3,1093681495)call SetUnitAbilityLevel(u3,1093681495,GetUnitAbilityLevel(u1,1093681494))call IssuePointOrderById(u3,$D0079,x,y)set u1=nullset u3=nullendfunctionfunction dQ4 takes nothing returns booleanif GetSpellAbilityId()==1093681494 thencall dP4()endifreturn falseendfunctionfunction dS4 takes nothing returns nothinglocal unit u1=GetTriggerUnit()if GetUnitLifePercent(u1)>$A thencall UnitDamageTargetBJ(u1,u1,(.1*GetUnitState(u1,UNIT_STATE_MAX_LIFE)),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)elsecall UnitDamageTargetBJ(u1,u1,(GetUnitState(u1,UNIT_STATE_LIFE)*.95),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)endifset u1=nullendfunctionfunction d54 takes nothing returns booleanif GetSpellAbilityId()==1093681497 thencall dS4()endifreturn falseendfunctionfunction dU4 takes nothing returns nothingcall TriggerRegisterUnitEvent(Pr,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Qr,B4,EVENT_UNIT_SPELL_EFFECT)endfunctionfunction dW4 takes nothing returns booleanreturn((GetSpellAbilityId()==1093679154))endfunctionfunction dX4 takes nothing returns nothingcall SetWidgetLife(GetTriggerUnit(),(GetUnitStateSwap(UNIT_STATE_LIFE,GetTriggerUnit())+(25.+(75.*I2R(GetUnitAbilityLevel(GetTriggerUnit(),1093679154))))))endfunctionfunction d24 takes nothing returns booleanreturn GetSpellAbilityId()==1093681716endfunctionfunction dZ4 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetSpellTargetX()local real y=GetSpellTargetY()local unit u3=CreateUnit(GetOwningPlayer(u1),1747988805,x,y,0)call UnitApplyTimedLife(u3,1112045413,2.)call UnitAddAbility(u3,1093684809)call SetUnitAbilityLevel(u3,1093684809,GetUnitAbilityLevel(u1,1093681716))call IssueImmediateOrderById(u3,$D0080)set u1=nullset u3=nullendfunctionfunction e44 takes nothing returns nothingcall TriggerRegisterUnitEvent(Sr,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Tr,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Ur,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(Vr,B4,EVENT_UNIT_SPELL_EFFECT)set De[(1+GetPlayerId(GetOwningPlayer(B4)))]=CreateGroup()endfunctionfunction e84 takes nothing returns booleanreturn((GetSpellAbilityId()==1093681719))endfunctionfunction e94 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,-$5E9EB4B3)local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))local real xlocal real ylocal unit QCif Ix[i]<=69. thenset x=GetUnitX(u1)+35.*Cos(lx[i])set y=GetUnitY(u1)+35.*Sin(lx[i])call SetUnitX(u1,x)call SetUnitY(u1,y)call GroupEnumUnitsInRange(ce[2],x,y,Jx[i],null)loopset QC=FirstOfGroup(ce[2])exitwhen QC==nullcall GroupRemoveUnit(ce[2],QC)if(IsUnitInGroup(QC,De[i])!=true and Zy(QC,UNIT_TYPE_DEAD)==false and IsUnitEnemy(QC,GetOwningPlayer(u1))and Zy(QC,UNIT_TYPE_MECHANICAL)==false and Zy(QC,UNIT_TYPE_STRUCTURE)==false)thencall GroupAddUnit(De[i],QC)call IssueTargetOrderById(u1,$D006B,QC)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",QC,"origin"))endifendloopcall ShowUnit(u1,false)call KillUnit(u1)call FlushChildHashtable(o,qB)call DestroyTimer(t)elseset Ix[i]=Ix[i]-69.set x=GetUnitX(u1)+69.*Cos(lx[i])set y=GetUnitY(u1)+69.*Sin(lx[i])call SetUnitX(u1,x)call SetUnitY(u1,y)call GroupEnumUnitsInRange(ce[2],x,y,Jx[i],null)loopset QC=FirstOfGroup(ce[2])exitwhen QC==nullcall GroupRemoveUnit(ce[2],QC)if(IsUnitInGroup(QC,De[i])!=true and Zy(QC,UNIT_TYPE_DEAD)==false and IsUnitEnemy(QC,GetOwningPlayer(u1))and Zy(QC,UNIT_TYPE_MECHANICAL)==false and Zy(QC,UNIT_TYPE_STRUCTURE)==false)thencall GroupAddUnit(De[i],QC)call IssueTargetOrderById(u1,$D006B,QC)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",QC,"origin"))endifendloopset Jx[i]=Jx[i]+8endifset u1=nullset QC=nullset t=nullendfunctionfunction ed4 takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)local unit u1=GetTriggerUnit()local unit u3local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x1=GetSpellTargetX()local real y1=GetSpellTargetY()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))set u3=CreateUnit(GetOwningPlayer(u1),1747988805,x,y,0)call UnitApplyTimedLife(u3,1112045413,6.)call UnitAddAbility(u3,1093678421)call SetUnitAbilityLevel(u3,1093678421,GetUnitAbilityLevel(u1,1093681719))call IssuePointOrderById(u3,$D0264,x1,y1)set u3=CreateUnit(GetOwningPlayer(u1),1747989063,x,y,0)call UnitApplyTimedLife(u3,1112045413,3.)call UnitAddAbility(u3,1093682225)call SetUnitAbilityLevel(u3,1093682225,GetUnitAbilityLevel(h4[i],1093681719))call GroupClear(De[i])set Jx[i]=165.set Ix[i]=965.set lx[i]=Atan2(y1-y,x1-x)call SaveUnitHandle(o,qB,-$5E9EB4B3,u3)call TimerStart(t,.05,true,function e94)set u1=nullset u3=nullset t=nullendfunctionfunction ef4 takes nothing returns booleanreturn((GetSpellAbilityId()==1093684306))endfunctionfunction eg4 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local integer i=GetUnitAbilityLevel(u1,1093684306)local real r=GetUnitState(u1,UNIT_STATE_LIFE)local real r2=GetUnitState(u2,UNIT_STATE_LIFE)if(r2<=(50.+(100.*I2R(i))))thencall SetWidgetLife(u1,(r+r2))call SetWidgetLife(u2,1.)call UnitDamageTargetBJ(u1,u2,500,ATTACK_TYPE_CHAOS,DAMAGE_TYPE_ACID)elsecall SetWidgetLife(u1,(r+(50.+(100.*I2R(i)))))call UnitDamageTargetBJ(u1,u2,(50.+(100.*I2R(i))),ATTACK_TYPE_HERO,DAMAGE_TYPE_ACID)endifset u1=nullset u2=nullendfunctionfunction ei4 takes nothing returns booleanreturn((GetLearnedSkill()==1093681496))endfunctionfunction ej4 takes nothing returns nothingcall SetPlayerTechResearchedSwap(1383427429,GetUnitAbilityLevel(GetTriggerUnit(),1093681496),GetOwningPlayer(GetTriggerUnit()))endfunctionfunction em4 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,1)local group g=LoadGroupHandle(o,qB,2)local real x=GetUnitX(u1)local real y=GetUnitY(u1)local unit QC=nullloopset QC=FirstOfGroup(g)exitwhen QC==nullcall GroupRemoveUnit(g,QC)call SetUnitPosition(QC,x,y)endloopcall DestroyGroup(g)call DestroyTimer(t)call FlushChildHashtable(o,qB)set u1=nullset QC=nullset g=nullset t=nullendfunctionfunction en4 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local group g=CreateGroup()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local timer t=CreateTimer()local integer qB=GetHandleId(t)local player p=GetOwningPlayer(u1)local real tB=3.local unit QC=nullcall UnitDamageTargetBJ(u1,u1,2.,ATTACK_TYPE_HERO,DAMAGE_TYPE_ACID)call GroupEnumUnitsInRange(ce[2],x,y,1000.,null)loopset QC=FirstOfGroup(ce[2])exitwhen QC==nullcall GroupRemoveUnit(ce[2],QC)if((Zy(QC,UNIT_TYPE_DEAD)==false)and IsUnitEnemy(QC,p)and(Zy(QC,UNIT_TYPE_MECHANICAL)==false)and(Zy(QC,UNIT_TYPE_STRUCTURE)==false))thencall GroupAddUnit(g,QC)endifendloopcall SaveUnitHandle(o,qB,1,u1)call SaveGroupHandle(o,qB,2,g)call TimerStart(t,tB,false,function em4)set t=nullset u1=nullset g=nullset QC=nullendfunctionfunction eo4 takes nothing returns booleanif GetSpellAbilityId()==1093686598 thencall en4()endifreturn falseendfunctionfunction eq4 takes nothing returns nothingcall ShowUnit(GetTriggerUnit(),false)set A4[GetPlayerId(GetTriggerPlayer())+1]=GetSpellTargetUnit()call LB(0,"",1093684792,"lightningshield",1697656883,1848651831,525,5,$3E8,2)endfunctionfunction er4 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local integer i=GetPlayerId(GetTriggerPlayer())+1local unit u2=GetSpellTargetUnit()local unit u3=h4[i]local integer BB=GetUnitAbilityLevel(u3,1093681733)local real BF=(50.+50.*I2R(BB))local real EH=GetUnitState(u2,UNIT_STATE_MANA)-(.03+(.02*I2R(BB)))*GetUnitState(u2,UNIT_STATE_MAX_MANA)call UnitDamageTarget(u1,u2,BF,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)call SetUnitState(u2,UNIT_STATE_MANA,EH)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Monsoon\\MonsoonBoltTarget.mdl",u2,"chest"))set u1=nullset u2=nullset u3=nullendfunctionfunction es4 takes nothing returns nothinglocal integer i=GetPlayerId(GetOwningPlayer(GetDyingUnit()))+1local unit u2=A4[i]local unit u3=h4[i]if GetUnitState(u3,UNIT_STATE_LIFE)>0 thencall ShowUnit(u3,true)if GetUnitState(u2,UNIT_STATE_LIFE)>0 thencall SetUnitX(u3,GetUnitX(u2))call SetUnitY(u3,GetUnitY(u2))call IssueTargetOrderById(u3,$D000F,u2)endifif GetLocalPlayer()==GetOwningPlayer(u3)thencall ClearSelection()call SelectUnit(u3,true)endifendifset u2=nullset u3=nullendfunctionfunction et4 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real x=GetSpellTargetX()local real y=GetSpellTargetY()local unit u3=CreateUnit(GetOwningPlayer(u1),1747989063,x,y,0)call ShowUnit(u3,false)call UnitApplyTimedLife(u3,1112045413,1.)call UnitAddAbility(u3,1093681738)call SetUnitAbilityLevel(u3,1093681738,GetUnitAbilityLevel(u1,1093683024))call IssueImmediateOrderById(u3,$D009F)set u1=nullset u3=nullendfunctionfunction eu4 takes nothing returns booleanif GetSpellAbilityId()==1093681733 thencall eq4()endifreturn falseendfunctionfunction ev4 takes nothing returns booleanif GetSpellAbilityId()==1093684792 thencall er4()endifreturn falseendfunctionfunction ew4 takes nothing returns booleanif GetUnitTypeId(GetDyingUnit())==1697656883 thencall es4()endifreturn falseendfunctionfunction ex4 takes nothing returns booleanif GetSpellAbilityId()==1093683024 thencall et4()endifreturn falseendfunctionfunction ey4 takes nothing returns booleanif GetLearnedSkill()==1093686865 and IsUnitIllusion(GetTriggerUnit())!=true and GetUnitAbilityLevel(GetTriggerUnit(),1093686865)==1 thencall TriggerRegisterUnitEvent(Xr,GetTriggerUnit(),EVENT_UNIT_TARGET_IN_RANGE)endifreturn falseendfunctionfunction ez4 takes trigger aH returns nothinglocal trigger rBlocal integer qB=GetHandleId(aH)set rB=CreateTrigger()call TriggerAddCondition(rB,Condition(function eu4))call SaveTriggerHandle(We,qB,1,rB)set rB=CreateTrigger()call TriggerAddCondition(rB,Condition(function ev4))call SaveTriggerHandle(We,qB,2,rB)set rB=CreateTrigger()call TriggerAddCondition(rB,Condition(function ew4))call SaveTriggerHandle(We,qB,3,rB)set rB=CreateTrigger()call TriggerAddCondition(rB,Condition(function ex4))call SaveTriggerHandle(We,qB,4,rB)set rB=CreateTrigger()call TriggerAddCondition(rB,Condition(function ey4))call SaveTriggerHandle(We,qB,5,rB)set rB=nullendfunctionfunction eA4 takes nothing returns nothinglocal trigger rB=GetTriggeringTrigger()local integer qB=GetHandleId(rB)local unit u=B4if GetTriggerExecCount(rB)==1 thencall ez4(rB)set od[1]=75.set od[2]=95.set od[3]=115.set pd[1]=15.set pd[2]=40.set pd[3]=70.set pd[4]=100.set qd[1]=2.set qd[2]=1.5set qd[3]=1.2set qd[4]=1.endifset rB=LoadTriggerHandle(We,qB,1)call TriggerRegisterUnitEvent(rB,u,EVENT_UNIT_SPELL_EFFECT)set rB=LoadTriggerHandle(We,qB,2)call TriggerRegisterPlayerUnitEvent(rB,GetOwningPlayer(u),EVENT_PLAYER_UNIT_SPELL_EFFECT,null)set rB=LoadTriggerHandle(We,qB,3)call TriggerRegisterPlayerUnitEvent(rB,GetOwningPlayer(u),EVENT_PLAYER_UNIT_DEATH,null)set rB=LoadTriggerHandle(We,qB,4)call TriggerRegisterUnitEvent(rB,u,EVENT_UNIT_SPELL_EFFECT)set rB=LoadTriggerHandle(We,qB,5)call TriggerRegisterUnitEvent(rB,u,EVENT_UNIT_HERO_SKILL)set u=nullset rB=nullendfunctionfunction eB4 takes nothing returns nothinglocal trigger rB=GetTriggeringTrigger()local integer qB=GetHandleId(rB)local unit u1=LoadUnitHandle(o,qB,-$5E9EB4B3)local unit u2=GetTriggerUnit()local integer i=GetPlayerId(GetOwningPlayer(u1))+1local real BF=0local integer BB=GetUnitAbilityLevel(u1,1093686865)local real mp=GetUnitStatePercent(u2,UNIT_STATE_MANA,UNIT_STATE_MAX_MANA)local boolean b=falselocal integer wzcall SetUnitState(u2,UNIT_STATE_MANA,.9*GetUnitState(u2,UNIT_STATE_MANA))set wz=1loopexitwhen wz>4if mp<=pd[wz]and b==false thenset BF=od[BB]*qd[wz]set b=trueendifset wz=wz+1endloopcall TriggerRemoveCondition(rB,LoadTriggerConditionHandle(o,qB,$AD9C))call DestroyTrigger(rB)call FlushChildHashtable(o,qB)set t9[i]=falsecall DestroyEffect(AddSpecialEffectTarget("war3mapImported\\HeroMuneshigeTachibanaTarget.mdx",u2,"origin"))call UnitDamageTarget(u1,u2,BF,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)set rB=nullset u1=nullset u2=nullendfunctionfunction eb4 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetEventTargetUnit()local integer i=GetPlayerId(GetOwningPlayer(u1))+1local triggercondition uBlocal trigger rBlocal integer qBif t9[i]==false and Zy(u2,UNIT_TYPE_STRUCTURE)==false thenset rB=CreateTrigger()set qB=GetHandleId(rB)set t9[i]=truecall SaveUnitHandle(o,qB,-$5E9EB4B3,u1)set uB=TriggerAddCondition(rB,Condition(function eB4))call SaveTriggerConditionHandle(o,qB,$AD9C,uB)call TriggerRegisterUnitEvent(rB,u2,EVENT_UNIT_DAMAGED)call wB(rB,.3,uB,i)endifset uB=nullset rB=nullset u1=nullset u2=nullendfunctionfunction ec4 takes nothing returns nothingcall TriggerRegisterUnitEvent(Zr,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(ds,B4,EVENT_UNIT_SPELL_EFFECT)set Ge[(1+GetPlayerId(GetOwningPlayer(B4)))]=CreateGroup()endfunctionfunction eE4 takes nothing returns booleanreturn((GetSpellAbilityId()==1093682761))endfunctionfunction e34 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,-$5E9EB4B3)local unit u2=LoadUnitHandle(o,qB,-$63F0AAA2)local real eF4=100local real JY=GetRandomReal(0,360)local real x=GetUnitX(u2)+eF4*Cos(JY*bj_DEGTORAD)local real y=GetUnitY(u2)+eF4*Sin(JY*bj_DEGTORAD)if((LoadInteger(o,qB,-$5CF6751E)==0)or(GetUnitState(u2,UNIT_STATE_LIFE)<=0)or(GetUnitState(u1,UNIT_STATE_LIFE)<=0))thencall UnitRemoveAbility(u1,1093684790)call SetUnitInvulnerable(u1,false)call FlushChildHashtable(o,qB)call DestroyTimer(t)elsecall SaveInteger(o,qB,-$5CF6751E,LoadInteger(o,qB,-$5CF6751E)-1)call SetUnitX(u1,x)call SetUnitY(u1,y)call SetUnitFacing(u1,JY-$B4)call IssueTargetOrderById(u1,$D000F,u2)endifset u1=nullset u2=nullset t=nullendfunctionfunction eG4 takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)call UnitAddAbility(GetTriggerUnit(),1093684790)call SetUnitInvulnerable(GetTriggerUnit(),true)call SaveUnitHandle(o,qB,-$5E9EB4B3,GetTriggerUnit())call SaveUnitHandle(o,qB,-$63F0AAA2,GetSpellTargetUnit())call SaveInteger(o,qB,-$5CF6751E,(GetUnitAbilityLevel(GetTriggerUnit(),1093682761)))call TimerStart(t,.5,true,function e34)set t=nullendfunctionfunction eH4 takes unit u,unit u2,integer i returns nothinglocal real r=0local real x=GetUnitX(u)local real y=GetUnitY(u)local real x2=GetUnitX(u2)local real y2=GetUnitY(u2)local real a=bj_RADTODEG*Atan2(y2-y,x2-x)+GetRandomReal(-30,30)local string es="Objects\\Spawnmodels\\Human\\HumanBlood\\BloodElfSpellThiefBlood.mdl"call UnitApplyTimedLife(CreateUnit(Player($F),1747988536,x,y,a),1112820806,2)call DestroyEffect(AddSpecialEffectTarget(es,u2,"head"))call DestroyEffect(AddSpecialEffectTarget(es,u2,"chest"))call DestroyEffect(AddSpecialEffectTarget(es,u2,"mount"))call SetUnitX(u,x2+100*Cos(a*bj_DEGTORAD))call SetUnitY(u,y2+100*Sin(a*bj_DEGTORAD))call SetUnitFacing(u,a)call SetUnitTimeScale(u,3)call SetUnitAnimation(u,"Attack Slam")if h9[i]==1 thenset r=GetRandomReal(110,110)elseif h9[i]==2 thenset r=GetRandomReal(110,110)elseif h9[i]==3 thenset r=GetRandomReal(110,110)endifcall UnitDamageTarget(u,u2,r,true,false,ATTACK_TYPE_HERO,DAMAGE_TYPE_ACID,WEAPON_TYPE_WHOKNOWS)endfunctionfunction eI4 takes unit u,integer i returns nothinglocal unit tu=CreateUnit(Player($F),GetUnitTypeId(u),0,0,GetUnitFacing(u))call SetUnitX(tu,GetUnitX(u))call SetUnitY(tu,GetUnitY(u))call SetUnitVertexColor(tu,$FF,$FF,$FF,$7F)call UnitAddAbility(tu,1097625443)call SetUnitColor(tu,GetPlayerColor(GetOwningPlayer(u)))call GroupAddUnit(Ge[i],tu)set tu=nullendfunctionfunction el4 takes nothing returns booleanlocal unit u=GetFilterUnit()local boolean b=IsUnitEnemy(u,GetOwningPlayer(LoadUnitHandle(o,GetHandleId(GetExpiredTimer()),1)))and not Zy(u,UNIT_TYPE_STRUCTURE)and GetUnitState(u,UNIT_STATE_LIFE)>0 and GetUnitPointValue(u)!=1set u=nullreturn bendfunctionfunction e14 takes nothing returns nothinglocal integer ti=0local unit QClocal unit u2local group g=CreateGroup()local group g2=CreateGroup()local boolexpr b=Condition(function el4)local timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u=LoadUnitHandle(o,qB,1)local integer i=(1+GetPlayerId(GetOwningPlayer(u)))set bj_wantDestroyGroup=falsecall GroupAddGroup(Ge[i],g)if He[i]thencall eI4(u,i)endifloopset QC=FirstOfGroup(g)exitwhen QC==nullcall GroupRemoveUnit(g,QC)call GroupEnumUnitsInRange(g2,GetUnitX(QC),GetUnitY(QC),450,b)set u2=GroupPickRandomUnit(g2)if u2==null thencall GroupRemoveUnit(Ge[i],QC)if QC!=u thencall RemoveUnit(QC)elseset He[i]=falseendifelsecall GroupRemoveUnit(g,u2)call eH4(u,u2,i)endifcall GroupClear(g2)endloopset g9[i]=g9[i]+1call DestroyGroup(g)call DestroyGroup(g2)call DestroyBoolExpr(b)set QC=nullset u2=nullset g=nullset g2=nullset b=nullif h9[i]==1 thenset ti=5elseif h9[i]==2 thenset ti=6elseif h9[i]==3 thenset ti=7endifif g9[i]>=ti thenloopset QC=FirstOfGroup(Ge[i])exitwhen QC==nullcall GroupRemoveUnit(Ge[i],QC)if QC!=u thencall RemoveUnit(QC)endifendloopcall SetUnitInvulnerable(u,false)call SetUnitTimeScale(u,1)elsecall SetUnitInvulnerable(u,true)call TimerStart(t,.33,false,function e14)endifendfunctionfunction eJ4 takes nothing returns nothinglocal unit u=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u)))local timer t=CreateTimer()local integer qB=GetHandleId(t)call SaveUnitHandle(o,qB,1,u)set g9[i]=1set He[i]=trueset h9[i]=GetUnitAbilityLevel(u,1093682762)call GroupAddUnit(Ge[i],u)call eI4(u,i)call eH4(u,u2,i)call TimerStart(t,1,false,function e14)set u=nullset u2=nullset t=nullendfunctionfunction eK4 takes nothing returns booleanreturn GetSpellAbilityId()==1093682762endfunctionfunction eM4 takes nothing returns nothingcall TriggerRegisterUnitEvent(gs,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(hs,B4,EVENT_UNIT_SPELL_ENDCAST)call TriggerRegisterUnitEvent(ks,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(js,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(ms,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(ns,B4,EVENT_UNIT_SPELL_EFFECT)endfunctionfunction eO4 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u=LoadUnitHandle(o,qB,1)if GetUnitAbilityLevel(u,1114665832)<=0 thencall FlushChildHashtable(o,qB)call DestroyTimer(t)call SetUnitInvulnerable(u,false)endifset t=nullset u=nullendfunctionfunction e04 takes nothing returns nothinglocal unit u=GetTriggerUnit()local player p=GetOwningPlayer(u)local boolean b=falselocal real eP4=435.local real x=GetUnitX(u)local real y=GetUnitY(u)local integer id=GetSpellAbilityId()local integer BB=GetUnitAbilityLevel(u,id)local real BF=(150.*I2R(BB))local timer t=CreateTimer()local integer qB=GetHandleId(t)local unit QCcall SaveUnitHandle(o,qB,1,u)call TimerStart(t,.1,true,function eO4)call SetUnitInvulnerable(u,true)if GetUnitAbilityLevel(u,1110456113)>0 thenset b=trueendifcall GroupEnumUnitsInRange(ce[7],x,y,eP4,null)loopset QC=FirstOfGroup(ce[7])exitwhen QC==nullcall GroupRemoveUnit(ce[7],QC)if GetUnitState(QC,UNIT_STATE_LIFE)>0 and IsPlayerEnemy(GetOwningPlayer(QC),p)and Zy(QC,UNIT_TYPE_STRUCTURE)==false thenif b thencall UnitDamageTarget(u,QC,BF,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)elsecall UnitDamageTarget(u,QC,BF,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)endifcall DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\GargoyleMissile\\GargoyleMissile.mdl",GetEnumUnit(),"head"))endifendloopset t=nullset u=nullset QC=nullset p=nullendfunctionfunction eQ4 takes nothing returns booleanif GetSpellAbilityId()==1093684042 thencall e04()endifreturn falseendfunctionfunction eS4 takes nothing returns booleanif GetSpellAbilityId()==1093684042 thencall SetUnitInvulnerable(GetTriggerUnit(),false)endifreturn falseendfunctionfunction eT4 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u=LoadUnitHandle(o,qB,1)call FlushChildHashtable(o,qB)call DestroyTimer(t)call UnitRemoveAbility(u,1093684040)set t=nullset u=nullendfunctionfunction eU4 takes nothing returns nothinglocal unit u=GetTriggerUnit()local integer i=GetPlayerId(GetOwningPlayer(u))+1local unit u2=z4[i]local real x1=GetUnitX(u)local real y1=GetUnitY(u)local integer BB=GetUnitAbilityLevel(u,1093684025)local timer t=CreateTimer()local integer qB=GetHandleId(t)local real tB=4.call SaveUnitHandle(o,qB,1,u)call TimerStart(t,tB,false,function eT4)if BB>0 thencall UnitAddAbility(u,1093684040)call SetUnitAbilityLevel(u,1093684040,BB)endifif u2!=Dt and GetUnitAbilityLevel(u2,1110456116)>0 thencall SetUnitPosition(u2,x1,y1)endifset u=nullset u2=nullset t=nullendfunctionfunction eV4 takes nothing returns booleanif GetSpellAbilityId()==1093684033 thencall eU4()endifreturn falseendfunctionfunction eX4 takes nothing returns booleanif GetSpellAbilityId()==1093684024 thenset z4[GetPlayerId(GetTriggerPlayer())+1]=GetSpellTargetUnit()endifreturn falseendfunctionfunction e24 takes nothing returns booleanif GetLearnedSkill()==1093684025 thencall SetPlayerTechResearched(GetTriggerPlayer(),1382377826,GetUnitAbilityLevel(GetTriggerUnit(),1093684025))endifreturn falseendfunctionfunction e_4 takes nothing returns nothinglocal unit u=GetTriggerUnit()local player p=GetOwningPlayer(u)local real BF=.28local unit QCcall GroupEnumUnitsInRange(ce[2],GetUnitX(u),GetUnitY(u),700.,null)loopset QC=FirstOfGroup(ce[2])exitwhen QC==nullcall GroupRemoveUnit(ce[2],QC)if IsUnitEnemy(QC,p)and GetUnitState(QC,UNIT_STATE_LIFE)>0 and Zy(QC,UNIT_TYPE_STRUCTURE)==false thencall UnitDamageTarget(u,QC,BF*GetUnitState(QC,UNIT_STATE_LIFE),true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)endifendloopset p=nullset QC=nullset u=nullendfunctionfunction f44 takes nothing returns booleanif GetSpellAbilityId()==1093684041 thencall e_4()endifreturn falseendfunctionfunction f84 takes nothing returns nothingcall TriggerRegisterUnitEvent(rs,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(qs,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(ss,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(ts,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(us,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(vs,B4,EVENT_UNIT_SPELL_CHANNEL)endfunctionfunction fd4 takes nothing returns booleanreturn((GetSpellAbilityId()==1093683277))endfunctionfunction fe4 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,-$5E9EB4B3)local unit u2=LoadUnitHandle(o,qB,-$63F0AAA2)local integer i=LoadInteger(o,qB,-$5CF6751E)if(i>=7)thencall UnitShareVision(u2,GetOwningPlayer(u1),false)call FlushChildHashtable(o,qB)call DestroyTimer(t)elsecall SaveInteger(o,qB,-$5CF6751E,i+1)call UnitDamageTargetBJ(u1,u2,(15.+(25.*I2R(GetUnitAbilityLevel(u1,1093683277)))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)call IssueImmediateOrderById(u2,$D0004)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Stampede\\StampedeMissileDeath.mdl",u2,"chest"))endifset u1=nullset u2=nullset t=nullendfunctionfunction ff4 takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)call UnitShareVision(GetSpellTargetUnit(),GetOwningPlayer(GetTriggerUnit()),true)call SaveUnitHandle(o,qB,-$5E9EB4B3,GetTriggerUnit())call SaveUnitHandle(o,qB,-$63F0AAA2,GetSpellTargetUnit())call SaveInteger(o,qB,-$5CF6751E,0)call TimerStart(t,1.5,true,function fe4)set t=nullendfunctionfunction fh4 takes nothing returns booleanreturn((GetLearnedSkill()==1093684307)and(IsUnitIllusion(GetTriggerUnit())!=true))endfunctionfunction fi4 takes nothing returns nothingcall SetUnitAbilityLevel(GetTriggerUnit(),1093677381,(GetUnitAbilityLevel(GetTriggerUnit(),1093684307)+1))endfunctionfunction fk4 takes nothing returns booleanreturn((GetSpellAbilityId()==1093684307))endfunctionfunction fm4 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local real a=(GetUnitFacing(u1)+180.)*3.14159/ 180.local integer ilocal real xlocal real ylocal real x1local real y1call TriggerSleepAction(.0)set x=GetUnitX(u1)set y=GetUnitY(u1)set x1=x+700.*Cos(a)set y1=y+700.*Sin(a)set i=1loopexitwhen i>$Aif IsTerrainPathable(x1,y1,PATHING_TYPE_WALKABILITY)thenset x1=x1+65.*Cos(a+180.*3.14159/ 180.)set y1=y1+65.*Sin(a+180.*3.14159/ 180.)endifset i=i+1endloopcall SetUnitX(u1,x1)call SetUnitY(u1,y1)if(GetLocalPlayer()==GetOwningPlayer(u1))thencall PanCameraToTimed(x1,y1,.1)endifset u1=nullendfunctionfunction fo4 takes nothing returns booleanreturn((GetSpellAbilityId()==1093683276))endfunctionfunction fp4 takes nothing returns nothinglocal unit QClocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,-$5E9EB4B3)local unit u2=LoadUnitHandle(o,qB,-$6329FB8A)local integer i=LoadInteger(o,qB,-$63F0AAA2)local boolean b=LoadBoolean(o,qB,-$5CF6751E)local integer wS=GetHandleId(u1)local integer Index_totallocal integer xSlocal real xlocal real ylocal real x1local real y1local real alocal unit u3local integer fq4if(b==false)thenset i=i+1call SaveInteger(o,qB,-$63F0AAA2,i)set x=GetUnitX(u1)set y=GetUnitY(u1)set fq4=0set a=GetUnitFacing(u1)*bj_DEGTORADset x1=x+40.*I2R(i)*Cos(a)set y1=y+40.*I2R(i)*Sin(a)call GroupEnumUnitsInRange(ce[3],x1,y1,122.,null)loopset QC=FirstOfGroup(ce[3])exitwhen((QC==null)or(fq4==1))call GroupRemoveUnit(ce[3],QC)if((GetOwningPlayer(QC)!=GetOwningPlayer(u1))and(Zy(QC,UNIT_TYPE_GROUND))and GetUnitState(QC,UNIT_STATE_LIFE)>1 and(Zy(QC,UNIT_TYPE_MECHANICAL)==false)and(Zy(QC,UNIT_TYPE_STRUCTURE)==false)and(GetUnitPointValue(QC)!=1))thenset b=trueset fq4=1call SaveUnitHandle(o,qB,-$6329FB8A,QC)if IsUnitEnemy(QC,GetOwningPlayer(u1))thencall UnitDamageTargetBJ(u1,QC,I2R(GetUnitAbilityLevel(u1,1093683276))*100.,ATTACK_TYPE_HERO,DAMAGE_TYPE_ACID)set u3=CreateUnit(GetOwningPlayer(u1),1747989063,GetUnitX(QC),GetUnitY(QC),0)call UnitApplyTimedLife(u3,1747989064,2.)call UnitAddAbility(u3,1093683279)call IssueTargetOrderById(u3,$D007F,QC)endifendifendloopcall GroupClear(ce[3])call SaveUnitHandle(o,wS,i,CreateUnit(GetOwningPlayer(u1),1966092336,x1,y1,a*bj_RADTODEG))if((i>(6+GetUnitAbilityLevel(u1,1093683276)*6))or(b))thenset b=truecall SaveInteger(o,wS,-$63F0AAA2,i)endifcall SaveBoolean(o,qB,-$5CF6751E,b)elseif(u2!=null)thenset xS=(LoadInteger(o,wS,-$63F0AAA2)-i)set u3=LoadUnitHandle(o,wS,xS)set x1=GetUnitX(u3)set y1=GetUnitY(u3)call SetUnitX(u1,x1)call SetUnitY(u1,y1)call RemoveUnit(u3)set i=i-1call SaveInteger(o,qB,-$63F0AAA2,i)elseset u3=LoadUnitHandle(o,wS,i)call RemoveUnit(u3)set i=i-1call SaveInteger(o,qB,-$63F0AAA2,i)endifif(i==-1)thencall FlushChildHashtable(o,qB)call FlushChildHashtable(o,wS)call DestroyTimer(t)endifendifset u1=nullset u2=nullset u3=nullset QC=nullset t=nullendfunctionfunction fr4 takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)call SaveUnitHandle(o,qB,-$5E9EB4B3,GetTriggerUnit())call SaveInteger(o,qB,-$63F0AAA2,0)call SaveBoolean(o,qB,-$5CF6751E,false)call SaveUnitHandle(o,qB,-$6329FB8A,null)call TimerStart(t,.03,true,function fp4)set t=nullendfunctionfunction ft4 takes nothing returns booleanreturn((GetSpellAbilityId()==1093684529))endfunctionfunction fu4 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,-$5E9EB4B3)local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))local unit u2=Kx[i]if Lx[i]<=0 or GetUnitState(u1,UNIT_STATE_LIFE)<=0 thenset T8[i]=falsecall IssueImmediateOrderById(u1,$D0004)call SetUnitX(u2,GetUnitX(u1))call SetUnitY(u2,GetUnitY(u1))call UnitRemoveAbility(u2,1112560453)if(Zy(u2,UNIT_TYPE_HERO)and GetUnitState(u2,UNIT_STATE_LIFE)<=0)thenelsecall ShowUnit(u2,true)endifcall PauseUnit(u2,false)if(GetLocalPlayer()==GetOwningPlayer(u2))thencall ClearSelection()call SelectUnit(u2,true)endifcall FlushChildHashtable(o,qB)call DestroyTimer(t)elseset Lx[i]=Lx[i]-1call SetUnitX(u2,GetUnitX(u1))call SetUnitY(u2,GetUnitY(u1))call SetUnitState(u1,UNIT_STATE_LIFE,(GetUnitState(u1,UNIT_STATE_LIFE)+(180.+(45.*I2R(GetUnitAbilityLevel(u1,1093684529))))))call UnitDamageTargetBJ(u1,u2,(310.+(20.*I2R(GetUnitAbilityLevel(u1,1093684529)))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)call UnitDamageTargetBJ(u1,u1,1.,ATTACK_TYPE_HERO,DAMAGE_TYPE_ACID)endifset t=nullset u1=nullset u2=nullendfunctionfunction fv4 takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)local unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))call ShowUnit(u2,false)call PauseUnit(u2,true)call SaveUnitHandle(o,qB,-$5E9EB4B3,u1)set T8[i]=trueset Kx[i]=u2set Lx[i]=1+1*GetUnitAbilityLevel(u1,1093684529)call TimerStart(t,1.,true,function fu4)set t=nullset u1=nullset u2=nullendfunctionfunction fx4 takes nothing returns booleanreturn((GetSpellAbilityId()==1093683527)and(T8[(1+GetPlayerId(GetOwningPlayer(GetTriggerUnit())))]))endfunctionfunction fy4 takes nothing returns nothingcall IssueImmediateOrderById(GetTriggerUnit(),$D0004)endfunctionfunction fA4 takes nothing returns nothingcall TriggerRegisterUnitEvent(xs,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(ys,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(zs,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(As,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(Bs,B4,EVENT_UNIT_SPELL_EFFECT)endfunctionfunction fB4 takes nothing returns booleanreturn((GetSpellAbilityId()==1093678393))endfunctionfunction fb4 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit QClocal unit u1=LoadUnitHandle(o,qB,-$5E9EB4B3)local player p=GetOwningPlayer(u1)local integer i=(1+GetPlayerId(p))if(Nx[i]>=5)thencall FlushChildHashtable(o,qB)call DestroyTimer(t)elseset Nx[i]=Nx[i]+1call GroupEnumUnitsInRange(ce[3],GetUnitX(u1),GetUnitY(u1),380.,null)loopset QC=FirstOfGroup(ce[3])exitwhen QC==nullcall GroupRemoveUnit(ce[3],QC)if(GetUnitState(QC,UNIT_STATE_LIFE)>0 and IsUnitEnemy(QC,p)and(Zy(QC,UNIT_TYPE_STRUCTURE)==false))thencall UnitDamageTargetBJ(u1,QC,Mx[i],ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\Blood\\BloodImpact.mdl",QC,"chest"))endifendloopendifset p=nullset t=nullset u1=nullset QC=nullendfunctionfunction fC4 takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)local unit u1=GetTriggerUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))call SaveUnitHandle(o,qB,-$5E9EB4B3,u1)set Nx[i]=0set Mx[i]=(GetUnitState(u1,UNIT_STATE_MAX_LIFE)*.13+50.+50.*I2R(GetUnitAbilityLevel(u1,1093678393)))/ 5.call TimerStart(t,1.,true,function fb4)set t=nullset u1=nullendfunctionfunction fD4 takes nothing returns booleanreturn((GetSpellAbilityId()==1093678392))endfunctionfunction fE4 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,-$5E9EB4B3)if(LoadInteger(o,qB,-$5CF6751E)<=0)thencall SetUnitPathing(u1,true)call FlushChildHashtable(o,qB)call DestroyTimer(t)elseif(GetUnitAbilityLevel(u1,1110455637)>0)thencall SetUnitPathing(u1,false)elsecall SetUnitPathing(u1,true)endifcall SaveInteger(o,qB,-$5CF6751E,LoadInteger(o,qB,-$5CF6751E)-1)endifset u1=nullset t=nullendfunctionfunction f34 takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)local unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x1=GetSpellTargetX()local real y1=GetSpellTargetY()local real x2local real y2local real a=Atan2(y1-y,x1-x)local unit u3local integer ilocal integer BB=GetUnitAbilityLevel(u1,1093678392)local real hB=(4.+(2.*I2R(BB)))set i=1loopexitwhen i>$Eset x2=x+110.*I2R(i)*Cos(a)set y2=y+110.*I2R(i)*Sin(a)set u3=CreateUnit(GetOwningPlayer(u1),1848651828,x2,y2,a*bj_RADTODEG)call UnitApplyTimedLife(u3,1112045413,hB)call SetUnitAbilityLevel(u3,1093683250,BB)call SetUnitX(u3,x2)call SetUnitY(u3,y2)call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Human\\HumanLargeDeathExplode\\HumanLargeDeathExplode.mdl",x2,y2))set i=i+1endloopcall SaveUnitHandle(o,qB,-$5E9EB4B3,u1)call SaveInteger(o,qB,-$5CF6751E,4+2*GetUnitAbilityLevel(u1,1093678392))call TimerStart(t,1.,true,function fE4)set t=nullset u1=nullset u3=nullendfunctionfunction fG4 takes nothing returns booleanlocal integer id=GetSpellAbilityId()if id==1093678392 or id==1093679177 or id==1093678393 thenset d7[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))+1]=trueendifreturn falseendfunctionfunction fH4 takes nothing returns booleanreturn((GetLearnedSkill()==1093678401)and(GetUnitAbilityLevel(GetTriggerUnit(),1093678401)==1))endfunctionfunction fI4 takes nothing returns nothingcall TriggerRegisterUnitEvent(as,GetTriggerUnit(),EVENT_UNIT_DAMAGED)endfunctionfunction f14 takes nothing returns nothinglocal unit u1local real Rlocal integer iif GetEventDamage()>1. thenset i=GetPlayerId(GetTriggerPlayer())+1if GetRandomInt(1,100)<=$C or d7[i]thenset u1=GetTriggerUnit()set R=(GetEventDamage()*(1.01+(.06*I2R(GetUnitAbilityLevel(u1,1093678401)))))set d7[i]=falsecall DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\VengeanceMissile\\VengeanceMissile.mdl",u1,"chest"))call SetUnitState(u1,UNIT_STATE_LIFE,GetUnitState(u1,UNIT_STATE_LIFE)+R)endifendifset u1=nullendfunctionfunction fK4 takes nothing returns booleanreturn((GetSpellAbilityId()==1093679177))endfunctionfunction fL4 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local real r1=GetUnitLifePercent(u1)local real r2=GetUnitLifePercent(u2)if Zy(u2,UNIT_TYPE_MAGIC_IMMUNE)==false and Zy(u2,UNIT_TYPE_ANCIENT)==false thencall SetUnitLifePercentBJ(u2,r1)call SetUnitLifePercentBJ(u1,r2)elsecall SetUnitLifePercentBJ(u1,r2)endifset u1=nullset u2=nullendfunctionfunction fN4 takes nothing returns nothingcall TriggerRegisterUnitEvent(Cs,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(cs,B4,EVENT_UNIT_SPELL_CHANNEL)call TriggerRegisterUnitEvent(Ds,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Es,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(Fs,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Gs,B4,EVENT_UNIT_TARGET_IN_RANGE)call TriggerRegisterUnitEvent(Hs,B4,EVENT_UNIT_SPELL_EFFECT)endfunctionfunction f04 takes unit u,real r returns nothinglocal real BF=r*GetEventDamage()call SetUnitState(u,UNIT_STATE_LIFE,GetUnitState(u,UNIT_STATE_LIFE)+BF)endfunctionfunction fP4 takes nothing returns nothinglocal unit u1=GetTriggerUnit()if((u1!=null))thencall f04(u1,.05*I2R(GetUnitAbilityLevel(u1,1093678409)))elsecall DestroyTrigger(GetTriggeringTrigger())endifset u1=nullendfunctionfunction fQ4 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,-$5E9EB4B3)local integer i=LoadInteger(o,qB,-$5CF6751E)if(i>=3)or GetUnitState(u1,UNIT_STATE_LIFE)<=0 thencall FlushChildHashtable(o,qB)call DestroyTimer(t)elsecall SetUnitState(u1,UNIT_STATE_LIFE,(GetUnitState(u1,UNIT_STATE_LIFE)+(GetUnitState(u1,UNIT_STATE_MAX_LIFE)*.03)))call SaveInteger(o,qB,-$5CF6751E,i+1)endifset u1=nullset t=nullendfunctionfunction fR4 takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)local trigger tr=CreateTrigger()local unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local real BF=(GetUnitState(u2,UNIT_STATE_MAX_LIFE)*.22)local attacktype a=ATTACK_TYPE_NORMALlocal damagetype d=DAMAGE_TYPE_UNKNOWNlocal weapontype w=WEAPON_TYPE_WHOKNOWSif(Zy(u2,UNIT_TYPE_MECHANICAL)==false)thencall UnitDamageTarget(u1,u2,BF,true,false,a,d,w)endifcall TriggerRegisterUnitEvent(tr,u1,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(tr,3.,false)call TriggerAddCondition(tr,Condition(function fP4))call SaveUnitHandle(o,qB,-$5E9EB4B3,u1)call SaveInteger(o,qB,-$5CF6751E,0)call TimerStart(t,1.,true,function fQ4)set tr=nullset t=nullset u1=nullset u2=nullendfunctionfunction fS4 takes nothing returns booleanif((GetSpellAbilityId()==1093678409))thencall fR4()endifreturn falseendfunctionfunction fT4 takes nothing returns booleanreturn((GetSpellAbilityId()==1093677633))endfunctionfunction fU4 takes nothing returns nothinglocal unit QCcall GroupEnumUnitsInRange(ce[3],GetSpellTargetX(),GetSpellTargetY(),225.,null)loopset QC=FirstOfGroup(ce[3])exitwhen(QC==null)call GroupRemoveUnit(ce[3],QC)if GetUnitAbilityLevel(QC,1110455864)>0 thencall UnitRemoveAbility(QC,1110455864)endifendloopset QC=nullendfunctionfunction fW4 takes nothing returns booleanreturn((GetSpellAbilityId()==1093677633))endfunctionfunction fX4 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,-$5E9EB4B3)local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))local real x=GetUnitX(u1)+40.*Cos(Ox[i])local real y=GetUnitY(u1)+40.*Sin(Ox[i])set Px[i]=Px[i]-40if Px[i]<=40 thencall SetUnitPathing(u1,true)call SetUnitX(u1,x)call SetUnitY(u1,y)call SetUnitTimeScale(u1,1.)call FlushChildHashtable(o,qB)call DestroyTimer(t)elsecall SetUnitX(u1,x)call SetUnitY(u1,y)endifset t=nullset u1=nullendfunctionfunction fY4 takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)local unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x2=GetSpellTargetX()local real y2=GetSpellTargetY()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))if IsTerrainPathable(x2,y2,PATHING_TYPE_WALKABILITY)==false thenset Px[i]=SquareRoot(Pow(y2-y,2)+Pow(x2-x,2))set Ox[i]=Atan2(y2-y,x2-x)call SaveUnitHandle(o,qB,-$5E9EB4B3,u1)call TimerStart(t,.01,true,function fX4)call SetUnitTimeScale(u1,60.*.01)call SetUnitAnimation(u1,"attack")call SetUnitPathing(u1,false)call UnitAddAbility(u1,1093684819)call SetUnitAbilityLevel(u1,1093684819,GetUnitAbilityLevel(u1,1093677633))call xA(9.)call UnitRemoveAbility(u1,1093684819)endifset u1=nullset t=nullendfunctionfunction fZ4 takes nothing returns booleanreturn((GetLearnedSkill()==1093677112)and(IsUnitIllusion(GetTriggerUnit())!=true))endfunctionfunction f_4 takes nothing returns nothingcall SetPlayerTechResearchedSwap(1383428966,GetUnitAbilityLevelSwapped(1093677112,GetTriggerUnit()),GetOwningPlayer(GetTriggerUnit()))endfunctionfunction g74 takes nothing returns booleanreturn((GetSpellAbilityId()==1093677112))endfunctionfunction g84 takes nothing returns nothingset e7[(1+GetPlayerId(GetTriggerPlayer()))]=0endfunctionfunction gd4 takes nothing returns nothinglocal trigger rB=GetTriggeringTrigger()local integer qB=GetHandleId(rB)local unit u1=LoadUnitHandle(o,qB,-$5E9EB4B3)local unit u2=GetTriggerUnit()local unit u3local unit QClocal player p=GetOwningPlayer(u1)local integer i=GetPlayerId(p)+1local real BF=GetEventDamage()call TriggerRemoveCondition(rB,LoadTriggerConditionHandle(o,qB,$AD9C))call DestroyTrigger(rB)call FlushChildHashtable(o,qB)set t9[i]=falseset e7[i]=e7[i]+1if e7[i]>=3 thenset u3=CreateUnit(p,1747988805,GetUnitX(u1),GetUnitY(u1),0)call UnitAddAbility(u3,1093677874)call SetUnitAbilityLevel(u3,1093677874,GetUnitAbilityLevel(u1,1093677112))set e7[i]=0call GroupEnumUnitsInRange(ce[$A],GetUnitX(u1),GetUnitY(u1),380.,null)loopset QC=FirstOfGroup(ce[$A])exitwhen QC==nullcall GroupRemoveUnit(ce[$A],QC)if GetUnitState(QC,UNIT_STATE_LIFE)>0 and IsUnitEnemy(QC,p)and Zy(QC,UNIT_TYPE_STRUCTURE)==false and GetUnitPointValue(QC)!=1 thencall UnitDamageTarget(u1,QC,BF,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNIVERSAL,WEAPON_TYPE_WHOKNOWS)call IssueTargetOrderById(u3,$D007F,QC)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\DragonHawkMissile\\DragonHawkMissile.mdl",QC,"chest"))endifendloopendifset QC=nullset rB=nullset u1=nullset u2=nullset u3=nullset p=nullendfunctionfunction ge4 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetEventTargetUnit()local trigger rBlocal integer qBlocal integer i=GetPlayerId(GetOwningPlayer(u1))+1local triggercondition uBif t9[i]==false thenset rB=CreateTrigger()set qB=GetHandleId(rB)set t9[i]=truecall SaveUnitHandle(o,qB,-$5E9EB4B3,u1)set uB=TriggerAddCondition(rB,Condition(function gd4))call SaveTriggerConditionHandle(o,qB,$AD9C,uB)call TriggerRegisterUnitEvent(rB,u2,EVENT_UNIT_DAMAGED)call wB(rB,.3,uB,i)endifset uB=nullset rB=nullset u1=nullset u2=nullendfunctionfunction gf4 takes nothing returns booleanif GetUnitAbilityLevel(GetTriggerUnit(),1110454855)!=0 and t9[GetPlayerId(GetOwningPlayer(GetTriggerUnit()))+1]==false thencall ge4()endifreturn falseendfunctionfunction gh4 takes nothing returns booleanreturn((GetSpellAbilityId()==1093677146))endfunctionfunction gi4 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local real xlocal real ycall SetWidgetLife(u1,(GetUnitState(u1,UNIT_STATE_LIFE)+(GetUnitState(u1,UNIT_STATE_MAX_LIFE)*(.2+(.1*I2R(GetUnitAbilityLevel(u1,GetSpellAbilityId())))))))call SetWidgetLife(u2,(GetUnitState(u2,UNIT_STATE_LIFE)+(GetUnitState(u2,UNIT_STATE_MAX_LIFE)*(.2+(.1*I2R(GetUnitAbilityLevel(u1,GetSpellAbilityId())))))))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Awaken\\Awaken.mdl",u1,"origin"))call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Other\\Awaken\\Awaken.mdl",u2,"origin"))call TriggerSleepAction(.0)call SetUnitX(u1,GetUnitX(u2))call SetUnitY(u1,GetUnitY(u2))call UnitAddAbility(u1,1093678930)call UnitAddAbility(u2,1093678930)call xA(15.)call UnitRemoveAbility(u1,1093678930)call UnitRemoveAbility(u2,1093678930)set u1=nullset u2=nullendfunctionfunction gk4 takes nothing returns nothingcall TriggerRegisterUnitEvent(ls,B4,EVENT_UNIT_HERO_SKILL)call TriggerRegisterUnitEvent(Js,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Ks,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterPlayerUnitEventSimple(Ls,GetOwningPlayer(B4),EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Ms,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Ns,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Os,B4,EVENT_UNIT_SPELL_EFFECT)set Ad[(1+GetPlayerId(GetOwningPlayer(B4)))]=CreateTimer()set ad[1]=.0set ad[2]=150.set ad[3]=350.set ad[4]=450.endfunctionfunction gn4 takes nothing returns booleanreturn(((GetLearnedSkill()==1093685831)or(GetLearnedSkill()==1093685833)or(GetLearnedSkill()==1093681487))and(IsUnitIllusion(GetTriggerUnit())!=true))endfunctionfunction go4 takes nothing returns nothingif((GetUnitAbilityLevel(GetTriggerUnit(),1093681487)==1))thencall UnitAddAbility(GetTriggerUnit(),1093682250)elsecall SetUnitAbilityLevel(GetTriggerUnit(),1093682250,GetUnitAbilityLevel(GetTriggerUnit(),1093681487))endifif((GetLearnedSkill()!=1093681487))thencall SetUnitAbilityLevel(GetTriggerUnit(),1093678932,GetUnitAbilityLevel(GetTriggerUnit(),GetLearnedSkill()))endifendfunctionfunction gq4 takes nothing returns booleanreturn((GetSpellAbilityId()==1093678932))endfunctionfunction gr4 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,-$5E9EB4B3)local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))local unit u2=Qx[i]local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x1=GetUnitX(u2)local real y1=GetUnitY(u2)local real dt=SquareRoot((Pow((x1-x),2))+Pow((y1-y),2))if((GetUnitAbilityLevel(u2,1110456395)<=0)or GetUnitState(u1,UNIT_STATE_LIFE)<=0 or GetUnitState(u2,UNIT_STATE_LIFE)<=0 or(dt>=1001.))thencall UnitRemoveAbility(u2,1110456395)call UnitRemoveAbility(u1,1093687109)call FlushChildHashtable(o,qB)call PauseTimer(Ad[i])endifset u1=nullset t=nullset u2=nullendfunctionfunction gs4 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))local timer t=Ad[i]local integer qB=GetHandleId(t)if((vd[i]!=u2))thencall UnitRemoveAbility(vd[i],1110456395)endifset vd[i]=u2set wd[i]=0call UnitAddAbility(u1,1093687109)call SaveUnitHandle(o,qB,-$5E9EB4B3,u1)set Qx[i]=u2call PauseTimer(Ad[i])call TimerStart(t,1.,true,function gr4)set u1=nullset u2=nullset t=nullendfunctionfunction gu4 takes nothing returns booleanreturn((GetSpellAbilityId()==1093685833))endfunctionfunction gv4 takes nothing returns nothingset Z9=0set dd="\"\""set ed=(1093683790)set fd="lightningshield"set gd=(1970302055)set hd=(1848651831)set jd=.0set kd=1set md=600.set nd=2set xd=vd[(1+GetPlayerId(GetOwningPlayer(GetTriggerUnit())))]set yd=.03set zd=truecall ConditionalTriggerExecute(Ci)endfunctionfunction gx4 takes nothing returns booleanreturn((GetSpellAbilityId()==1093683790))endfunctionfunction gy4 takes nothing returns nothinglocal unit u4local unit u1=GetTriggerUnit()local integer i=(1+GetPlayerId(GetOwningPlayer(u1)))local unit u2=GetSpellTargetUnit()local unit u3=h4[i]local integer i2=GetUnitAbilityLevel(u3,1093678932)set u4=CreateUnit(GetOwningPlayer(u3),1970302055,GetUnitX(u2),GetUnitY(u2),0)call KillUnit(u4)call UnitDamageTargetBJ(u3,u2,((60.+(60.*I2R(i2)))+(I2R(GetHeroInt(u3,true))*(.7+(.5*I2R(i2))))),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNIVERSAL)set wd[i]=wd[i]+1if(wd[i]==2)thenset wd[i]=0set u4=CreateUnit(GetOwningPlayer(u3),1747989063,GetUnitX(u2),GetUnitY(u2),0)call ShowUnit(u4,false)call UnitApplyTimedLife(u4,1112045413,.05)call UnitAddAbility(u4,1093685559)call IssueTargetOrderById(u4,$D007F,u2)endifset u1=nullset u2=nullset u3=nullset u4=nullendfunctionfunction gA4 takes nothing returns booleanreturn((GetSpellAbilityId()==1093681487))endfunctionfunction ga4 takes nothing returns nothinglocal trigger tr=GetTriggeringTrigger()local integer qB=GetHandleId(tr)local real BF=LoadReal(o,qB,-$5CF6751E)local real gB4=GetEventDamage()local unit u1=GetTriggerUnit()if u1==null thencall DestroyEffect(LoadEffectHandle(o,qB,-$5E9EB4B3))call FlushChildHashtable(o,qB)call DestroyTrigger(tr)elseif gB4>=BF thencall SetUnitState(u1,UNIT_STATE_LIFE,GetUnitState(u1,UNIT_STATE_LIFE)+BF)call DestroyEffect(LoadEffectHandle(o,qB,-$5E9EB4B3))call FlushChildHashtable(o,qB)call DestroyTrigger(tr)elsecall SaveReal(o,qB,-$5CF6751E,BF-gB4)call SetUnitState(u1,UNIT_STATE_LIFE,GetUnitState(u1,UNIT_STATE_LIFE)+gB4)endifendifset u1=nullset tr=nullendfunctionfunction gb4 takes nothing returns nothinglocal trigger trlocal integer qBlocal unit u1=GetTriggerUnit()local unit QClocal real a=GetUnitFacing(u1)*bj_DEGTORADlocal real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x1local real y1local integer ilocal integer i2=0local player p=GetOwningPlayer(u1)local real BF=(30.+(120.*I2R(GetUnitAbilityLevel(u1,1093681487))))call DestroyEffect(AddSpecialEffectTarget("war3mapImported\\zapmissile.mdx",u1,"chest"))set i=1loopexitwhen i>$Cset x1=x+50.*I2R(i)*Cos(a)set y1=y+50.*I2R(i)*Sin(a)if(i==$C)thencall SetUnitX(u1,x1)call SetUnitY(u1,y1)elsecall GroupEnumUnitsInRange(ce[1],x1,y1,185.,null)loopset QC=FirstOfGroup(ce[1])exitwhen QC==null or i2==1call GroupRemoveUnit(ce[1],QC)if(GetUnitState(QC,UNIT_STATE_LIFE)>0 and IsUnitEnemy(QC,p)and(Zy(QC,UNIT_TYPE_STRUCTURE)==false)and(GetUnitPointValue(QC)!=1)and(IsUnitHidden(QC)==false))thenset i2=1endifendloopcall GroupClear(ce[1])if(i2==1)thencall SetUnitX(u1,x1)call SetUnitY(u1,y1)call IssueImmediateOrderById(u1,$D0004)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\Thunderclap\\ThunderClapCaster.mdl",u1,"origin"))call GroupEnumUnitsInRange(ce[1],x1,y1,245.,null)loopset QC=FirstOfGroup(ce[1])exitwhen QC==nullcall GroupRemoveUnit(ce[1],QC)if(GetUnitState(QC,UNIT_STATE_LIFE)>0 and IsUnitEnemy(QC,p)and(Zy(QC,UNIT_TYPE_STRUCTURE)==false))thencall UnitDamageTargetBJ(u1,QC,BF,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)endifendloopset tr=CreateTrigger()set qB=GetHandleId(tr)call SaveEffectHandle(o,qB,-$5E9EB4B3,AddSpecialEffectTarget("war3mapImported\\Defensive Barrier big.mdx",u1,"chest"))call SaveReal(o,qB,-$5CF6751E,(I2R(GetHeroInt(u1,true))*5.))call TriggerRegisterUnitEvent(tr,u1,EVENT_UNIT_DAMAGED)call TriggerRegisterTimerEvent(tr,10.,false)call TriggerAddCondition(tr,Condition(function ga4))set u1=nullset tr=nullset QC=nullreturnendifendifset i=i+1endloopset p=nullset u1=nullset tr=nullset QC=nullendfunctionfunction gc4 takes nothing returns booleanreturn((GetSpellAbilityId()==1093682004))endfunctionfunction gD4 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real x1=GetUnitX(u2)local real y1=GetUnitY(u1)local real dt=SquareRoot((Pow((x1-x),2))+Pow((y1-y),2))local real r1=0local real r2=0if(u1==u2)thencall SetWidgetLife(u1,(GetUnitState(u1,UNIT_STATE_LIFE)+ad[GetUnitAbilityLevel(u1,GetSpellAbilityId())]))endifif(dt>=400.)thenset r1=(dt-400.)set r2=(r1/ 100.)set r2=(I2R(R2I(r2))*.2)set r2=(I2R((2+GetUnitAbilityLevel(u1,1093682004)))-r2)if(r2<=.8)thenset r2=.8endifcall xA(r2)call UnitRemoveAbility(u2,1110456396)endifset u1=nullset u2=nullendfunctionfunction g34 takes nothing returns booleanreturn((GetSpellAbilityId()==1093682007))endfunctionfunction gF4 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,-$5E9EB4B3)local integer gG4=LoadInteger(o,qB,-$63F0AAA2)local integer laser=LoadInteger(o,qB,-$5CF6751E)local integer p=LoadInteger(o,qB,-$209AC7E)local real xlocal real ylocal unit u3local integer ilocal real x1local real y1local real alocal real a1if((p==1))thenif((gG4<=0)or GetUnitState(u1,UNIT_STATE_LIFE)<=0)thencall SaveInteger(o,qB,-$209AC7E,2)call PauseTimer(t)call TimerStart(t,.33,true,function gF4)call SaveInteger(o,qB,-$63F0AAA2,24)elsecall SaveInteger(o,qB,-$63F0AAA2,gG4-1)set x=GetUnitX(u1)set y=GetUnitY(u1)set a=(GetUnitFacing(u1)-24.)*bj_DEGTORADset u3=CreateUnit(GetOwningPlayer(u1),1747988805,x,y,0)call UnitApplyTimedLife(u3,1112045413,3.)call UnitAddAbility(u3,1093683273)call SetUnitAbilityLevel(u3,1093683273,GetUnitAbilityLevel(u1,1093682007))set i=1loopexitwhen i>4set a1=a+(16.*I2R(i)*bj_DEGTORAD)set x1=x+200.*I2R(i)*Cos(a1)set y1=y+200.*I2R(i)*Sin(a1)call IssuePointOrderById(u3,$D0250,x1,y1)set i=i+1endloopendifelseif((gG4<=0)or GetUnitState(u1,UNIT_STATE_LIFE)<=0)thencall PauseTimer(t)call FlushChildHashtable(o,qB)call DestroyTimer(t)elsecall SaveInteger(o,qB,-$63F0AAA2,gG4-1)set x=GetUnitX(u1)set y=GetUnitY(u1)set a=(GetUnitFacing(u1)-12.)*bj_DEGTORADset u3=CreateUnit(GetOwningPlayer(u1),1747988805,GetUnitX(u1),GetUnitY(u1),0)call UnitApplyTimedLife(u3,1112045413,3.)call UnitAddAbility(u3,1093683273)call SetUnitAbilityLevel(u3,1093683273,GetUnitAbilityLevel(u1,1093682007))set i=1loopexitwhen i>2set a1=a+(8.*I2R(i)*bj_DEGTORAD)set x1=x+200.*I2R(i)*Cos(a1)set y1=y+200.*I2R(i)*Sin(a1)call IssuePointOrderById(u3,$D0250,x1,y1)set i=i+1endloopendifendifset u1=nullset t=nullset u3=nullendfunctionfunction g64 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local timer t=CreateTimer()local integer qB=GetHandleId(t)call SaveUnitHandle(o,qB,-$5E9EB4B3,u1)call SaveInteger(o,qB,-$63F0AAA2,5)call SaveInteger(o,qB,-$5CF6751E,4)call SaveInteger(o,qB,-$209AC7E,1)call TimerStart(t,.22,true,function gF4)set t=nullset u1=nullendfunctionfunction gI4 takes nothing returns nothingcall TriggerRegisterUnitEvent(Qs,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Rs,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Ss,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Ts,B4,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Us,B4,EVENT_UNIT_SPELL_EFFECT)set Bd[(1+GetPlayerId(GetOwningPlayer(B4)))]=CreateTimer()call SetPlayerAbilityAvailable(GetOwningPlayer(B4),1093685068,false)endfunctionfunction g14 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u=LoadUnitHandle(o,qB,-$5E9EB4B3)local integer i=LoadInteger(o,qB,-$5CF6751E)local player p=GetOwningPlayer(u)local integer gJ4=GetHeroInt(u,true)local real BF=(35.+1.45*I2R(gJ4))local unit QCif(i==0)thencall FlushChildHashtable(o,qB)call PauseTimer(t)elsecall SaveInteger(o,qB,-$5CF6751E,i-1)call GroupEnumUnitsInRange(ce[3],GetUnitX(u),GetUnitY(u),370.,null)loopset QC=FirstOfGroup(ce[3])exitwhen QC==nullcall GroupRemoveUnit(ce[3],QC)if GetUnitState(QC,UNIT_STATE_LIFE)>0 and IsUnitEnemy(QC,p)and Zy(QC,UNIT_TYPE_STRUCTURE)==false thencall UnitDamageTarget(u,QC,BF,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC,WEAPON_TYPE_WHOKNOWS)call DestroyEffect(AddSpecialEffectTarget("Abilities\\Weapons\\SorceressMissile\\SorceressMissile.mdl",QC,"head"))endifendloopendifset p=nullset u=nullset QC=nullset t=nullendfunctionfunction gK4 takes nothing returns nothinglocal unit u=GetTriggerUnit()local player p=GetOwningPlayer(u)local integer i=GetPlayerId(p)+1local timer t=Bd[i]local integer qB=GetHandleId(t)call PauseTimer(t)call SaveUnitHandle(o,qB,-$5E9EB4B3,u)call SaveInteger(o,qB,-$5CF6751E,4)call TimerStart(t,1.,true,function g14)set u=nullset t=nullendfunctionfunction gL4 takes nothing returns booleanlocal integer id=GetSpellAbilityId()if id==1093685064 or id==1093685066 or id==1093685068 or id==1093685078 or id==1093685067 thencall gK4()endifreturn falseendfunctionfunction gN4 takes nothing returns booleanreturn((GetSpellAbilityId()==1093685064))endfunctionfunction gO4 takes nothing returns nothinglocal real x1local real y1local unit u1=GetEnumUnit()set Cd[326]=(Cd[326]+5)set cd[326]=(cd[326]*-1)set x1=M8[326]+134.*Cos(ny+(Cd[326]*cd[326]*bj_DEGTORAD))set y1=N8[326]+134.*Sin(ny+(Cd[326]*cd[326]*bj_DEGTORAD))call IssueImmediateOrderById(u1,$D0004)call SetUnitX(u1,x1)call SetUnitY(u1,y1)set u1=nullendfunctionfunction g04 takes nothing returns nothingcall SetUnitPathing(GetEnumUnit(),true)endfunctionfunction gP4 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u1=LoadUnitHandle(o,qB,-$5E9EB4B3)local group g=LoadGroupHandle(o,qB,-$63F0AAA2)local real x=GetUnitX(u1)local real y=GetUnitY(u1)local real a=(GetUnitFacing(u1)+180.)*bj_DEGTORADlocal unit QClocal player p=GetOwningPlayer(u1)if(GetUnitAbilityLevel(u1,1110456401)==0)thencall ForGroup(g,function g04)call DestroyGroup(g)call FlushChildHashtable(o,qB)call DestroyTimer(t)elsecall GroupEnumUnitsInRange(ce[3],x,y,148.,null)loopset QC=FirstOfGroup(ce[3])exitwhen QC==nullcall GroupRemoveUnit(ce[3],QC)if((IsUnitInGroup(QC,g)!=true)and GetUnitState(QC,UNIT_STATE_LIFE)>0 and IsUnitEnemy(QC,p)and(Zy(QC,UNIT_TYPE_MAGIC_IMMUNE)==false)and(Zy(QC,UNIT_TYPE_MECHANICAL)==false)and(Zy(QC,UNIT_TYPE_STRUCTURE)==false)and(GetUnitPointValue(QC)!=1))thencall GroupAddUnit(g,QC)call SetUnitPathing(QC,false)endifendloopcall SaveGroupHandle(o,qB,-$63F0AAA2,g)set M8[326]=xset N8[326]=yset ny=aset Cd[326]=0set cd[326]=1call ForGroup(g,function gO4)endifset p=nullset g=nullset u1=nullset t=nullset QC=nullendfunctionfunction gQ4 takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)local unit QClocal group g=CreateGroup()local unit u1=GetTriggerUnit()local real x=GetUnitX(u1)local real y=GetUnitY(u1)call GroupEnumUnitsInRange(ce[3],x,y,148.,null)loopset QC=FirstOfGroup(ce[3])exitwhen QC==nullcall GroupRemoveUnit(ce[3],QC)if(GetUnitState(QC,UNIT_STATE_LIFE)>0 and(Zy(QC,UNIT_TYPE_MECHANICAL)==false)and(Zy(QC,UNIT_TYPE_MAGIC_IMMUNE)==false)and IsUnitEnemy(QC,GetOwningPlayer(u1))and(Zy(QC,UNIT_TYPE_STRUCTURE)==false)and(GetUnitPointValue(QC)!=1))thencall GroupAddUnit(g,QC)call SetUnitPathing(QC,false)endifendloopcall UnitDamageTargetBJ(u1,u1,1.,ATTACK_TYPE_HERO,DAMAGE_TYPE_ACID)call SaveUnitHandle(o,qB,-$5E9EB4B3,u1)call SaveGroupHandle(o,qB,-$63F0AAA2,g)call TimerStart(t,.05/ 2.,true,function gP4)set t=nullset u1=nullset QC=nullset g=nullendfunctionfunction gS4 takes nothing returns booleanreturn(((GetSpellAbilityId()==1093685066)or(GetSpellAbilityId()==1093685068)))endfunctionfunction g54 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local unit u2=GetSpellTargetUnit()local player q5=GetOwningPlayer(u1)call SetUnitX(u1,GetUnitX(u2))call SetUnitY(u1,GetUnitY(u2))call UnitDamageTargetBJ(u1,u2,(100.+(I2R(GetUnitAbilityLevel(u1,1093685066))*75.)),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)if(GetSpellAbilityId()==1093685066)thencall SetPlayerAbilityAvailable(q5,1093685068,true)call SetPlayerAbilityAvailable(q5,1093685066,false)call xA(4.)call SetPlayerAbilityAvailable(q5,1093685068,false)call SetPlayerAbilityAvailable(q5,1093685066,true)elsecall SetPlayerAbilityAvailable(q5,1093685068,false)call SetPlayerAbilityAvailable(q5,1093685066,true)endifset u1=nullset u2=nullset q5=nullendfunctionfunction gU4 takes nothing returns booleanreturn((GetSpellAbilityId()==1093685067))endfunctionfunction gV4 takes nothing returns nothinglocal unit u1=GetTriggerUnit()local effect e=AddSpecialEffectTarget("Abilities\\Weapons\\WitchDoctorMissile\\WitchDoctorMissile.mdl",u1,"head")if((GetUnitLifePercent(u1)<=$A))thencall UnitDamageTargetBJ(u1,u1,(GetUnitStateSwap(UNIT_STATE_LIFE,u1)*.95),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)elsecall UnitDamageTargetBJ(u1,u1,(GetUnitStateSwap(UNIT_STATE_MAX_LIFE,u1)*.1),ATTACK_TYPE_NORMAL,DAMAGE_TYPE_MAGIC)endifcall UnitRemoveBuffsBJ(1,u1)call UnitAddAbility(u1,1093685069)call SetUnitAbilityLevel(u1,1093685069,GetUnitAbilityLevel(u1,1093685067))call xA(7.5)call UnitRemoveAbility(u1,1093685069)call UnitRemoveBuffsBJ(1,u1)call DestroyEffect(e)set u1=nullset e=nullendfunctionfunction gX4 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u=LoadUnitHandle(o,qB,-$5E9EB4B3)local unit u2=LoadUnitHandle(o,qB,-$5CF6751E)local integer BB=GetUnitAbilityLevel(u,1093685078)local real r1=(30.+(30.*I2R(BB)))local real r2=(50.+(50.*I2R(BB)))local real x=GetUnitX(u2)local real y=GetUnitY(u2)local player p=GetOwningPlayer(u)local unit QCcall FlushChildHashtable(o,qB)call DestroyTimer(t)call DestroyEffect(AddSpecialEffect("Objects\\Spawnmodels\\Other\\NeutralBuildingExplosion\\NeutralBuildingExplosion.mdl",x,y))call DestroyEffect(AddSpecialEffect("war3mapImported\\judgementtarget.mdx",x,y))call GroupEnumUnitsInRange(ce[8],x,y,250.,null)loopset QC=FirstOfGroup(ce[8])exitwhen QC==nullcall GroupRemoveUnit(ce[8],QC)if GetUnitState(QC,UNIT_STATE_LIFE)>0 and IsUnitEnemy(QC,p)and Zy(QC,UNIT_TYPE_STRUCTURE)==false thenif(Zy(QC,UNIT_TYPE_MAGIC_IMMUNE)==false)thencall UnitDamageTarget(u,QC,r2,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNKNOWN,WEAPON_TYPE_WHOKNOWS)elsecall UnitDamageTarget(u,QC,r1,true,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNKNOWN,WEAPON_TYPE_WHOKNOWS)endifendifendloopset QC=nullset u=nullset u2=nullset t=nullset p=nullendfunctionfunction gY4 takes nothing returns nothinglocal timer t=GetExpiredTimer()local integer qB=GetHandleId(t)local unit u=LoadUnitHandle(o,qB,-$5E9EB4B3)local integer i=LoadInteger(o,qB,-$5CF6751E)local real x=GetUnitX(u)local real y=GetUnitY(u)local integer i2=0local unit QClocal timer t1local integer wSif(i==3)thencall FlushChildHashtable(o,qB)call DestroyTimer(t)elsecall SaveInteger(o,qB,-$5CF6751E,i+1)call GroupEnumUnitsInRange(ce[8],x,y,1000.,null)loopset QC=FirstOfGroup(ce[8])exitwhen(QC==null)or(i2==3)call GroupRemoveUnit(ce[8],QC)if Zy(QC,UNIT_TYPE_HERO)and GetUnitState(QC,UNIT_STATE_LIFE)>0 and IsUnitAlly(QC,GetOwningPlayer(u))==false and GetUnitPointValue(QC)!=1 thenset i2=i2+1set t1=CreateTimer()set wS=GetHandleId(t1)call SaveUnitHandle(o,wS,-$5E9EB4B3,u)call SaveUnitHandle(o,wS,-$5CF6751E,QC)call TimerStart(t1,GetRandomReal(.1,.4),false,function gX4)endifendloopendifset u=nullset t=nullset t1=nullset QC=nullendfunctionfunction g24 takes nothing returns nothinglocal timer t=CreateTimer()local integer qB=GetHandleId(t)local unit u=GetTriggerUnit()local real x=GetUnitX(u)local real y=GetUnitY(u)local player p=GetOwningPlayer(u)local unit u3=CreateUnit(p,1747988805,x,y,0)local unit QCcall UnitApplyTimedLife(u3,1112045413,2.)call UnitAddAbility(u3,1093685574)call IssuePointOrderById(u3,$D0059,x,y)call GroupEnumUnitsInRange(ce[8],x,y,550.,null)loopset QC=FirstOfGroup(ce[8])exitwhen QC==nullcall GroupRemoveUnit(ce[8],QC)if GetUnitState(QC,UNIT_STATE_LIFE)>0 and IsUnitEnemy(QC,p)and Zy(QC,UNIT_TYPE_MECHANICAL)==false and Zy(QC,UNIT_TYPE_STRUCTURE)==false and GetUnitPointValue(QC)!=1 thencall DestroyEffect(AddSpecialEffectTarget("Abilities\\Spells\\Human\\DispelMagic\\DispelMagicTarget.mdl",QC,"origin"))endifendloopcall SaveUnitHandle(o,qB,-$5E9EB4B3,u)call SaveInteger(o,qB,-$5CF6751E,0)call TimerStart(t,1.,true,function gY4)set u3=nullset t=nullset u=nullset QC=nullendfunctionfunction gZ4 takes nothing returns booleanif GetSpellAbilityId()==1093685078 thencall g24()endifreturn falseendfunctionfunction h44 takes nothing returns nothingendfunctionfunction h84 takes nothing returns nothinglocal integer LF=LoadInteger(o,GetHandleId(GetTriggeringTrigger()),-$3021938A)set LF=LF+3call SaveInteger(o,GetHandleId(GetTriggeringTrigger()),-$3021938A,LF)call SaveInteger(o,GetHandleId(GetTriggeringTrigger()),-$1317DA19,LF)call SaveUnitHandle(o,GetHandleId(GetTriggeringTrigger())*LF,-$5E9EB4B3,B4)set I7=B4call SetPlayerAbilityAvailable(GetOwningPlayer(I7),1095069029,false)call FlushChildHashtable(o,GetHandleId(GetTriggeringTrigger())*LF)endfunctionfunction hd4 takes nothing returns nothinglocal integer LF=LoadInteger(o,GetHandleId(GetTriggeringTrigger()),-$3021938A)set LF=LF+3call SaveInteger(o,GetHandleId(GetTriggeringTrigger()),-$3021938A,LF)call SaveInteger(o,GetHandleId(GetTriggeringTrigger()),-$1317DA19,LF)call SaveUnitHandle(o,GetHandleId(GetTriggeringTrigger())*LF,-$5E9EB4B3,B4)set q8=B4call SaveLocationHandle(o,GetHandleId(GetTriggeringTrigger())*LF,-$5CF6751E,GetUnitLoc(zv))call RemoveLocation(LoadLocationHandle(o,GetHandleId(GetTriggeringTrigger())*LF,-$5CF6751E))set p8=bj_lastCreatedUnitcall FlushChildHashtable(o,GetHandleId(GetTriggeringTrigger())*LF)endfunctionfunction hf4 takes nothing returns nothingset ge=InitHashtable()set j7=InitHashtable()set Ae=InitHashtable()set Fe=InitHashtable()set Jd=InitHashtable()set T7=InitHashtable()set Oe=InitHashtable()set Pe=InitHashtable()set We=InitHashtable()set Xe=InitHashtable()endfunctionfunction hh4 takes nothing returns nothingset k4[0]=2.set k4[1]=4.set k4[2]=7.set k4[3]=11.set k4[4]=15.set k4[5]=19.set k4[6]=23.set k4[7]=28.set k4[8]=33.set k4[9]=38.set k4[$A]=43.set k4[$B]=48.set k4[$C]=54.set k4[$D]=59.set k4[$E]=65.set k4[$F]=71.set k4[16]=77.set k4[17]=81.set k4[18]=87.set k4[19]=93.set bj_forLoopAIndex=1set bj_forLoopAIndexEnd=$Aloopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndset H7[bj_forLoopAIndex]=GetPlayerName(Player(-1+(bj_forLoopAIndex)))set bj_forLoopAIndex=bj_forLoopAIndex+1endloopset E7=1set bj_forLoopAIndex=1set bj_forLoopAIndexEnd=$Cloopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndcall SetPlayerAbilityAvailableBJ(false,1093687350,Player(-1+(bj_forLoopAIndex)))call SetPlayerState(Player(-1+(bj_forLoopAIndex)),PLAYER_STATE_GIVES_BOUNTY,1)set W4[bj_forLoopAIndex]=300call SetPlayerStateBJ(Player(-1+(bj_forLoopAIndex)),PLAYER_STATE_RESOURCE_GOLD,$5DC)set bj_forLoopAIndex=bj_forLoopAIndex+1endloopset e8=6set n8=6set j4[1]="|c00FF0000"set j4[2]="|c000000FF"set j4[3]="|c0040E0D0"set j4[4]="|c00800080"set j4[5]="|c00FFFF00"set j4[6]="|c00FFA500"set j4[7]="|c0000FF00"set j4[8]="|c00FF00FF"set j4[9]="|c00C0C0C0"set j4[$A]="|c00ADD8E6"set j4[$B]="|c00006400"set j4[$C]="|c00A52A2A"set bj_forLoopAIndex=1set bj_forLoopAIndexEnd=$Aloopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndset q7[bj_forLoopAIndex]=GetPlayerName(Player(-1+(bj_forLoopAIndex)))set bj_forLoopAIndex=bj_forLoopAIndex+1endloopset V7[1]=ytset V7[2]=ztset V7[3]=Atset V7[4]=Btset V7[5]=Ctset V7[6]=cuset V7[7]=Duset V7[8]=Euset V7[9]=Fuset V7[$A]=Guset Me=CreateItemPool()call ItemPoolAddItemType(Me,1919183219,2.)call ItemPoolAddItemType(Me,1920099633,10.)call ItemPoolAddItemType(Me,1920099699,15.)call ItemPoolAddItemType(Me,1919444273,50.)set P4[$DE]="ReplaceableTextures\\CommandButtons\\BTNBanditMage.blp"set P4[$E1]="ReplaceableTextures\\CommandButtons\\BTNArthas.blp"set P4[$E8]="ReplaceableTextures\\CommandButtons\\BTNPandarenBrewmaster.blp"set P4[$DD]="ReplaceableTextures\\CommandButtons\\BTNHeroDeathKnight.blp"set P4[$D5]="ReplaceableTextures\\CommandButtons\\BTNHeroYoshimotoImagawa.blp"set P4[$E9]="ReplaceableTextures\\CommandButtons\\btnheroisehime.blp"set P4[$DF]="ReplaceableTextures\\CommandButtons\\BTNGarithos.blp"set P4[113]="ReplaceableTextures\\CommandButtons\\btnheronene.blp"set P4[$E2]="ReplaceableTextures\\CommandButtons\\BTNShaman.blp"set P4[$E6]="ReplaceableTextures\\CommandButtons\\BTNBeastMaster.blp"set P4[$E0]="ReplaceableTextures\\CommandButtons\\BTNHeroDeathKnight2.blp"set P4[$EC]="ReplaceableTextures\\CommandButtons\\BTNTauren.blp"set P4[$DB]="replaceabletextures\\commandbuttons\\btnherochiyomemochizuki.blp"set P4[$E3]="ReplaceableTextures\\CommandButtons\\BTNBansheeRanger.blp"set P4[$CB]="ReplaceableTextures\\CommandButtons\\BTNThrall.blp"set P4[$87]="ReplaceableTextures\\CommandButtons\\btn_a35hero.blp"set P4[122]="ReplaceableTextures\\CommandButtons\\BTNHeroFarseer.blp"set P4[125]="ReplaceableTextures\\CommandButtons\\BTNShadowHunter.blp"set P4[121]="replaceabletextures\\commandbuttons\\btnhumanmage.blp"set P4[$84]="ReplaceableTextures\\CommandButtons\\BTNChaosWarlock.blp"set P4[120]="ReplaceableTextures\\CommandButtons\\BTNHeroBloodElfPrince.blp"set P4[$7E]="ReplaceableTextures\\CommandButtons\\BTNJaina.blp"set P4[$88]="ReplaceableTextures\\CommandButtons\\BTNForestTroll.blp"set P4[119]="ReplaceableTextures\\CommandButtons\\BTNHeroPaladin.blp"set P4[$85]="ReplaceableTextures\\CommandButtons\\BTNHeadHunterBerserker.blp"set P4[116]="ReplaceableTextures\\CommandButtons\\BTNArcher.blp"set P4[117]="ReplaceableTextures\\CommandButtons\\BTNHero01.blp"set P4[325]="ReplaceableTextures\\CommandButtons\\BTNHeroTinker.blp"set P4[322]="ReplaceableTextures\\CommandButtons\\BTNDranaiAkama.blp"set P4[323]="ReplaceableTextures\\CommandButtons\\BTNZombie.blp"set P4[314]="ReplaceableTextures\\CommandButtons\\BTNDruidOfTheClaw.blp"set P4[315]="ReplaceableTextures\\CommandButtons\\BTNSpellBreaker.blp"set P4[309]="ReplaceableTextures\\CommandButtons\\BTNHero02.blp"set P4[313]="ReplaceableTextures\\CommandButtons\\BTNHero11.blp"set P4[$D2]="ReplaceableTextures\\CommandButtons\\BTNChaosWarlord.blp"set P4[$D8]="ReplaceableTextures\\CommandButtons\\BTNHeroTaurenChieftain.blp"set P4[$DA]="ReplaceableTextures\\CommandButtons\\BTNKeeperOfTheGrove.blp"set P4[$CD]="ReplaceableTextures\\CommandButtons\\BTNFurion.blp"set P4[$E7]="ReplaceableTextures\\CommandButtons\\BTNSatyrTrickster.blp"set P4[$E4]="ReplaceableTextures\\CommandButtons\\BTNLichVersion2.blp"set P4[$CC]="ReplaceableTextures\\CommandButtons\\BTNHero17.blp"set P4[$D7]="ReplaceableTextures\\CommandButtons\\BTNRevenant.blp"set P4[$D4]="ReplaceableTextures\\CommandButtons\\BTNHero16.blp"set P4[$CF]="ReplaceableTextures\\CommandButtons\\BTNMedivh.blp"set P4[$F0]="ReplaceableTextures\\CommandButtons\\btnherokanetsugunaoe.blp"set P4[$CA]="ReplaceableTextures\\CommandButtons\\BTNHero09.blp"set P4[$CE]="ReplaceableTextures\\CommandButtons\\BTNHero12.blp"set P4[$EA]="ReplaceableTextures\\CommandButtons\\BTNHeroArchMage.blp"set P4[$D9]="ReplaceableTextures\\CommandButtons\\BTNKnight.blp"set P4[$D0]="ReplaceableTextures\\CommandButtons\\BTNHero06.blp"set P4[$E5]="ReplaceableTextures\\CommandButtons\\BTNDemoness.blp"set P4[$D3]="ReplaceableTextures\\CommandButtons\\BTNHeroKikuhime.blp"set P4[$C9]="ReplaceableTextures\\CommandButtons\\BTNHero21.blp"set P4[$D6]="ReplaceableTextures\\CommandButtons\\BTNNinja!.blp"set P4[$D6]="ReplaceableTextures\\CommandButtons\\BTNNinja!.blp"set P4[$80]="ReplaceableTextures\\CommandButtons\\BTNMilitia.blp"set P4[106]="ReplaceableTextures\\CommandButtons\\BTNFelGuard.blp"set P4[$83]="ReplaceableTextures\\CommandButtons\\BTNChaosGrom.blp"set P4[109]="ReplaceableTextures\\CommandButtons\\BTNGuldan.blp"set P4[107]="ReplaceableTextures\\CommandButtons\\BTNHero03.blp"set P4[103]="ReplaceableTextures\\CommandButtons\\BTNDruidOfTheTalon.blp"set P4[104]="ReplaceableTextures\\CommandButtons\\btnheroshigeharutakenaka.blp"set P4[$86]="ReplaceableTextures\\CommandButtons\\BTNDoomGuard.blp"set P4[114]="ReplaceableTextures\\CommandButtons\\BTNRifleman.blp"set P4[111]="ReplaceableTextures\\CommandButtons\\BTNHero14.blp"set P4[112]="replaceabletextures\\commandbuttons\\btnherotoshiiemaeda.blp"set P4[$7F]="ReplaceableTextures\\CommandButtons\\BTNChaosWolfRider.blp"set P4[108]="ReplaceableTextures\\CommandButtons\\BTNChaosGrunt.blp"set P4[105]="ReplaceableTextures\\CommandButtons\\BTNHeroPaladin2.blp"set P4[123]="replaceabletextures\\commandbuttons\\btnheroranmarumori.blp"set P4[115]="ReplaceableTextures\\CommandButtons\\btnheroyoshitakakuroda.blp"set P4[$82]="ReplaceableTextures\\CommandButtons\\BTNHellScream.blp"set P4[101]="ReplaceableTextures\\CommandButtons\\BTNProudMoore.blp"set P4[102]="ReplaceableTextures\\CommandButtons\\BTNSylvanusWindrunner.blp"set P4[$81]="ReplaceableTextures\\CommandButtons\\BTNIceTrollShadowPriest.blp"set P4[118]="ReplaceableTextures\\CommandButtons\\BTNHeroNouhime.blp"set P4[110]="ReplaceableTextures\\CommandButtons\\BTNKelThuzad.blp"set P4[124]="ReplaceableTextures\\CommandButtons\\BTNChaosBlademaster.blp"set P4[326]="ReplaceableTextures\\CommandButtons\\BTNSpiritWalker.blp"set P4[303]="ReplaceableTextures\\CommandButtons\\BTNPriestessOfTheMoon.blp"set P4[318]="ReplaceableTextures\\CommandButtons\\BTNHeroMuneshigeTachibana.blp"set P4[316]="ReplaceableTextures\\CommandButtons\\BTNAvengingWatcher.blp"set P4[310]="ReplaceableTextures\\CommandButtons\\BTNHero07.blp"set P4[306]="ReplaceableTextures\\CommandButtons\\BTNHeroMatsuhime.blp"set P4[304]="ReplaceableTextures\\CommandButtons\\BTNAcolyte.blp"set P4[307]="ReplaceableTextures\\CommandButtons\\BTNEvilIllidan.blp"set P4[305]="ReplaceableTextures\\CommandButtons\\BTNHeroOichi.blp"set P4[312]="ReplaceableTextures\\CommandButtons\\BTNSorceress.blp"set P4[317]="ReplaceableTextures\\CommandButtons\\BTNHeroDemonHunter.blp"set P4[311]="ReplaceableTextures\\CommandButtons\\BTNHeroMountainKing.blp"set P4[301]="ReplaceableTextures\\CommandButtons\\BTNTichondrius.blp"set P4[302]="ReplaceableTextures\\CommandButtons\\BTNArchimonde.blp"set P4[320]="ReplaceableTextures\\CommandButtons\\BTNHeroKojiroSasaki.blp"set P4[324]="ReplaceableTextures\\CommandButtons\\BTNHeroMuneyosiYagyu.blp"set P4[319]="ReplaceableTextures\\CommandButtons\\BTNHeroMusashiMiyamoto.blp"set P4[$EB]="ReplaceableTextures\\CommandButtons\\BTNDeepLordRevenant.blp"set P4[$DC]="ReplaceableTextures\\CommandButtons\\BTNSkeletonMage.blp"set P4[380]="ReplaceableTextures\\CommandButtons\\BTNHuntress.blp"set P4[340]="ReplaceableTextures\\CommandButtons\\BTNTreeOfEternity.blp"set P4[327]="ReplaceableTextures\\CommandButtons\\BTNRockGolem.blp"endfunctionfunction hj4 takes nothing returns nothingcall CreateQuestBJ(0,"TRIGSTR_11849","TRIGSTR_11851","ReplaceableTextures\\CommandButtons\\BTNSpy.blp")call CreateQuestBJ(0,"TRIGSTR_11874","TRIGSTR_2906","ReplaceableTextures\\CommandButtons\\BTNTome.blp")call CreateQuestBJ(0,"TRIGSTR_11877","TRIGSTR_11878","ReplaceableTextures\\CommandButtons\\BTNStarWand.blp")call CreateQuestBJ(2,"TRIGSTR_11879","TRIGSTR_11887","ReplaceableTextures\\CommandButtons\\BTNSentryWard.blp")call CreateQuestBJ(2,"TRIGSTR_11893","TRIGSTR_11915","ReplaceableTextures\\CommandButtons\\BTNDarkSummoning.blp")call DestroyTrigger(GetTriggeringTrigger())endfunctionfunction hm4 takes nothing returns nothinglocal integer i=1set Rx=Rect(-1184.,-1056.,-576.,-448.)set hy=Rect(-6592.,-6400.,-6016.,-5920.)set iy=Rect(5472.,5632.,6144.,6240.)set Sx=Rect(-4064.,-2912.,-3456.,-2304.)set Tx=Rect(3136.,3168.,3872.,3936.)set Ux=Rect(6432.,6336.,6784.,6560.)set Vx=Rect(-128.,32.,160.,352.)set Wx=Rect(-6848.,-6944.,-6528.,-6528.)set Xx=Rect(4512.,7552.,4736.,7840.)set Yx=Rect(-384.,320.,-96.,608.)set Zx=Rect(-5568.,-8032.,-5248.,-7744.)set ey=Rect(6144.,6368.,6432.,6656.)set fy=Rect(-2144.,-1376.,-1824.,-992.)set gy=Rect(-7200.,-6912.,-6848.,-6688.)set jy=Rect(7008.,-7584.,7296.,-7296.)set ky=Rect(-7392.,6944.,-7104.,7232.)set Ke[3]=GetRectCenter(jy)set Ke[4]=GetRectCenter(ky)set Ke[$B]=GetRectCenter(iy)set Ke[$C]=GetRectCenter(Rx)set Ke[$D]=GetRectCenter(hy)set Ke[40]=GetRectCenter(Sx)set Ke[41]=GetRectCenter(Tx)set Ke[42]=GetRectCenter(Ux)set Ke[43]=GetRectCenter(Vx)set Ke[44]=GetRectCenter(Wx)set Ke[45]=GetRectCenter(Xx)set Ke[46]=GetRectCenter(Yx)set Ke[47]=GetRectCenter(Zx)set Ke[48]=GetRectCenter(ey)set Ke[49]=GetRectCenter(fy)set Ke[50]=GetRectCenter(gy)endfunctionfunction ho4 takes nothing returns nothingset l7[1]=GetRectCenter(df)set l7[2]=GetRectCenter(ff)set l7[3]=GetRectCenter(gf)set l7[8]=GetRectCenter(jf)set l7[4]=GetRectCenter(hf)set l7[5]=GetRectCenter(kf)set l7[6]=GetRectCenter(mf)set l7[7]=GetRectCenter(ef)set l7[9]=GetRectCenter(nf)set l7[$A]=GetRectCenter(Af)set l7[$B]=GetRectCenter(of)set bj_forLoopAIndex=1set bj_forLoopAIndexEnd=$Bloopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndset M8[bj_forLoopAIndex]=GetLocationX(l7[bj_forLoopAIndex])set N8[bj_forLoopAIndex]=GetLocationY(l7[bj_forLoopAIndex])set bj_forLoopAIndex=bj_forLoopAIndex+1endloopset bj_forLoopAIndex=1set bj_forLoopAIndexEnd=3loopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndset O8[bj_forLoopAIndex]=AngleBetweenPoints(l7[bj_forLoopAIndex],l7[(bj_forLoopAIndex+8)])set bj_forLoopAIndex=bj_forLoopAIndex+1endloopset bj_forLoopAIndex=4set bj_forLoopAIndexEnd=6loopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndset O8[bj_forLoopAIndex]=AngleBetweenPoints(l7[bj_forLoopAIndex],l7[(bj_forLoopAIndex+5)])set bj_forLoopAIndex=bj_forLoopAIndex+1endloopset l7[51]=GetRectCenter(dg)set l7[52]=GetRectCenter(Ef)set l7[53]=GetRectCenter(eg)set l7[54]=GetRectCenter(Ff)set l7[61]=GetRectCenter(fg)set l7[62]=GetRectCenter(Hf)set l7[63]=GetRectCenter(gg)set l7[64]=GetRectCenter(Gf)set bj_forLoopAIndex=51set bj_forLoopAIndexEnd=54loopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndset M8[bj_forLoopAIndex]=GetLocationX(l7[bj_forLoopAIndex])set N8[bj_forLoopAIndex]=GetLocationY(l7[bj_forLoopAIndex])set bj_forLoopAIndex=bj_forLoopAIndex+1endloopset bj_forLoopAIndex=61set bj_forLoopAIndexEnd=64loopexitwhen bj_forLoopAIndex>bj_forLoopAIndexEndset M8[bj_forLoopAIndex]=GetLocationX(l7[bj_forLoopAIndex])set N8[bj_forLoopAIndex]=GetLocationY(l7[bj_forLoopAIndex])set bj_forLoopAIndex=bj_forLoopAIndex+1endloopendfunctionfunction InitCustomTeams takes nothing returns nothingcall SetPlayerTeam(Player(0),0)call SetPlayerState(Player(0),PLAYER_STATE_ALLIED_VICTORY,1)call SetPlayerTeam(Player(1),0)call SetPlayerState(Player(1),PLAYER_STATE_ALLIED_VICTORY,1)call SetPlayerTeam(Player(2),0)call SetPlayerState(Player(2),PLAYER_STATE_ALLIED_VICTORY,1)call SetPlayerTeam(Player(3),0)call SetPlayerState(Player(3),PLAYER_STATE_ALLIED_VICTORY,1)call SetPlayerTeam(Player(4),0)call SetPlayerState(Player(4),PLAYER_STATE_ALLIED_VICTORY,1)call SetPlayerAllianceStateAllyBJ(Player(0),Player(1),true)call SetPlayerAllianceStateAllyBJ(Player(0),Player(2),true)call SetPlayerAllianceStateAllyBJ(Player(0),Player(3),true)call SetPlayerAllianceStateAllyBJ(Player(0),Player(4),true)call SetPlayerAllianceStateAllyBJ(Player(1),Player(0),true)call SetPlayerAllianceStateAllyBJ(Player(1),Player(2),true)call SetPlayerAllianceStateAllyBJ(Player(1),Player(3),true)call SetPlayerAllianceStateAllyBJ(Player(1),Player(4),true)call SetPlayerAllianceStateAllyBJ(Player(2),Player(0),true)call SetPlayerAllianceStateAllyBJ(Player(2),Player(1),true)call SetPlayerAllianceStateAllyBJ(Player(2),Player(3),true)call SetPlayerAllianceStateAllyBJ(Player(2),Player(4),true)call SetPlayerAllianceStateAllyBJ(Player(3),Player(0),true)call SetPlayerAllianceStateAllyBJ(Player(3),Player(1),true)call SetPlayerAllianceStateAllyBJ(Player(3),Player(2),true)call SetPlayerAllianceStateAllyBJ(Player(3),Player(4),true)call SetPlayerAllianceStateAllyBJ(Player(4),Player(0),true)call SetPlayerAllianceStateAllyBJ(Player(4),Player(1),true)call SetPlayerAllianceStateAllyBJ(Player(4),Player(2),true)call SetPlayerAllianceStateAllyBJ(Player(4),Player(3),true)call SetPlayerAllianceStateVisionBJ(Player(0),Player(1),true)call SetPlayerAllianceStateVisionBJ(Player(0),Player(2),true)call SetPlayerAllianceStateVisionBJ(Player(0),Player(3),true)call SetPlayerAllianceStateVisionBJ(Player(0),Player(4),true)call SetPlayerAllianceStateVisionBJ(Player(1),Player(0),true)call SetPlayerAllianceStateVisionBJ(Player(1),Player(2),true)call SetPlayerAllianceStateVisionBJ(Player(1),Player(3),true)call SetPlayerAllianceStateVisionBJ(Player(1),Player(4),true)call SetPlayerAllianceStateVisionBJ(Player(2),Player(0),true)call SetPlayerAllianceStateVisionBJ(Player(2),Player(1),true)call SetPlayerAllianceStateVisionBJ(Player(2),Player(3),true)call SetPlayerAllianceStateVisionBJ(Player(2),Player(4),true)call SetPlayerAllianceStateVisionBJ(Player(3),Player(0),true)call SetPlayerAllianceStateVisionBJ(Player(3),Player(1),true)call SetPlayerAllianceStateVisionBJ(Player(3),Player(2),true)call SetPlayerAllianceStateVisionBJ(Player(3),Player(4),true)call SetPlayerAllianceStateVisionBJ(Player(4),Player(0),true)call SetPlayerAllianceStateVisionBJ(Player(4),Player(1),true)call SetPlayerAllianceStateVisionBJ(Player(4),Player(2),true)call SetPlayerAllianceStateVisionBJ(Player(4),Player(3),true)call SetPlayerTeam(Player(5),1)call SetPlayerState(Player(5),PLAYER_STATE_ALLIED_VICTORY,1)call SetPlayerTeam(Player(6),1)call SetPlayerState(Player(6),PLAYER_STATE_ALLIED_VICTORY,1)call SetPlayerTeam(Player(7),1)call SetPlayerState(Player(7),PLAYER_STATE_ALLIED_VICTORY,1)call SetPlayerTeam(Player(8),1)call SetPlayerState(Player(8),PLAYER_STATE_ALLIED_VICTORY,1)call SetPlayerTeam(Player(9),1)call SetPlayerState(Player(9),PLAYER_STATE_ALLIED_VICTORY,1)call SetPlayerAllianceStateAllyBJ(Player(5),Player(6),true)call SetPlayerAllianceStateAllyBJ(Player(5),Player(7),true)call SetPlayerAllianceStateAllyBJ(Player(5),Player(8),true)call SetPlayerAllianceStateAllyBJ(Player(5),Player(9),true)call SetPlayerAllianceStateAllyBJ(Player(6),Player(5),true)call SetPlayerAllianceStateAllyBJ(Player(6),Player(7),true)call SetPlayerAllianceStateAllyBJ(Player(6),Player(8),true)call SetPlayerAllianceStateAllyBJ(Player(6),Player(9),true)call SetPlayerAllianceStateAllyBJ(Player(7),Player(5),true)call SetPlayerAllianceStateAllyBJ(Player(7),Player(6),true)call SetPlayerAllianceStateAllyBJ(Player(7),Player(8),true)call SetPlayerAllianceStateAllyBJ(Player(7),Player(9),true)call SetPlayerAllianceStateAllyBJ(Player(8),Player(5),true)call SetPlayerAllianceStateAllyBJ(Player(8),Player(6),true)call SetPlayerAllianceStateAllyBJ(Player(8),Player(7),true)call SetPlayerAllianceStateAllyBJ(Player(8),Player(9),true)call SetPlayerAllianceStateAllyBJ(Player(9),Player(5),true)call SetPlayerAllianceStateAllyBJ(Player(9),Player(6),true)call SetPlayerAllianceStateAllyBJ(Player(9),Player(7),true)call SetPlayerAllianceStateAllyBJ(Player(9),Player(8),true)call SetPlayerAllianceStateVisionBJ(Player(5),Player(6),true)call SetPlayerAllianceStateVisionBJ(Player(5),Player(7),true)call SetPlayerAllianceStateVisionBJ(Player(5),Player(8),true)call SetPlayerAllianceStateVisionBJ(Player(5),Player(9),true)call SetPlayerAllianceStateVisionBJ(Player(6),Player(5),true)call SetPlayerAllianceStateVisionBJ(Player(6),Player(7),true)call SetPlayerAllianceStateVisionBJ(Player(6),Player(8),true)call SetPlayerAllianceStateVisionBJ(Player(6),Player(9),true)call SetPlayerAllianceStateVisionBJ(Player(7),Player(5),true)call SetPlayerAllianceStateVisionBJ(Player(7),Player(6),true)call SetPlayerAllianceStateVisionBJ(Player(7),Player(8),true)call SetPlayerAllianceStateVisionBJ(Player(7),Player(9),true)call SetPlayerAllianceStateVisionBJ(Player(8),Player(5),true)call SetPlayerAllianceStateVisionBJ(Player(8),Player(6),true)call SetPlayerAllianceStateVisionBJ(Player(8),Player(7),true)call SetPlayerAllianceStateVisionBJ(Player(8),Player(9),true)call SetPlayerAllianceStateVisionBJ(Player(9),Player(5),true)call SetPlayerAllianceStateVisionBJ(Player(9),Player(6),true)call SetPlayerAllianceStateVisionBJ(Player(9),Player(7),true)call SetPlayerAllianceStateVisionBJ(Player(9),Player(8),true)endfunctionfunction main takes nothing returns nothinglocal weathereffect welocal integer ilocal player plocal unit ulocal integer unitIDlocal trigger tlocal real hBlocal integer wzlocal integer xzlocal version vlocal integer nzlocal integer nlocal region rlocal region FAcall SetCameraBounds(-8448.+GetCameraMargin(CAMERA_MARGIN_LEFT),-8320.+GetCameraMargin(CAMERA_MARGIN_BOTTOM),8448.-GetCameraMargin(CAMERA_MARGIN_RIGHT),8576.-GetCameraMargin(CAMERA_MARGIN_TOP),-8448.+GetCameraMargin(CAMERA_MARGIN_LEFT),8576.-GetCameraMargin(CAMERA_MARGIN_TOP),8448.-GetCameraMargin(CAMERA_MARGIN_RIGHT),-8320.+GetCameraMargin(CAMERA_MARGIN_BOTTOM))call SetDayNightModels("Environment\\DNC\\DNCLordaeron\\DNCLordaeronTerrain\\DNCLordaeronTerrain.mdl","Environment\\DNC\\DNCLordaeron\\DNCLordaeronUnit\\DNCLordaeronUnit.mdl")call NewSoundEnvironment("Default")call SetAmbientDaySound("AshenvaleDay")call SetAmbientNightSound("AshenvaleNight")call SetMapMusic("Music",true,0)set Cg=CreateSound("Abilities\\Spells\\Human\\StormBolt\\ThunderBoltMissileDeath.wav",false,true,true,$A,$A,"SpellsEAX")call SetSoundParamsFromLabel(Cg,"StormBolt")call SetSoundDuration(Cg,$8BC)set Dg=CreateSound("Units\\Human\\KnightNoRider\\KnightNoRiderWarcry1.wav",false,true,true,$A,$A,"SpellsEAX")call SetSoundParamsFromLabel(Dg,"KnightNoRiderWarcry")call SetSoundDuration(Dg,$8A9)call SetSoundChannel(Dg,$D)call SetSoundPitch(Dg,1.1)call SetSoundDistances(Dg,6000.,10000.)call SetSoundDistanceCutoff(Dg,3000.)set Eg=CreateSound("Units\\Human\\KnightNoRider\\KnightNoRiderYes2.wav",false,true,true,$A,$A,"SpellsEAX")call SetSoundParamsFromLabel(Eg,"KnightNoRiderYes")call SetSoundDuration(Eg,$835)call SetSoundChannel(Eg,$D)call SetSoundPitch(Eg,1.1)call SetSoundDistances(Eg,6000.,10000.)call SetSoundDistanceCutoff(Eg,3000.)set Fg=CreateSound("Units\\Human\\KnightNoRider\\KnightNoRiderYesAttack1.wav",false,true,true,$A,$A,"SpellsEAX")call SetSoundParamsFromLabel(Fg,"KnightNoRiderYesAttack")call SetSoundDuration(Fg,$708)call SetSoundChannel(Fg,$D)call SetSoundPitch(Fg,1.1)call SetSoundDistances(Fg,6000.,10000.)call SetSoundDistanceCutoff(Fg,3000.)set Gg=CreateSound("Units\\Undead\\Banshee\\BansheeDeath.wav",false,true,true,$A,$A,"DefaultEAXON")call SetSoundParamsFromLabel(Gg,"BansheeDeath")call SetSoundDuration(Gg,$94C)set Hg=CreateSound("Units\\Undead\\ObsidianStatue\\ObsidianStatueMorph.wav",false,true,true,$A,$A,"SpellsEAX")call SetSoundParamsFromLabel(Hg,"ObsidianStatueMorph")call SetSoundDuration(Hg,$D38)set Ig=CreateSound("Sound\\Interface\\ClanInvitation.wav",false,false,false,$A,$A,"")call SetSoundParamsFromLabel(Ig,"ClanInvitation")call SetSoundDuration(Ig,4296)set lg=CreateSound("war3mapImported\\double_kill.mp3",false,false,false,$A,$A,"")call SetSoundDuration(lg,$7DC)call SetSoundChannel(lg,0)call SetSoundVolume(lg,$7F)call SetSoundPitch(lg,1.)set Jg=CreateSound("war3mapImported\\firstblood.mp3",false,false,false,$A,$A,"")call SetSoundDuration(Jg,$620)call SetSoundChannel(Jg,0)call SetSoundVolume(Jg,$7F)call SetSoundPitch(Jg,1.)set Kg=CreateSound("war3mapImported\\ownage.mp3",false,false,false,$A,$A,"")call SetSoundDuration(Kg,$A1A)call SetSoundChannel(Kg,0)call SetSoundVolume(Kg,$7F)call SetSoundPitch(Kg,1.)set Lg=CreateSound("war3mapImported\\triple_kill.mp3",false,false,false,$A,$A,"")call SetSoundDuration(Lg,$773)call SetSoundChannel(Lg,0)call SetSoundVolume(Lg,$7F)call SetSoundPitch(Lg,1.)set Mg=CreateSound("war3mapImported\\ultrakill.mp3",false,false,false,$A,$A,"")call SetSoundDuration(Mg,$759)call SetSoundChannel(Mg,0)call SetSoundVolume(Mg,$7F)call SetSoundPitch(Mg,1.)set Ng=CreateSound("Units\\Orc\\HealingWard\\PlaceAncestralGuardian.wav",false,true,true,$A,$A,"SpellsEAX")call SetSoundParamsFromLabel(Ng,"HealingWardBirth")call SetSoundDuration(Ng,$BF7)set Og=CreateSound("Sound\\Interface\\GoodJob.wav",false,false,false,$A,$A,"")call SetSoundParamsFromLabel(Og,"GoodJob")call SetSoundDuration(Og,$9F4)set Pg=CreateSound("Buildings\\Undead\\Necropolis\\NecropolisUpgrade2.wav",false,true,true,$A,$A,"DefaultEAXON")call SetSoundParamsFromLabel(Pg,"Necropolisu2What")call SetSoundDuration(Pg,5824)set Qg=CreateSound("Sound\\Interface\\Rescue.wav",false,false,false,$A,$A,"")call SetSoundParamsFromLabel(Qg,"Rescue")call SetSoundDuration(Qg,$ED4)set Rg=CreateSound("Sound\\Interface\\Warning.wav",false,false,false,$A,$A,"")call SetSoundParamsFromLabel(Rg,"Warning")call SetSoundDuration(Rg,$770)set df=Rect(3104.,-6624.,3552.,-6176.)set ef=Rect(6368.,-6976.,6784.,-6560.)set ff=Rect(4480.,-5152.,4896.,-4800.)set gf=Rect(6336.,-3616.,6752.,-3232.)set hf=Rect(-6560.,3648.,-6048.,4128.)set jf=Rect(-6592.,6112.,-6176.,6464.)set kf=Rect(-4832.,4064.,-4320.,4608.)set mf=Rect(-3872.,5952.,-3392.,6432.)set nf=Rect(-6656.,-6400.,-6400.,-6144.)set of=Rect(5920.,5952.,6144.,6176.)set pf=Rect(6816.,-7776.,7456.,-7200.)set qf=Rect(-7584.,6752.,-6912.,7360.)set rf=Rect(7904.,-6688.,8192.,-5760.)set sf=Rect(-6752.,7840.,-5888.,8192.)set tf=Rect(-7264.,-8064.,-6624.,-7456.)set uf=Rect(-7168.,-6912.,-6976.,-6720.)set vf=Rect(-3840.,-2592.,-3648.,-2368.)set wf=Rect(-2112.,-1344.,-1856.,-1120.)set xf=Rect(-96.,32.,128.,192.)set yf=Rect(3328.,3360.,3488.,3552.)set zf=Rect(6464.,6304.,6624.,6432.)set Af=Rect(-960.,-896.,-736.,-672.)set af=Rect(-1312.,-4640.,-416.,-3136.)set Bf=Rect(-992.,-4448.,-960.,-4224.)set bf=Rect(-7968.,6176.,-6752.,8032.)set Cf=Rect(-6784.,6560.,-6336.,7328.)set cf=Rect(6464.,-8032.,8128.,-6912.)set Df=Rect(6816.,-6944.,7840.,-6592.)set Ef=Rect(2272.,-6848.,2464.,-6624.)set Ff=Rect(6080.,-2592.,6272.,-2368.)set Gf=Rect(-5824.,3136.,-5632.,3360.)set Hf=Rect(-3104.,5536.,-2880.,5760.)set If=Rect(-6656.,-4000.,-6176.,-3488.)set lf=Rect(-4384.,-6592.,-3904.,-6144.)set Jf=Rect(-2176.,352.,-1856.,736.)set Kf=Rect(832.,-2176.,1184.,-1888.)set Lf=Rect(3392.,5760.,3936.,6336.)set Mf=Rect(6144.,3808.,6720.,4576.)set Nf=Rect(7936.,8160.,8512.,8544.)set Of=Rect(5504.,5664.,6400.,6432.)set Pf=Rect(-1152.,-1152.,-512.,-448.)set Qf=Rect(-6816.,-6656.,-6080.,-5984.)set Rf=Rect(7744.,-6720.,8384.,-5600.)set Sf=Rect(-7520.,-8192.,-6592.,-6944.)set Tf=Rect(-4352.,-4480.,-3584.,-3616.)set Uf=Rect(-6912.,7744.,-5760.,8288.)set Vf=Rect(7872.,7776.,8544.,8800.)set Wf=Rect(8256.,8256.,8384.,8480.)set Xf=Rect(-8672.,-5664.,-8448.,-5408.)set Yf=Rect(8320.,3616.,8448.,3776.)set Zf=Rect(8320.,4384.,8416.,4480.)set dg=Rect(6080.,-6976.,6272.,-6752.)set eg=Rect(3808.,-4832.,4000.,-4608.)set fg=Rect(-6496.,5856.,-6304.,6080.)set gg=Rect(-3872.,3936.,-3680.,4160.)set hg=Rect(4960.,-1440.,5376.,-928.)set ig=Rect(-6688.,-7136.,7232.,7296.)set jg=Rect(-7296.,-7968.,-5440.,4416.)set kg=Rect(-5472.,-7232.,4192.,-5056.)set mg=Rect(-5472.,-5088.,-4800.,-2656.)set ng=Rect(-7936.,-6912.,-7264.,-4928.)set og=Rect(-64.,-5088.,2144.,-4000.)set pg=Rect(-4000.,-8160.,4192.,-7200.)set qg=Rect(-8448.,-3264.,-7264.,4384.)set rg=Rect(-5472.,-1152.,-4448.,3776.)set sg=Rect(5216.,-3904.,8128.,8192.)set tg=Rect(-3744.,4384.,5248.,7232.)set ug=Rect(-3744.,7200.,4096.,8288.)set vg=Rect(-4448.,1536.,-2112.,4416.)set wg=Rect(-4448.,416.,-416.,1536.)set xg=Rect(-4448.,-672.,832.,416.)set yg=Rect(-2560.,-2016.,3232.,-672.)set zg=Rect(-64.,-4000.,5248.,-1984.)set Ag=Rect(2112.,-5056.,5248.,-3968.)set ag=Rect(-6848.,-7200.,-3296.,-5472.)set Bg=Rect(-6752.,-5504.,-4992.,4640.)set bg=Rect(-5472.,-2688.,-3296.,4416.)set p=Player($F)set u=CreateUnit(p,1848652115,2552.,3304.,270.)set u=CreateUnit(p,1848652117,7424.,-6720.,270.)set eu=CreateUnit(p,1852268900,-3968.,-2496.,270.)set u=CreateUnit(p,1852271973,-1952.,-896.,270.)set u=CreateUnit(p,1848652121,3520.,2176.,270.)set rv=CreateUnit(p,1848652337,-192.,640.,270.)set u=CreateUnit(p,1852271973,6496.,6720.,270.)set u=CreateUnit(p,1852271973,-7072.,-6528.,270.)set u=CreateUnit(p,1848652121,-4096.,-1856.,270.)set mu=CreateUnit(p,1852268900,3520.,3776.,270.)set u=CreateUnit(p,1848651851,24.,243.4,272.281)set u=CreateUnit(p,1848651851,-6848.,-6720.,28.969)set u=CreateUnit(p,1848651851,6464.,6464.,270.)set u=CreateUnit(p,1848651843,7296.,-6656.,270.)set u=CreateUnit(p,1848651832,7488.,-7232.,270.)set u=CreateUnit(p,1848651848,7552.,-6848.,270.)set u=CreateUnit(p,1848652083,7616.,-6976.,270.)set u=CreateUnit(p,1848652084,7616.,-7104.,270.)set u=CreateUnit(p,1848652373,7168.,-6656.,270.)set u=CreateUnit(p,1848651830,7040.,-6784.,270.)set u=CreateUnit(p,1848652117,-6400.,7168.,270.)set u=CreateUnit(p,1848651843,-6336.,7040.,270.)set u=CreateUnit(p,1848651832,-6912.,7232.,270.)set u=CreateUnit(p,1848651848,-6656.,7360.,270.)set u=CreateUnit(p,1848652083,-6528.,7296.,270.)set u=CreateUnit(p,1848652084,-6784.,7360.,270.)set u=CreateUnit(p,1848652373,-6336.,6912.,270.)set u=CreateUnit(p,1848651830,-6464.,6784.,270.)set uv=CreateUnit(p,1848652108,8064.,-6144.,270.)call SetUnitColor(uv,ConvertPlayerColor($A))set tv=CreateUnit(p,1853120886,8064.,-6336.,270.)call SetUnitColor(tv,ConvertPlayerColor($A))set vv=CreateUnit(p,1848651850,8064.,-5952.,270.)call SetUnitColor(vv,ConvertPlayerColor($A))set wv=CreateUnit(p,1848651824,-6528.,8064.,270.)call SetUnitColor(wv,ConvertPlayerColor($B))set xv=CreateUnit(p,1848652105,-6336.,8064.,270.)call SetUnitColor(xv,ConvertPlayerColor($B))set yv=CreateUnit(p,1848651825,-6144.,8064.,270.)call SetUnitColor(yv,ConvertPlayerColor($B))set qu=CreateUnit(p,1848652341,-6912.,-7936.,270.)call SetUnitColor(qu,ConvertPlayerColor($C))set av=CreateUnit(p,1848652110,-7104.,-7744.,270.)call SetUnitColor(av,ConvertPlayerColor($C))set u=CreateUnit(p,1848652080,6400.,8064.,270.)call SetUnitColor(u,ConvertPlayerColor($C))set u=CreateUnit(p,1852076647,-3968.,-4096.,270.)set p=Player(0)set yt=CreateUnit(p,1752591476,7744.,-7552.,270.)set ju=CreateUnit(p,1848651858,7744.,-7424.,270.)set p=Player(1)set zt=CreateUnit(p,1752591476,7872.,-7552.,270.)set au=CreateUnit(p,1848651858,7872.,-7424.,270.)set p=Player(2)set At=CreateUnit(p,1752591476,8000.,-7552.,270.)set Bu=CreateUnit(p,1848651858,8000.,-7424.,270.)set p=Player(3)set Bt=CreateUnit(p,1752591476,7744.,-7936.,270.)set bu=CreateUnit(p,1848651858,7744.,-7808.,270.)set p=Player(4)set Ct=CreateUnit(p,1752591476,7872.,-7936.,270.)set Zt=CreateUnit(p,1848651858,7872.,-7808.,270.)set p=Player(5)set cu=CreateUnit(p,1752591476,-7808.,7488.,270.)set su=CreateUnit(p,1848651858,-7872.,7552.,270.)set p=Player(6)set Du=CreateUnit(p,1752591476,-7744.,7616.,270.)set vu=CreateUnit(p,1848651858,-7808.,7680.,270.)set p=Player(7)set Eu=CreateUnit(p,1752591476,-7680.,7744.,270.)set uu=CreateUnit(p,1848651858,-7744.,7808.,270.)set p=Player(8)set Fu=CreateUnit(p,1752591476,-7552.,7744.,270.)set Hu=CreateUnit(p,1848651858,-7616.,7808.,270.)set p=Player(9)set Gu=CreateUnit(p,1752591476,-7424.,7744.,270.)set jt=CreateUnit(p,1848651858,-7488.,7808.,270.)set p=Player($A)set u=CreateUnit(p,1848651853,6746.9,-7749.,45.)set u=CreateUnit(p,1848651826,6586.7,-7587.7,45.)set u=CreateUnit(p,1848651854,6668.,-7676.3,45.)set xu=CreateUnit(p,1853124146,6208.,-6400.,270.)call IssueImmediateOrder(xu,"")set kt=CreateUnit(p,1853121902,6656.,-3456.,270.)set nt=CreateUnit(p,1853121902,4800.,-4992.,270.)set ot=CreateUnit(p,1853121902,3392.,-6400.,270.)set ut=CreateUnit(p,1869902434,-192.,-6336.,270.)set vt=CreateUnit(p,1869902434,2624.,-3392.,270.)set xt=CreateUnit(p,1869902434,6400.,-832.,270.)set ct=CreateUnit(p,1852206952,7296.,-7616.,270.)set u=CreateUnit(p,1848651844,6520.,-7504.,45.)set u=CreateUnit(p,1852274546,7200.,-4640.,270.)set u=CreateUnit(p,1852274546,3936.,-6944.,270.)set Et=CreateUnit(p,1870099575,2880.,-6656.,270.)set Ft=CreateUnit(p,1870099575,2240.,-6656.,270.)set Gt=CreateUnit(p,1870099575,2240.,-6080.,270.)set Ht=CreateUnit(p,1870099575,2880.,-6080.,270.)set It=CreateUnit(p,1870099575,-896.,-5952.,270.)set lt=CreateUnit(p,1870099575,-896.,-6656.,270.)set Jt=CreateUnit(p,1870099575,-3072.,-6016.,270.)set Kt=CreateUnit(p,1870099575,-3072.,-6656.,270.)set Lt=CreateUnit(p,1870099575,2240.,-2560.,270.)set Mt=CreateUnit(p,1870099575,1728.,-3008.,270.)set Nt=CreateUnit(p,1870099575,3456.,-3776.,270.)set Ot=CreateUnit(p,1870099575,4672.,-4480.,270.)set Pt=CreateUnit(p,1870099575,2944.,-4288.,270.)set Qt=CreateUnit(p,1870099575,4224.,-4992.,270.)set Rt=CreateUnit(p,1870099575,6336.,-2560.,270.)set St=CreateUnit(p,1870099575,6336.,-3072.,270.)set Tt=CreateUnit(p,1870099575,6976.,-3072.,270.)set Ut=CreateUnit(p,1870099575,6976.,-2560.,270.)set Vt=CreateUnit(p,1870099575,6080.,-192.,270.)set Wt=CreateUnit(p,1870099575,6720.,-192.,270.)set Xt=CreateUnit(p,1870099575,5952.,2880.,270.)set Yt=CreateUnit(p,1870099575,6720.,2880.,270.)set u=CreateUnit(p,1751609953,6528.,2432.,270.)set u=CreateUnit(p,1751609953,6912.,-1216.,270.)set u=CreateUnit(p,1751609953,5888.,-1216.,270.)set u=CreateUnit(p,1751609953,-2560.,-6592.,270.)set u=CreateUnit(p,1751609953,2560.,-3968.,270.)set u=CreateUnit(p,1751609953,384.,-5760.,270.)set u=CreateUnit(p,1751609953,448.,-6848.,270.)set u=CreateUnit(p,1751609953,1984.,-3328.,270.)set u=CreateUnit(p,1848651849,6831.3,-7829.6,45.)set u=CreateUnit(p,1747989042,1920.,-5760.,270.)set u=CreateUnit(p,1747989042,2048.,-5632.,270.)set u=CreateUnit(p,1747989042,2176.,-5504.,270.)set u=CreateUnit(p,1747989042,3200.,-4864.,270.)set u=CreateUnit(p,1747989042,3328.,-4736.,270.)set u=CreateUnit(p,1747988821,7680.,-2496.,270.)set u=CreateUnit(p,1747989042,3456.,-4608.,270.)set u=CreateUnit(p,1747989042,4544.,-3520.,270.)set u=CreateUnit(p,1747989042,4672.,-3392.,270.)set u=CreateUnit(p,1747989042,4800.,-3264.,270.)set u=CreateUnit(p,1747989042,4928.,-3136.,270.)set u=CreateUnit(p,1747989042,5056.,-3008.,270.)set ru=CreateUnit(p,1870099575,3776.,-4608.,270.)set u=CreateUnit(p,1747988791,7104.,-2048.,270.)set u=CreateUnit(p,1747988791,6080.,-2048.,270.)set u=CreateUnit(p,1747988791,6208.,-2048.,270.)set u=CreateUnit(p,1747988813,5184.,-3200.,270.)set u=CreateUnit(p,1747988813,7040.,-6528.,270.)set u=CreateUnit(p,1747988813,6208.,-7168.,270.)set u=CreateUnit(p,1747988813,6464.,-7360.,270.)set u=CreateUnit(p,1747989065,5504.,-5632.,270.)set du=CreateUnit(p,1870099575,4288.,-4096.,270.)set u=CreateUnit(p,1747988791,7232.,-2048.,270.)set u=CreateUnit(p,1751674741,4416.,-5504.,270.)set u=CreateUnit(p,1747988821,1856.,-6656.,270.)set u=CreateUnit(p,1751609953,4800.,-5888.,270.)set u=CreateUnit(p,1747989042,3584.,-4480.,270.)set u=CreateUnit(p,1747988821,7680.,-3392.,270.)set u=CreateUnit(p,1751280737,6080.,-4544.,270.)set u=CreateUnit(p,1751216749,3712.,-5632.,270.)set u=CreateUnit(p,1751938413,6752.,-5088.,270.)set u=CreateUnit(p,1751674741,5696.,-3392.,270.)set u=CreateUnit(p,1751674741,4288.,-7040.,270.)set ku=CreateUnit(p,1852076651,7488.,-5696.,270.)set u=CreateUnit(p,1751609953,5184.,-6272.,270.)set u=CreateUnit(p,1751609953,5504.,-6592.,270.)set u=CreateUnit(p,1751609953,2624.,-2688.,270.)set u=CreateUnit(p,1751609953,5824.,-5056.,270.)set u=CreateUnit(p,1751609953,6208.,-5440.,270.)set u=CreateUnit(p,1751609953,6528.,-5760.,270.)set u=CreateUnit(p,1747988813,7168.,-5760.,270.)set u=CreateUnit(p,1751674741,5632.,-4736.,270.)set u=CreateUnit(p,1747989041,7360.,-2112.,270.)set u=CreateUnit(p,1747989041,7488.,-2240.,270.)set u=CreateUnit(p,1747989041,7616.,-2368.,270.)set u=CreateUnit(p,1747988821,7680.,-2624.,270.)set u=CreateUnit(p,1747988821,7680.,-2752.,270.)set u=CreateUnit(p,1747988821,7680.,-2880.,270.)set u=CreateUnit(p,1747988821,7680.,-3008.,270.)set u=CreateUnit(p,1747988821,7680.,-3136.,270.)set u=CreateUnit(p,1747988821,7680.,-3264.,270.)set u=CreateUnit(p,1747988821,7680.,-3520.,270.)set u=CreateUnit(p,1747988821,7680.,-3648.,270.)set u=CreateUnit(p,1747988821,7680.,-3776.,270.)set u=CreateUnit(p,1747988821,7680.,-3904.,270.)set u=CreateUnit(p,1747988821,7680.,-4032.,270.)set u=CreateUnit(p,1747988821,7680.,-4160.,270.)set u=CreateUnit(p,1747988821,7680.,-4416.,270.)set u=CreateUnit(p,1747988821,7680.,-4544.,270.)set u=CreateUnit(p,1747988821,7680.,-4672.,270.)set u=CreateUnit(p,1747988821,7680.,-4288.,270.)set u=CreateUnit(p,1747988821,7680.,-4800.,270.)set u=CreateUnit(p,1747988821,7680.,-4928.,270.)set u=CreateUnit(p,1747988821,7680.,-5056.,270.)set u=CreateUnit(p,1747988821,7680.,-5184.,270.)set u=CreateUnit(p,1747988821,7680.,-5312.,270.)set u=CreateUnit(p,1747988821,7680.,-5440.,270.)set u=CreateUnit(p,1747988821,7680.,-5568.,270.)set u=CreateUnit(p,1747988821,7680.,-5696.,270.)set u=CreateUnit(p,1747988821,7680.,-5824.,270.)set u=CreateUnit(p,1747988821,7680.,-5952.,270.)set u=CreateUnit(p,1747988821,7680.,-6080.,270.)set u=CreateUnit(p,1747988821,7680.,-6208.,270.)set u=CreateUnit(p,1747988821,7680.,-6336.,270.)set u=CreateUnit(p,1747989042,7616.,-6464.,270.)set u=CreateUnit(p,1747988791,7488.,-6528.,270.)set u=CreateUnit(p,1747988791,7360.,-6528.,270.)set u=CreateUnit(p,1747988791,7232.,-6528.,270.)set u=CreateUnit(p,1747989042,7104.,-6592.,270.)set u=CreateUnit(p,1747989042,6976.,-6720.,270.)set u=CreateUnit(p,1747989042,6400.,-7296.,270.)set u=CreateUnit(p,1747989042,6272.,-7424.,270.)set u=CreateUnit(p,1747988791,6144.,-7488.,270.)set u=CreateUnit(p,1747988791,6016.,-7488.,270.)set u=CreateUnit(p,1747988791,5888.,-7488.,270.)set u=CreateUnit(p,1747988791,5760.,-7488.,270.)set u=CreateUnit(p,1747988791,5632.,-7488.,270.)set u=CreateUnit(p,1747988791,5504.,-7488.,270.)set u=CreateUnit(p,1747989041,5376.,-7424.,270.)set u=CreateUnit(p,1747988791,5248.,-7360.,270.)set u=CreateUnit(p,1747988791,5120.,-7360.,270.)set u=CreateUnit(p,1747988791,4992.,-7360.,270.)set u=CreateUnit(p,1747988791,4864.,-7360.,270.)set u=CreateUnit(p,1747988791,4736.,-7360.,270.)set u=CreateUnit(p,1747988791,4608.,-7360.,270.)set u=CreateUnit(p,1747988791,4480.,-7360.,270.)set u=CreateUnit(p,1747988791,4352.,-7360.,270.)set u=CreateUnit(p,1747988791,4224.,-7360.,270.)set u=CreateUnit(p,1747988791,4096.,-7360.,270.)set u=CreateUnit(p,1747988791,3968.,-7360.,270.)set u=CreateUnit(p,1747988791,3840.,-7360.,270.)set u=CreateUnit(p,1747988791,3712.,-7360.,270.)set u=CreateUnit(p,1747988791,3584.,-7360.,270.)set u=CreateUnit(p,1747988791,3456.,-7360.,270.)set u=CreateUnit(p,1747988791,3328.,-7360.,270.)set u=CreateUnit(p,1747988791,3200.,-7360.,270.)set u=CreateUnit(p,1747988791,3072.,-7360.,270.)set u=CreateUnit(p,1747988791,2944.,-7360.,270.)set u=CreateUnit(p,1747988791,2816.,-7360.,270.)set u=CreateUnit(p,1747988791,2688.,-7360.,270.)set u=CreateUnit(p,1747988791,2560.,-7360.,270.)set u=CreateUnit(p,1747988791,2432.,-7360.,270.)set u=CreateUnit(p,1747988791,2304.,-7360.,270.)set u=CreateUnit(p,1747988791,2176.,-7360.,270.)set u=CreateUnit(p,1747989041,2048.,-7296.,270.)set u=CreateUnit(p,1747989041,1920.,-7168.,270.)set u=CreateUnit(p,1747988821,1856.,-7040.,270.)set u=CreateUnit(p,1747988821,1856.,-6912.,270.)set u=CreateUnit(p,1747988821,1856.,-6784.,270.)set u=CreateUnit(p,1747988821,1856.,-5888.,270.)set u=CreateUnit(p,1747988821,1856.,-6016.,270.)set u=CreateUnit(p,1747989042,2304.,-5376.,270.)set u=CreateUnit(p,1747989042,2432.,-5248.,270.)set u=CreateUnit(p,1747989042,2560.,-5120.,270.)set u=CreateUnit(p,1747989042,2688.,-4992.,270.)set u=CreateUnit(p,1747988791,2816.,-4928.,270.)set u=CreateUnit(p,1747988791,2944.,-4928.,270.)set u=CreateUnit(p,1747988791,3072.,-4928.,270.)set u=CreateUnit(p,1747989042,4288.,-3776.,270.)set u=CreateUnit(p,1747989042,4416.,-3648.,270.)set u=CreateUnit(p,1747989042,5184.,-2880.,270.)set u=CreateUnit(p,1747989042,5312.,-2752.,270.)set u=CreateUnit(p,1747989042,5440.,-2624.,270.)set u=CreateUnit(p,1747989042,5568.,-2496.,270.)set u=CreateUnit(p,1747989042,5696.,-2368.,270.)set u=CreateUnit(p,1747989042,5824.,-2240.,270.)set u=CreateUnit(p,1747989042,5952.,-2112.,270.)set u=CreateUnit(p,1747988813,4864.,-6656.,270.)set u=CreateUnit(p,1747988813,1920.,-6720.,270.)set u=CreateUnit(p,1747988813,1984.,-6208.,270.)set u=CreateUnit(p,1747988813,3648.,-4480.,270.)set u=CreateUnit(p,1747988813,4224.,-3904.,270.)set u=CreateUnit(p,1747988813,1600.,-3264.,270.)set u=CreateUnit(p,1747988813,2560.,-2432.,270.)set u=CreateUnit(p,1747988813,-1024.,-6784.,270.)set u=CreateUnit(p,1747988813,-1024.,-5824.,270.)set u=CreateUnit(p,1747988813,-3200.,-6080.,270.)set u=CreateUnit(p,1747988813,-3200.,-6656.,270.)set u=CreateUnit(p,1747988813,6080.,3072.,270.)set u=CreateUnit(p,1747988813,6656.,3072.,270.)set u=CreateUnit(p,1747988813,5696.,-64.,270.)set u=CreateUnit(p,1747988813,7040.,-128.,270.)set u=CreateUnit(p,1747988813,6336.,-2240.,270.)set u=CreateUnit(p,1747988813,6976.,-2240.,270.)set u=CreateUnit(p,1747988813,6336.,-3520.,270.)set u=CreateUnit(p,1747988813,5696.,-5568.,270.)set u=CreateUnit(p,1747988813,4800.,-5248.,270.)set u=CreateUnit(p,1747988813,3456.,-6656.,270.)set p=Player($B)set u=CreateUnit(p,1848651853,-7392.2,6730.9,45.)set u=CreateUnit(p,1848651826,-7213.9,6555.8,45.)set u=CreateUnit(p,1848651854,-7307.9,6638.,45.)set u=CreateUnit(p,1848651844,-7129.6,6454.2,45.)set u=CreateUnit(p,1848651849,-7476.5,6830.5,45.)set u=CreateUnit(p,1747988813,-5184.,6720.,270.)set u=CreateUnit(p,1747988821,-2432.,4672.,270.)set Cu=CreateUnit(p,1852206952,-7424.,7232.,270.)set wu=CreateUnit(p,1853124146,-5952.,5696.,270.)set u=CreateUnit(p,1751609953,-6272.,4992.,270.)set u=CreateUnit(p,1751609953,-5952.,4608.,270.)set u=CreateUnit(p,1751609953,-5632.,4288.,270.)set u=CreateUnit(p,1751609953,-5184.,5824.,270.)set u=CreateUnit(p,1751609953,-4800.,5440.,270.)set u=CreateUnit(p,1751609953,-4480.,5120.,270.)set u=CreateUnit(p,1751609953,-6656.,1280.,270.)set u=CreateUnit(p,1751609953,-5760.,1280.,270.)set u=CreateUnit(p,1751609953,-6528.,-2112.,270.)set u=CreateUnit(p,1751609953,-3520.,1216.,270.)set u=CreateUnit(p,1751609953,-4096.,1792.,270.)set u=CreateUnit(p,1751609953,-2752.,2112.,270.)set u=CreateUnit(p,1751609953,1600.,6336.,270.)set u=CreateUnit(p,1751609953,-1344.,6784.,270.)set u=CreateUnit(p,1751609953,-1280.,5888.,270.)set Iu=CreateUnit(p,1853121902,-3776.,6208.,270.)set lu=CreateUnit(p,1853121902,-4608.,4416.,270.)set Ju=CreateUnit(p,1869902434,-6208.,896.,270.)set Ku=CreateUnit(p,1869902434,-3456.,1920.,270.)set Lu=CreateUnit(p,1869902434,-704.,6336.,270.)set Mu=CreateUnit(p,1853121902,-6208.,3904.,270.)set Nu=CreateUnit(p,1865429047,-6560.,2976.,270.)set Ou=CreateUnit(p,1865429047,-6560.,3552.,270.)set Pu=CreateUnit(p,1865429047,-5920.,3552.,270.)set Qu=CreateUnit(p,1865429047,-5920.,2976.,270.)set Ru=CreateUnit(p,1865429047,-6560.,224.,270.)set Su=CreateUnit(p,1865429047,-5856.,224.,270.)set Tu=CreateUnit(p,1865429047,-6816.,-2592.,270.)set Uu=CreateUnit(p,1865429047,-6112.,-2592.,270.)set Vu=CreateUnit(p,1865429047,-3168.,1184.,270.)set Wu=CreateUnit(p,1865429047,-2656.,1632.,270.)set Xu=CreateUnit(p,1865429047,-4000.,2272.,270.)set Yu=CreateUnit(p,1865429047,-3424.,2848.,270.)set Zu=CreateUnit(p,1865429047,-4128.,3360.,270.)set dv=CreateUnit(p,1865429047,-4512.,3744.,270.)set ev=CreateUnit(p,1865429047,-4000.,4256.,270.)set fv=CreateUnit(p,1865429047,-3680.,3808.,270.)set gv=CreateUnit(p,1865429047,2208.,6432.,270.)set hv=CreateUnit(p,1865429047,2208.,5728.,270.)set iv=CreateUnit(p,1865429047,-288.,6752.,270.)set jv=CreateUnit(p,1865429047,-288.,5984.,270.)set kv=CreateUnit(p,1865429047,-3424.,6560.,270.)set mv=CreateUnit(p,1865429047,-3424.,5792.,270.)set nv=CreateUnit(p,1865429047,-2848.,5792.,270.)set ov=CreateUnit(p,1865429047,-2848.,6624.,270.)set u=CreateUnit(p,1747988791,-6656.,2624.,270.)set u=CreateUnit(p,1747988791,-6784.,2624.,270.)set u=CreateUnit(p,1747988791,-6912.,2624.,270.)set u=CreateUnit(p,1747989041,-7040.,2688.,270.)set u=CreateUnit(p,1747989041,-7168.,2816.,270.)set u=CreateUnit(p,1747988821,-7232.,2944.,270.)set u=CreateUnit(p,1747988821,-7232.,3072.,270.)set u=CreateUnit(p,1747988821,-7232.,3200.,270.)set u=CreateUnit(p,1747988821,-7232.,3328.,270.)set u=CreateUnit(p,1747988821,-7232.,3456.,270.)set u=CreateUnit(p,1747988821,-7232.,3584.,270.)set u=CreateUnit(p,1747988821,-7232.,3712.,270.)set u=CreateUnit(p,1747988821,-7232.,3840.,270.)set u=CreateUnit(p,1747988821,-7232.,3968.,270.)set u=CreateUnit(p,1747988821,-7232.,4096.,270.)set u=CreateUnit(p,1747988821,-7232.,4224.,270.)set u=CreateUnit(p,1747988821,-7232.,4352.,270.)set u=CreateUnit(p,1747988821,-7232.,4480.,270.)set u=CreateUnit(p,1747988821,-7232.,4608.,270.)set u=CreateUnit(p,1747988821,-7232.,4736.,270.)set u=CreateUnit(p,1747988821,-7232.,4864.,270.)set u=CreateUnit(p,1747988821,-7232.,4992.,270.)set u=CreateUnit(p,1747988821,-7232.,5120.,270.)set u=CreateUnit(p,1747988821,-7232.,5248.,270.)set u=CreateUnit(p,1747988821,-7232.,5376.,270.)set u=CreateUnit(p,1747988821,-7232.,5504.,270.)set u=CreateUnit(p,1747988821,-7232.,5632.,270.)set u=CreateUnit(p,1747989042,-7168.,5760.,270.)set u=CreateUnit(p,1747989042,-7040.,5888.,270.)set u=CreateUnit(p,1747989042,-6912.,6016.,270.)set u=CreateUnit(p,1747989042,-6784.,6144.,270.)set u=CreateUnit(p,1747989042,-6208.,6720.,270.)set u=CreateUnit(p,1747989042,-6080.,6848.,270.)set u=CreateUnit(p,1747989042,-5952.,6976.,270.)set u=CreateUnit(p,1747988791,-5824.,7040.,270.)set u=CreateUnit(p,1747988791,-5568.,7040.,270.)set u=CreateUnit(p,1747988791,-5696.,7040.,270.)set u=CreateUnit(p,1747988791,-5440.,7040.,270.)set u=CreateUnit(p,1747988791,-5312.,7040.,270.)set u=CreateUnit(p,1747988791,-5184.,7040.,270.)set u=CreateUnit(p,1747988791,-5056.,7040.,270.)set u=CreateUnit(p,1747988791,-4928.,7040.,270.)set u=CreateUnit(p,1747988791,-4800.,7040.,270.)set u=CreateUnit(p,1747988791,-4544.,7040.,270.)set u=CreateUnit(p,1747988791,-4672.,7040.,270.)set u=CreateUnit(p,1747988791,-4416.,7040.,270.)set u=CreateUnit(p,1747988791,-4288.,7040.,270.)set u=CreateUnit(p,1747988791,-4160.,7040.,270.)set u=CreateUnit(p,1747988791,-4032.,7040.,270.)set u=CreateUnit(p,1747988791,-3904.,7040.,270.)set u=CreateUnit(p,1747988791,-3776.,7040.,270.)set u=CreateUnit(p,1747988791,-3648.,7040.,270.)set u=CreateUnit(p,1747988791,-3520.,7040.,270.)set u=CreateUnit(p,1747988791,-3392.,7040.,270.)set u=CreateUnit(p,1747988791,-3264.,7040.,270.)set u=CreateUnit(p,1747988791,-3136.,7040.,270.)set u=CreateUnit(p,1747988791,-3008.,7040.,270.)set u=CreateUnit(p,1747988791,-2880.,7040.,270.)set u=CreateUnit(p,1747988791,-2752.,7040.,270.)set u=CreateUnit(p,1747989041,-2624.,6976.,270.)set u=CreateUnit(p,1747989041,-2496.,6848.,270.)set u=CreateUnit(p,1747988821,-2432.,6592.,270.)set u=CreateUnit(p,1747988821,-2432.,6720.,270.)set u=CreateUnit(p,1747988821,-2432.,5824.,270.)set u=CreateUnit(p,1747988821,-2432.,5696.,270.)set u=CreateUnit(p,1747988821,-2432.,5568.,270.)set u=CreateUnit(p,1747988821,-2432.,5440.,270.)set u=CreateUnit(p,1747988821,-2432.,5312.,270.)set u=CreateUnit(p,1747988821,-2432.,5184.,270.)set u=CreateUnit(p,1747988821,-2432.,5056.,270.)set u=CreateUnit(p,1747988821,-2432.,4928.,270.)set u=CreateUnit(p,1747988821,-2432.,4800.,270.)set u=CreateUnit(p,1747989042,-2496.,4544.,270.)set u=CreateUnit(p,1747989042,-2624.,4416.,270.)set u=CreateUnit(p,1747989042,-2752.,4288.,270.)set u=CreateUnit(p,1747989042,-2880.,4160.,270.)set u=CreateUnit(p,1747989042,-3008.,4032.,270.)set u=CreateUnit(p,1747989042,-3136.,3904.,270.)set u=CreateUnit(p,1747989042,-3264.,3776.,270.)set u=CreateUnit(p,1747989042,-3392.,3648.,270.)set u=CreateUnit(p,1747989042,-4096.,3072.,270.)set u=CreateUnit(p,1747989042,-4224.,2944.,270.)set u=CreateUnit(p,1747989042,-4352.,2816.,270.)set u=CreateUnit(p,1747989042,-4480.,2688.,270.)set u=CreateUnit(p,1747988791,-4608.,2624.,270.)set u=CreateUnit(p,1747988791,-4736.,2624.,270.)set u=CreateUnit(p,1747988791,-4864.,2624.,270.)set u=CreateUnit(p,1747988791,-4992.,2624.,270.)set u=CreateUnit(p,1747988791,-5120.,2624.,270.)set u=CreateUnit(p,1747988791,-5248.,2624.,270.)set u=CreateUnit(p,1747988791,-5376.,2624.,270.)set u=CreateUnit(p,1747988791,-5504.,2624.,270.)set u=CreateUnit(p,1747988791,-5632.,2624.,270.)set u=CreateUnit(p,1747988791,-5760.,2624.,270.)set u=CreateUnit(p,1747988813,-6976.,6400.,270.)set u=CreateUnit(p,1747988813,-6080.,7040.,270.)set u=CreateUnit(p,1747988813,-6080.,6720.,270.)set u=CreateUnit(p,1747988813,-6848.,5952.,270.)set u=CreateUnit(p,1747988813,-5248.,5120.,270.)set u=CreateUnit(p,1747988813,-4736.,5824.,270.)set u=CreateUnit(p,1747988813,-4032.,6208.,270.)set u=CreateUnit(p,1747988813,-2496.,6592.,270.)set u=CreateUnit(p,1747988813,-2496.,5696.,270.)set u=CreateUnit(p,1747988813,-3520.,3712.,270.)set u=CreateUnit(p,1747988813,-4096.,3200.,270.)set u=CreateUnit(p,1747988813,-5888.,2624.,270.)set u=CreateUnit(p,1747988813,-6528.,2624.,270.)set u=CreateUnit(p,1747988813,-6208.,-2752.,270.)set u=CreateUnit(p,1747988813,-6720.,-2752.,270.)set u=CreateUnit(p,1747988813,-5696.,128.,270.)set u=CreateUnit(p,1747988813,-6656.,128.,270.)set u=CreateUnit(p,1747988813,-3392.,960.,270.)set u=CreateUnit(p,1747988813,-2368.,1920.,270.)set u=CreateUnit(p,1747988813,-1472.,6912.,270.)set u=CreateUnit(p,1747988813,-128.,5952.,270.)set u=CreateUnit(p,1747988813,-128.,6720.,270.)set u=CreateUnit(p,1747988813,2368.,6400.,270.)set u=CreateUnit(p,1747988813,2368.,5824.,270.)set u=CreateUnit(p,1747988813,-4352.,4544.,270.)set u=CreateUnit(p,1747988813,-5504.,3136.,270.)set u=CreateUnit(p,1747988813,-6528.,3968.,270.)set u=CreateUnit(p,1747988813,-6848.,5504.,270.)set u=CreateUnit(p,1852274546,-4256.,6560.,270.)set u=CreateUnit(p,1852274546,-6880.,4384.,270.)set u=CreateUnit(p,1751280737,-3648.,5120.,270.)set u=CreateUnit(p,1751938413,-4768.,6496.,270.)set u=CreateUnit(p,1751216749,-5440.,3840.,270.)set u=CreateUnit(p,1751674741,-4800.,3392.,270.)set u=CreateUnit(p,1751674741,-6848.,4736.,270.)set u=CreateUnit(p,1751674741,-4032.,5440.,270.)set u=CreateUnit(p,1751674741,-3968.,4800.,270.)set u=CreateUnit(p,1747989065,-5248.,4928.,270.)set hu=CreateUnit(p,1852076651,-5632.,6848.,270.)set p=Player($C)set u=CreateUnit(p,1853323108,-2554.6,-3720.8,311.676)set u=CreateUnit(p,1853057895,-4012.5,-3808.8,71.413)set u=CreateUnit(p,1851880307,3356.6,2939.9,295.497)set Dt=CreateUnit(p,1851944036,3604.9,3275.2,270.)set u=CreateUnit(p,1851945575,3176.5,1150.6,143.187)set u=CreateUnit(p,1852993383,3113.4,1251.,240.838)set u=CreateUnit(p,1851880307,4520.6,7792.3,241.036)set u=CreateUnit(p,1851880307,1377.2,2315.9,355.251)set u=CreateUnit(p,1852141158,3494.2,2662.5,321.052)set u=CreateUnit(p,1851945575,403.6,2920.8,180.02)set u=CreateUnit(p,1852993383,200.7,2951.6,63.942)set u=CreateUnit(p,1851880307,4684.,7771.,263.332)set u=CreateUnit(p,1851945575,-3436.3,-955.,269.791)set u=CreateUnit(p,1852141158,1250.9,2230.,278.324)set u=CreateUnit(p,1852993383,1477.6,2214.5,262.781)set u=CreateUnit(p,1852141158,3286.5,2725.2,321.052)set u=CreateUnit(p,1851945575,-1578.9,-2809.4,228.819)set u=CreateUnit(p,1851880307,-1065.,3807.4,328.39)set u=CreateUnit(p,1851880307,-1096.8,3654.5,353.034)set u=CreateUnit(p,1851880307,4252.7,1138.5,24.174)set u=CreateUnit(p,1851880307,4239.7,1029.6,13.033)set u=CreateUnit(p,1851880307,3593.3,2850.2,295.497)set u=CreateUnit(p,1852993383,4589.2,7646.8,261.823)set u=CreateUnit(p,1851880307,-4739.6,-7878.9,4.306)set u=CreateUnit(p,1852993383,-4517.4,-7878.8,231.732)set u=CreateUnit(p,1852993383,3060.4,1108.5,60.881)set u=CreateUnit(p,1851945575,-1613.3,-2931.5,266.002)set u=CreateUnit(p,1851880307,-1538.6,-2963.8,3.434)set u=CreateUnit(p,1851945575,-3466.9,-1081.3,276.446)set u=CreateUnit(p,1851880307,-3370.1,-1042.3,33.15)set u=CreateUnit(p,1852207714,-7619.9,-3805.5,287.383)set u=CreateUnit(p,1853323876,1384.5,2062.1,252.983)set u=CreateUnit(p,1852208235,-1872.3,2846.3,321.236)set u=CreateUnit(p,1853059439,3734.3,-196.9,270.)set u=CreateUnit(p,1853125220,-5013.3,-1929.,26.693)set u=CreateUnit(p,1853125220,-5053.7,-1688.1,25.761)set u=CreateUnit(p,1853125220,-5249.4,-1876.,94.938)set ou=CreateUnit(p,1853057903,-972.6,-4398.9,121.24)set t=CreateTrigger()call TriggerRegisterUnitEvent(t,ou,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(t,ou,EVENT_UNIT_CHANGE_OWNER)call TriggerAddAction(t,function Ya)set u=CreateUnit(p,1852466993,-3879.1,-3732.7,67.689)set u=CreateUnit(p,1852666486,-7848.2,-7552.8,83.422)set u=CreateUnit(p,1852666486,-7661.4,-7602.,97.711)set u=CreateUnit(p,1852666723,-7834.9,-7694.4,76.868)set u=CreateUnit(p,1852467041,362.,998.5,90.)set u=CreateUnit(p,1851880307,-4646.2,-7982.3,357.72)set u=CreateUnit(p,1853323108,-2672.6,-3649.1,228.251)set u=CreateUnit(p,1853323108,-2566.,-3547.9,310.439)set u=CreateUnit(p,1852467042,-3425.9,-2418.4,323.562)set u=CreateUnit(p,1852207714,4590.1,2950.9,99.879)set u=CreateUnit(p,1852207714,4683.1,3096.4,241.178)set u=CreateUnit(p,1852207714,4787.,2964.4,78.706)set u=CreateUnit(p,1852207714,-7786.5,-3880.7,198.574)set u=CreateUnit(p,1852207714,-7577.3,-3990.9,127.775)set u=CreateUnit(p,1852993383,103.8,2781.4,241.252)set u=CreateUnit(p,1853057895,-3729.4,-3820.1,71.413)set p=Player($F)set u=CreateUnit(p,1853254775,6592.,7936.,270.)set zv=CreateUnit(p,1853057125,6656.,7936.,270.)set p=Player(0)set u=CreateUnit(p,1747988804,7936.,-6208.,270.)set u=CreateUnit(p,1747988804,-6336.,7936.,270.)set u=CreateUnit(p,1747988804,-7040.,-7808.,270.)set u=CreateUnit(p,1747988804,-7040.,-7808.,270.)set u=CreateUnit(p,1747988804,6336.,7936.,270.)set u=CreateUnit(p,1747988804,6336.,7936.,270.)set p=Player(1)set u=CreateUnit(p,1747988804,7936.,-6208.,270.)set u=CreateUnit(p,1747988804,-6336.,7936.,270.)set u=CreateUnit(p,1747988804,-7040.,-7808.,270.)set u=CreateUnit(p,1747988804,-7040.,-7808.,270.)set u=CreateUnit(p,1747988804,6336.,7936.,270.)set p=Player(2)set u=CreateUnit(p,1747988804,7936.,-6208.,270.)set u=CreateUnit(p,1747988804,-6336.,7936.,270.)set u=CreateUnit(p,1747988804,-7040.,-7808.,270.)set u=CreateUnit(p,1747988804,6336.,7936.,270.)set u=CreateUnit(p,1747988804,-7040.,-7808.,270.)set u=CreateUnit(p,1747988804,6336.,7936.,270.)set p=Player(3)set u=CreateUnit(p,1747988804,6336.,7936.,270.)set u=CreateUnit(p,1747988804,7936.,-6208.,270.)set u=CreateUnit(p,1747988804,-6336.,7936.,270.)set u=CreateUnit(p,1747988804,-7040.,-7808.,270.)set p=Player(4)set u=CreateUnit(p,1747988804,-7040.,-7808.,270.)set u=CreateUnit(p,1747988804,7936.,-6208.,270.)set u=CreateUnit(p,1747988804,-6336.,7936.,270.)set u=CreateUnit(p,1747988804,-7040.,-7808.,270.)set u=CreateUnit(p,1747988804,6336.,7936.,270.)set p=Player(5)set u=CreateUnit(p,1747988804,-6336.,7936.,270.)set u=CreateUnit(p,1747988804,7936.,-6208.,270.)set u=CreateUnit(p,1747988804,-7040.,-7808.,270.)set u=CreateUnit(p,1747988804,6336.,7936.,270.)set p=Player(6)set u=CreateUnit(p,1747988804,-6336.,7936.,270.)set u=CreateUnit(p,1747988804,7936.,-6208.,270.)set u=CreateUnit(p,1747988804,-7040.,-7808.,270.)set u=CreateUnit(p,1747988804,6336.,7936.,270.)set p=Player(7)set u=CreateUnit(p,1747988804,-6336.,7936.,270.)set u=CreateUnit(p,1747988804,7936.,-6208.,270.)set u=CreateUnit(p,1747988804,-7040.,-7808.,270.)set u=CreateUnit(p,1747988804,6336.,7936.,270.)set p=Player(8)set u=CreateUnit(p,1747988804,-6336.,7936.,270.)set u=CreateUnit(p,1747988804,7936.,-6208.,270.)set u=CreateUnit(p,1747988804,-7040.,-7808.,270.)set u=CreateUnit(p,1747988804,6336.,7936.,270.)set p=Player(9)set u=CreateUnit(p,1747988804,-6336.,7936.,270.)set u=CreateUnit(p,1747988804,7936.,-6208.,270.)set u=CreateUnit(p,1747988804,-7040.,-7808.,270.)set u=CreateUnit(p,1747988804,6336.,7936.,270.)set p=Player($A)set u=CreateUnit(p,1869836407,6124.4,-6045.8,130.)set u=CreateUnit(p,1752196449,4936.5,-5732.,38.784)set u=CreateUnit(p,1752196449,5300.7,-6106.5,40.)set u=CreateUnit(p,1752196449,5588.6,-6370.8,40.)set u=CreateUnit(p,1751543663,5284.2,-3987.4,80.)set u=CreateUnit(p,1751543663,5527.,-3988.8,80.)set u=CreateUnit(p,1751543663,5530.4,-4096.6,80.)set u=CreateUnit(p,1751543663,5413.2,-4097.2,80.)set u=CreateUnit(p,1751672179,7490.6,-5948.2,20.007)set u=CreateUnit(p,1751672179,7230.6,-5863.3,80.444)set u=CreateUnit(p,1751672179,7261.9,-6231.2,245.343)set u=CreateUnit(p,1865429333,4549.9,-6783.3,132.962)set Bv=CreateUnit(p,1697656900,5887.4,-6464.6,269.963)call SetUnitColor(Bv,ConvertPlayerColor($C))set u=CreateUnit(p,1752196449,6011.,-5500.5,208.054)set Av=CreateUnit(p,1697656911,6342.6,-6047.5,271.236)call SetUnitColor(Av,ConvertPlayerColor($C))set u=CreateUnit(p,1752196449,6269.6,-5815.6,208.054)set u=CreateUnit(p,1752196449,1698.8,-5945.7,180.)set u=CreateUnit(p,1752196449,1733.8,-3179.1,120.)set u=CreateUnit(p,1752196449,42.7,-7069.5,270.)set u=CreateUnit(p,1752196449,-1103.9,-6663.7,180.)set u=CreateUnit(p,1751543663,5288.9,-4097.3,80.)set u=CreateUnit(p,1752196449,6899.4,-32.6,90.)set u=CreateUnit(p,1752196449,4186.3,-3695.8,120.)set u=CreateUnit(p,1752196449,5643.,-5169.7,208.054)set u=CreateUnit(p,1752196449,6335.8,-1976.5,90.)set u=CreateUnit(p,1752196449,6973.5,-1991.9,90.)set u=CreateUnit(p,1752196449,5340.2,-3511.4,222.)set u=CreateUnit(p,1865429333,4627.1,-6701.7,132.962)set u=CreateUnit(p,1865429333,4722.6,-6609.5,134.082)set u=CreateUnit(p,1865429333,5097.3,-7201.9,133.045)set u=CreateUnit(p,1752196449,1708.5,-6568.5,180.)set u=CreateUnit(p,1752196449,-1093.3,-5948.7,180.)set u=CreateUnit(p,1752196449,3530.1,-4374.7,120.)set u=CreateUnit(p,1752196449,5824.,-48.7,90.)set u=CreateUnit(p,1752196449,6028.9,-4745.3,222.)set u=CreateUnit(p,1752196449,2428.6,-2476.4,120.)set u=CreateUnit(p,1751543663,5405.1,-3989.5,80.)set u=CreateUnit(p,1869836407,5899.4,-6249.1,130.)set u=CreateUnit(p,1747988789,6972.6,-4928.2,180.)set u=CreateUnit(p,1747988789,5409.2,-3763.9,250.)set u=CreateUnit(p,1865429333,7176.2,-6117.4,163.78)set u=CreateUnit(p,1752196449,5477.9,-945.2,244.75)set pu=CreateUnit(p,1747988816,6902.8,-5974.,93.41)set zu=CreateUnit(p,1747989046,6678.5,-2802.4,270.)set qv=CreateUnit(p,1747988814,4194.3,-4594.6,280.)set iu=CreateUnit(p,1747988569,2588.3,-6434.4,280.)set p=Player($B)set Au=CreateUnit(p,1747988817,-6234.2,3272.5,270.)set u=CreateUnit(p,1747988789,-5291.8,3249.4,304.715)set u=CreateUnit(p,1747988789,-6969.,5077.2,330.)set u=CreateUnit(p,1869836407,-5888.5,5404.4,330.)set u=CreateUnit(p,1752196449,-2499.7,1806.9,309.936)set u=CreateUnit(p,1752196449,-5768.2,4748.7,43.573)set u=CreateUnit(p,1752196449,-3937.4,3179.1,310.)set u=CreateUnit(p,1752196449,-3472.,3513.1,310.)set u=CreateUnit(p,1752196449,-5944.1,64.2,270.)set u=CreateUnit(p,1752196449,-6632.7,2477.1,270.)set u=CreateUnit(p,1752196449,-3352.9,1037.6,310.628)set gu=CreateUnit(p,1697656912,-6080.8,5380.,272.639)call SetUnitColor(gu,ConvertPlayerColor($C))set u=CreateUnit(p,1751543663,-5137.6,3110.5,174.468)set u=CreateUnit(p,1752196449,-6506.6,36.9,270.)set u=CreateUnit(p,1751543663,-5005.9,3127.6,174.468)set u=CreateUnit(p,1751543663,-5010.5,2972.4,174.468)set u=CreateUnit(p,1752196449,-5840.5,2524.,254.858)set u=CreateUnit(p,1752196449,-5281.2,3061.4,.0)set u=CreateUnit(p,1751543663,-5021.7,2859.4,174.468)set u=CreateUnit(p,1751543663,-5146.5,2850.,174.468)set u=CreateUnit(p,1752196449,-5447.7,916.7,.0)set u=CreateUnit(p,1752196449,-75.7,6668.8,.0)set u=CreateUnit(p,1752196449,-2339.9,6544.,.0)set u=CreateUnit(p,1752196449,-2343.8,5841.8,.0)set u=CreateUnit(p,1752196449,-7096.6,5547.8,330.)set u=CreateUnit(p,1865429333,-4522.9,5705.,330.)set u=CreateUnit(p,1752196449,-4930.8,5262.5,220.)set u=CreateUnit(p,1752196449,-4599.7,4948.7,220.)set u=CreateUnit(p,1752196449,-6099.6,5093.5,43.573)set u=CreateUnit(p,1869836407,-5701.3,5607.6,330.)set u=CreateUnit(p,1865429333,-4431.8,5793.,330.)set u=CreateUnit(p,1865429333,-4320.8,5874.5,330.)set u=CreateUnit(p,1865429333,-5258.7,6746.4,265.118)set u=CreateUnit(p,1752196449,-61.7,5894.1,.0)set u=CreateUnit(p,1752196449,-5442.3,4420.,43.573)set u=CreateUnit(p,1752196449,-5276.9,5661.4,220.)set u=CreateUnit(p,1865429333,-3526.3,4913.3,330.)set u=CreateUnit(p,1751543663,-5133.1,2990.4,174.468)set sv=CreateUnit(p,1697656918,-5626.3,5828.7,265.548)call SetUnitColor(sv,ConvertPlayerColor($C))set u=CreateUnit(p,1751672179,-5478.5,6627.,222.75)set u=CreateUnit(p,1751672179,-5641.6,6609.7,324.129)set u=CreateUnit(p,1751672179,-5301.1,6881.7,42.803)set u=CreateUnit(p,1752196449,-1093.2,5597.4,270.)set nu=CreateUnit(p,1747988815,-6378.3,6307.4,281.85)set yu=CreateUnit(p,1747988818,-4105.3,3853.8,270.)set pv=CreateUnit(p,1747988812,-3118.1,6148.,270.)call ConfigureNeutralVictim()set Xy=Filter(function uz)set filterIssueHauntOrderAtLocBJ=Filter(function IssueHauntOrderAtLocBJFilter)set filterEnumDestructablesInCircleBJ=Filter(function jz)set filterGetUnitsInRectOfPlayer=Filter(function GetUnitsInRectOfPlayerFilter)set filterGetUnitsOfTypeIdAll=Filter(function GetUnitsOfTypeIdAllFilter)set filterGetUnitsOfPlayerAndTypeId=Filter(function GetUnitsOfPlayerAndTypeIdFilter)set filterMeleeTrainedUnitIsHeroBJ=Filter(function MeleeTrainedUnitIsHeroBJFilter)set filterLivingPlayerUnitsOfTypeId=Filter(function LivingPlayerUnitsOfTypeIdFilter)set wz=0loopexitwhen wz==16set bj_FORCE_PLAYER[wz]=CreateForce()call ForceAddPlayer(bj_FORCE_PLAYER[wz],Player(wz))set wz=wz+1endloopset bj_FORCE_ALL_PLAYERS=CreateForce()call ForceEnumPlayers(bj_FORCE_ALL_PLAYERS,null)set bj_cineModePriorSpeed=GetGameSpeed()set bj_cineModePriorFogSetting=IsFogEnabled()set bj_cineModePriorMaskSetting=IsFogMaskEnabled()set wz=0loopexitwhen wz>=bj_MAX_QUEUED_TRIGGERSset bj_queuedExecTriggers[wz]=nullset bj_queuedExecUseConds[wz]=falseset wz=wz+1endloopset bj_isSinglePlayer=falseset xz=0set wz=0loopexitwhen wz>=$Cif(GetPlayerController(Player(wz))==MAP_CONTROL_USER and GetPlayerSlotState(Player(wz))==PLAYER_SLOT_STATE_PLAYING)thenset xz=xz+1endifset wz=wz+1endloopset bj_isSinglePlayer=(xz==1)set bj_rescueSound=CreateSoundFromLabel("Rescue",false,false,false,$2710,$2710)set bj_questDiscoveredSound=CreateSoundFromLabel("QuestNew",false,false,false,$2710,$2710)set bj_questUpdatedSound=CreateSoundFromLabel("QuestUpdate",false,false,false,$2710,$2710)set bj_questCompletedSound=CreateSoundFromLabel("QuestCompleted",false,false,false,$2710,$2710)set bj_questFailedSound=CreateSoundFromLabel("QuestFailed",false,false,false,$2710,$2710)set bj_questHintSound=CreateSoundFromLabel("Hint",false,false,false,$2710,$2710)set bj_questSecretSound=CreateSoundFromLabel("SecretFound",false,false,false,$2710,$2710)set bj_questItemAcquiredSound=CreateSoundFromLabel("ItemReward",false,false,false,$2710,$2710)set bj_questWarningSound=CreateSoundFromLabel("Warning",false,false,false,$2710,$2710)set bj_victoryDialogSound=CreateSoundFromLabel("QuestCompleted",false,false,false,$2710,$2710)set bj_defeatDialogSound=CreateSoundFromLabel("QuestFailed",false,false,false,$2710,$2710)call DelayedSuspendDecayCreate()set v=VersionGet()if(v==VERSION_REIGN_OF_CHAOS)thenset bj_MELEE_MAX_TWINKED_HEROES=bj_MELEE_MAX_TWINKED_HEROES_V0elseset bj_MELEE_MAX_TWINKED_HEROES=bj_MELEE_MAX_TWINKED_HEROES_V1endifcall InitQueuedTriggers()call InitRescuableBehaviorBJ()call InitDNCSounds()call InitMapRects()call InitSummonableCaps()set nz=0loopset bj_stockAllowedPermanent[nz]=falseset bj_stockAllowedCharged[nz]=falseset bj_stockAllowedArtifact[nz]=falseset nz=nz+1exitwhen nz>$Aendloopcall SetAllItemTypeSlots($B)call SetAllUnitTypeSlots($B)set bj_stockUpdateTimer=CreateTimer()call TimerStart(bj_stockUpdateTimer,bj_STOCK_RESTOCK_INITIAL_DELAY,false,function sz)set bj_stockItemPurchased=CreateTrigger()call TriggerRegisterPlayerUnitEvent(bj_stockItemPurchased,Player($F),EVENT_PLAYER_UNIT_SELL_ITEM,null)call TriggerAddAction(bj_stockItemPurchased,function RemovePurchasedItem)call DetectGameStarted()call ExecuteFunc("hq4")call ExecuteFunc("Dz")call ExecuteFunc("Lz")call ExecuteFunc("QA")call ExecuteFunc("Va")set i=0set i=0loopexitwhen(i>1)set Z[i]=CreateGroup()set d4[i]=0set j4[i]=""set k4[i]=0set q4[i]=0set v4[i]=0set c4[i]=falseset K4[i]=0set L4[i]=0set M4[i]=CreateTimer()set N4[i]=0set O4[i]=0set P4[i]=""set Q4[i]=0set R4[i]=0set S4[i]=0set T4[i]=0set U4[i]=CreateTimer()set V4[i]=0set W4[i]=0set X4[i]=0set Y4[i]=0set Z4[i]=0set d7[i]=falseset e7[i]=0set f7[i]=0set g7[i]=0set o7[i]=""set p7[i]=""set q7[i]=""set r7[i]=falseset u7[i]=0set w7[i]=0set x7[i]=0set z7[i]=""set b7[i]=0set C7[i]=0set G7[i]=0set H7[i]=""set J7[i]=falseset L7[i]=falseset M7[i]=falseset N7[i]=falseset P7[i]=CreateGroup()set Q7[i]=0set R7[i]=CreateTimer()set U7[i]=CreateGroup()set X7[i]=CreateTimer()set Y7[i]=0set d8[i]=falseset f8[i]=falseset g8[i]=0set h8[i]=-1set i8[i]=CreateTimer()set j8[i]=CreateTimer()set k8[i]=CreateForce()set o8[i]=0set t8[i]=falseset u8[i]=CreateGroup()set A8[i]=0set a8[i]=falseset b8[i]=0set M8[i]=0set N8[i]=0set P8[i]=falseset R8[i]=falseset T8[i]=falseset V8[i]=0set W8[i]=0set g9[i]=0set h9[i]=0set i9[i]=falseset m9[i]=falseset n9[i]=falseset o9[i]=0set p9[i]=falseset q9[i]=falseset r9[i]=0set s9[i]=0set t9[i]=falseset v9[i]=0set z9[i]=falseset A9[i]=falseset a9[i]=CreateGroup()set B9[i]=falseset C9[i]=falseset c9[i]=CreateGroup()set G9[i]=0set H9[i]=0set l9[i]=falseset J9[i]=falseset K9[i]=falseset L9[i]=CreateGroup()set N9[i]=CreateGroup()set O9[i]=CreateTimer()set P9[i]=falseset Q9[i]=0set R9[i]=CreateTimer()set S9[i]=0set T9[i]=0set U9[i]=0set V9[i]=0set W9[i]=0set X9[i]=0set Y9[i]=falseset od[i]=0set pd[i]=0set qd[i]=0set rd[i]=falseset ud[i]=falseset wd[i]=0set Ad[i]=CreateTimer()set ad[i]=0set Bd[i]=CreateTimer()set bd[i]=0set Cd[i]=0set cd[i]=0set Dd[i]=0set Ed[i]=falseset Gd[i]=falseset Hd[i]=0set Id[i]=0set ld[i]=0set Kd[i]=0set Md[i]=0set Pd[i]=0set Qd[i]=0set Ud[i]=0set Vd[i]=0set Wd[i]=CreateGroup()set Yd[i]=0set Zd[i]=0set de[i]=CreateGroup()set ee[i]=0set fe[i]=0set he[i]=0set ie[i]=0set je[i]=falseset ke[i]=CreateTimer()set me[i]=CreateTimer()set ne[i]=0set pe[i]=0set se[i]=0set te[i]=0set xe[i]=CreateGroup()set ye[i]=falseset ze[i]=0set ae[i]=CreateGroup()set Be[i]=CreateGroup()set De[i]=CreateGroup()set Ee[i]=CreateGroup()set Ge[i]=CreateGroup()set He[i]=falseset le[i]=""set Je[i]=CreateForce()set Le[i]=falseset Ne[i]=0set Re[i]=falseset Ue[i]=CreateTimer()set Ye[i]=CreateRegion()set i=i+1endloopset f4=CreateForce()set F4=CreateGroup()set h7=CreateTimer()set k7=CreateGroup()set m7=CreateGroup()set t7=CreateGroup()set v7=CreateForce()set i=0loopexitwhen(i>$A)set y7[i]=CreateTimer()set j9[i]=falseset ce[i]=CreateGroup()set Ve[i]=CreateTimer()set i=i+1endloopset B7=CreateGroup()set D7=CreateGroup()set S7=CreateTimer()set Z7=CreateGroup()set L8=CreateGroup()set S8=CreateGroup()set U8=DialogCreate()set X8=CreateForce()set i=0loopexitwhen(i>$B)set k9[i]=CreateGroup()set i=i+1endloopset Qe=CreateGroup()set Sg=CreateTrigger()call TriggerRegisterTimerEventSingle(Sg,.0)call TriggerAddAction(Sg,function XB)set Tg=CreateTrigger()call TriggerRegisterPlayerChatEvent(Tg,Player(0),"-NEW",true)call TriggerRegisterPlayerChatEvent(Tg,Player(1),"-NEW",true)call TriggerRegisterPlayerChatEvent(Tg,Player(2),"-NEW",true)call TriggerRegisterPlayerChatEvent(Tg,Player(3),"-NEW",true)call TriggerRegisterPlayerChatEvent(Tg,Player(4),"-NEW",true)call TriggerRegisterPlayerChatEvent(Tg,Player(5),"-NEW",true)call TriggerRegisterPlayerChatEvent(Tg,Player(6),"-NEW",true)call TriggerRegisterPlayerChatEvent(Tg,Player(7),"-NEW",true)call TriggerRegisterPlayerChatEvent(Tg,Player(8),"-NEW",true)call TriggerRegisterPlayerChatEvent(Tg,Player(9),"-NEW",true)call TriggerAddCondition(Tg,Condition(function ZB))call jb()set n=0set Ug=CreateTrigger()loopexitwhen n>9call TriggerRegisterPlayerChatEvent(Ug,Player(n),"-kick ",false)set n=n+1endloopcall TriggerAddCondition(Ug,Condition(function rb))call Bb()set Wg=CreateTrigger()call TriggerAddAction(Wg,function bb)set Xg=CreateTrigger()call TriggerRegisterTimerEventSingle(Xg,2.)call TriggerAddAction(Xg,function cb)set Yg=CreateTrigger()call TriggerRegisterPlayerChatEvent(Yg,Player(0),"-name",false)call TriggerRegisterPlayerChatEvent(Yg,Player(1),"-name",false)call TriggerRegisterPlayerChatEvent(Yg,Player(2),"-name",false)call TriggerRegisterPlayerChatEvent(Yg,Player(3),"-name",false)call TriggerRegisterPlayerChatEvent(Yg,Player(4),"-name",false)call TriggerRegisterPlayerChatEvent(Yg,Player(5),"-name",false)call TriggerRegisterPlayerChatEvent(Yg,Player(6),"-name",false)call TriggerRegisterPlayerChatEvent(Yg,Player(7),"-name",false)call TriggerRegisterPlayerChatEvent(Yg,Player(8),"-name",false)call TriggerRegisterPlayerChatEvent(Yg,Player(9),"-name",false)call TriggerAddAction(Yg,function Gb)set Zg=CreateTrigger()call TriggerRegisterUnitEvent(Zg,yt,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Zg,zt,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Zg,At,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Zg,Bt,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Zg,Ct,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Zg,cu,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Zg,Du,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Zg,Eu,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Zg,Fu,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Zg,Gu,EVENT_UNIT_SPELL_EFFECT)call TriggerAddAction(Zg,function Ib)set dh=CreateTrigger()call TriggerAddAction(dh,function Kb)set eh=CreateTrigger()call DisableTrigger(eh)call TriggerAddCondition(eh,Condition(function Mb))call TriggerAddAction(eh,function Nb)set fh=CreateTrigger()call DisableTrigger(fh)call TriggerAddCondition(fh,Condition(function Pb))call TriggerAddAction(fh,function Qb)set gh=CreateTrigger()call DisableTrigger(gh)call TriggerAddCondition(gh,Condition(function Sb))call TriggerAddAction(gh,function Tb)set hh=CreateTrigger()call DisableTrigger(hh)call TriggerAddCondition(hh,Condition(function Vb))call TriggerAddAction(hh,function Wb)set ih=CreateTrigger()call DisableTrigger(ih)call TriggerAddCondition(ih,Condition(function Yb))call TriggerAddAction(ih,function Zb)set jh=CreateTrigger()call DisableTrigger(jh)call TriggerAddCondition(jh,Condition(function eC))call TriggerAddAction(jh,function fC)set kh=CreateTrigger()call TriggerRegisterPlayerChatEvent(kh,Player(0),"",false)call TriggerAddCondition(kh,Condition(function hC))call TriggerAddAction(kh,function iC)call oC()call rC()set mh=CreateTrigger()call TriggerRegisterTimerEventSingle(mh,.0)call TriggerAddAction(mh,function sC)set nh=CreateTrigger()call DisableTrigger(nh)call TriggerRegisterPlayerChatEvent(nh,Player(0),"-v",true)call TriggerRegisterPlayerChatEvent(nh,Player(1),"-v",true)call TriggerRegisterPlayerChatEvent(nh,Player(2),"-v",true)call TriggerRegisterPlayerChatEvent(nh,Player(3),"-v",true)call TriggerRegisterPlayerChatEvent(nh,Player(4),"-v",true)call TriggerRegisterPlayerChatEvent(nh,Player(5),"-v",true)call TriggerRegisterPlayerChatEvent(nh,Player(6),"-v",true)call TriggerRegisterPlayerChatEvent(nh,Player(7),"-v",true)call TriggerRegisterPlayerChatEvent(nh,Player(8),"-v",true)call TriggerRegisterPlayerChatEvent(nh,Player(9),"-v",true)call TriggerAddCondition(nh,Condition(function uC))call TriggerAddAction(nh,function vC)set oh=CreateTrigger()call TriggerRegisterPlayerChatEvent(oh,Player(0),"-CRAZY",true)call TriggerAddAction(oh,function bC)set ph=CreateTrigger()call TriggerRegisterPlayerChatEvent(ph,Player(0),"-AH",true)call TriggerAddAction(ph,function EC)set qh=CreateTrigger()call TriggerRegisterUnitEvent(qh,uv,EVENT_UNIT_SELL)call TriggerRegisterUnitEvent(qh,vv,EVENT_UNIT_SELL)call TriggerRegisterUnitEvent(qh,tv,EVENT_UNIT_SELL)call TriggerRegisterUnitEvent(qh,av,EVENT_UNIT_SELL)call TriggerRegisterUnitEvent(qh,qu,EVENT_UNIT_SELL)call TriggerRegisterUnitEvent(qh,wv,EVENT_UNIT_SELL)call TriggerRegisterUnitEvent(qh,xv,EVENT_UNIT_SELL)call TriggerRegisterUnitEvent(qh,yv,EVENT_UNIT_SELL)call TriggerAddAction(qh,function GC)set rh=CreateTrigger()call TriggerAddAction(rh,function IC)set sh=CreateTrigger()call TriggerRegisterTimerEventSingle(sh,.0)call TriggerAddAction(sh,function JC)set th=CreateTrigger()call DisableTrigger(th)call TriggerAddCondition(th,Condition(function MC))call TriggerAddAction(th,function OC)set uh=CreateTrigger()call DisableTrigger(uh)call TriggerRegisterPlayerSelectionEventBJ(uh,Player(0),true)call TriggerRegisterPlayerSelectionEventBJ(uh,Player(1),true)call TriggerRegisterPlayerSelectionEventBJ(uh,Player(2),true)call TriggerRegisterPlayerSelectionEventBJ(uh,Player(3),true)call TriggerRegisterPlayerSelectionEventBJ(uh,Player(4),true)call TriggerRegisterPlayerSelectionEventBJ(uh,Player(5),true)call TriggerRegisterPlayerSelectionEventBJ(uh,Player(6),true)call TriggerRegisterPlayerSelectionEventBJ(uh,Player(7),true)call TriggerRegisterPlayerSelectionEventBJ(uh,Player(8),true)call TriggerRegisterPlayerSelectionEventBJ(uh,Player(9),true)call TriggerAddAction(uh,function SC)set vh=CreateTrigger()call DisableTrigger(vh)call TriggerRegisterPlayerChatEvent(vh,Player(0),"-LV",false)call TriggerRegisterPlayerChatEvent(vh,Player(1),"-LV",false)call TriggerRegisterPlayerChatEvent(vh,Player(2),"-LV",false)call TriggerRegisterPlayerChatEvent(vh,Player(3),"-LV",false)call TriggerRegisterPlayerChatEvent(vh,Player(4),"-LV",false)call TriggerRegisterPlayerChatEvent(vh,Player(5),"-LV",false)call TriggerRegisterPlayerChatEvent(vh,Player(6),"-LV",false)call TriggerRegisterPlayerChatEvent(vh,Player(7),"-LV",false)call TriggerRegisterPlayerChatEvent(vh,Player(8),"-LV",false)call TriggerRegisterPlayerChatEvent(vh,Player(9),"-LV",false)call TriggerAddAction(vh,function UC)set wh=CreateTrigger()call DisableTrigger(wh)call TriggerRegisterPlayerChatEvent(wh,Player(0),"-GOLD",true)call TriggerRegisterPlayerChatEvent(wh,Player(1),"-GOLD",true)call TriggerRegisterPlayerChatEvent(wh,Player(2),"-GOLD",true)call TriggerRegisterPlayerChatEvent(wh,Player(3),"-GOLD",true)call TriggerRegisterPlayerChatEvent(wh,Player(4),"-GOLD",true)call TriggerRegisterPlayerChatEvent(wh,Player(5),"-GOLD",true)call TriggerRegisterPlayerChatEvent(wh,Player(6),"-GOLD",true)call TriggerRegisterPlayerChatEvent(wh,Player(7),"-GOLD",true)call TriggerRegisterPlayerChatEvent(wh,Player(8),"-GOLD",true)call TriggerRegisterPlayerChatEvent(wh,Player(9),"-GOLD",true)call TriggerAddAction(wh,function WC)set xh=CreateTrigger()call DisableTrigger(xh)call TriggerRegisterPlayerChatEvent(xh,Player(0),"-CD",true)call TriggerRegisterPlayerChatEvent(xh,Player(1),"-CD",true)call TriggerRegisterPlayerChatEvent(xh,Player(2),"-CD",true)call TriggerRegisterPlayerChatEvent(xh,Player(3),"-CD",true)call TriggerRegisterPlayerChatEvent(xh,Player(4),"-CD",true)call TriggerRegisterPlayerChatEvent(xh,Player(5),"-CD",true)call TriggerRegisterPlayerChatEvent(xh,Player(6),"-CD",true)call TriggerRegisterPlayerChatEvent(xh,Player(7),"-CD",true)call TriggerRegisterPlayerChatEvent(xh,Player(8),"-CD",true)call TriggerRegisterPlayerChatEvent(xh,Player(9),"-CD",true)call TriggerAddAction(xh,function YC)set yh=CreateTrigger()call DisableTrigger(yh)call TriggerRegisterPlayerChatEvent(yh,Player(0),"-HM",true)call TriggerRegisterPlayerChatEvent(yh,Player(1),"-HM",true)call TriggerRegisterPlayerChatEvent(yh,Player(2),"-HM",true)call TriggerRegisterPlayerChatEvent(yh,Player(3),"-HM",true)call TriggerRegisterPlayerChatEvent(yh,Player(4),"-HM",true)call TriggerRegisterPlayerChatEvent(yh,Player(5),"-HM",true)call TriggerRegisterPlayerChatEvent(yh,Player(6),"-HM",true)call TriggerRegisterPlayerChatEvent(yh,Player(7),"-HM",true)call TriggerRegisterPlayerChatEvent(yh,Player(8),"-HM",true)call TriggerRegisterPlayerChatEvent(yh,Player(9),"-HM",true)call TriggerAddAction(yh,function dc)set zh=CreateTrigger()call TriggerRegisterTimerEventPeriodic(zh,2)call TriggerAddCondition(zh,Condition(function ic))set Ah=CreateTrigger()call TriggerRegisterTimerEventPeriodic(Ah,150.)call TriggerAddAction(Ah,function kc)set ah=CreateTrigger()call TriggerRegisterUnitEvent(ah,Et,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(ah,Ft,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(ah,Gt,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(ah,Ht,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(ah,Qt,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(ah,ru,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(ah,Ot,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(ah,du,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(ah,Rt,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(ah,St,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(ah,Tt,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(ah,Ut,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(ah,kt,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(ah,nt,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(ah,ot,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(ah,Av,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(ah,Bv,EVENT_UNIT_DEATH)call TriggerAddCondition(ah,Condition(function nc))call TriggerAddAction(ah,function oc)set Bh=CreateTrigger()call TriggerRegisterUnitEvent(Bh,Nu,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Bh,Qu,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Bh,Pu,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Bh,Ou,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Bh,Zu,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Bh,dv,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Bh,ev,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Bh,fv,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Bh,nv,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Bh,mv,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Bh,ov,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Bh,kv,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Bh,Iu,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Bh,lu,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Bh,Mu,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Bh,gu,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Bh,sv,EVENT_UNIT_DEATH)call TriggerAddCondition(Bh,Condition(function qc))call TriggerAddAction(Bh,function rc)set bh=CreateTrigger()call TriggerRegisterUnitEvent(bh,Et,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,Ft,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,Gt,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,Ht,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,It,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,lt,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,Jt,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,Kt,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,Lt,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,Mt,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,Nt,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,Ot,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,Pt,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,Qt,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,Rt,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,St,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,Tt,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,Ut,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,Vt,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,Wt,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,Xt,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,Yt,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,ru,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,du,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,Nu,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,Qu,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,Pu,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,Ou,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,Zu,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,dv,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,ev,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,fv,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,nv,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,mv,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,ov,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,kv,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,Ru,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,Su,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,Uu,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,Tu,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,Vu,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,Wu,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,Yu,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,Xu,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,jv,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,iv,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,hv,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(bh,gv,EVENT_UNIT_DEATH)call TriggerAddAction(bh,function wc)set Ch=CreateTrigger()call TriggerRegisterUnitEvent(Ch,iu,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Ch,qv,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Ch,zu,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Ch,Au,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Ch,yu,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Ch,pv,EVENT_UNIT_DEATH)call TriggerAddAction(Ch,function yc)set ch=CreateTrigger()call TriggerRegisterUnitEvent(ch,Bv,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(ch,Av,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(ch,gu,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(ch,sv,EVENT_UNIT_DEATH)call TriggerAddAction(ch,function Ac)set Dh=CreateTrigger()call TriggerRegisterUnitEvent(Dh,Mu,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Dh,lu,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Dh,Iu,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Dh,ot,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Dh,nt,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Dh,kt,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Dh,Ju,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Dh,Ku,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Dh,Lu,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Dh,ut,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Dh,vt,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Dh,xt,EVENT_UNIT_DEATH)call TriggerAddCondition(Dh,Condition(function bc))set Eh=CreateTrigger()call TriggerRegisterUnitEvent(Eh,wu,EVENT_UNIT_DEATH)call TriggerAddAction(Eh,function Fc)set Fh=CreateTrigger()call TriggerRegisterUnitEvent(Fh,xu,EVENT_UNIT_DEATH)call TriggerAddAction(Fh,function Jc)set Gh=CreateTrigger()call DisableTrigger(Gh)call TriggerRegisterTimerEventPeriodic(Gh,.3)call TriggerAddAction(Gh,function Lc)set Hh=CreateTrigger()call TriggerRegisterUnitEvent(Hh,Av,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Hh,Bv,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Hh,gu,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Hh,sv,EVENT_UNIT_DEATH)call TriggerAddAction(Hh,function Nc)set Ih=CreateTrigger()call TriggerRegisterTimerEventSingle(Ih,.0)call TriggerAddAction(Ih,function Pc)set lh=CreateTrigger()call DA(lh,dg)call DA(lh,Ef)call DA(lh,eg)call DA(lh,Ff)call DA(lh,fg)call DA(lh,Hf)call DA(lh,gg)call DA(lh,Gf)call TriggerAddCondition(lh,Condition(function Rc))set Jh=CreateTrigger()call DisableTrigger(Jh)call DA(Jh,Qf)call DA(Jh,Pf)call DA(Jh,Of)call TriggerAddAction(Jh,function Uc)set r=CreateRegion()set Kh=CreateTrigger()call DisableTrigger(Kh)call RegionAddRect(r,Qf)call RegionAddRect(r,Pf)call RegionAddRect(r,Of)call TriggerRegisterEnterRegion(Kh,r,null)call TriggerAddCondition(Kh,Condition(function Wc))set r=nullset Lh=CreateTrigger()call DisableTrigger(Lh)call TriggerRegisterTimerEventPeriodic(Lh,26.)call TriggerAddCondition(Lh,Condition(function Yc))set Mh=CreateTrigger()call DisableTrigger(Mh)call TriggerRegisterTimerEvent(Mh,143.,true)call TriggerAddCondition(Mh,Condition(function fD))set Nh=CreateTrigger()call DisableTrigger(Nh)call TriggerRegisterTimerEventPeriodic(Nh,98.)call TriggerAddCondition(Nh,Condition(function hD))set Oh=CreateTrigger()call DisableTrigger(Oh)call TriggerRegisterTimerEventPeriodic(Oh,26.)call TriggerAddAction(Oh,function jD)set Ph=CreateTrigger()call DisableTrigger(Ph)call TriggerRegisterTimerEventPeriodic(Ph,143.)call TriggerAddAction(Ph,function mD)set Qh=CreateTrigger()call DisableTrigger(Qh)call TriggerRegisterTimerEventPeriodic(Qh,95.)call TriggerAddAction(Qh,function oD)set Rh=CreateTrigger()call DisableTrigger(Rh)call TriggerRegisterTimerEventPeriodic(Rh,26.)call TriggerAddCondition(Rh,Condition(function qD))set Sh=CreateTrigger()call DisableTrigger(Sh)call TriggerRegisterTimerEventPeriodic(Sh,143.)call TriggerAddCondition(Sh,Condition(function sD))set Th=CreateTrigger()call DisableTrigger(Th)call TriggerRegisterTimerEventPeriodic(Th,95.)call TriggerAddCondition(Th,Condition(function uD))set Uh=CreateTrigger()call TriggerRegisterUnitEvent(Uh,Mu,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Uh,lu,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Uh,Iu,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Uh,ot,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Uh,nt,EVENT_UNIT_DEATH)call TriggerRegisterUnitEvent(Uh,kt,EVENT_UNIT_DEATH)call TriggerAddAction(Uh,function wD)set Vh=CreateTrigger()call TriggerRegisterTimerEvent(Vh,180.,true)call TriggerAddAction(Vh,function yD)set Wh=CreateTrigger()call TriggerRegisterTimerEventSingle(Wh,800.)call TriggerAddAction(Wh,function AD)set Xh=CreateTrigger()call TriggerRegisterTimerEventPeriodic(Xh,180.)call TriggerAddAction(Xh,function BD)set Yh=CreateTrigger()call TriggerAddAction(Yh,function CD)set Zh=CreateTrigger()call TriggerRegisterTimerEventSingle(Zh,5.)call TriggerAddAction(Zh,function DD)set di=CreateTrigger()call TriggerRegisterTimerEventSingle(di,15.)call TriggerAddAction(di,function FD)set ei=CreateTrigger()call TriggerRegisterTimerEventSingle(ei,50.)call TriggerAddAction(ei,function HD)set fi=CreateTrigger()call TriggerRegisterTimerEventSingle(fi,1200.)call TriggerAddAction(fi,function lD)set gi=CreateTrigger()call TriggerRegisterTimerEventSingle(gi,.0)call TriggerAddAction(gi,function MD)set hi=CreateTrigger()call TriggerRegisterPlayerUnitEventSimple(hi,Player($C),EVENT_PLAYER_UNIT_DEATH)call TriggerAddCondition(hi,Condition(function OD))call TriggerAddAction(hi,function PD)set ii=CreateTrigger()call TriggerRegisterUnitEvent(ii,ou,EVENT_UNIT_DEATH)call TriggerAddAction(ii,function SD)set ji=CreateTrigger()call GA(ji,af)call TriggerAddCondition(ji,Condition(function UD))call TriggerAddAction(ji,function VD)set ki=CreateTrigger()call TriggerRegisterUnitEvent(ki,Dt,EVENT_UNIT_DEATH)call TriggerAddAction(ki,function hE)set mi=CreateTrigger()call TriggerRegisterTimerExpireEvent(mi,Tv)call TriggerAddAction(mi,function jE)set ni=CreateTrigger()call TriggerRegisterTimerEventPeriodic(ni,686.)call TriggerAddAction(ni,function mE)set oi=CreateTrigger()call OB(oi,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)call TriggerAddCondition(oi,Condition(function oE))set ri=CreateTrigger()call GA(ri,GetWorldBounds())call TriggerAddAction(ri,function qE)set si=CreateTrigger()call TriggerRegisterUnitInRangeSimple(si,1000.,ct)call TriggerAddCondition(si,Condition(function sE))call TriggerAddAction(si,function tE)set ui=CreateTrigger()call TriggerRegisterUnitInRangeSimple(ui,1000.,Cu)call TriggerAddCondition(ui,Condition(function vE))call TriggerAddAction(ui,function wE)call AE()call bE()set wi=CreateTrigger()call TriggerRegisterPlayerUnitEvent(wi,Player($C),EVENT_PLAYER_UNIT_DEATH,null)call TriggerAddCondition(wi,Condition(function GE))set xi=CreateTrigger()call TriggerAddCondition(xi,Condition(function UE))set yi=CreateTrigger()call TriggerAddCondition(yi,Condition(function YE))set zi=CreateTrigger()call TriggerAddAction(zi,function e3)set Ai=CreateTrigger()call TriggerRegisterTimerEventSingle(Ai,.0)call TriggerAddAction(Ai,function g3)set ai=CreateTrigger()call TriggerAddCondition(ai,Condition(function j3))call TriggerAddAction(ai,function k3)set Bi=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(Bi,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(Bi,Condition(function o3))call TriggerAddAction(Bi,function q3)set bi=CreateTrigger()call TriggerRegisterTimerEventSingle(bi,.0)call TriggerAddAction(bi,function v3)set Ci=CreateTrigger()call TriggerAddAction(Ci,function a3)set ci=CreateTrigger()call TriggerRegisterPlayerChatEvent(ci,Player(0),"-lock",false)call TriggerRegisterPlayerChatEvent(ci,Player(0),"-nosay",false)call TriggerRegisterPlayerChatEvent(ci,Player(0),".xon",false)call TriggerRegisterPlayerChatEvent(ci,Player(0),".k",false)call TriggerAddAction(ci,function C3)call H3()call O3()set Ei=CreateTrigger()call TriggerRegisterUnitEvent(Ei,ku,EVENT_UNIT_SELL)call TriggerRegisterUnitEvent(Ei,hu,EVENT_UNIT_SELL)call TriggerAddCondition(Ei,Condition(function P3))set FA=CreateRegion()set Fi=CreateTrigger()call RegionAddRect(FA,Tf)call TriggerRegisterEnterRegion(Fi,FA,null)call TriggerAddCondition(Fi,Condition(function R3))set FA=nullset Gi=CreateTrigger()call TriggerAddAction(Gi,function V3)set Hi=CreateTrigger()call DisableTrigger(Hi)call TriggerRegisterPlayerUnitEventSimple(Hi,Player($D),EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)call TriggerRegisterPlayerUnitEventSimple(Hi,Player($E),EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)call TriggerAddCondition(Hi,Condition(function X3))call TriggerAddAction(Hi,function Y3)set Ii=CreateTrigger()call TriggerAddAction(Ii,function dF)set li=CreateTrigger()call TriggerRegisterTimerEventSingle(li,90.)call TriggerAddAction(li,function iF)set Ji=CreateTrigger()call TriggerRegisterUnitEvent(Ji,ju,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Ji,au,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Ji,Bu,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Ji,Zt,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Ji,bu,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Ji,su,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Ji,vu,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Ji,uu,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Ji,Hu,EVENT_UNIT_SPELL_EFFECT)call TriggerRegisterUnitEvent(Ji,jt,EVENT_UNIT_SPELL_EFFECT)call TriggerAddCondition(Ji,Condition(function NF))call TimerStart(CreateTimer(),.01,false,function OF)set Ki=CreateTrigger()call TriggerRegisterPlayerChatEvent(Ki,Player(0),"-mo",true)call TriggerAddAction(Ki,function QF)set Li=CreateTrigger()call TriggerRegisterPlayerChatEvent(Li,Player(0),"-HIGH",true)call TriggerAddAction(Li,function SF)set Mi=CreateTrigger()call TriggerRegisterPlayerChatEvent(Mi,Player(0),"-SM",true)call TriggerAddAction(Mi,function UF)set Ni=CreateTrigger()call TriggerAddCondition(Ni,Condition(function MG))set Oi=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(Oi,EVENT_PLAYER_UNIT_DROP_ITEM)call TriggerRegisterAnyUnitEventBJ(Oi,EVENT_PLAYER_UNIT_SELL_ITEM)call TriggerAddCondition(Oi,Condition(function OG))call TriggerAddAction(Oi,function PG)set Pi=CreateTrigger()call OB(Pi,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(Pi,Condition(function r6))set iw=0set mw=0set jw=0loopexitwhen jw>6set kw[jw]=mwset jw=jw+1endloopset kw[0]=1936683576set kw[1]=1227895118set kw[2]=1668051812set kw[3]=1227895631call g6()set kw[0]=1227895344set kw[2]=1819636325set kw[1]=1835955046set kw[6]=1227894870call g6()set Qi=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(Qi,EVENT_PLAYER_UNIT_SUMMON)call TriggerAddCondition(Qi,Condition(function u6))call TriggerAddAction(Qi,function v6)set t=CreateTrigger()set t=CreateTrigger()call OB(t,EVENT_PLAYER_UNIT_USE_ITEM)call TriggerAddCondition(t,Condition(function z6))call TriggerAddAction(t,function y6)set t=nullset Ri=CreateTrigger()call TriggerAddCondition(Ri,Condition(function B6))set Si=CreateTrigger()call TriggerRegisterTimerEventSingle(Si,.0)call TriggerAddAction(Si,function C6)set Ti=CreateTrigger()call TriggerRegisterTimerEventSingle(Ti,.0)call TriggerAddAction(Ti,function D6)set Ui=CreateTrigger()call TriggerRegisterTimerEventSingle(Ui,.0)call TriggerAddAction(Ui,function F6)set Vi=CreateTrigger()call XA(Vi)call TriggerAddAction(Vi,function H6)set Wi=CreateTrigger()call TriggerAddAction(Wi,function l6)set Xi=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(Xi,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(Xi,Condition(function K6))call TriggerAddAction(Xi,function L6)set Yi=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(Yi,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(Yi,Condition(function N6))call TriggerAddAction(Yi,function O6)set Zi=CreateTrigger()call TriggerAddCondition(Zi,Condition(function Q6))call TriggerAddAction(Zi,function S6)set dj=CreateTrigger()call TriggerAddCondition(dj,Condition(function W6))set ej=CreateTrigger()call TriggerAddCondition(ej,Condition(function Y6))set fj=CreateTrigger()call TriggerAddCondition(fj,Condition(function nH))set gj=CreateTrigger()call TriggerAddAction(gj,function BH)set hj=CreateTrigger()call TriggerAddCondition(hj,Condition(function CH))set ij=CreateTrigger()call DisableTrigger(ij)call TriggerAddCondition(ij,Condition(function DH))set jj=CreateTrigger()call TriggerAddCondition(jj,Condition(function HH))set kj=CreateTrigger()call TriggerAddCondition(kj,Condition(function LH))set mj=CreateTrigger()call TriggerAddCondition(mj,Condition(function OH))set nj=CreateTrigger()call TriggerAddCondition(nj,Condition(function QH))set oj=CreateTrigger()call TriggerAddAction(oj,function ZH)set pj=CreateTrigger()call TriggerAddCondition(pj,Condition(function eI))call TriggerAddAction(pj,function fI)set qj=CreateTrigger()call TriggerAddAction(qj,function hI)set rj=CreateTrigger()call TriggerAddCondition(rj,Condition(function jI))call TriggerAddAction(rj,function kI)set sj=CreateTrigger()call TriggerAddCondition(sj,Condition(function nI))call TriggerAddAction(sj,function oI)set tj=CreateTrigger()call TriggerAddCondition(tj,Condition(function uI))call TriggerAddAction(tj,function vI)set uj=CreateTrigger()call TriggerAddCondition(uj,Condition(function xI))call TriggerAddAction(uj,function yI)set vj=CreateTrigger()call TriggerAddCondition(vj,Condition(function AI))call TriggerAddAction(vj,function aI)set wj=CreateTrigger()call TriggerAddCondition(wj,Condition(function bI))call TriggerAddAction(wj,function CI)set xj=CreateTrigger()call TriggerAddAction(xj,function DI)set yj=CreateTrigger()call TriggerAddCondition(yj,Condition(function FI))call TriggerAddAction(yj,function GI)set zj=CreateTrigger()call TriggerAddCondition(zj,Condition(function II))set Aj=CreateTrigger()call TriggerAddCondition(Aj,Condition(function KI))set aj=CreateTrigger()call TriggerAddCondition(aj,Condition(function NI))set Bj=CreateTrigger()call TriggerAddAction(Bj,function PI)set bj=CreateTrigger()call TriggerAddCondition(bj,Condition(function RI))call TriggerAddAction(bj,function SI)set Cj=CreateTrigger()call TriggerAddCondition(Cj,Condition(function VI))set cj=CreateTrigger()call TriggerAddCondition(cj,Condition(function ZI))set Dj=CreateTrigger()call TriggerAddAction(Dj,function el)set Ej=CreateTrigger()call DisableTrigger(Ej)call TriggerAddCondition(Ej,Condition(function gl))set Fj=CreateTrigger()call TriggerAddCondition(Fj,Condition(function il))call TriggerAddAction(Fj,function jl)set Gj=CreateTrigger()call TriggerAddCondition(Gj,Condition(function ml))call TriggerAddAction(Gj,function nl)set Hj=CreateTrigger()call TriggerAddCondition(Hj,Condition(function pl))call TriggerAddAction(Hj,function ql)set Ij=CreateTrigger()call TriggerAddCondition(Ij,Condition(function sl))call TriggerAddAction(Ij,function tl)set lj=CreateTrigger()call TriggerAddCondition(lj,Condition(function wl))set Jj=CreateTrigger()call TriggerAddCondition(Jj,Condition(function yl))call TriggerAddAction(Jj,function zl)set Kj=CreateTrigger()call TriggerAddCondition(Kj,Condition(function al))call TriggerAddAction(Kj,function Bl)set Lj=CreateTrigger()call TriggerAddAction(Lj,function cl)set Mj=CreateTrigger()call TriggerAddCondition(Mj,Condition(function El))call TriggerAddAction(Mj,function Fl)set Nj=CreateTrigger()call TriggerAddCondition(Nj,Condition(function Hl))set Oj=CreateTrigger()call TriggerAddCondition(Oj,Condition(function ll))call TriggerAddAction(Oj,function Jl)set Pj=CreateTrigger()call TriggerAddCondition(Pj,Condition(function Ll))call TriggerAddAction(Pj,function Ml)set Qj=CreateTrigger()call TriggerAddCondition(Qj,Condition(function Pl))set Rj=CreateTrigger()call TriggerAddCondition(Rj,Condition(function Rl))call TriggerAddAction(Rj,function Sl)set Sj=CreateTrigger()call TriggerAddAction(Sj,function Ul)set Tj=CreateTrigger()call TriggerAddCondition(Tj,Condition(function Wl))call TriggerAddAction(Tj,function Xl)set Uj=CreateTrigger()call TriggerAddCondition(Uj,Condition(function Zl))call TriggerAddAction(Uj,function d1)set Vj=CreateTrigger()call TriggerAddCondition(Vj,Condition(function h1))call TriggerAddAction(Vj,function i1)set Wj=CreateTrigger()call TriggerAddCondition(Wj,Condition(function k1))call TriggerAddAction(Wj,function o1)set Xj=CreateTrigger()call TriggerAddAction(Xj,function v1)set Yj=CreateTrigger()call TriggerAddCondition(Yj,Condition(function z1))call TriggerAddAction(Yj,function A1)set Zj=CreateTrigger()call DisableTrigger(Zj)call TriggerRegisterAnyUnitEventBJ(Zj,EVENT_PLAYER_UNIT_ATTACKED)call TriggerAddCondition(Zj,Condition(function C1))call TriggerAddAction(Zj,function c1)set dk=CreateTrigger()call TriggerAddCondition(dk,Condition(function E1))call TriggerAddAction(dk,function F1)set ek=CreateTrigger()call TriggerAddCondition(ek,Condition(function H1))call TriggerAddAction(ek,function I1)set fk=CreateTrigger()call TriggerAddCondition(fk,Condition(function J1))call TriggerAddAction(fk,function K1)set gk=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(gk,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(gk,Condition(function M1))call TriggerAddAction(gk,function N1)set hk=CreateTrigger()call TriggerAddAction(hk,function P1)set ik=CreateTrigger()call TriggerAddCondition(ik,Condition(function R1))call TriggerAddAction(ik,function S1)set jk=CreateTrigger()call TriggerAddCondition(jk,Condition(function U1))call TriggerAddAction(jk,function V1)set kk=CreateTrigger()call TriggerAddCondition(kk,Condition(function X1))call TriggerAddAction(kk,function Y1)set mk=CreateTrigger()call TriggerAddCondition(mk,Condition(function dJ))set nk=CreateTrigger()call TriggerAddCondition(nk,Condition(function fJ))call TriggerAddAction(nk,function hJ)set ok=CreateTrigger()call TriggerAddAction(ok,function jJ)set pk=CreateTrigger()call TriggerAddCondition(pk,Condition(function nJ))set qk=CreateTrigger()call TriggerAddCondition(qk,Condition(function pJ))set rk=CreateTrigger()call TriggerAddCondition(rk,Condition(function rJ))set sk=CreateTrigger()call TriggerAddCondition(sk,Condition(function vJ))set tk=CreateTrigger()call TriggerAddAction(tk,function xJ)set uk=CreateTrigger()call TriggerAddAction(uk,function zJ)set vk=CreateTrigger()call TriggerAddCondition(vk,Condition(function aJ))call TriggerAddAction(vk,function BJ)set wk=CreateTrigger()call TriggerAddCondition(wk,Condition(function CJ))call TriggerAddAction(wk,function cJ)set xk=CreateTrigger()call TriggerAddCondition(xk,Condition(function EJ))call TriggerAddAction(xk,function GJ)set yk=CreateTrigger()call TriggerAddCondition(yk,Condition(function IJ))call TriggerAddAction(yk,function lJ)set zk=CreateTrigger()call TriggerAddCondition(zk,Condition(function MJ))call TriggerAddAction(zk,function LJ)set Ak=CreateTrigger()call TriggerAddAction(Ak,function OJ)set ak=CreateTrigger()call TriggerAddCondition(ak,Condition(function QJ))set Bk=CreateTrigger()call TriggerAddCondition(Bk,Condition(function TJ))set bk=CreateTrigger()call TriggerAddCondition(bk,Condition(function WJ))set Ck=CreateTrigger()call TriggerAddCondition(Ck,Condition(function ZJ))set ck=CreateTrigger()call TriggerAddCondition(ck,Condition(function eK))set Dk=CreateTrigger()call TriggerAddCondition(Dk,Condition(function hK))set Ek=CreateTrigger()call TriggerAddCondition(Ek,Condition(function mK))set Fk=CreateTrigger()call TriggerAddCondition(Fk,Condition(function pK))set Gk=CreateTrigger()call TriggerAddCondition(Gk,Condition(function tK))set Hk=CreateTrigger()call TriggerAddAction(Hk,function vK)set Ik=CreateTrigger()call TriggerAddCondition(Ik,Condition(function AK))set lk=CreateTrigger()call TriggerAddCondition(lk,Condition(function BK))set Jk=CreateTrigger()call TriggerAddCondition(Jk,Condition(function DK))set Kk=CreateTrigger()call TriggerAddCondition(Kk,Condition(function UK))set Lk=CreateTrigger()call TriggerAddAction(Lk,function WK)set Mk=CreateTrigger()call TriggerAddCondition(Mk,Condition(function YK))call TriggerAddAction(Mk,function ZK)set Nk=CreateTrigger()call TriggerAddCondition(Nk,Condition(function eL))call TriggerAddAction(Nk,function fL)set Ok=CreateTrigger()call TriggerAddAction(Ok,function hL)set Pk=CreateTrigger()call TriggerAddCondition(Pk,Condition(function jL))call TriggerAddAction(Pk,function kL)set Qk=CreateTrigger()call TriggerAddCondition(Qk,Condition(function nL))call TriggerAddAction(Qk,function oL)set Rk=CreateTrigger()call TriggerAddAction(Rk,function qL)set Sk=CreateTrigger()call TriggerAddCondition(Sk,Condition(function tL))call TriggerAddAction(Sk,function uL)set Tk=CreateTrigger()call TriggerAddCondition(Tk,Condition(function wL))call TriggerAddAction(Tk,function xL)set Uk=CreateTrigger()call TriggerAddCondition(Uk,Condition(function zL))call TriggerAddAction(Uk,function AL)set Vk=CreateTrigger()call TriggerAddAction(Vk,function BL)set Wk=CreateTrigger()call TriggerAddCondition(Wk,Condition(function CL))call TriggerAddAction(Wk,function cL)set Xk=CreateTrigger()call TriggerAddCondition(Xk,Condition(function EL))call TriggerAddAction(Xk,function GL)set Yk=CreateTrigger()call TriggerAddCondition(Yk,Condition(function IL))call TriggerAddAction(Yk,function lL)set Zk=CreateTrigger()call TriggerAddCondition(Zk,Condition(function OL))set dm=CreateTrigger()call TriggerAddAction(dm,function QL)set em=CreateTrigger()call TriggerAddCondition(em,Condition(function SL))call TriggerAddAction(em,function TL)set fm=CreateTrigger()call TriggerAddCondition(fm,Condition(function VL))call TriggerAddAction(fm,function WL)set gm=CreateTrigger()call TriggerAddCondition(gm,Condition(function YL))call TriggerAddAction(gm,function ZL)set hm=CreateTrigger()call TriggerAddCondition(hm,Condition(function eM))call TriggerAddAction(hm,function gM)set im=CreateTrigger()call TriggerAddCondition(im,Condition(function nM))set jm=CreateTrigger()call TriggerAddCondition(jm,Condition(function pM))call TriggerAddAction(jm,function qM)set km=CreateTrigger()call TriggerAddCondition(km,Condition(function sM))set mm=CreateTrigger()call TriggerAddCondition(mm,Condition(function uM))call TriggerAddAction(mm,function vM)set nm=CreateTrigger()call TriggerAddAction(nm,function xM)set om=CreateTrigger()call TriggerAddCondition(om,Condition(function zM))call TriggerAddAction(om,function AM)set pm=CreateTrigger()call TriggerAddCondition(pm,Condition(function BM))call TriggerAddAction(pm,function bM)set qm=CreateTrigger()call TriggerAddCondition(qm,Condition(function cM))call TriggerAddAction(qm,function DM)set rm=CreateTrigger()call TriggerAddAction(rm,function FM)set sm=CreateTrigger()call TriggerAddCondition(sm,Condition(function HM))call TriggerAddAction(sm,function IM)set tm=CreateTrigger()call TriggerAddCondition(tm,Condition(function JM))call TriggerAddAction(tm,function MM)set um=CreateTrigger()call TriggerAddCondition(um,Condition(function QM))set vm=CreateTrigger()call TriggerAddAction(vm,function SM)set wm=CreateTrigger()call TriggerAddCondition(wm,Condition(function UM))call TriggerAddAction(wm,function VM)set xm=CreateTrigger()call TriggerAddCondition(xm,Condition(function YM))set ym=CreateTrigger()call TriggerAddCondition(ym,Condition(function dN))call TriggerAddAction(ym,function eN)set zm=CreateTrigger()call TriggerAddCondition(zm,Condition(function gN))call TriggerAddAction(zm,function hN)set Am=CreateTrigger()call TriggerAddCondition(Am,Condition(function jN))set am=CreateTrigger()call TriggerAddAction(am,function mN)set Bm=CreateTrigger()call TriggerAddCondition(Bm,Condition(function qN))call TriggerAddAction(Bm,function pN)set bm=CreateTrigger()call TriggerAddCondition(bm,Condition(function sN))call TriggerAddAction(bm,function tN)set Cm=CreateTrigger()call TriggerAddCondition(Cm,Condition(function wN))set cm=CreateTrigger()call TriggerAddCondition(cm,Condition(function AN))set Dm=CreateTrigger()call TriggerAddCondition(Dm,Condition(function BN))call TriggerAddAction(Dm,function bN)set Em=CreateTrigger()call TriggerAddAction(Em,function cN)set Fm=CreateTrigger()call TriggerAddCondition(Fm,Condition(function EN))call TriggerAddAction(Fm,function GN)set Gm=CreateTrigger()call TriggerAddCondition(Gm,Condition(function IN))call TriggerAddAction(Gm,function lN)set Hm=CreateTrigger()call TriggerAddCondition(Hm,Condition(function KN))call TriggerAddAction(Hm,function LN)set Im=CreateTrigger()call TriggerAddCondition(Im,Condition(function PN))call TriggerAddAction(Im,function QN)set lm=CreateTrigger()call TriggerAddCondition(lm,Condition(function SN))call TriggerAddAction(lm,function TN)set Jm=CreateTrigger()call TriggerAddAction(Jm,function XN)set Km=CreateTrigger()call TriggerAddAction(Km,function ZN)set Lm=CreateTrigger()call TriggerAddCondition(Lm,Condition(function eO))call TriggerAddAction(Lm,function fO)set Mm=CreateTrigger()call TriggerAddCondition(Mm,Condition(function hO))call TriggerAddAction(Mm,function iO)set Nm=CreateTrigger()call TriggerAddCondition(Nm,Condition(function kO))call TriggerAddAction(Nm,function mO)set Om=CreateTrigger()call TriggerAddCondition(Om,Condition(function oO))set Pm=CreateTrigger()call TriggerAddCondition(Pm,Condition(function qO))call TriggerAddAction(Pm,function sO)set Qm=CreateTrigger()call TriggerAddCondition(Qm,Condition(function uO))call TriggerAddAction(Qm,function wO)set Rm=CreateTrigger()call TriggerAddCondition(Rm,Condition(function yO))call TriggerAddAction(Rm,function aO)set Sm=CreateTrigger()call TriggerAddCondition(Sm,Condition(function bO))call TriggerAddAction(Sm,function cO)set Tm=CreateTrigger()call TriggerAddCondition(Tm,Condition(function EO))call TriggerAddAction(Tm,function GO)set Um=CreateTrigger()call TriggerAddCondition(Um,Condition(function IO))call TriggerAddAction(Um,function JO)set Vm=CreateTrigger()call TriggerAddAction(Vm,function LO)set Wm=CreateTrigger()call TriggerAddCondition(Wm,Condition(function NO))call TriggerAddAction(Wm,function RO)set Xm=CreateTrigger()call TriggerAddCondition(Xm,Condition(function TO))call TriggerAddAction(Xm,function VO)set Ym=CreateTrigger()call TriggerAddCondition(Ym,Condition(function XO))call TriggerAddAction(Ym,function YO)set Zm=CreateTrigger()call TriggerAddCondition(Zm,Condition(function d0))call TriggerAddAction(Zm,function e0)set dn=CreateTrigger()call TriggerAddAction(dn,function g0)set en=CreateTrigger()call TriggerAddCondition(en,Condition(function r0))set fn=CreateTrigger()call TriggerAddCondition(fn,Condition(function u0))set gn=CreateTrigger()call TriggerAddCondition(gn,Condition(function w0))set hn=CreateTrigger()call TriggerAddCondition(hn,Condition(function z0))set in=CreateTrigger()call TriggerAddCondition(in,Condition(function b0))set jn=CreateTrigger()call TriggerAddAction(jn,function c0)set kn=CreateTrigger()call TriggerAddCondition(kn,Condition(function H0))set mn=CreateTrigger()call TriggerAddAction(mn,function l0)set nn=CreateTrigger()call TriggerAddCondition(nn,Condition(function K0))call TriggerAddAction(nn,function N0)set on=CreateTrigger()call TriggerAddCondition(on,Condition(function P0))call TriggerAddAction(on,function Q0)set pn=CreateTrigger()call TriggerAddCondition(pn,Condition(function T0))set qn=CreateTrigger()call TriggerAddAction(qn,function V0)set sn=CreateTrigger()call TriggerAddCondition(sn,Condition(function X0))call TriggerAddAction(sn,function Y0)set tn=CreateTrigger()call TriggerAddCondition(tn,Condition(function dP))call TriggerAddAction(tn,function eP)set un=CreateTrigger()call TriggerAddCondition(un,Condition(function kP))set vn=CreateTrigger()call TriggerAddCondition(vn,Condition(function nP))set wn=CreateTrigger()call TriggerAddCondition(wn,Condition(function pP))call TriggerAddAction(wn,function rP)set xn=CreateTrigger()call TriggerAddCondition(xn,Condition(function uP))call TriggerAddAction(xn,function vP)set yn=CreateTrigger()call TriggerAddAction(yn,function xP)set zn=CreateTrigger()call TriggerAddCondition(zn,Condition(function zP))set An=CreateTrigger()call TriggerAddCondition(An,Condition(function aP))call TriggerAddAction(An,function BP)set Bn=CreateTrigger()call TriggerAddCondition(Bn,Condition(function CP))call TriggerAddAction(Bn,function DP)set bn=CreateTrigger()call TriggerAddCondition(bn,Condition(function IP))set Cn=CreateTrigger()call TriggerAddCondition(Cn,Condition(function JP))call TriggerAddAction(Cn,function KP)set cn=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(cn,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(cn,Condition(function MP))call TriggerAddAction(cn,function NP)set Dn=CreateTrigger()call TriggerAddCondition(Dn,Condition(function PP))call TriggerAddAction(Dn,function RP)set En=CreateTrigger()call TriggerAddCondition(En,Condition(function TP))set Fn=CreateTrigger()call TriggerAddAction(Fn,function XP)set Gn=CreateTrigger()call TriggerAddCondition(Gn,Condition(function gQ))set Hn=CreateTrigger()call TriggerAddCondition(Hn,Condition(function iQ))set In=CreateTrigger()call TriggerAddCondition(In,Condition(function nQ))set Jn=CreateTrigger()call TriggerAddCondition(Jn,Condition(function qQ))set Kn=CreateTrigger()call TriggerAddCondition(Kn,Condition(function tQ))set Ln=CreateTrigger()call TriggerAddAction(Ln,function vQ)set Mn=CreateTrigger()call TriggerAddCondition(Mn,Condition(function xQ))call TriggerAddAction(Mn,function yQ)set Nn=CreateTrigger()call TriggerAddCondition(Nn,Condition(function AQ))call TriggerAddAction(Nn,function bQ)set On=CreateTrigger()call TriggerAddCondition(On,Condition(function cQ))call TriggerAddAction(On,function DQ)set Pn=CreateTrigger()call TriggerAddCondition(Pn,Condition(function FQ))set Qn=CreateTrigger()call TriggerAddCondition(Qn,Condition(function HQ))call TriggerAddAction(Qn,function IQ)set Rn=CreateTrigger()call TriggerAddCondition(Rn,Condition(function JQ))call TriggerAddAction(Rn,function LQ)set Sn=CreateTrigger()call TriggerAddAction(Sn,function WQ)set ix=CreateTrigger()call TriggerAddCondition(ix,Condition(function VQ))set jx=CreateTrigger()call TriggerAddCondition(jx,Condition(function UQ))set kx=CreateTrigger()call TriggerAddCondition(kx,Condition(function TQ))set mx=CreateTrigger()call TriggerAddCondition(mx,Condition(function RQ))set nx=CreateTrigger()call TriggerAddCondition(nx,Condition(function OQ))set Tn=CreateTrigger()call TriggerAddAction(Tn,function YQ)set Un=CreateTrigger()call TriggerAddCondition(Un,Condition(function dR))call TriggerAddAction(Un,function eR)set Vn=CreateTrigger()call TriggerAddCondition(Vn,Condition(function gR))call TriggerAddAction(Vn,function hR)set Wn=CreateTrigger()call TriggerAddAction(Wn,function qR)set Xn=CreateTrigger()call TriggerAddCondition(Xn,Condition(function vR))set Yn=CreateTrigger()call TriggerAddAction(Yn,function xR)set Zn=CreateTrigger()call TriggerAddCondition(Zn,Condition(function zR))call TriggerAddAction(Zn,function AR)set do=CreateTrigger()call TriggerAddCondition(do,Condition(function BR))call TriggerAddAction(do,function bR)set eo=CreateTrigger()call TriggerAddCondition(eo,Condition(function cR))call TriggerAddAction(eo,function ER)set fo=CreateTrigger()call TriggerAddCondition(fo,Condition(function GR))call TriggerAddAction(fo,function HR)set go=CreateTrigger()call TriggerAddCondition(go,Condition(function lR))call TriggerAddAction(go,function JR)set ho=CreateTrigger()call TriggerAddCondition(ho,Condition(function LR))call TriggerAddAction(ho,function MR)set io=CreateTrigger()call TriggerAddCondition(io,Condition(function OR))call TriggerAddAction(io,function PR)set jo=CreateTrigger()call TriggerAddAction(jo,function RR)set ko=CreateTrigger()call TriggerAddCondition(ko,Condition(function TR))call TriggerAddAction(ko,function UR)set mo=CreateTrigger()call TriggerAddCondition(mo,Condition(function WR))call TriggerAddAction(mo,function XR)set no=CreateTrigger()call DisableTrigger(no)call TriggerRegisterAnyUnitEventBJ(no,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(no,Condition(function ZR))call TriggerAddAction(no,function eS)set oo=CreateTrigger()call TriggerAddCondition(oo,Condition(function gS))call TriggerAddAction(oo,function jS)set po=CreateTrigger()call TriggerAddAction(po,function mS)set qo=CreateTrigger()call TriggerAddCondition(qo,Condition(function oS))call TriggerAddAction(qo,function pS)set ro=CreateTrigger()call TriggerAddCondition(ro,Condition(function rS))call TriggerAddAction(ro,function sS)set so=CreateTrigger()call TriggerAddCondition(so,Condition(function uS))call TriggerAddAction(so,function yS)set to=CreateTrigger()call TriggerAddCondition(to,Condition(function AS))call TriggerAddAction(to,function aS)set uo=CreateTrigger()call TriggerAddAction(uo,function bS)set vo=CreateTrigger()call TriggerAddCondition(vo,Condition(function DS))set wo=CreateTrigger()call TriggerAddAction(wo,function FS)set xo=CreateTrigger()call TriggerAddCondition(xo,Condition(function HS))call TriggerAddAction(xo,function IS)set yo=CreateTrigger()call TriggerAddCondition(yo,Condition(function JS))call TriggerAddAction(yo,function KS)set zo=CreateTrigger()call TriggerAddCondition(zo,Condition(function MS))set Ao=CreateTrigger()call TriggerAddCondition(Ao,Condition(function OS))call TriggerAddAction(Ao,function PS)set ao=CreateTrigger()call TriggerAddAction(ao,function RS)set Bo=CreateTrigger()call TriggerAddCondition(Bo,Condition(function TS))call TriggerAddAction(Bo,function US)set bo=CreateTrigger()call TriggerAddCondition(bo,Condition(function WS))call TriggerAddAction(bo,function YS)set Co=CreateTrigger()call TriggerAddCondition(Co,Condition(function e5))set co=CreateTrigger()call TriggerAddAction(co,function g5)set Do=CreateTrigger()call TriggerAddCondition(Do,Condition(function j5))call TriggerAddAction(Do,function k5)set Eo=CreateTrigger()call TriggerAddCondition(Eo,Condition(function o5))call TriggerAddAction(Eo,function r5)set Fo=CreateTrigger()call TriggerAddAction(Fo,function u5)set Go=CreateTrigger()call TriggerAddCondition(Go,Condition(function w5))set Ho=CreateTrigger()call TriggerAddCondition(Ho,Condition(function z5))set Io=CreateTrigger()call TriggerAddCondition(Io,Condition(function a5))set lo=CreateTrigger()call TriggerAddCondition(lo,Condition(function b5))set Jo=CreateTrigger()call TriggerAddCondition(Jo,Condition(function E5))set Ko=CreateTrigger()call TriggerAddAction(Ko,function G5)set Lo=CreateTrigger()call TriggerAddCondition(Lo,Condition(function I5))call TriggerAddAction(Lo,function l5)set Mo=CreateTrigger()call TriggerAddCondition(Mo,Condition(function K5))call TriggerAddAction(Mo,function L5)set No=CreateTrigger()call TriggerAddCondition(No,Condition(function N5))call TriggerAddAction(No,function P5)set Oo=CreateTrigger()call TriggerAddAction(Oo,function R5)set Po=CreateTrigger()call TriggerAddCondition(Po,Condition(function T5))call TriggerAddAction(Po,function U5)set Qo=CreateTrigger()call TriggerAddCondition(Qo,Condition(function X5))set Ro=CreateTrigger()call TriggerAddCondition(Ro,Condition(function Z5))call TriggerAddAction(Ro,function dT)set So=CreateTrigger()call TriggerAddCondition(So,Condition(function fT))call TriggerAddAction(So,function gT)set To=CreateTrigger()call TriggerAddCondition(To,Condition(function iT))call TriggerAddAction(To,function jT)set Uo=CreateTrigger()call TriggerAddAction(Uo,function mT)set Vo=CreateTrigger()call TriggerAddCondition(Vo,Condition(function oT))call TriggerAddAction(Vo,function pT)set Wo=CreateTrigger()call TriggerAddCondition(Wo,Condition(function rT))call TriggerAddAction(Wo,function sT)set Xo=CreateTrigger()call TriggerAddCondition(Xo,Condition(function uT))call TriggerAddAction(Xo,function vT)set Yo=CreateTrigger()call TriggerAddAction(Yo,function xT)set Zo=CreateTrigger()call TriggerAddCondition(Zo,Condition(function zT))call TriggerAddAction(Zo,function AT)set dp=CreateTrigger()call TriggerAddCondition(dp,Condition(function BT))call TriggerAddAction(dp,function CT)set ep=CreateTrigger()call TriggerAddCondition(ep,Condition(function DT))call TriggerAddAction(ep,function ET)set fp=CreateTrigger()call TriggerAddCondition(fp,Condition(function GT))call TriggerAddAction(fp,function HT)set gp=CreateTrigger()call TriggerAddCondition(gp,Condition(function lT))call TriggerAddAction(gp,function JT)set jp=CreateTrigger()call TriggerAddAction(jp,function LT)set kp=CreateTrigger()call TriggerAddCondition(kp,Condition(function NT))call TriggerAddAction(kp,function OT)set np=CreateTrigger()call DisableTrigger(np)call TriggerRegisterAnyUnitEventBJ(np,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(np,Condition(function QT))call TriggerAddAction(np,function RT)set op=CreateTrigger()call TriggerAddCondition(op,Condition(function TT))call TriggerAddAction(op,function UT)set pp=CreateTrigger()call TriggerAddAction(pp,function WT)set qp=CreateTrigger()call TriggerAddCondition(qp,Condition(function YT))call TriggerAddAction(qp,function ZT)set rp=CreateTrigger()call TriggerAddCondition(rp,Condition(function eU))call TriggerAddAction(rp,function fU)set sp=CreateTrigger()call TriggerAddCondition(sp,Condition(function hU))call TriggerAddAction(sp,function iU)set tp=CreateTrigger()call TriggerAddCondition(tp,Condition(function kU))call TriggerAddAction(tp,function mU)set vp=CreateTrigger()call TriggerAddCondition(vp,Condition(function oU))call TriggerAddAction(vp,function pU)set wp=CreateTrigger()call TriggerAddCondition(wp,Condition(function rU))call TriggerAddAction(wp,function sU)set xp=CreateTrigger()call TriggerAddAction(xp,function uU)set yp=CreateTrigger()call TriggerAddCondition(yp,Condition(function wU))call TriggerAddAction(yp,function xU)set zp=CreateTrigger()call TriggerAddCondition(zp,Condition(function zU))call TriggerAddAction(zp,function AU)set Ap=CreateTrigger()call TriggerAddCondition(Ap,Condition(function BU))set ap=CreateTrigger()call TriggerAddAction(ap,function CU)set Bp=CreateTrigger()call TriggerAddCondition(Bp,Condition(function GU))set bp=CreateTrigger()call TriggerAddCondition(bp,Condition(function IU))set Cp=CreateTrigger()call TriggerAddCondition(Cp,Condition(function MU))set cp=CreateTrigger()call TriggerAddCondition(cp,Condition(function OU))set Dp=CreateTrigger()call TriggerAddCondition(Dp,Condition(function SU))set Ep=CreateTrigger()call TriggerAddCondition(Ep,Condition(function WU))set Fp=CreateTrigger()call TriggerAddCondition(Fp,Condition(function YU))call TriggerAddAction(Fp,function ZU)set Gp=CreateTrigger()call TriggerAddAction(Gp,function eV)set Hp=CreateTrigger()call TriggerAddCondition(Hp,Condition(function gV))call TriggerAddAction(Hp,function hV)set Ip=CreateTrigger()call TriggerAddCondition(Ip,Condition(function jV))call TriggerAddAction(Ip,function kV)set lp=CreateTrigger()call TriggerAddAction(lp,function nV)set Jp=CreateTrigger()call TriggerAddCondition(Jp,Condition(function pV))call TriggerAddAction(Jp,function rV)set Kp=CreateTrigger()call TriggerAddCondition(Kp,Condition(function uV))set Lp=CreateTrigger()call TriggerAddCondition(Lp,Condition(function wV))call TriggerAddAction(Lp,function yV)set Mp=CreateTrigger()call TriggerAddAction(Mp,function AV)set Np=CreateTrigger()call TriggerAddCondition(Np,Condition(function BV))call TriggerAddAction(Np,function cV)set Op=CreateTrigger()call TriggerAddCondition(Op,Condition(function EV))call TriggerAddAction(Op,function FV)set Pp=CreateTrigger()call TriggerAddCondition(Pp,Condition(function IV))call TriggerAddAction(Pp,function KV)set Qp=CreateTrigger()call TriggerAddCondition(Qp,Condition(function MV))call TriggerAddAction(Qp,function NV)set Rp=CreateTrigger()call TriggerAddCondition(Rp,Condition(function PV))call TriggerAddAction(Rp,function QV)set Sp=CreateTrigger()call TriggerAddAction(Sp,function SV)set Tp=CreateTrigger()call TriggerAddCondition(Tp,Condition(function UV))call TriggerAddAction(Tp,function VV)set Up=CreateTrigger()call TriggerAddCondition(Up,Condition(function XV))call TriggerAddAction(Up,function YV)set Vp=CreateTrigger()call TriggerAddCondition(Vp,Condition(function dW))call TriggerAddAction(Vp,function fW)set Wp=CreateTrigger()call TriggerAddCondition(Wp,Condition(function hW))call TriggerAddAction(Wp,function iW)set Xp=CreateTrigger()call TriggerAddAction(Xp,function kW)set Yp=CreateTrigger()call TriggerAddCondition(Yp,Condition(function nW))call TriggerAddAction(Yp,function pW)set Zp=CreateTrigger()call TriggerAddCondition(Zp,Condition(function rW))call TriggerAddAction(Zp,function sW)set dq=CreateTrigger()call TriggerAddCondition(dq,Condition(function uW))call TriggerAddAction(dq,function vW)set eq=CreateTrigger()call TriggerAddAction(eq,function xW)set fq=CreateTrigger()call TriggerAddCondition(fq,Condition(function zW))call TriggerAddAction(fq,function AW)set gq=CreateTrigger()call TriggerAddCondition(gq,Condition(function BW))call TriggerAddAction(gq,function CW)set hq=CreateTrigger()call TriggerAddCondition(hq,Condition(function DW))call TriggerAddAction(hq,function FW)set iq=CreateTrigger()call TriggerAddAction(iq,function HW)set jq=CreateTrigger()call TriggerAddCondition(jq,Condition(function lW))call TriggerAddAction(jq,function JW)set kq=CreateTrigger()call TriggerAddCondition(kq,Condition(function PW))set mq=CreateTrigger()call TriggerAddAction(mq,function RW)set nq=CreateTrigger()call TriggerAddCondition(nq,Condition(function TW))call TriggerAddAction(nq,function UW)set oq=CreateTrigger()call TriggerAddCondition(oq,Condition(function WW))call TriggerAddAction(oq,function ZW)set pq=CreateTrigger()call TriggerAddCondition(pq,Condition(function gX))call TriggerAddAction(pq,function hX)set qq=CreateTrigger()call TriggerAddCondition(qq,Condition(function jX))call TriggerAddAction(qq,function kX)set rq=CreateTrigger()call TriggerAddCondition(rq,Condition(function nX))call TriggerAddAction(rq,function pX)set sq=CreateTrigger()call TriggerAddAction(sq,function sX)set tq=CreateTrigger()call TriggerAddCondition(tq,Condition(function uX))set uq=CreateTrigger()call TriggerAddCondition(uq,Condition(function wX))call TriggerAddAction(uq,function xX)set vq=CreateTrigger()call TriggerAddCondition(vq,Condition(function zX))call TriggerAddAction(vq,function aX)set wq=CreateTrigger()call TriggerAddCondition(wq,Condition(function bX))call TriggerAddAction(wq,function cX)set xq=CreateTrigger()call TriggerAddCondition(xq,Condition(function EX))call TriggerAddAction(xq,function GX)set yq=CreateTrigger()call TriggerAddCondition(yq,Condition(function IX))set zq=CreateTrigger()call TriggerAddCondition(zq,Condition(function JX))call TriggerAddAction(zq,function KX)set Aq=CreateTrigger()call TriggerAddAction(Aq,function MX)set aq=CreateTrigger()call TriggerAddCondition(aq,Condition(function OX))set Bq=CreateTrigger()call TriggerAddCondition(Bq,Condition(function QX))call TriggerAddAction(Bq,function RX)set bq=CreateTrigger()call TriggerAddCondition(bq,Condition(function TX))call TriggerAddAction(bq,function UX)set Cq=CreateTrigger()call TriggerAddAction(Cq,function WX)set cq=CreateTrigger()call TriggerAddCondition(cq,Condition(function YX))call TriggerAddAction(cq,function ZX)set Dq=CreateTrigger()call TriggerAddCondition(Dq,Condition(function eY))call TriggerAddAction(Dq,function fY)set Eq=CreateTrigger()call TriggerAddCondition(Eq,Condition(function hY))call TriggerAddAction(Eq,function iY)set Fq=CreateTrigger()call TriggerAddCondition(Fq,Condition(function kY))call TriggerAddAction(Fq,function mY)set Gq=CreateTrigger()call DisableTrigger(Gq)call TriggerAddCondition(Gq,Condition(function oY))call TriggerAddAction(Gq,function pY)set Hq=CreateTrigger()call TriggerAddAction(Hq,function rY)set Iq=CreateTrigger()call TriggerAddCondition(Iq,Condition(function tY))call TriggerAddAction(Iq,function uY)set lq=CreateTrigger()call TriggerAddCondition(lq,Condition(function yY))call TriggerAddAction(lq,function zY)set Jq=CreateTrigger()call DisableTrigger(Jq)call TriggerAddCondition(Jq,Condition(function aY))set Kq=CreateTrigger()call TriggerAddAction(Kq,function EY)set Bx=CreateTrigger()call TriggerAddCondition(Bx,Condition(function DY))set Lq=CreateTrigger()call TriggerAddAction(Lq,function GY)set Mq=CreateTrigger()call TriggerAddCondition(Mq,Condition(function IY))call TriggerAddAction(Mq,function KY)set Nq=CreateTrigger()call TriggerAddCondition(Nq,Condition(function MY))call TriggerAddAction(Nq,function NY)set Oq=CreateTrigger()call TriggerAddCondition(Oq,Condition(function PY))call TriggerAddAction(Oq,function QY)set Pq=CreateTrigger()call TriggerAddAction(Pq,function SY)set Qq=CreateTrigger()call TriggerAddCondition(Qq,Condition(function UY))call TriggerAddAction(Qq,function VY)set Rq=CreateTrigger()call TriggerAddCondition(Rq,Condition(function XY))call TriggerAddAction(Rq,function ZY)set Sq=CreateTrigger()call TriggerAddCondition(Sq,Condition(function h2))call TriggerAddAction(Sq,function j2)set Tq=CreateTrigger()call TriggerAddCondition(Tq,Condition(function m2))call TriggerAddAction(Tq,function o2)set Uq=CreateTrigger()call TriggerAddCondition(Uq,Condition(function v2))set Vq=CreateTrigger()call TriggerAddAction(Vq,function z2)set Wq=CreateTrigger()call TriggerAddCondition(Wq,Condition(function B2))set Xq=CreateTrigger()call TriggerAddCondition(Xq,Condition(function c2))call TriggerAddAction(Xq,function F2)set Yq=CreateTrigger()call TriggerAddCondition(Yq,Condition(function H2))call TriggerAddAction(Yq,function I2)set Zq=CreateTrigger()call TriggerAddCondition(Zq,Condition(function J2))call TriggerAddAction(Zq,function K2)set dr=CreateTrigger()call TriggerAddAction(dr,function M2)set er=CreateTrigger()call TriggerAddCondition(er,Condition(function O2))call TriggerAddAction(er,function P2)set fr=CreateTrigger()call TriggerAddCondition(fr,Condition(function R2))call TriggerAddAction(fr,function S2)set gr=CreateTrigger()call TriggerAddCondition(gr,Condition(function U2))call TriggerAddAction(gr,function V2)set hr=CreateTrigger()call TriggerAddAction(hr,function X2)set ir=CreateTrigger()call TriggerAddCondition(ir,Condition(function Z2))call TriggerAddAction(ir,function dZ)set jr=CreateTrigger()call TriggerAddCondition(jr,Condition(function fZ))call TriggerAddAction(jr,function hZ)set kr=CreateTrigger()call TriggerAddCondition(kr,Condition(function jZ))call TriggerAddAction(kr,function kZ)set mr=CreateTrigger()call TriggerAddAction(mr,function nZ)set nr=CreateTrigger()call TriggerAddCondition(nr,Condition(function rZ))set pr=CreateTrigger()call TriggerAddCondition(pr,Condition(function uZ))call TriggerAddAction(pr,function vZ)set qr=CreateTrigger()call TriggerAddCondition(qr,Condition(function zZ))set rr=CreateTrigger()call TriggerAddAction(rr,function GZ)set sr=CreateTrigger()call DisableTrigger(sr)call TriggerAddCondition(sr,Condition(function lZ))set ur=CreateTrigger()call TriggerAddCondition(ur,Condition(function LZ))set vr=CreateTrigger()call TriggerAddCondition(vr,Condition(function PZ))set wr=CreateTrigger()call TriggerAddAction(wr,function RZ)set xr=CreateTrigger()call TriggerAddCondition(xr,Condition(function UZ))set yr=CreateTrigger()call TriggerAddCondition(yr,Condition(function YZ))set zr=CreateTrigger()call TriggerAddCondition(zr,Condition(function d74))set Ar=CreateTrigger()call TriggerAddCondition(Ar,Condition(function dd4))set ar=CreateTrigger()call TriggerAddCondition(ar,Condition(function df4))set Br=CreateTrigger()call TriggerAddCondition(Br,Condition(function dh4))set br=CreateTrigger()call TriggerAddCondition(br,Condition(function do4))set Cr=CreateTrigger()call TriggerAddAction(Cr,function dw4)set cr=CreateTrigger()call TriggerAddCondition(cr,Condition(function dz4))set Dr=CreateTrigger()call TriggerAddCondition(Dr,Condition(function da4))set Er=CreateTrigger()call TriggerAddCondition(Er,Condition(function db4))set Fr=CreateTrigger()call TriggerAddCondition(Fr,Condition(function dc4))set Gr=CreateTrigger()call TriggerAddCondition(Gr,Condition(function d34))set Hr=CreateTrigger()call TriggerAddCondition(Hr,Condition(function dG4))call TriggerAddAction(Hr,function dH4)set Ir=CreateTrigger()call TriggerAddCondition(Ir,Condition(function dl4))call TriggerAddAction(Ir,function d14)set lr=CreateTrigger()call TriggerAddAction(lr,function dK4)set Jr=CreateTrigger()call TriggerAddCondition(Jr,Condition(function dM4))set Kr=CreateTrigger()call TriggerAddCondition(Kr,Condition(function dO4))set Lr=CreateTrigger()call TriggerAddCondition(Lr,Condition(function dQ4))set Mr=CreateTrigger()call TriggerAddCondition(Mr,Condition(function d54))set Nr=CreateTrigger()call TriggerAddAction(Nr,function dU4)set Pr=CreateTrigger()call TriggerAddCondition(Pr,Condition(function dW4))call TriggerAddAction(Pr,function dX4)set Qr=CreateTrigger()call TriggerAddCondition(Qr,Condition(function d24))call TriggerAddAction(Qr,function dZ4)set Rr=CreateTrigger()call TriggerAddAction(Rr,function e44)set Sr=CreateTrigger()call TriggerAddCondition(Sr,Condition(function e84))call TriggerAddAction(Sr,function ed4)set Tr=CreateTrigger()call TriggerAddCondition(Tr,Condition(function ef4))call TriggerAddAction(Tr,function eg4)set Ur=CreateTrigger()call TriggerAddCondition(Ur,Condition(function ei4))call TriggerAddAction(Ur,function ej4)set Vr=CreateTrigger()call TriggerAddCondition(Vr,Condition(function eo4))set Wr=CreateTrigger()call TriggerAddAction(Wr,function eA4)set Xr=CreateTrigger()call TriggerAddCondition(Xr,Condition(function eb4))set Yr=CreateTrigger()call TriggerAddAction(Yr,function ec4)set Zr=CreateTrigger()call TriggerAddCondition(Zr,Condition(function eE4))call TriggerAddAction(Zr,function eG4)set ds=CreateTrigger()call TriggerAddCondition(ds,Condition(function eK4))call TriggerAddAction(ds,function eJ4)set fs=CreateTrigger()call TriggerAddAction(fs,function eM4)set gs=CreateTrigger()call TriggerAddCondition(gs,Condition(function eQ4))set hs=CreateTrigger()call TriggerAddCondition(hs,Condition(function eS4))set js=CreateTrigger()call TriggerAddCondition(js,Condition(function eV4))set ks=CreateTrigger()call TriggerAddCondition(ks,Condition(function eX4))set ms=CreateTrigger()call TriggerAddCondition(ms,Condition(function e24))set ns=CreateTrigger()call TriggerAddCondition(ns,Condition(function f44))set os=CreateTrigger()call TriggerAddAction(os,function f84)set qs=CreateTrigger()call TriggerAddCondition(qs,Condition(function fd4))call TriggerAddAction(qs,function ff4)set rs=CreateTrigger()call TriggerAddCondition(rs,Condition(function fh4))call TriggerAddAction(rs,function fi4)set ss=CreateTrigger()call TriggerAddCondition(ss,Condition(function fk4))call TriggerAddAction(ss,function fm4)set ts=CreateTrigger()call TriggerAddCondition(ts,Condition(function fo4))call TriggerAddAction(ts,function fr4)set us=CreateTrigger()call TriggerAddCondition(us,Condition(function ft4))call TriggerAddAction(us,function fv4)set vs=CreateTrigger()call TriggerAddCondition(vs,Condition(function fx4))call TriggerAddAction(vs,function fy4)set ws=CreateTrigger()call TriggerAddAction(ws,function fA4)set xs=CreateTrigger()call TriggerAddCondition(xs,Condition(function fB4))call TriggerAddAction(xs,function fC4)set ys=CreateTrigger()call TriggerAddCondition(ys,Condition(function fD4))call TriggerAddAction(ys,function f34)set zs=CreateTrigger()call TriggerAddCondition(zs,Condition(function fG4))set As=CreateTrigger()call TriggerAddCondition(As,Condition(function fH4))call TriggerAddAction(As,function fI4)set as=CreateTrigger()call TriggerAddCondition(as,Condition(function f14))set Bs=CreateTrigger()call TriggerAddCondition(Bs,Condition(function fK4))call TriggerAddAction(Bs,function fL4)set bs=CreateTrigger()call TriggerAddAction(bs,function fN4)set Cs=CreateTrigger()call TriggerAddCondition(Cs,Condition(function fS4))set cs=CreateTrigger()call TriggerAddCondition(cs,Condition(function fT4))call TriggerAddAction(cs,function fU4)set Ds=CreateTrigger()call TriggerAddCondition(Ds,Condition(function fW4))call TriggerAddAction(Ds,function fY4)set Es=CreateTrigger()call TriggerAddCondition(Es,Condition(function fZ4))call TriggerAddAction(Es,function f_4)set Fs=CreateTrigger()call TriggerAddCondition(Fs,Condition(function g74))call TriggerAddAction(Fs,function g84)set Gs=CreateTrigger()call TriggerAddCondition(Gs,Condition(function gf4))set Hs=CreateTrigger()call TriggerAddCondition(Hs,Condition(function gh4))call TriggerAddAction(Hs,function gi4)set Is=CreateTrigger()call TriggerAddAction(Is,function gk4)set ls=CreateTrigger()call TriggerAddCondition(ls,Condition(function gn4))call TriggerAddAction(ls,function go4)set Js=CreateTrigger()call TriggerAddCondition(Js,Condition(function gq4))call TriggerAddAction(Js,function gs4)set Ks=CreateTrigger()call TriggerAddCondition(Ks,Condition(function gu4))call TriggerAddAction(Ks,function gv4)set Ls=CreateTrigger()call TriggerAddCondition(Ls,Condition(function gx4))call TriggerAddAction(Ls,function gy4)set Ms=CreateTrigger()call TriggerAddCondition(Ms,Condition(function gA4))call TriggerAddAction(Ms,function gb4)set Ns=CreateTrigger()call TriggerAddCondition(Ns,Condition(function gc4))call TriggerAddAction(Ns,function gD4)set Os=CreateTrigger()call TriggerAddCondition(Os,Condition(function g34))call TriggerAddAction(Os,function g64)set Ps=CreateTrigger()call TriggerAddAction(Ps,function gI4)set Qs=CreateTrigger()call TriggerAddCondition(Qs,Condition(function gL4))set Rs=CreateTrigger()call TriggerAddCondition(Rs,Condition(function gN4))call TriggerAddAction(Rs,function gQ4)set Ss=CreateTrigger()call TriggerAddCondition(Ss,Condition(function gS4))call TriggerAddAction(Ss,function g54)set Ts=CreateTrigger()call TriggerAddCondition(Ts,Condition(function gU4))call TriggerAddAction(Ts,function gV4)set Us=CreateTrigger()call TriggerAddCondition(Us,Condition(function gZ4))set Vs=CreateTrigger()call DisableTrigger(Vs)call TriggerAddAction(Vs,function h44)set Ws=CreateTrigger()call DisableTrigger(Ws)call TriggerAddAction(Ws,function h84)set Xs=CreateTrigger()call DisableTrigger(Xs)call TriggerAddAction(Xs,function hd4)set Ys=CreateTrigger()call TriggerRegisterTimerEventSingle(Ys,.0)call TriggerAddAction(Ys,function hf4)set Zs=CreateTrigger()call TriggerAddAction(Zs,function hh4)set ft=CreateTrigger()call TriggerAddAction(ft,function hj4)set gt=CreateTrigger()call TriggerAddAction(gt,function hm4)set ht=CreateTrigger()call TriggerAddAction(ht,function ho4)call ConditionalTriggerExecute(Wg)call ConditionalTriggerExecute(dh)call ConditionalTriggerExecute(rh)call ConditionalTriggerExecute(Yh)call ConditionalTriggerExecute(vi)call ConditionalTriggerExecute(Gi)call ConditionalTriggerExecute(Ii)call ConditionalTriggerExecute(wn)call ConditionalTriggerExecute(Zs)call ConditionalTriggerExecute(ft)call ConditionalTriggerExecute(gt)call ConditionalTriggerExecute(ht)endfunctionfunction config takes nothing returns nothingcall SetMapName("TRIGSTR_003")call SetMapDescription("TRIGSTR_005")call SetPlayers($A)call SetTeams($A)call SetGamePlacement(MAP_PLACEMENT_TEAMS_TOGETHER)call DefineStartLocation(0,7296.,-7488.)call DefineStartLocation(1,7296.,-7488.)call DefineStartLocation(2,7296.,-7488.)call DefineStartLocation(3,7296.,-7488.)call DefineStartLocation(4,7296.,-7488.)call DefineStartLocation(5,-7424.,7296.)call DefineStartLocation(6,-7424.,7296.)call DefineStartLocation(7,-7424.,7360.)call DefineStartLocation(8,-7424.,7296.)call DefineStartLocation(9,-7424.,7296.)call SetPlayerStartLocation(Player(0),0)call ForcePlayerStartLocation(Player(0),0)call SetPlayerColor(Player(0),ConvertPlayerColor(0))call SetPlayerRacePreference(Player(0),RACE_PREF_RANDOM)call SetPlayerRaceSelectable(Player(0),true)call SetPlayerController(Player(0),MAP_CONTROL_USER)call SetPlayerStartLocation(Player(1),1)call ForcePlayerStartLocation(Player(1),1)call SetPlayerColor(Player(1),ConvertPlayerColor(1))call SetPlayerRacePreference(Player(1),RACE_PREF_RANDOM)call SetPlayerRaceSelectable(Player(1),true)call SetPlayerController(Player(1),MAP_CONTROL_USER)call SetPlayerStartLocation(Player(2),2)call ForcePlayerStartLocation(Player(2),2)call SetPlayerColor(Player(2),ConvertPlayerColor(2))call SetPlayerRacePreference(Player(2),RACE_PREF_RANDOM)call SetPlayerRaceSelectable(Player(2),true)call SetPlayerController(Player(2),MAP_CONTROL_USER)call SetPlayerStartLocation(Player(3),3)call ForcePlayerStartLocation(Player(3),3)call SetPlayerColor(Player(3),ConvertPlayerColor(3))call SetPlayerRacePreference(Player(3),RACE_PREF_RANDOM)call SetPlayerRaceSelectable(Player(3),true)call SetPlayerController(Player(3),MAP_CONTROL_USER)call SetPlayerStartLocation(Player(4),4)call ForcePlayerStartLocation(Player(4),4)call SetPlayerColor(Player(4),ConvertPlayerColor(4))call SetPlayerRacePreference(Player(4),RACE_PREF_RANDOM)call SetPlayerRaceSelectable(Player(4),true)call SetPlayerController(Player(4),MAP_CONTROL_USER)call SetPlayerStartLocation(Player(5),5)call ForcePlayerStartLocation(Player(5),5)call SetPlayerColor(Player(5),ConvertPlayerColor(5))call SetPlayerRacePreference(Player(5),RACE_PREF_RANDOM)call SetPlayerRaceSelectable(Player(5),true)call SetPlayerController(Player(5),MAP_CONTROL_USER)call SetPlayerStartLocation(Player(6),6)call ForcePlayerStartLocation(Player(6),6)call SetPlayerColor(Player(6),ConvertPlayerColor(6))call SetPlayerRacePreference(Player(6),RACE_PREF_RANDOM)call SetPlayerRaceSelectable(Player(6),true)call SetPlayerController(Player(6),MAP_CONTROL_USER)call SetPlayerStartLocation(Player(7),7)call ForcePlayerStartLocation(Player(7),7)call SetPlayerColor(Player(7),ConvertPlayerColor(7))call SetPlayerRacePreference(Player(7),RACE_PREF_RANDOM)call SetPlayerRaceSelectable(Player(7),true)call SetPlayerController(Player(7),MAP_CONTROL_USER)call SetPlayerStartLocation(Player(8),8)call ForcePlayerStartLocation(Player(8),8)call SetPlayerColor(Player(8),ConvertPlayerColor(8))call SetPlayerRacePreference(Player(8),RACE_PREF_RANDOM)call SetPlayerRaceSelectable(Player(8),true)call SetPlayerController(Player(8),MAP_CONTROL_USER)call SetPlayerStartLocation(Player(9),9)call ForcePlayerStartLocation(Player(9),9)call SetPlayerColor(Player(9),ConvertPlayerColor(9))call SetPlayerRacePreference(Player(9),RACE_PREF_RANDOM)call SetPlayerRaceSelectable(Player(9),true)call SetPlayerController(Player(9),MAP_CONTROL_USER)call InitCustomTeams()call SetStartLocPrioCount(0,4)call SetStartLocPrio(0,0,1,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(0,1,2,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(0,2,3,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(0,3,4,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(1,2)call SetStartLocPrio(1,0,2,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(1,1,3,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(2,2)call SetStartLocPrio(2,0,1,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(2,1,3,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(3,2)call SetStartLocPrio(3,0,1,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(3,1,2,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(4,3)call SetStartLocPrio(4,0,1,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(4,1,2,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(4,2,3,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(5,4)call SetStartLocPrio(5,0,6,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(5,1,7,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(5,2,8,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(5,3,9,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(6,4)call SetStartLocPrio(6,0,5,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(6,1,7,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(6,2,8,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(6,3,9,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(7,4)call SetStartLocPrio(7,0,5,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(7,1,6,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(7,2,8,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(7,3,9,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(8,4)call SetStartLocPrio(8,0,5,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(8,1,6,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(8,2,7,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(8,3,9,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(9,4)call SetStartLocPrio(9,0,5,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(9,1,6,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(9,2,7,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(9,3,8,MAP_LOC_PRIO_HIGH)endfunctionfunction hr4 takes nothing returns booleanlocal integer Bz=Qycall FlushChildHashtable(o,StringHash(("YDWEStringFormula."+I2S(Bz))))return trueendfunctionfunction hs4 takes nothing returns booleanlocal integer Bz=Qylocal integer i=0loopexitwhen i==8set Iy[ly[Bz]+i]=0set Jy[Ky[Bz]+i]=0set i=i+1endloopset My[Bz]=""return trueendfunctionfunction hq4 takes nothing returns nothingset Oy[1]=CreateTrigger()set Oy[2]=Oy[1]call TriggerAddCondition(Oy[1],Condition(function hr4))set Py=CreateTrigger()call TriggerAddCondition(Py,Condition(function hs4))call ExecuteFunc("oa")call ExecuteFunc("va")endfunction